<?xml version="1.0" encoding="utf-8" ?>
<otrs_package version="1.1">
    <Name>SOAP-Lite</Name>
    <Version>0.713_01</Version>
    <Vendor>OTRS AG</Vendor>
    <URL>http://otrs.org/</URL>
    <License>GPL 1</License>
    <Description Lang="en">Provides SOAP::Lite 0.713 unofficial patched release, to have a working SOAP interface..</Description>
    <Framework>2.4.x</Framework>
    <Framework>3.0.x</Framework>
    <BuildDate>2011-03-04 11:26:40</BuildDate>
    <BuildHost>yourhost.example.com</BuildHost>
    <Filelist>
        <File Location="Kernel/cpan-lib/SOAP/Constants.pm" Permission="644" Encode="Base64">IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMKIyBDb3B5cmlnaHQgKEMpIDIwMDAtMjAwNCBQYXVsIEt1bGNoZW5rbyAocGF1bGNsaW5nZXJAeWFob28uY29tKQojCiMgU09BUDo6TGl0ZSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdAojIGFuZC9vciBtb2RpZnkgaXQgdW5kZXIgdGhlIHNhbWUgdGVybXMgYXMgUGVybCBpdHNlbGYuCiMKIyAkSWQ6IENvbnN0YW50cy5wbSAzNzQgMjAxMC0wNS0xNCAwODoxMjoyNVoga3V0dGVybWEgJAojCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpwYWNrYWdlIFNPQVA6OkNvbnN0YW50czsKdXNlIHN0cmljdDsKdXNlIFNPQVA6OkxpdGU7CgpvdXIgJFZFUlNJT04gPSAwLjcxM18wMTsKCnVzZSBjb25zdGFudCAgICBVUklfMTk5OV9TQ0hFTUFfWFNEICAgID0+ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L1hNTFNjaGVtYSI7CnVzZSBjb25zdGFudCAgICBVUklfMTk5OV9TQ0hFTUFfWFNJICAgID0+ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L1hNTFNjaGVtYS1pbnN0YW5jZSI7CnVzZSBjb25zdGFudCAgICBVUklfMjAwMF9TQ0hFTUFfWFNEICAgID0+ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzEwL1hNTFNjaGVtYSI7CnVzZSBjb25zdGFudCAgICBVUklfMjAwMF9TQ0hFTUFfWFNJICAgID0+ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzEwL1hNTFNjaGVtYS1pbnN0YW5jZSI7CnVzZSBjb25zdGFudCAgICBVUklfMjAwMV9TQ0hFTUFfWFNEICAgID0+ICJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSI7CnVzZSBjb25zdGFudCAgICBVUklfMjAwMV9TQ0hFTUFfWFNJICAgID0+ICJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSI7CnVzZSBjb25zdGFudCAgICBVUklfTElURVJBTF9FTkMgICAgICAgID0+ICIiOwp1c2UgY29uc3RhbnQgICAgVVJJX1NPQVAxMV9FTkMgICAgICAgICA9PiAiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbmNvZGluZy8iOwp1c2UgY29uc3RhbnQgICAgVVJJX1NPQVAxMV9FTlYgICAgICAgICA9PiAiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iOwp1c2UgY29uc3RhbnQgICAgVVJJX1NPQVAxMV9ORVhUX0FDVE9SICA9PiAiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9hY3Rvci9uZXh0IjsKdXNlIGNvbnN0YW50ICAgIFVSSV9TT0FQMTJfRU5DICAgICAgICAgPT4gImh0dHA6Ly93d3cudzMub3JnLzIwMDMvMDUvc29hcC1lbmNvZGluZyI7CnVzZSBjb25zdGFudCAgICBVUklfU09BUDEyX0VOViAgICAgICAgID0+ICJodHRwOi8vd3d3LnczLm9yZy8yMDAzLzA1L3NvYXAtZW52ZWxvcGUiOwp1c2UgY29uc3RhbnQgICAgVVJJX1NPQVAxMl9OT0VOQyAgICAgICA9PiAiaHR0cDovL3d3dy53My5vcmcvMjAwMy8wNS9zb2FwLWVudmVsb3BlL2VuY29kaW5nL25vbmUiOwp1c2UgY29uc3RhbnQgICAgVVJJX1NPQVAxMl9ORVhUX0FDVE9SICA9PiAiaHR0cDovL3d3dy53My5vcmcvMjAwMy8wNS9zb2FwLWVudmVsb3BlL3JvbGUvbmV4dCI7Cgp1c2UgdmFycyBxdygkTlNNQVNLICRFTE1BU0spOwoKJE5TTUFTSyA9ICdbYS16QS1aXzpdW1x3LlwtOl0qJzsKJEVMTUFTSyA9ICdeKD8hW3hYXVttTV1bbExdKVthLXpBLVpfXVtcdy5cLV0qJCc7Cgp1c2UgdmFycyBxdygkTkVYVF9BQ1RPUiAkTlNfRU5WICROU19FTkMgJE5TX0FQUwogICAgJEZBVUxUX0NMSUVOVCAkRkFVTFRfU0VSVkVSICRGQVVMVF9WRVJTSU9OX01JU01BVENICiAgICAkSFRUUF9PTl9GQVVMVF9DT0RFICRIVFRQX09OX1NVQ0NFU1NfQ09ERSAkRkFVTFRfTVVTVF9VTkRFUlNUQU5ECiAgICAkTlNfWFNJX0FMTCAkTlNfWFNJX05JTFMgJVhNTF9TQ0hFTUFTICRERUZBVUxUX1hNTF9TQ0hFTUEKICAgICRERUZBVUxUX0hUVFBfQ09OVEVOVF9UWVBFCiAgICAkU09BUF9WRVJTSU9OICVTT0FQX1ZFUlNJT05TICRXUk9OR19WRVJTSU9OCiAgICAkTlNfU0xfSEVBREVSICROU19TTF9QRVJMVFlQRSAkUFJFRklYX0VOViAkUFJFRklYX0VOQwogICAgJERPX05PVF9VU0VfWE1MX1BBUlNFUiAkRE9fTk9UX0NIRUNLX01VU1RVTkRFUlNUQU5ECiAgICAkRE9fTk9UX1VTRV9DSEFSU0VUICRET19OT1RfUFJPQ0VTU19YTUxfSU5fTUlNRQogICAgJERPX05PVF9VU0VfTFdQX0xFTkdUSF9IQUNLICRET19OT1RfQ0hFQ0tfQ09OVEVOVF9UWVBFCiAgICAkTUFYX0NPTlRFTlRfU0laRSAkUEFUQ0hfSFRUUF9LRUVQQUxJVkUgJERFRkFVTFRfUEFDS0FHRVIKICAgIEBTVVBQT1JURURfRU5DT0RJTkdfU1RZTEVTICRPQkpTX0JZX1JFRl9LRUVQQUxJVkUKICAgICRERUZBVUxUX0NBQ0hFX1RUTAogICAgJVhNTF9TQ0hFTUFfT0YKKTsKCiRGQVVMVF9DTElFTlQgICAgICAgICAgID0gJ0NsaWVudCc7CiRGQVVMVF9TRVJWRVIgICAgICAgICAgID0gJ1NlcnZlcic7CiRGQVVMVF9WRVJTSU9OX01JU01BVENIID0gJ1ZlcnNpb25NaXNtYXRjaCc7CiRGQVVMVF9NVVNUX1VOREVSU1RBTkQgID0gJ011c3RVbmRlcnN0YW5kJzsKCiRIVFRQX09OX1NVQ0NFU1NfQ09ERSA9IDIwMDsgIyBPSwokSFRUUF9PTl9GQVVMVF9DT0RFICAgPSA1MDA7ICMgSU5URVJOQUxfU0VSVkVSX0VSUk9SCgpAU1VQUE9SVEVEX0VOQ09ESU5HX1NUWUxFUyA9ICggVVJJX0xJVEVSQUxfRU5DLFVSSV9TT0FQMTFfRU5DLFVSSV9TT0FQMTJfRU5DLFVSSV9TT0FQMTJfTk9FTkMgKTsKCiRXUk9OR19WRVJTSU9OID0gJ1dyb25nIFNPQVAgdmVyc2lvbiBzcGVjaWZpZWQuJzsKCiRTT0FQX1ZFUlNJT04gPSAnMS4xJzsKJVNPQVBfVkVSU0lPTlMgPSAoCiAgICAxLjEgPT4gewogICAgICAgIE5FWFRfQUNUT1IgICAgICAgICAgICAgICAgPT4gVVJJX1NPQVAxMV9ORVhUX0FDVE9SLAogICAgICAgIE5TX0VOViAgICAgICAgICAgICAgICAgICAgPT4gVVJJX1NPQVAxMV9FTlYsCiAgICAgICAgTlNfRU5DICAgICAgICAgICAgICAgICAgICA9PiBVUklfU09BUDExX0VOQywKICAgICAgICBERUZBVUxUX1hNTF9TQ0hFTUEgICAgICAgID0+IFVSSV8yMDAxX1NDSEVNQV9YU0QsCiAgICAgICAgREVGQVVMVF9IVFRQX0NPTlRFTlRfVFlQRSA9PiAndGV4dC94bWwnLAogICAgfSwKICAgIDEuMiA9PiB7CiAgICAgICAgTkVYVF9BQ1RPUiAgICAgICAgICAgICAgICA9PiBVUklfU09BUDEyX05FWFRfQUNUT1IsCiAgICAgICAgTlNfRU5WICAgICAgICAgICAgICAgICAgICA9PiBVUklfU09BUDEyX0VOViwKICAgICAgICBOU19FTkMgICAgICAgICAgICAgICAgICAgID0+IFVSSV9TT0FQMTJfRU5DLAogICAgICAgIERFRkFVTFRfWE1MX1NDSEVNQSAgICAgICAgPT4gVVJJXzIwMDFfU0NIRU1BX1hTRCwKICAgICAgICBERUZBVUxUX0hUVFBfQ09OVEVOVF9UWVBFID0+ICdhcHBsaWNhdGlvbi9zb2FwK3htbCcsCiAgICB9LAopOwoKIyBzY2hlbWEgbmFtZXNwYWNlcwolWE1MX1NDSEVNQVMgPSAoICMgVGhlICcoKScgaXMgbmVjZXNzYXJ5IHRvIHB1dCBjb25zdGFudHMgaW4gU0NBTEFSIGZvcm0KICAgIFVSSV8xOTk5X1NDSEVNQV9YU0QoKSA9PiAnU09BUDo6WE1MU2NoZW1hMTk5OScsCiAgICBVUklfMjAwMV9TQ0hFTUFfWFNEKCkgPT4gJ1NPQVA6OlhNTFNjaGVtYTIwMDEnLAogICAgVVJJX1NPQVAxMV9FTkMoKSAgICAgID0+ICdTT0FQOjpYTUxTY2hlbWFTT0FQMV8xJywKICAgIFVSSV9TT0FQMTJfRU5DKCkgICAgICA9PiAnU09BUDo6WE1MU2NoZW1hU09BUDFfMicsCik7CgojIHNjaGVtYSBuYW1lc3BhY2VzCiVYTUxfU0NIRU1BX09GID0gKCAjIFRoZSAnKCknIGlzIG5lY2Vzc2FyeSB0byBwdXQgY29uc3RhbnRzIGluIFNDQUxBUiBmb3JtCiAgICBVUklfMTk5OV9TQ0hFTUFfWFNEKCkgPT4gJ1hNTFNjaGVtYTE5OTknLAogICAgVVJJXzIwMDFfU0NIRU1BX1hTRCgpID0+ICdYTUxTY2hlbWEyMDAxJywKICAgIFVSSV9TT0FQMTFfRU5DKCkgICAgICA9PiAnWE1MU2NoZW1hU09BUDFfMScsCiAgICBVUklfU09BUDEyX0VOQygpICAgICAgPT4gJ1hNTFNjaGVtYVNPQVAxXzInLAopOwoKCiROU19YU0lfQUxMID0gam9pbiBqb2luKCd8JywgbWFwIHsiJF8taW5zdGFuY2UifSBncmVwIHsvWE1MU2NoZW1hL30ga2V5cyAlWE1MX1NDSEVNQVMpLCAnKD86JywgJyknOwokTlNfWFNJX05JTFMgPSBqb2luIGpvaW4oJ3wnLCBtYXAgeyBteSAkY2xhc3MgPSAkWE1MX1NDSEVNQVN7JF99IC4gJzo6U2VyaWFsaXplcic7ICJceygkXyktaW5zdGFuY2VcfSIgLiAkY2xhc3MtPm5pbFZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBncmVwIHsvWE1MU2NoZW1hL30ga2V5cyAlWE1MX1NDSEVNQVMpLAogICAgICAgICAgICAgICAgICAnKD86JywgJyknOwoKIyBBcGFjaGVTT0FQIG5hbWVzcGFjZXMKJE5TX0FQUyA9ICdodHRwOi8veG1sLmFwYWNoZS5vcmcveG1sLXNvYXAnOwoKIyBTT0FQOjpMaXRlIG5hbWVzcGFjZQokTlNfU0xfSEVBREVSICAgPSAnaHR0cDovL25hbWVzcGFjZXMuc29hcGxpdGUuY29tL2hlYWRlcic7CiROU19TTF9QRVJMVFlQRSA9ICdodHRwOi8vbmFtZXNwYWNlcy5zb2FwbGl0ZS5jb20vcGVybCc7CgojIGRlZmF1bHQgcHJlZml4ZXMKJFBSRUZJWF9FTlYgPSAnc29hcCc7CiRQUkVGSVhfRU5DID0gJ3NvYXBlbmMnOwoKIyBvdGhlcnMKJERPX05PVF9VU0VfWE1MX1BBUlNFUiA9IDA7CiRET19OT1RfQ0hFQ0tfTVVTVFVOREVSU1RBTkQgPSAwOwokRE9fTk9UX1VTRV9DSEFSU0VUID0gMDsKJERPX05PVF9QUk9DRVNTX1hNTF9JTl9NSU1FID0gMDsKJERPX05PVF9VU0VfTFdQX0xFTkdUSF9IQUNLID0gMDsKJERPX05PVF9DSEVDS19DT05URU5UX1RZUEUgPSAwOwokUEFUQ0hfSFRUUF9LRUVQQUxJVkUgPSAxOwokT0JKU19CWV9SRUZfS0VFUEFMSVZFID0gNjAwOyAjIHNlY29uZHMKCiMgVE9ETyAtIHVzZSBkZWZhdWx0IHBhY2thZ2VyIGNvbnN0YW50IHNvbWV3aGVyZQokREVGQVVMVF9QQUNLQUdFUiA9ICJTT0FQOjpQYWNrYWdlcjo6TUlNRSI7CiRERUZBVUxUX0NBQ0hFX1RUTCA9IDA7CgoxOwoKX19FTkRfXwoKPXBvZAoKPWhlYWQxIE5BTUUKClNPQVA6OkNvbnN0YW50cyAtIFNPQVA6OkxpdGUgcHJvdmlkZXMgc2V2ZXJhbCB2YXJpYWJsZXMgdG8gYWxsb3dzIHByb2dyYW1tZXJzIGFuZCB1c2VycyB0byBtb2RpZnkgdGhlIGJlaGF2aW9yIG9mIFNPQVA6OkxpdGUgaW4gc3BlY2lmaWMgd2F5cy4KCj1oZWFkMSBERVNDUklQVElPTgoKQSBudW1iZXIgb2YgImNvbnN0YW50IiB2YWx1ZXMgYXJlIHByb3ZpZGVkIGJ5IG1lYW5zIG9mIHRoaXMgbmFtZXNwYWNlLiBUaGUgdmFsdWVzIGFyZW4ndCBjb25zdGFudHMgaW4gdGhlIHN0cmljdGVzdCBzZW5zZTsgdGhlIHB1cnBvc2Ugb2YgdGhlIHZhbHVlcyBkZXRhaWxlZCBoZXJlIGlzIHRvIGFsbG93IHRoZSBhcHBsaWNhdGlvbiB0byBjaGFuZ2UgdGhlbSBpZiBpdCBkZXNpcmVzIHRvIGFsdGVyIHRoZSBzcGVjaWZpYyBiZWhhdmlvciBnb3Zlcm5lZC4KCj1oZWFkMSBDT05TVEFOVFMKCj1oZWFkMiAkRE9fTk9UX1VTRV9YTUxfUEFSU0VSCgpUaGUgU09BUDo6TGl0ZSBwYWNrYWdlIGF0dGVtcHRzIHRvIGxvY2F0ZSBhbmQgdXNlIHRoZSBMPFhNTDo6UGFyc2VyPiBwYWNrYWdlLCBmYWxsaW5nIGJhY2sgb24gYW4gaW50ZXJuYWwsIHB1cmUtUGVybCBwYXJzZXIgaW4gaXRzIGFic2VuY2UuIFRoaXMgcGFja2FnZSBpcyBhIGZhc3QgcGFyc2VyLCBiYXNlZCBvbiB0aGUgRXhwYXQgcGFyc2VyIGRldmVsb3BlZCBieSBKYW1lcyBDbGFyay4gSWYgdGhlIGFwcGxpY2F0aW9uIHNldHMgdGhpcyB2YWx1ZSB0byAxLCB0aGVyZSB3aWxsIGJlIG5vIGF0dGVtcHQgdG8gbG9jYXRlIG9yIHVzZSBYTUw6OlBhcnNlci4gVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB5b3UgbWlnaHQgY2hvb3NlIHRvIGRvIHRoaXMuIElmIHRoZSBwYWNrYWdlIHdpbGwgbmV2ZXIgYmUgbWFkZSBhdmFpbGFibGUsIHRoZXJlIGlzIG5vIHJlYXNvbiB0byBwZXJmb3JtIHRoZSB0ZXN0LiBTZXR0aW5nIHRoaXMgcGFyYW1ldGVyIGlzIGxlc3MgdGltZS1jb25zdW1pbmcgdGhhbiB0aGUgdGVzdCBmb3IgdGhlIHBhY2thZ2Ugd291bGQgYmUuIEFsc28sIHRoZSBYTUw6OlBhcnNlciBjb2RlIGxpbmtzIGFnYWluc3QgdGhlIEV4cGF0IGxpYnJhcmllcyBmb3IgdGhlIEMgbGFuZ3VhZ2UuIEluIHNvbWUgZW52aXJvbm1lbnRzLCB0aGlzIGNvdWxkIGNhdXNlIGEgcHJvYmxlbSB3aGVuIG1peGVkIHdpdGggb3RoZXIgYXBwbGljYXRpb25zIHRoYXQgbWF5IGJlIGxpbmtlZCBhZ2FpbnN0IGEgZGlmZmVyZW50IHZlcnNpb24gb2YgdGhlIHNhbWUgbGlicmFyaWVzLiBUaGlzIHdhcyBvbmNlIHRoZSBjYXNlIHdpdGggY2VydGFpbiBjb21iaW5hdGlvbnMgb2YgQXBhY2hlLCBtb2RfcGVybCBhbmQgWE1MOjpQYXJzZXIuCgo9aGVhZDIgJERPX05PVF9VU0VfQ0hBUlNFVAoKVW5sZXNzIHRoaXMgcGFyYW1ldGVyIGlzIHNldCB0byAxLCBvdXRnb2luZyBDb250ZW50LVR5cGUgaGVhZGVycyB3aWxsIGluY2x1ZGUgc3BlY2lmaWNhdGlvbiBvZiB0aGUgY2hhcmFjdGVyIHNldCB1c2VkIGluIGVuY29kaW5nIHRoZSBtZXNzYWdlIGl0c2VsZi4gTm90IGFsbCBlbmRwb2ludHMgKGNsaWVudCBvciBzZXJ2ZXIpIG1heSBiZSBhYmxlIHRvIHByb3Blcmx5IGRlYWwgd2l0aCB0aGF0IGRhdGEgb24gdGhlIGNvbnRlbnQgaGVhZGVyLCBob3dldmVyLiBJZiBkZWFsaW5nIHdpdGggYW4gZW5kcG9pbnQgdGhhdCBleHBlY3RzIHRvIGRvIGEgbW9yZSBsaXRlcmFsIGV4YW1pbmF0aW9uIG9mIHRoZSBoZWFkZXIgYXMgd2hvbGUgKGFzIG9wcG9zZWQgdG8gZnVsbHkgcGFyc2luZyBpdCksIHRoaXMgcGFyYW1ldGVyIG1heSBwcm92ZSB1c2VmdWwuCgo9aGVhZDIgJERPX05PVF9DSEVDS19DT05URU5UX1RZUEUKClRoZSBjb250ZW50LXR5cGUgaXRzZWxmIGZvciBhIFNPQVAgbWVzc2FnZSBpcyByYXRoZXIgY2xlYXJseSBkZWZpbmVkLCBhbmQgaW4gbW9zdCBjYXNlcywgYW4gYXBwbGljYXRpb24gd291bGQgaGF2ZSBubyByZWFzb24gdG8gZGlzYWJsZSB0aGUgdGVzdGluZyBvZiB0aGF0IGhlYWRlci4gVGhpcyBoYXZpbmcgYmVlbiBzYWlkLCB0aGUgY29udGVudC10eXBlIGZvciBTT0FQIDEuMiBpcyBzdGlsbCBvbmx5IGEgcmVjb21tZW5kZWQgZHJhZnQsIGFuZCBiYWRseSBjb2RlZCBlbmRwb2ludHMgbWlnaHQgc2VuZCB2YWxpZCBtZXNzYWdlcyB3aXRoIGludmFsaWQgQ29udGVudC1UeXBlIGhlYWRlcnMuIFdoaWxlIHRoZSAicmlnaHQiIHRoaW5nIHRvIGRvIHdvdWxkIGJlIHRvIHJlamVjdCBzdWNoIG1lc3NhZ2VzLCB0aGF0IGlzbid0IGFsd2F5cyBhbiBvcHRpb24uIFNldHRpbmcgdGhpcyBwYXJhbWV0ZXIgdG8gMSBhbGxvd3MgdGhlIHRvb2xraXQgdG8gc2tpcCB0aGUgY29udGVudC10eXBlIHRlc3QuCgo9aGVhZDIgJFBBVENIX0hUVFBfS0VFUEFMSVZFCgpTT0FQOjpMaXRlJ3MgSFRUUCBUcmFuc3BvcnQgbW9kdWxlIGF0dGVtcHRzIHRvIHByb3ZpZGUgYSBzaW1wbGUgcGF0Y2ggdG8KTFdQOjpQcm90b2NvbCB0byBlbmFibGUgSFRUUCBLZWVwIEFsaXZlLiBCeSBkZWZhdWx0LCB0aGlzIHBhdGNoIGlzIHR1cm5lZApvZmYsIGlmIGhvd2V2ZXIgeW91IHdvdWxkIGxpa2UgdG8gdHVybiBvbiB0aGUgZXhwZXJpbWVudGFsIHBhdGNoIGNoYW5nZSB0aGUKY29uc3RhbnQgbGlrZSBzbzoKCiAgJFNPQVA6OkNvbnN0YW50czo6UEFUQ0hfSFRUUF9LRUVQQUxJVkUgPSAxOwoKPWhlYWQxIEFDS05PV0xFREdFTUVOVFMKClNwZWNpYWwgdGhhbmtzIHRvIE8nUmVpbGx5IHB1Ymxpc2hpbmcgd2hpY2ggaGFzIGdyYWNpb3VzbHkgYWxsb3dlZCBTT0FQOjpMaXRlIHRvIHJlcHVibGlzaCBhbmQgcmVkaXN0cmlidXRlIGxhcmdlIGV4Y2VycHRzIGZyb20gSTxQcm9ncmFtbWluZyBXZWIgU2VydmljZXMgd2l0aCBQZXJsPiwgbWFpbmx5IHRoZSBTT0FQOjpMaXRlIHJlZmVyZW5jZSBmb3VuZCBpbiBBcHBlbmRpeCBCLgoKPWhlYWQxIENPUFlSSUdIVAoKQ29weXJpZ2h0IChDKSAyMDAwLTIwMDQgUGF1bCBLdWxjaGVua28uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCgpUaGlzIGxpYnJhcnkgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQppdCB1bmRlciB0aGUgc2FtZSB0ZXJtcyBhcyBQZXJsIGl0c2VsZi4KCj1oZWFkMSBBVVRIT1JTCgpQYXVsIEt1bGNoZW5rbyAocGF1bGNsaW5nZXJAeWFob28uY29tKQoKUmFuZHkgSi4gUmF5IChyanJheUBibGFja3BlcmwuY29tKQoKQnlybmUgUmVlc2UgKGJ5cm5lQG1ham9yZG9qby5jb20pCgo9Y3V0Cg==</File>
        <File Location="Kernel/cpan-lib/SOAP/Lite.pm" Permission="644" Encode="Base64">IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMKIyBDb3B5cmlnaHQgKEMpIDIwMDAtMjAwNSBQYXVsIEt1bGNoZW5rbyAocGF1bGNsaW5nZXJAeWFob28uY29tKQojIFNPQVA6OkxpdGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQKIyBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSBzYW1lIHRlcm1zIGFzIFBlcmwgaXRzZWxmLgojCiMgJElkOiBMaXRlLnBtIDM3NCAyMDEwLTA1LTE0IDA4OjEyOjI1WiBrdXR0ZXJtYSAkCiMKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgojIEZvcm1hdHRpbmcgaGludDoKIyBUYXJnZXQgaXMgdGhlIHNvdXJjZSBjb2RlIGZvcm1hdCBsYWlkIG91dCBpbiBQZXJsIEJlc3QgUHJhY3RpY2VzICg0IHNwYWNlcwojIGluZGVudCwgb3BlbmluZyBicmFjZSBvbiBjb25kaXRpb24gbGluZSwgbm8gY3VkZGxlZCBlbHNlKS4KIwojIE9jdG9iZXIgMjAwNywgTWFydGluIEt1dHRlcgoKcGFja2FnZSBTT0FQOjpMaXRlOwoKdXNlIDUuMDA2OyAjd2VhayByZWZlcmVuY2VzIHJlcXVpcmUgcGVybCA1LjYKdXNlIHN0cmljdDsKb3VyICRWRVJTSU9OID0gMC43MTNfMDE7CiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpYTUxTY2hlbWFBcGFjaGVTT0FQOjpEZXNlcmlhbGl6ZXI7CgpzdWIgYXNfbWFwIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICByZXR1cm4gewogICAgICAgIG1hcCB7CiAgICAgICAgICAgIG15ICRoYXNoID0gKCRzZWxmLT5kZWNvZGVfb2JqZWN0KCRfKSlbMV07CiAgICAgICAgICAgICgkaGFzaC0+e2tleX0gPT4gJGhhc2gtPnt2YWx1ZX0pCiAgICAgICAgfSBAeyRfWzNdIHx8IFtdfQogICAgfTsKfQpzdWIgYXNfTWFwOyAqYXNfTWFwID0gXCZhc19tYXA7CgojIFRoYW5rIHRvIEtlbm5ldGggRHJhcGVyIGZvciB0aGlzIGNvbnRyaWJ1dGlvbgpzdWIgYXNfdmVjdG9yIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICByZXR1cm4gWyBtYXAgeyBzY2FsYXIoKCRzZWxmLT5kZWNvZGVfb2JqZWN0KCRfKSlbMV0pIH0gQHskX1szXSB8fCBbXX0gXTsKfQpzdWIgYXNfVmVjdG9yOyAqYXNfVmVjdG9yID0gXCZhc192ZWN0b3I7CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCnBhY2thZ2UgU09BUDo6WE1MU2NoZW1hOjpTZXJpYWxpemVyOwoKdXNlIHZhcnMgcXcoQElTQSk7CgpzdWIgeG1sc2NoZW1hY2xhc3MgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIHJldHVybiAkSVNBWzBdIHVubGVzcyBAXzsKICAgIEBJU0EgPSAoc2hpZnQpOwogICAgcmV0dXJuICRzZWxmOwp9CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCnBhY2thZ2UgU09BUDo6WE1MU2NoZW1hMTk5OTo6U2VyaWFsaXplcjsKCnVzZSB2YXJzIHF3KEBFWFBPUlQgJEFVVE9MT0FEKTsKCnN1YiBBVVRPTE9BRCB7CiAgICBsb2NhbCgkMSwkMik7CiAgICBteSgkcGFja2FnZSwgJG1ldGhvZCkgPSAkQVVUT0xPQUQgPX4gbS8oPzooLispOjopKFteOl0rKSQvOwogICAgcmV0dXJuIGlmICRtZXRob2QgZXEgJ0RFU1RST1knOwogICAgbm8gc3RyaWN0ICdyZWZzJzsKCiAgICBteSAkZXhwb3J0X3ZhciA9ICRwYWNrYWdlIC4gJzo6RVhQT1JUJzsKICAgIG15IEBleHBvcnQgPSBAJGV4cG9ydF92YXI7CgojIFJlbW92ZWQgaW4gMC42OSAtIHRoaXMgaXMgYSB0b3RhbCBoYWNrLiBGb3Igc29tZSByZWFzb24gdGhpcyBpcyBmYWlsaW5nCiMgZGVzcGl0ZSBub3QgYmVpbmcgYSBmYXRhbCBlcnJvciBjb25kaXRpb24uCiMgIGRpZSAiVHlwZSAnJG1ldGhvZCcgY2FuJ3QgYmUgZm91bmQgaW4gYSBzY2hlbWEgY2xhc3MgJyRwYWNrYWdlJ1xuIgojICAgIHVubGVzcyAkbWV0aG9kID1+IHMvXmFzXy8vICYmIGdyZXAgeyRfIGVxICRtZXRob2R9IEB7JGV4cG9ydF92YXJ9OwoKIyBUaGlzIHdhcyBhZGRlZCBpbiBpdHMgcGxhY2UgLSBpdCBpcyBzdGlsbCBhIGhhY2ssIGJ1dCBpdCBwZXJmb3JtcyB0aGUKIyBuZWNlc3Nhcnkgc3Vic3RpdHV0aW9uLiBJdCBqdXN0IGRvZXMgbm90IGRpZS4KICAgIGlmICgkbWV0aG9kID1+IHMvXmFzXy8vICYmIGdyZXAgeyRfIGVxICRtZXRob2R9IEB7JGV4cG9ydF92YXJ9KSB7CiMgICAgICBwcmludCBTVERFUlIgIm1ldGhvZCBpcyBub3cgJyRtZXRob2QnXG4iOwogICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgJG1ldGhvZCA9fiBzL18vLS87ICMgZml4IHVyLXR5cGUKCiAgICAqJEFVVE9MT0FEID0gc3ViIHsKICAgICAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgICAgIG15KCR2YWx1ZSwgJG5hbWUsICR0eXBlLCAkYXR0cikgPSBAXzsKICAgICAgICByZXR1cm4gWyRuYW1lLCB7J3hzaTp0eXBlJyA9PiAieHNkOiRtZXRob2QiLCAlJGF0dHJ9LCAkdmFsdWVdOwogICAgfTsKICAgIGdvdG8gJiRBVVRPTE9BRDsKfQoKQkVHSU4gewogICAgQEVYUE9SVCA9IHF3KHVyX3R5cGUKICAgICAgICBmbG9hdCBkb3VibGUgZGVjaW1hbCB0aW1lRHVyYXRpb24gcmVjdXJyaW5nRHVyYXRpb24gdXJpUmVmZXJlbmNlCiAgICAgICAgaW50ZWdlciBub25Qb3NpdGl2ZUludGVnZXIgbmVnYXRpdmVJbnRlZ2VyIGxvbmcgaW50IHNob3J0IGJ5dGUKICAgICAgICBub25OZWdhdGl2ZUludGVnZXIgdW5zaWduZWRMb25nIHVuc2lnbmVkSW50IHVuc2lnbmVkU2hvcnQgdW5zaWduZWRCeXRlCiAgICAgICAgcG9zaXRpdmVJbnRlZ2VyIHRpbWVJbnN0YW50IHRpbWUgdGltZVBlcmlvZCBkYXRlIG1vbnRoIHllYXIgY2VudHVyeQogICAgICAgIHJlY3VycmluZ0RhdGUgcmVjdXJyaW5nRGF5IGxhbmd1YWdlCiAgICAgICAgYmFzZTY0IGhleCBzdHJpbmcgYm9vbGVhbgogICAgKTsKICAgICMgVE9ETzogcmVwbGFjZSBieSBzeW1ib2wgdGFibGUgb3BlcmF0aW9ucy4uLgogICAgIyBwcmVkZWNsYXJlIHN1YnMsIHNvIC0+Y2FuIGNoZWNrIHdpbGwgYmUgcG9zaXRpdmUKICAgIGZvcmVhY2ggKEBFWFBPUlQpIHsgZXZhbCAic3ViIGFzXyRfIiB9Cn0KCnN1YiBuaWxWYWx1ZSB7ICdudWxsJyB9CgpzdWIgYW55VHlwZVZhbHVlIHsgJ3VyLXR5cGUnIH0KCnN1YiBhc19iYXNlNjQgewogICAgbXkgKCRzZWxmLCAkdmFsdWUsICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CgogICAgIyBGaXhlcyAjMzAyNzEgZm9yIDUuOCBhbmQgYWJvdmUuCiAgICAjIFdvbid0IGZpeCBmb3IgNS42IGFuZCBiZWxvdyAtIHBlcmwgY2FuJ3QgaGFuZGxlIHVuaWNvZGUgYmVmb3JlCiAgICAjIDUuOCwgYW5kIGFwcGx5aW5nIHBhY2soKSB0byBldmVyeXRoaW5nIGlzIGp1c3QgYSBzbG93ZG93bi4KICAgIGlmIChldmFsICJyZXF1aXJlIEVuY29kZTsgMSIpIHsKICAgICAgICBpZiAoRW5jb2RlOjppc191dGY4KCR2YWx1ZSkpIHsKICAgICAgICAgICAgaWYgKEVuY29kZS0+Y2FuKCdfdXRmOF9vZmYnKSkgeyAjIHRoZSBxdWljayB3YXksIGJ1dCBpdCBtYXkgY2hhbmdlIGluIGZ1dHVyZSBQZXJsIHZlcnNpb25zLgogICAgICAgICAgICAgICAgRW5jb2RlOjpfdXRmOF9vZmYoJHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICR2YWx1ZSA9IHBhY2soJ0MqJyx1bnBhY2soJ0MqJywkdmFsdWUpKTsgIyB0aGUgc2xvdyBidXQgc2FmZSB3YXksCiAgICAgICAgICAgICAgICAjIGJ1dCB0aGlzIGZhbGxiYWNrIHdvcmtzIGFsd2F5cy4KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICByZXF1aXJlIE1JTUU6OkJhc2U2NDsKICAgIHJldHVybiBbCiAgICAgICAgJG5hbWUsCiAgICAgICAgewogICAgICAgICAgICAneHNpOnR5cGUnID0+IFNPQVA6OlV0aWxzOjpxdWFsaWZ5KCRzZWxmLT5lbmNwcmVmaXggPT4gJ2Jhc2U2NCcpLAogICAgICAgICAgICAlJGF0dHIKICAgICAgICB9LAogICAgICAgIE1JTUU6OkJhc2U2NDo6ZW5jb2RlX2Jhc2U2NCgkdmFsdWUsJycpCiAgICBdOwp9CgpzdWIgYXNfaGV4IHsKICAgIG15ICgkc2VsZiwgJHZhbHVlLCAkbmFtZSwgJHR5cGUsICRhdHRyKSA9IEBfOwogICAgcmV0dXJuIFsKICAgICAgICAkbmFtZSwKICAgICAgICB7CiAgICAgICAgICAgICd4c2k6dHlwZScgPT4gJ3hzZDpoZXgnLCAlJGF0dHIKICAgICAgICB9LAogICAgICAgIGpvaW4gJycsIG1hcCB7CiAgICAgICAgICAgIHVjIHNwcmludGYgIiUwMngiLCBvcmQKICAgICAgICB9IHNwbGl0ICcnLCAkdmFsdWUKICAgIF07Cn0KCnN1YiBhc19sb25nIHsKICAgIG15KCRzZWxmLCAkdmFsdWUsICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CiAgICByZXR1cm4gWwogICAgICAgICRuYW1lLAogICAgICAgIHsneHNpOnR5cGUnID0+ICd4c2Q6bG9uZycsICUkYXR0cn0sCiAgICAgICAgJHZhbHVlCiAgICBdOwp9CgpzdWIgYXNfZGF0ZVRpbWUgewogICAgbXkgKCRzZWxmLCAkdmFsdWUsICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CiAgICByZXR1cm4gWyRuYW1lLCB7J3hzaTp0eXBlJyA9PiAneHNkOmRhdGVUaW1lJywgJSRhdHRyfSwgJHZhbHVlXTsKfQoKc3ViIGFzX3N0cmluZyB7CiAgICBteSAoJHNlbGYsICR2YWx1ZSwgJG5hbWUsICR0eXBlLCAkYXR0cikgPSBAXzsKICAgIGRpZSAiU3RyaW5nIHZhbHVlIGV4cGVjdGVkIGluc3RlYWQgb2YgQHtbcmVmICR2YWx1ZV19IHJlZmVyZW5jZVxuIgogICAgICAgIGlmIHJlZiAkdmFsdWU7CiAgICByZXR1cm4gWwogICAgICAgICRuYW1lLAogICAgICAgIHsneHNpOnR5cGUnID0+ICd4c2Q6c3RyaW5nJywgJSRhdHRyfSwKICAgICAgICBTT0FQOjpVdGlsczo6ZW5jb2RlX2RhdGEoJHZhbHVlKQogICAgXTsKfQoKc3ViIGFzX2FueVVSSSB7CiAgICBteSgkc2VsZiwgJHZhbHVlLCAkbmFtZSwgJHR5cGUsICRhdHRyKSA9IEBfOwogICAgZGllICJTdHJpbmcgdmFsdWUgZXhwZWN0ZWQgaW5zdGVhZCBvZiBAe1tyZWYgJHZhbHVlXX0gcmVmZXJlbmNlXG4iIGlmIHJlZiAkdmFsdWU7CiAgICByZXR1cm4gWwogICAgICAgICRuYW1lLAogICAgICAgIHsneHNpOnR5cGUnID0+ICd4c2Q6YW55VVJJJywgJSRhdHRyfSwKICAgICAgICBTT0FQOjpVdGlsczo6ZW5jb2RlX2RhdGEoJHZhbHVlKQogICAgXTsKfQoKc3ViIGFzX3VuZGVmIHsgJF9bMV0gPyAnMScgOiAnMCcgfQoKc3ViIGFzX2Jvb2xlYW4gewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15KCR2YWx1ZSwgJG5hbWUsICR0eXBlLCAkYXR0cikgPSBAXzsKICAgICMgZml4IFsgMTIwNDI3OSBdIEJvb2xlYW4gc2VyaWFsaXphdGlvbiBlcnJvcgogICAgcmV0dXJuIFsKICAgICAgICAkbmFtZSwKICAgICAgICB7J3hzaTp0eXBlJyA9PiAneHNkOmJvb2xlYW4nLCAlJGF0dHJ9LAogICAgICAgICggJHZhbHVlIG5lICdmYWxzZScgJiYgJHZhbHVlICkgPyAndHJ1ZScgOiAnZmFsc2UnCiAgICBdOwp9CgpzdWIgYXNfZmxvYXQgewogICAgbXkoJHNlbGYsICR2YWx1ZSwgJG5hbWUsICR0eXBlLCAkYXR0cikgPSBAXzsKICAgIHJldHVybiBbCiAgICAgICAgJG5hbWUsCiAgICAgICAgeyd4c2k6dHlwZScgPT4gJ3hzZDpmbG9hdCcsICUkYXR0cn0sCiAgICAgICAgJHZhbHVlCiAgICBdOwp9CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCnBhY2thZ2UgU09BUDo6WE1MU2NoZW1hMjAwMTo6U2VyaWFsaXplcjsKCnVzZSB2YXJzIHF3KEBFWFBPUlQpOwoKIyBubyBtb3JlIHdhcm5pbmdzIGFib3V0ICJ1c2VkIG9ubHkgb25jZSIKKkFVVE9MT0FEIGlmIDA7CgoqQVVUT0xPQUQgPSBcJlNPQVA6OlhNTFNjaGVtYTE5OTk6OlNlcmlhbGl6ZXI6OkFVVE9MT0FEOwoKQkVHSU4gewogIEBFWFBPUlQgPSBxdyhhbnlUeXBlIGFueVNpbXBsZVR5cGUgZmxvYXQgZG91YmxlIGRlY2ltYWwgZGF0ZVRpbWUKICAgICAgICAgICAgICAgdGltZVBlcmlvZCBnTW9udGggZ1llYXJNb250aCBnWWVhciBjZW50dXJ5CiAgICAgICAgICAgICAgIGdNb250aERheSBnRGF5IGR1cmF0aW9uIHJlY3VycmluZ0R1cmF0aW9uIGFueVVSSQogICAgICAgICAgICAgICBsYW5ndWFnZSBpbnRlZ2VyIG5vblBvc2l0aXZlSW50ZWdlciBuZWdhdGl2ZUludGVnZXIKICAgICAgICAgICAgICAgbG9uZyBpbnQgc2hvcnQgYnl0ZSBub25OZWdhdGl2ZUludGVnZXIgdW5zaWduZWRMb25nCiAgICAgICAgICAgICAgIHVuc2lnbmVkSW50IHVuc2lnbmVkU2hvcnQgdW5zaWduZWRCeXRlIHBvc2l0aXZlSW50ZWdlcgogICAgICAgICAgICAgICBkYXRlIHRpbWUgc3RyaW5nIGhleCBiYXNlNjQgYm9vbGVhbgogICAgICAgICAgICAgICBRTmFtZQogICk7CiAgIyBBZGQgUU5hbWUgdG8gQEVYUE9SVAogICMgcHJlZGVjbGFyZSBzdWJzLCBzbyAtPmNhbiBjaGVjayB3aWxsIGJlIHBvc2l0aXZlCiAgZm9yZWFjaCAoQEVYUE9SVCkgeyBldmFsICJzdWIgYXNfJF8iIH0KfQoKc3ViIG5pbFZhbHVlIHsgJ25pbCcgfQoKc3ViIGFueVR5cGVWYWx1ZSB7ICdhbnlUeXBlJyB9CgpzdWIgYXNfbG9uZzsgICAgICAgICphc19sb25nID0gXCZTT0FQOjpYTUxTY2hlbWExOTk5OjpTZXJpYWxpemVyOjphc19sb25nOwpzdWIgYXNfZmxvYXQ7ICAgICAgICphc19mbG9hdCA9IFwmU09BUDo6WE1MU2NoZW1hMTk5OTo6U2VyaWFsaXplcjo6YXNfZmxvYXQ7CnN1YiBhc19zdHJpbmc7ICAgICAgKmFzX3N0cmluZyA9IFwmU09BUDo6WE1MU2NoZW1hMTk5OTo6U2VyaWFsaXplcjo6YXNfc3RyaW5nOwpzdWIgYXNfYW55VVJJOyAgICAgICphc19hbnlVUkkgPSBcJlNPQVA6OlhNTFNjaGVtYTE5OTk6OlNlcmlhbGl6ZXI6OmFzX2FueVVSSTsKCiMgVE9ETyAtIFFOYW1lcyBzdGlsbCBkb24ndCB3b3JrIGZvciAyMDAxIHNjaGVtYSEKc3ViIGFzX1FOYW1lOyAgICAgICAqYXNfUU5hbWUgPSBcJlNPQVA6OlhNTFNjaGVtYTE5OTk6OlNlcmlhbGl6ZXI6OmFzX3N0cmluZzsKc3ViIGFzX2hleDsgICAgICAgICAqYXNfaGV4ID0gXCZhc19oZXhCaW5hcnk7CnN1YiBhc19iYXNlNjQ7ICAgICAgKmFzX2Jhc2U2NCA9IFwmYXNfYmFzZTY0QmluYXJ5OwpzdWIgYXNfdGltZUluc3RhbnQ7ICphc190aW1lSW5zdGFudCA9IFwmYXNfZGF0ZVRpbWU7CgojIG9ubHkgMCBhbmQgMSBhbGxvd2VkIC0gdGhhdCdzIGVhc3kuLi4Kc3ViIGFzX3VuZGVmIHsKICAgICRfWzFdCiAgICA/ICd0cnVlJwogICAgOiAnZmFsc2UnCn0KCnN1YiBhc19oZXhCaW5hcnkgewogICAgbXkgKCRzZWxmLCAkdmFsdWUsICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CiAgICByZXR1cm4gWwogICAgICAgICRuYW1lLAogICAgICAgIHsneHNpOnR5cGUnID0+ICd4c2Q6aGV4QmluYXJ5JywgJSRhdHRyfSwKICAgICAgICBqb2luICcnLCBtYXAgewogICAgICAgICAgICAgICAgdWMgc3ByaW50ZiAiJTAyeCIsIG9yZAogICAgICAgICAgICB9IHNwbGl0ICcnLCAkdmFsdWUKICAgIF07Cn0KCnN1YiBhc19iYXNlNjRCaW5hcnkgewogICAgbXkgKCRzZWxmLCAkdmFsdWUsICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CgogICAgIyBGaXhlcyAjMzAyNzEgZm9yIDUuOCBhbmQgYWJvdmUuCiAgICAjIFdvbid0IGZpeCBmb3IgNS42IGFuZCBiZWxvdyAtIHBlcmwgY2FuJ3QgaGFuZGxlIHVuaWNvZGUgYmVmb3JlCiAgICAjIDUuOCwgYW5kIGFwcGx5aW5nIHBhY2soKSB0byBldmVyeXRoaW5nIGlzIGp1c3QgYSBzbG93ZG93bi4KICAgIGlmIChldmFsICJyZXF1aXJlIEVuY29kZTsgMSIpIHsKICAgICAgICBpZiAoRW5jb2RlOjppc191dGY4KCR2YWx1ZSkpIHsKICAgICAgICAgICAgaWYgKEVuY29kZS0+Y2FuKCdfdXRmOF9vZmYnKSkgeyAjIHRoZSBxdWljayB3YXksIGJ1dCBpdCBtYXkgY2hhbmdlIGluIGZ1dHVyZSBQZXJsIHZlcnNpb25zLgogICAgICAgICAgICAgICAgRW5jb2RlOjpfdXRmOF9vZmYoJHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICR2YWx1ZSA9IHBhY2soJ0MqJyx1bnBhY2soJ0MqJywkdmFsdWUpKTsgIyB0aGUgc2xvdyBidXQgc2FmZSB3YXksCiAgICAgICAgICAgICAgICAjIGJ1dCB0aGlzIGZhbGxiYWNrIHdvcmtzIGFsd2F5cy4KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICByZXF1aXJlIE1JTUU6OkJhc2U2NDsKICAgIHJldHVybiBbCiAgICAgICAgJG5hbWUsCiAgICAgICAgewogICAgICAgICAgICAneHNpOnR5cGUnID0+ICd4c2Q6YmFzZTY0QmluYXJ5JywgJSRhdHRyCiAgICAgICAgfSwKICAgICAgICBNSU1FOjpCYXNlNjQ6OmVuY29kZV9iYXNlNjQoJHZhbHVlLCcnKQogICAgXTsKfQoKc3ViIGFzX2Jvb2xlYW4gewogICAgbXkgKCRzZWxmLCAkdmFsdWUsICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CiAgICAjIGZpeCBbIDEyMDQyNzkgXSBCb29sZWFuIHNlcmlhbGl6YXRpb24gZXJyb3IKICAgIHJldHVybiBbCiAgICAgICAgJG5hbWUsCiAgICAgICAgewogICAgICAgICAgICAneHNpOnR5cGUnID0+ICd4c2Q6Ym9vbGVhbicsICUkYXR0cgogICAgICAgIH0sCiAgICAgICAgKCAkdmFsdWUgbmUgJ2ZhbHNlJyAmJiAkdmFsdWUgKQogICAgICAgICAgICA/ICd0cnVlJwogICAgICAgICAgICA6ICdmYWxzZScKICAgIF07Cn0KCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6VXRpbHM7CgpzdWIgcXVhbGlmeSB7CiAgICAkX1sxXQogICAgICAgID8gJF9bMV0gPX4gLzovCiAgICAgICAgICAgID8gJF9bMV0KICAgICAgICAgICAgOiBqb2luKCc6JywgJF9bMF0gfHwgKCksICRfWzFdKQogICAgICAgIDogZGVmaW5lZCAkX1sxXQogICAgICAgICAgICA/ICRfWzBdCiAgICAgICAgICAgIDogJycKICAgIH0KCnN1YiBvdmVycXVhbGlmeSAoJiQpIHsKICAgIGZvciAoJF9bMV0pIHsKICAgICAgICAmeyRfWzBdfTsKICAgICAgICBzL146fDokLy9nCiAgICB9Cn0KCnN1YiBkaXNxdWFsaWZ5IHsKICAgIChteSAkcW5hbWUgPSBzaGlmdCkgPX4gcy9eKCRTT0FQOjpDb25zdGFudHM6Ok5TTUFTSz8pOi8vOwogICAgcmV0dXJuICRxbmFtZTsKfQoKc3ViIHNwbGl0cW5hbWUgewogICAgbG9jYWwoJDEsJDIpOwogICAgJF9bMF0gPX4gL14oPzooW146XSspOik/KC4rKSQvOwogICAgcmV0dXJuICgkMSwkMikKfQoKc3ViIGxvbmduYW1lIHsKICAgIGRlZmluZWQgJF9bMF0KICAgICAgICA/IHNwcmludGYoJ3slc30lcycsICRfWzBdLCAkX1sxXSkKICAgICAgICA6ICRfWzFdCn0KCnN1YiBzcGxpdGxvbmduYW1lIHsKICAgIGxvY2FsKCQxLCQyKTsKICAgICRfWzBdID1+IC9eKD86XHsoLiopXH0pPyguKykkLzsKICAgIHJldHVybiAoJDEsJDIpCn0KCiMgUTogd2h5IG9ubHkgJyYnIGFuZCAnPCcgYXJlIGVuY29kZWQsIGJ1dCBub3QgJz4nPwojIEE6IGJlY2F1c2UgaXQgaXMgbm90IHJlcXVpcmVkIGFjY29yZGluZyB0byBYTUwgc3BlYy4KIwojIFtodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sI3N5bnRheF0KIyBUaGUgYW1wZXJzYW5kIGNoYXJhY3RlciAoJikgYW5kIHRoZSBsZWZ0IGFuZ2xlIGJyYWNrZXQgKDwpIG1heSBhcHBlYXIgaW4KIyB0aGVpciBsaXRlcmFsIGZvcm0gb25seSB3aGVuIHVzZWQgYXMgbWFya3VwIGRlbGltaXRlcnMsIG9yIHdpdGhpbiBhIGNvbW1lbnQsCiMgYSBwcm9jZXNzaW5nIGluc3RydWN0aW9uLCBvciBhIENEQVRBIHNlY3Rpb24uIElmIHRoZXkgYXJlIG5lZWRlZCBlbHNld2hlcmUsCiMgdGhleSBtdXN0IGJlIGVzY2FwZWQgdXNpbmcgZWl0aGVyIG51bWVyaWMgY2hhcmFjdGVyIHJlZmVyZW5jZXMgb3IgdGhlCiMgc3RyaW5ncyAiJmFtcDsiIGFuZCAiJmx0OyIgcmVzcGVjdGl2ZWx5LiBUaGUgcmlnaHQgYW5nbGUgYnJhY2tldCAoPikgbWF5IGJlCiMgcmVwcmVzZW50ZWQgdXNpbmcgdGhlIHN0cmluZyAiJmd0OyIsIGFuZCBtdXN0LCBmb3IgY29tcGF0aWJpbGl0eSwgYmUKIyBlc2NhcGVkIHVzaW5nICImZ3Q7IiBvciBhIGNoYXJhY3RlciByZWZlcmVuY2Ugd2hlbiBpdCBhcHBlYXJzIGluIHRoZQojIHN0cmluZyAiXV0+IiBpbiBjb250ZW50LCB3aGVuIHRoYXQgc3RyaW5nIGlzIG5vdCBtYXJraW5nIHRoZSBlbmQgb2YgYQojIENEQVRBIHNlY3Rpb24uCgpteSAlZW5jb2RlX2F0dHJpYnV0ZSA9ICgnJicgPT4gJyZhbXA7JywgJz4nID0+ICcmZ3Q7JywgJzwnID0+ICcmbHQ7JywgJyInID0+ICcmcXVvdDsnKTsKc3ViIGVuY29kZV9hdHRyaWJ1dGUgeyAobXkgJGUgPSAkX1swXSkgPX4gcy8oWyY8PlwiXSkvJGVuY29kZV9hdHRyaWJ1dGV7JDF9L2c7ICRlIH0KCm15ICVlbmNvZGVfZGF0YSA9ICgnJicgPT4gJyZhbXA7JywgJz4nID0+ICcmZ3Q7JywgJzwnID0+ICcmbHQ7JywgIlx4ZCIgPT4gJyYjeGQ7Jyk7CnN1YiBlbmNvZGVfZGF0YSB7CiAgICBteSAkZSA9ICRfWzBdOwogICAgaWYgKCRlKSB7CiAgICAgICAgJGUgPX4gcy8oWyY8PlwwMTVdKS8kZW5jb2RlX2RhdGF7JDF9L2c7CiAgICAgICAgJGUgPX4gcy9cXVxdPi9cXVxdJmd0Oy9nOwogICAgfQogICAgJGUKfQoKIyBtZXRob2RzIGZvciBpbnRlcm5hbCB0cmVlIChTT0FQOjpEZXNlcmlhbGl6ZXIsIFNPQVA6OlNPTSBhbmQgU09BUDo6U2VyaWFsaXplcikKCnN1YiBvX3FuYW1lIHsgJF9bMF0tPlswXSB9CnN1YiBvX2F0dHIgIHsgJF9bMF0tPlsxXSB9CnN1YiBvX2NoaWxkIHsgcmVmICRfWzBdLT5bMl0gPyAkX1swXS0+WzJdIDogdW5kZWYgfQpzdWIgb19jaGFycyB7IHJlZiAkX1swXS0+WzJdID8gdW5kZWYgOiAkX1swXS0+WzJdIH0KICAgICAgICAgICAgIyAkX1swXS0+WzNdIGlzIG5vdCB1c2VkLiBTZXJpYWxpemVyIHN0b3JlcyBvYmplY3QgSUQgdGhlcmUKc3ViIG9fdmFsdWUgeyAkX1swXS0+WzRdIH0Kc3ViIG9fbG5hbWUgeyAkX1swXS0+WzVdIH0Kc3ViIG9fbGF0dHIgeyAkX1swXS0+WzZdIH0KCnN1YiBmb3JtYXRfZGF0ZXRpbWUgewogICAgbXkgKCRzLCRtLCRoLCRELCRNLCRZKSA9IChAXylbMCwxLDIsMyw0LDVdOwogICAgbXkgJHRpbWUgPSBzcHJpbnRmKCIlMDRkLSUwMmQtJTAyZFQlMDJkOiUwMmQ6JTAyZCIsKCRZKzE5MDApLCgkTSsxKSwkRCwkaCwkbSwkcyk7CiAgICByZXR1cm4gJHRpbWU7Cn0KCiMgbWFrZSBieXRlbGVuZ3RoIHRoYXQgY2FsY3VsYXRlcyBsZW5ndGggaW4gYnl0ZXMgcmVnYXJkbGVzcyBvZiB1dGYvYnl0ZSBzZXR0aW5ncwojIGVpdGhlciB3ZSBjYW4gZG8gJ3VzZSBieXRlcycgb3IgbGVuZ3RoIHdpbGwgY291bnQgYnl0ZXMgYWxyZWFkeQpCRUdJTiB7CiAgICBzdWIgYnl0ZWxlbmd0aDsKICAgICpieXRlbGVuZ3RoID0gZXZhbCgndXNlIGJ5dGVzOyAxJykgIyA1LjYuMCBhbmQgbGF0ZXI/CiAgICAgICAgPyBzdWIgeyB1c2UgYnl0ZXM7IGxlbmd0aChAXyA/ICRfWzBdIDogJF8pIH0KICAgICAgICA6IHN1YiB7IGxlbmd0aChAXyA/ICRfWzBdIDogJF8pIH07Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpDbG9uZWFibGU7CgpzdWIgY2xvbmUgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKCiAgICByZXR1cm4gdW5sZXNzIHJlZiAkc2VsZiAmJiBVTklWRVJTQUw6OmlzYSgkc2VsZiA9PiBfX1BBQ0tBR0VfXyk7CgogICAgbXkgJGNsb25lID0gYmxlc3Mge30gPT4gcmVmKCRzZWxmKSB8fCAkc2VsZjsKICAgIGZvciAoa2V5cyAlJHNlbGYpIHsKICAgICAgICBteSAkdmFsdWUgPSAkc2VsZi0+eyRffTsKICAgICAgICAkY2xvbmUtPnskX30gPSByZWYgJHZhbHVlICYmIFVOSVZFUlNBTDo6aXNhKCR2YWx1ZSA9PiBfX1BBQ0tBR0VfXykgPyAkdmFsdWUtPmNsb25lIDogJHZhbHVlOwogICAgfQogICAgcmV0dXJuICRjbG9uZTsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlRyYW5zcG9ydDsKCnVzZSB2YXJzIHF3KCRBVVRPTE9BRCBASVNBKTsKQElTQSA9IHF3KFNPQVA6OkNsb25lYWJsZSk7Cgp1c2UgQ2xhc3M6Okluc3BlY3RvcjsKCgpzdWIgREVTVFJPWSB7IFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpIH0KCnN1YiBuZXcgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIHJldHVybiAkc2VsZiBpZiByZWYgJHNlbGY7CiAgICBteSAkY2xhc3MgPSByZWYoJHNlbGYpIHx8ICRzZWxmOwoKICAgIFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpOwogICAgcmV0dXJuIGJsZXNzIHt9ID0+ICRjbGFzczsKfQoKc3ViIHByb3h5IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICAkc2VsZiA9ICRzZWxmLT5uZXcoKSBpZiBub3QgcmVmICRzZWxmOwoKICAgIG15ICRjbGFzcyA9IHJlZiAkc2VsZjsKCiAgICByZXR1cm4gJHNlbGYtPntfcHJveHl9IHVubGVzcyBAXzsKCiAgICAkX1swXSA9fiAvXihcdyspOi8gb3IgZGllICJwcm94eTogdHJhbnNwb3J0IHByb3RvY29sIG5vdCBzcGVjaWZpZWRcbiI7CiAgICBteSAkcHJvdG9jb2wgPSB1YyAiJDEiOyAjIHVudGFpbnRlZCBub3cKCiAgICAjIEhUVFBTIGlzIGhhbmRsZWQgYnkgSFRUUCBjbGFzcwogICAgJHByb3RvY29sID1+cy9eSFRUUFMkL0hUVFAvOwoKICAgIChteSAkcHJvdG9jb2xfY2xhc3MgPSAiJHtjbGFzc306OiRwcm90b2NvbCIpID1+IHMvLS9fL2c7CgogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgIHVubGVzcyAoQ2xhc3M6Okluc3BlY3Rvci0+bG9hZGVkKCIkcHJvdG9jb2xfY2xhc3NcOjpDbGllbnQiKQogICAgICAgICYmIFVOSVZFUlNBTDo6Y2FuKCIkcHJvdG9jb2xfY2xhc3NcOjpDbGllbnQiID0+ICduZXcnKQogICAgKSB7CiAgICAgICAgZXZhbCAicmVxdWlyZSAkcHJvdG9jb2xfY2xhc3MiOwogICAgICAgIGRpZSAiVW5zdXBwb3J0ZWQgcHJvdG9jb2wgJyRwcm90b2NvbCdcbiIKICAgICAgICAgICAgaWYgJEAgPX4gbSFeQ2FuXCd0IGxvY2F0ZSBTT0FQL1RyYW5zcG9ydC8hOwogICAgICAgIGRpZSBpZiAkQDsKICAgIH0KCiAgICAkcHJvdG9jb2xfY2xhc3MgLj0gIjo6Q2xpZW50IjsKICAgIHJldHVybiAkc2VsZi0+e19wcm94eX0gPSAkcHJvdG9jb2xfY2xhc3MtPm5ldyhlbmRwb2ludCA9PiBzaGlmdCwgQF8pOwp9CgpzdWIgQVVUT0xPQUQgewogICAgbXkgJG1ldGhvZCA9IHN1YnN0cigkQVVUT0xPQUQsIHJpbmRleCgkQVVUT0xPQUQsICc6OicpICsgMik7CiAgICByZXR1cm4gaWYgJG1ldGhvZCBlcSAnREVTVFJPWSc7CgogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgICokQVVUT0xPQUQgPSBzdWIgeyBzaGlmdC0+cHJveHktPiRtZXRob2QoQF8pIH07CiAgICBnb3RvICYkQVVUT0xPQUQ7Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpGYXVsdDsKCnVzZSBDYXJwICgpOwoKdXNlIG92ZXJsb2FkIGZhbGxiYWNrID0+IDEsICciIicgPT4gInN0cmluZ2lmeSI7CgpzdWIgREVTVFJPWSB7IFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpIH0KCnN1YiBuZXcgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKCiAgICB1bmxlc3MgKHJlZiAkc2VsZikgewogICAgICAgIG15ICRjbGFzcyA9ICRzZWxmOwogICAgICAgICRzZWxmID0gYmxlc3Mge30gPT4gJGNsYXNzOwogICAgICAgIFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpOwogICAgfQoKICAgIENhcnA6OmNhcnAgIk9kZCAod3Jvbmc/KSBudW1iZXIgb2YgcGFyYW1ldGVycyBpbiBuZXcoKSIKICAgICAgICBpZiAkXlcgJiYgKEBfICYgMSk7CgogICAgbm8gc3RyaWN0IHF3KHJlZnMpOwogICAgd2hpbGUgKEBfKSB7CiAgICAgICAgbXkgJG1ldGhvZCA9IHNoaWZ0OwogICAgICAgICRzZWxmLT4kbWV0aG9kKHNoaWZ0KQogICAgICAgICAgICBpZiAkc2VsZi0+Y2FuKCRtZXRob2QpCiAgICB9CgogICAgcmV0dXJuICRzZWxmOwp9CgpzdWIgc3RyaW5naWZ5IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICByZXR1cm4gam9pbiAnOiAnLCAkc2VsZi0+ZmF1bHRjb2RlLCAkc2VsZi0+ZmF1bHRzdHJpbmc7Cn0KCnN1YiBCRUdJTiB7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgZm9yIG15ICRtZXRob2QgKHF3KGZhdWx0Y29kZSBmYXVsdHN0cmluZyBmYXVsdGFjdG9yIGZhdWx0ZGV0YWlsKSkgewogICAgICAgIG15ICRmaWVsZCA9ICdfJyAuICRtZXRob2Q7CiAgICAgICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgICAgICBteSAkc2VsZiA9IFVOSVZFUlNBTDo6aXNhKCRfWzBdID0+IF9fUEFDS0FHRV9fKQogICAgICAgICAgICAgICAgPyBzaGlmdC0+bmV3CiAgICAgICAgICAgICAgICA6IF9fUEFDS0FHRV9fLT5uZXc7CiAgICAgICAgICAgIGlmIChAXykgewogICAgICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9ID0gc2hpZnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gJHNlbGYKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgICAgIH0KICAgIH0KICAgICpkZXRhaWwgPSBcJmZhdWx0ZGV0YWlsOwp9CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6RGF0YTsKCnVzZSB2YXJzIHF3KEBJU0EgQEVYUE9SVF9PSyk7CnVzZSBFeHBvcnRlcjsKdXNlIENhcnAgKCk7CnVzZSBTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYVNPQVAxXzI7CgpASVNBID0gcXcoRXhwb3J0ZXIpOwpARVhQT1JUX09LID0gcXcobmFtZSB0eXBlIGF0dHIgdmFsdWUgdXJpKTsKCnN1YiBERVNUUk9ZIHsgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJykgfQoKc3ViIG5ldyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwoKICAgIHVubGVzcyAocmVmICRzZWxmKSB7CiAgICAgICAgbXkgJGNsYXNzID0gJHNlbGY7CiAgICAgICAgJHNlbGYgPSBibGVzcyB7X2F0dHIgPT4ge30sIF92YWx1ZSA9PiBbXSwgX3NpZ25hdHVyZSA9PiBbXX0gPT4gJGNsYXNzOwogICAgICAgIFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpOwogICAgfQogICAgbm8gc3RyaWN0IHF3KHJlZnMpOwogICAgQ2FycDo6Y2FycCAiT2RkICh3cm9uZz8pIG51bWJlciBvZiBwYXJhbWV0ZXJzIGluIG5ldygpIiBpZiAkXlcgJiYgKEBfICYgMSk7CiAgICB3aGlsZSAoQF8pIHsKICAgICAgICBteSAkbWV0aG9kID0gc2hpZnQ7CiAgICAgICAgJHNlbGYtPiRtZXRob2Qoc2hpZnQpIGlmICRzZWxmLT5jYW4oJG1ldGhvZCkKICAgIH0KCiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBuYW1lIHsKICAgIG15ICRzZWxmID0gVU5JVkVSU0FMOjppc2EoJF9bMF0gPT4gX19QQUNLQUdFX18pID8gc2hpZnQtPm5ldyA6IF9fUEFDS0FHRV9fLT5uZXc7CiAgICBpZiAoQF8pIHsKICAgICAgICBteSAoJG5hbWUsICR1cmksICRwcmVmaXgpID0gc2hpZnQ7CiAgICAgICAgaWYgKCRuYW1lKSB7CiAgICAgICAgICAgICgkdXJpLCAkbmFtZSkgPSBTT0FQOjpVdGlsczo6c3BsaXRsb25nbmFtZSgkbmFtZSk7CiAgICAgICAgICAgIHVubGVzcyAoZGVmaW5lZCAkdXJpKSB7CiAgICAgICAgICAgICAgICAoJHByZWZpeCwgJG5hbWUpID0gU09BUDo6VXRpbHM6OnNwbGl0cW5hbWUoJG5hbWUpOwogICAgICAgICAgICAgICAgJHNlbGYtPnByZWZpeCgkcHJlZml4KSBpZiBkZWZpbmVkICRwcmVmaXg7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkc2VsZi0+dXJpKCR1cmkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICRzZWxmLT57X25hbWV9ID0gJG5hbWU7CgogICAgICAgICRzZWxmLT52YWx1ZShAXykgaWYgQF87CiAgICAgICAgcmV0dXJuICRzZWxmOwogICAgfQogICAgcmV0dXJuICRzZWxmLT57X25hbWV9Owp9CgpzdWIgYXR0ciB7CiAgICBteSAkc2VsZiA9IFVOSVZFUlNBTDo6aXNhKCRfWzBdID0+IF9fUEFDS0FHRV9fKQogICAgICAgID8gc2hpZnQtPm5ldygpCiAgICAgICAgOiBfX1BBQ0tBR0VfXy0+bmV3KCk7CiAgICBpZiAoQF8pIHsKICAgICAgICAkc2VsZi0+e19hdHRyfSA9IHNoaWZ0OwogICAgICAgICRzZWxmLT52YWx1ZShAXykgaWYgQF87CiAgICAgICAgcmV0dXJuICRzZWxmCiAgICB9CiAgICByZXR1cm4gJHNlbGYtPntfYXR0cn07Cn0KCnN1YiB0eXBlIHsKICAgIG15ICRzZWxmID0gVU5JVkVSU0FMOjppc2EoJF9bMF0gPT4gX19QQUNLQUdFX18pCiAgICAgICAgPyBzaGlmdC0+bmV3KCkKICAgICAgICA6IF9fUEFDS0FHRV9fLT5uZXcoKTsKICAgIGlmIChAXykgewogICAgICAgICRzZWxmLT57X3R5cGV9ID0gc2hpZnQ7CiAgICAgICAgJHNlbGYtPnZhbHVlKEBfKSBpZiBAXzsKICAgICAgICByZXR1cm4gJHNlbGY7CiAgICB9CiAgICBpZiAoIWRlZmluZWQgJHNlbGYtPntfdHlwZX0gJiYgKG15IEB0eXBlcyA9IGdyZXAgey9eXHskU09BUDo6Q29uc3RhbnRzOjpOU19YU0lfQUxMfXR5cGUkL299IGtleXMgJXskc2VsZi0+e19hdHRyfX0pKSB7CiAgICAgICAgJHNlbGYtPntfdHlwZX0gPSAoU09BUDo6VXRpbHM6OnNwbGl0bG9uZ25hbWUoZGVsZXRlICRzZWxmLT57X2F0dHJ9LT57c2hpZnQoQHR5cGVzKX0pKVsxXTsKICAgIH0KICAgIHJldHVybiAkc2VsZi0+e190eXBlfTsKfQoKQkVHSU4gewogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgIGZvciBteSAkbWV0aG9kIChxdyhyb290IG11c3RVbmRlcnN0YW5kKSkgewogICAgICAgIG15ICRmaWVsZCA9ICdfJyAuICRtZXRob2Q7CiAgICAgICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgIG15ICRhdHRyID0gJG1ldGhvZCBlcSAncm9vdCcKICAgICAgICAgICAgPyAieyRTT0FQOjpDb25zdGFudHM6Ok5TX0VOQ30kbWV0aG9kIgogICAgICAgICAgICA6ICJ7JFNPQVA6OkNvbnN0YW50czo6TlNfRU5WfSRtZXRob2QiOwogICAgICAgICAgICBteSAkc2VsZiA9IFVOSVZFUlNBTDo6aXNhKCRfWzBdID0+IF9fUEFDS0FHRV9fKQogICAgICAgICAgICAgICAgPyBzaGlmdC0+bmV3CiAgICAgICAgICAgICAgICA6IF9fUEFDS0FHRV9fLT5uZXc7CiAgICAgICAgICAgIGlmIChAXykgewogICAgICAgICAgICAgICAgJHNlbGYtPntfYXR0cn0tPnskYXR0cn0gPSAkc2VsZi0+eyRmaWVsZH0gPSBzaGlmdCgpID8gMSA6IDA7CiAgICAgICAgICAgICAgICAkc2VsZi0+dmFsdWUoQF8pIGlmIEBfOwogICAgICAgICAgICAgICAgcmV0dXJuICRzZWxmOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRzZWxmLT57JGZpZWxkfSA9IFNPQVA6OkxpdGU6OkRlc2VyaWFsaXplcjo6WE1MU2NoZW1hU09BUDFfMi0+YXNfYm9vbGVhbigkc2VsZi0+e19hdHRyfS0+eyRhdHRyfSkKICAgICAgICAgICAgICAgIGlmICFkZWZpbmVkICRzZWxmLT57JGZpZWxkfSAmJiBkZWZpbmVkICRzZWxmLT57X2F0dHJ9LT57JGF0dHJ9OwogICAgICAgICAgICByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgICAgIH0KICAgIH0KCiAgICBmb3IgbXkgJG1ldGhvZCAocXcoYWN0b3IgZW5jb2RpbmdTdHlsZSkpIHsKICAgICAgICBteSAkZmllbGQgPSAnXycgLiAkbWV0aG9kOwogICAgICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgICAgICAgbXkgJGF0dHIgPSAieyRTT0FQOjpDb25zdGFudHM6Ok5TX0VOVn0kbWV0aG9kIjsKICAgICAgICAgICAgbXkgJHNlbGYgPSBVTklWRVJTQUw6OmlzYSgkX1swXSA9PiBfX1BBQ0tBR0VfXykKICAgICAgICAgICAgICAgID8gc2hpZnQtPm5ldygpCiAgICAgICAgICAgICAgICA6IF9fUEFDS0FHRV9fLT5uZXcoKTsKICAgICAgICAgICAgaWYgKEBfKSB7CiAgICAgICAgICAgICAgICAkc2VsZi0+e19hdHRyfS0+eyRhdHRyfSA9ICRzZWxmLT57JGZpZWxkfSA9IHNoaWZ0OwogICAgICAgICAgICAgICAgJHNlbGYtPnZhbHVlKEBfKSBpZiBAXzsKICAgICAgICAgICAgICAgIHJldHVybiAkc2VsZjsKICAgICAgICAgICAgfQogICAgICAgICAgICAkc2VsZi0+eyRmaWVsZH0gPSAkc2VsZi0+e19hdHRyfS0+eyRhdHRyfQogICAgICAgICAgICAgICAgaWYgIWRlZmluZWQgJHNlbGYtPnskZmllbGR9ICYmIGRlZmluZWQgJHNlbGYtPntfYXR0cn0tPnskYXR0cn07CiAgICAgICAgICAgIHJldHVybiAkc2VsZi0+eyRmaWVsZH07CiAgICAgICAgfQogICAgfQp9CgpzdWIgcHJlZml4IHsKICAgIG15ICRzZWxmID0gVU5JVkVSU0FMOjppc2EoJF9bMF0gPT4gX19QQUNLQUdFX18pCiAgICAgICAgPyBzaGlmdC0+bmV3KCkKICAgICAgICA6IF9fUEFDS0FHRV9fLT5uZXcoKTsKICAgIHJldHVybiAkc2VsZi0+e19wcmVmaXh9IHVubGVzcyBAXzsKICAgICRzZWxmLT57X3ByZWZpeH0gPSBzaGlmdDsKICAgICRzZWxmLT52YWx1ZShAXykgaWYgQF87CiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiB1cmkgewogICAgbXkgJHNlbGYgPSBVTklWRVJTQUw6OmlzYSgkX1swXSA9PiBfX1BBQ0tBR0VfXykKICAgICAgICA/IHNoaWZ0LT5uZXcoKQogICAgICAgIDogX19QQUNLQUdFX18tPm5ldygpOwogICAgcmV0dXJuICRzZWxmLT57X3VyaX0gdW5sZXNzIEBfOwogICAgbXkgJHVyaSA9ICRzZWxmLT57X3VyaX0gPSBzaGlmdDsKICAgIHdhcm4gIlVzYWdlIG9mICc6OicgaW4gVVJJICgkdXJpKSBkZXByZWNhdGVkLiBVc2UgJy8nIGluc3RlYWRcbiIKICAgICAgICBpZiBkZWZpbmVkICR1cmkgJiYgJF5XICYmICR1cmkgPX4gLzo6LzsKICAgICRzZWxmLT52YWx1ZShAXykgaWYgQF87CiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBzZXRfdmFsdWUgewogICAgbXkgJHNlbGYgPSBVTklWRVJTQUw6OmlzYSgkX1swXSA9PiBfX1BBQ0tBR0VfXykKICAgICAgICA/IHNoaWZ0LT5uZXcoKQogICAgICAgIDogX19QQUNLQUdFX18tPm5ldygpOwogICAgJHNlbGYtPntfdmFsdWV9ID0gW0BfXTsKICAgIHJldHVybiAkc2VsZjsKfQoKc3ViIHZhbHVlIHsKICAgIG15ICRzZWxmID0gVU5JVkVSU0FMOjppc2EoJF9bMF0gPT4gX19QQUNLQUdFX18pCiAgICAgICAgPyBzaGlmdC0+bmV3KCkKICAgICAgICA6IF9fUEFDS0FHRV9fLT5uZXc7CiAgICAoQF8pCiAgICAgICAgPyAoJHNlbGYtPnNldF92YWx1ZShAXyksIHJldHVybiAkc2VsZikKICAgICAgICA6IHdhbnRhcnJheQogICAgICAgICAgICA/IHJldHVybiBAeyRzZWxmLT57X3ZhbHVlfX0KICAgICAgICAgICAgOiByZXR1cm4gJHNlbGYtPntfdmFsdWV9LT5bMF07Cn0KCnN1YiBzaWduYXR1cmUgewogICAgbXkgJHNlbGYgPSBVTklWRVJTQUw6OmlzYSgkX1swXSA9PiBfX1BBQ0tBR0VfXykKICAgICAgICA/IHNoaWZ0LT5uZXcoKQogICAgICAgIDogX19QQUNLQUdFX18tPm5ldygpOwogICAgKEBfKQogICAgICAgID8gKCRzZWxmLT57X3NpZ25hdHVyZX0gPSBzaGlmdCwgcmV0dXJuICRzZWxmKQogICAgICAgIDogKHJldHVybiAkc2VsZi0+e19zaWduYXR1cmV9KTsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OkhlYWRlcjsKCnVzZSB2YXJzIHF3KEBJU0EpOwpASVNBID0gcXcoU09BUDo6RGF0YSk7CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6U2VyaWFsaXplcjsKdXNlIFNPQVA6OkxpdGU6OlV0aWxzOwp1c2UgQ2FycCAoKTsKdXNlIHZhcnMgcXcoQElTQSk7CgpASVNBID0gcXcoU09BUDo6Q2xvbmVhYmxlIFNPQVA6OlhNTFNjaGVtYTo6U2VyaWFsaXplcik7CgpCRUdJTiB7CiAgICAjIG5hbWVzcGFjZXMgYW5kIGFub255bW91cyBkYXRhIHN0cnVjdHVyZXMKICAgIG15ICRucyAgID0gMDsKICAgIG15ICRuYW1lID0gMDsKICAgIG15ICRwcmVmaXggPSAnYy0nOwogICAgc3ViIGdlbl9ucyB7ICduYW1lc3AnIC4gKyskbnMgfQogICAgc3ViIGdlbl9uYW1lIHsgam9pbiAnJywgJHByZWZpeCwgJ2dlbnN5bScsICsrJG5hbWUgfQogICAgc3ViIHByZWZpeCB7ICRwcmVmaXggPX4gcy9eW15cLV0rLS8kX1sxXS0vOyAkX1swXTsgfQp9CgpzdWIgQkVHSU4gewogICAgbm8gc3RyaWN0ICdyZWZzJzsKCiAgICBfX1BBQ0tBR0VfXy0+X19ta19hY2Nlc3NvcnMocXcocmVhZGFibGUgbGV2ZWwgc2VlbiBhdXRvdHlwZSB0eXBlbG9va3VwIGF0dHIgbWFwdHlwZQogICAgICAgIG5hbWVzcGFjZXMgbXVsdGlyZWZpbnBsYWNlIGVuY29kaW5nIHNpZ25hdHVyZSBvbl9ub25zZXJpYWxpemVkIGNvbnRleHQKICAgICAgICBuc191cmkgbnNfcHJlZml4IHVzZV9kZWZhdWx0X25zKSk7CgogICAgZm9yIG15ICRtZXRob2QgKHF3KG1ldGhvZCBmYXVsdCBmcmVlZm9ybSkpIHsgIyBhbGlhc2VzIGZvciBlbnZlbG9wZQogICAgICAgICokbWV0aG9kID0gc3ViIHsgc2hpZnQtPmVudmVsb3BlKCRtZXRob2QgPT4gQF8pIH0KICAgIH0KICAgICMgSXMgdGhpcyBuZWNlc3Nhcnk/IFNlZW1zIGxpa2Ugd29yayBmb3Igbm90aGluZyB3aGVuIGEgdXNlciBjb3VsZCBqdXN0IHVzZQogICAgIyBTT0FQOjpVdGlscyBkaXJlY3RseS4KICAgICMgZm9yIG15ICRtZXRob2QgKHF3KHF1YWxpZnkgb3ZlcnF1YWxpZnkgZGlzcXVhbGlmeSkpIHsgIyBpbXBvcnQgZnJvbSBTT0FQOjpVdGlscwogICAgIyAgICokbWV0aG9kID0gXCZ7J1NPQVA6OlV0aWxzOjonLiRtZXRob2R9OwogICAgIyB9Cn0KCnN1YiBERVNUUk9ZIHsgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJykgfQoKc3ViIG5ldyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgcmV0dXJuICRzZWxmIGlmIHJlZiAkc2VsZjsKCiAgICBteSAkY2xhc3MgPSAkc2VsZjsKICAgICRzZWxmID0gYmxlc3MgewogICAgICAgIF9sZXZlbCA9PiAwLAogICAgICAgIF9hdXRvdHlwZSA9PiAxLAogICAgICAgIF9yZWFkYWJsZSA9PiAwLAogICAgICAgIF9uc191cmkgPT4gJycsCiAgICAgICAgX25zX3ByZWZpeCA9PiAnJywKICAgICAgICBfdXNlX2RlZmF1bHRfbnMgPT4gMSwKICAgICAgICBfbXVsdGlyZWZpbnBsYWNlID0+IDAsCiAgICAgICAgX3NlZW4gPT4ge30sCiAgICAgICAgX3R5cGVsb29rdXAgPT4gewogICAgICAgICAgICdiYXNlNjRCaW5hcnknID0+CiAgICAgICAgICAgICAgWzEwLCBzdWIgeyRfWzBdID1+IC9bXlx4MDlceDBhXHgwZFx4MjAtXHg3Zl0vIH0sICdhc19iYXNlNjRCaW5hcnknXSwKICAgICAgICAgICAnemVyb3N0cmluZycgPT4KICAgICAgICAgICAgICAgWzEyLCBzdWIgeyAkX1swXSA9fiAvXjBcZCskLyB9LCAnYXNfc3RyaW5nJ10sCiAgICAgICAgICAgICMgaW50IChhbmQgYWN0dWFsbHkgbG9uZyB0b28pIGFyZSBzdWJ0bGU6IHRoZSBuZWdhdGl2ZSByYW5nZSBpcyBvbmUgZ3JlYXRlci4uLgogICAgICAgICAgICAnaW50JyAgPT4KICAgICAgICAgICAgICAgWzIwLCBzdWIgeyRfWzBdID1+IC9eKFsrLV0/XGQrKSQvICYmICgkMSA8PSAyMTQ3NDgzNjQ3KSAmJiAoJDEgPj0gLTIxNDc0ODM2NDgpOyB9LCAnYXNfaW50J10sCiAgICAgICAgICAgICdsb25nJyA9PgogICAgICAgICAgICAgICBbMjUsIHN1YiB7JF9bMF0gPX4gL14oWystXT9cZCspJC8gJiYgJDEgPD0gOTIyMzM3MjAzNjg1NDc3NTgwNzt9LCAnYXNfbG9uZyddLAogICAgICAgICAgICAnZmxvYXQnICA9PgogICAgICAgICAgICAgICBbMzAsIHN1YiB7JF9bMF0gPX4gL14oLT8oPzpcZCsoPzpcLlxkKik/fFwuXGQrfE5hTnxJTkYpfChbKy1dPykoPz1cZHxcLlxkKVxkKihcLlxkKik/KFtFZV0oWystXT9cZCspKT8pJC99LCAnYXNfZmxvYXQnXSwKICAgICAgICAgICAgJ2dNb250aCcgPT4KICAgICAgICAgICAgICAgWzM1LCBzdWIgeyAkX1swXSA9fiAvXi0tXGRcZC0tKC1cZFxkOlxkXGQpPyQvOyB9LCAnYXNfZ01vbnRoJ10sCiAgICAgICAgICAgICdnRGF5JyA9PgogICAgICAgICAgICAgICBbNDAsIHN1YiB7ICRfWzBdID1+IC9eLS0tXGRcZCgtXGRcZDpcZFxkKT8kLzsgfSwgJ2FzX2dEYXknXSwKICAgICAgICAgICAgJ2dZZWFyJyA9PgogICAgICAgICAgICAgICBbNDUsIHN1YiB7ICRfWzBdID1+IC9eLT9cZFxkXGRcZCgtXGRcZDpcZFxkKT8kLzsgfSwgJ2FzX2dZZWFyJ10sCiAgICAgICAgICAgICdnTW9udGhEYXknID0+CiAgICAgICAgICAgICAgIFs1MCwgc3ViIHsgJF9bMF0gPX4gL14tXGRcZC1cZFxkKC1cZFxkOlxkXGQpPyQvOyB9LCAnYXNfZ01vbnRoRGF5J10sCiAgICAgICAgICAgICdnWWVhck1vbnRoJyA9PgogICAgICAgICAgICAgICBbNTUsIHN1YiB7ICRfWzBdID1+IC9eLT9cZFxkXGRcZC1cZFxkKFp8KFsrLV1cZFxkOlxkXGQpKT8kLzsgfSwgJ2FzX2dZZWFyTW9udGgnXSwKICAgICAgICAgICAgJ2RhdGUnID0+CiAgICAgICAgICAgICAgIFs2MCwgc3ViIHsgJF9bMF0gPX4gL14tP1xkXGRcZFxkLVxkXGQtXGRcZChafChbKy1dXGRcZDpcZFxkKSk/JC87IH0sICdhc19kYXRlJ10sCiAgICAgICAgICAgICd0aW1lJyA9PgogICAgICAgICAgICAgICBbNzAsIHN1YiB7ICRfWzBdID1+IC9eXGRcZDpcZFxkOlxkXGQoXC5cZFxkXGQpPyhafChbKy1dXGRcZDpcZFxkKSk/JC87IH0sICdhc190aW1lJ10sCiAgICAgICAgICAgICdkYXRlVGltZScgPT4KICAgICAgICAgICAgICAgWzc1LCBzdWIgeyAkX1swXSA9fiAvXlxkXGRcZFxkLVxkXGQtXGRcZFRcZFxkOlxkXGQ6XGRcZChcLlxkXGRcZCk/KFp8KFsrLV1cZFxkOlxkXGQpKT8kLzsgfSwgJ2FzX2RhdGVUaW1lJ10sCiAgICAgICAgICAgICdkdXJhdGlvbicgPT4KICAgICAgICAgICAgICAgWzgwLCBzdWIgeyAkX1swXSAhfm17Xi0/UFQ/JH0gJiYgJF9bMF0gPX4gbXteCiAgICAgICAgICAgICAgICAgICAgICAgIC0/ICAgIyBhIG9wdGlvbmFsIC0gc2lnbgogICAgICAgICAgICAgICAgICAgICAgICBQCiAgICAgICAgICAgICAgICAgICAgICAgICg6PyBcZCtZICk/CiAgICAgICAgICAgICAgICAgICAgICAgICg6PyBcZCtNICk/CiAgICAgICAgICAgICAgICAgICAgICAgICg6PyBcZCtEICk/CiAgICAgICAgICAgICAgICAgICAgICAgICg6PwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVCg6P1xkK0gpPwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKDo/XGQrTSk/CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoOj9cZCtTKT8KICAgICAgICAgICAgICAgICAgICAgICAgKT8KICAgICAgICAgICAgICAgICAgICAgICAgJAogICAgICAgICAgICAgICAgICAgIH14OwogICAgICAgICAgICAgICB9LCAnYXNfZHVyYXRpb24nXSwKICAgICAgICAgICAgJ2Jvb2xlYW4nID0+CiAgICAgICAgICAgICAgIFs5MCwgc3ViIHsgJF9bMF0gPX4gL14odHJ1ZXxmYWxzZSkkL2k7IH0sICdhc19ib29sZWFuJ10sCiAgICAgICAgICAgICdhbnlVUkknID0+CiAgICAgICAgICAgICAgIFs5NSwgc3ViIHsgJF9bMF0gPX4gL14odXJuOnxodHRwOlwvXC8pL2k7IH0sICdhc19hbnlVUkknXSwKICAgICAgICAgICAgJ3N0cmluZycgPT4KICAgICAgICAgICAgICAgWzEwMCwgc3ViIHsxfSwgJ2FzX3N0cmluZyddLAogICAgICAgIH0sCiAgICAgICAgX2VuY29kaW5nID0+ICdVVEYtOCcsCiAgICAgICAgX29iamVjdHN0YWNrID0+IHt9LAogICAgICAgIF9zaWduYXR1cmUgPT4gW10sCiAgICAgICAgX21hcHR5cGUgPT4ge30sCiAgICAgICAgX29uX25vbnNlcmlhbGl6ZWQgPT4gc3ViIHtDYXJwOjpjYXJwICJDYW5ub3QgbWFyc2hhbGwgQHtbcmVmIHNoaWZ0XX0gcmVmZXJlbmNlIiBpZiAkXlc7IHJldHVybn0sCiAgICAgICAgX2VuY29kaW5nU3R5bGUgPT4gJFNPQVA6OkNvbnN0YW50czo6TlNfRU5DLAogICAgICAgIF9hdHRyID0+IHsKICAgICAgICAgICAgInskU09BUDo6Q29uc3RhbnRzOjpOU19FTlZ9ZW5jb2RpbmdTdHlsZSIgPT4gJFNPQVA6OkNvbnN0YW50czo6TlNfRU5DLAogICAgICAgIH0sCiAgICAgICAgX25hbWVzcGFjZXMgPT4ge30sCiAgICAgICAgX3NvYXB2ZXJzaW9uID0+IFNPQVA6OkxpdGUtPnNvYXB2ZXJzaW9uLAogICAgfSA9PiAkY2xhc3M7CiAgICAkc2VsZi0+cmVnaXN0ZXJfbnMoJFNPQVA6OkNvbnN0YW50czo6TlNfRU5DLCRTT0FQOjpDb25zdGFudHM6OlBSRUZJWF9FTkMpOwogICAgJHNlbGYtPnJlZ2lzdGVyX25zKCRTT0FQOjpDb25zdGFudHM6Ok5TX0VOViwkU09BUDo6Q29uc3RhbnRzOjpQUkVGSVhfRU5WKQogICAgICAgIGlmICRTT0FQOjpDb25zdGFudHM6OlBSRUZJWF9FTlY7CiAgICAkc2VsZi0+eG1sc2NoZW1hKCRTT0FQOjpDb25zdGFudHM6OkRFRkFVTFRfWE1MX1NDSEVNQSk7CiAgICBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKTsKCiAgICBubyBzdHJpY3QgcXcocmVmcyk7CiAgICBDYXJwOjpjYXJwICJPZGQgKHdyb25nPykgbnVtYmVyIG9mIHBhcmFtZXRlcnMgaW4gbmV3KCkiIGlmICReVyAmJiAoQF8gJiAxKTsKICAgIHdoaWxlIChAXykgeyBteSAkbWV0aG9kID0gc2hpZnQ7ICRzZWxmLT4kbWV0aG9kKHNoaWZ0KSBpZiAkc2VsZi0+Y2FuKCRtZXRob2QpIH0KCiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBucyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgJHNlbGYgPSAkc2VsZi0+bmV3KCkgaWYgbm90IHJlZiAkc2VsZjsKICAgIGlmIChAXykgewogICAgICAgIG15ICgkdSwkcCkgPSBAXzsKICAgICAgICBteSAkcHJlZml4OwoKICAgICAgICBpZiAoJHApIHsKICAgICAgICAgICAgJHByZWZpeCA9ICRwOwogICAgICAgIH0KICAgICAgICBlbHNpZiAoISRwICYmICEoJHByZWZpeCA9ICRzZWxmLT5maW5kX3ByZWZpeCgkdSkpKSB7CiAgICAgICAgICAgICRwcmVmaXggPSBnZW5fbnM7CiAgICAgICAgfQoKICAgICAgICAkc2VsZi0+eydfbnNfdXJpJ30gICAgICAgICA9ICR1OwogICAgICAgICRzZWxmLT57J19uc19wcmVmaXgnfSAgICAgID0gJHByZWZpeDsKICAgICAgICAkc2VsZi0+eydfdXNlX2RlZmF1bHRfbnMnfSA9IDA7CiAgICAgICAgIyAkc2VsZi0+cmVnaXN0ZXJfbnMoJHUsJHByZWZpeCk7CiAgICAgICAgJHNlbGYtPnsnX25hbWVzcGFjZXMnfS0+eyR1fSA9ICRwcmVmaXg7CiAgICAgICAgcmV0dXJuICRzZWxmOwogICAgfQogICAgcmV0dXJuICRzZWxmLT57J19uc191cmknfTsKfQoKc3ViIGRlZmF1bHRfbnMgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICRzZWxmID0gJHNlbGYtPm5ldygpIGlmIG5vdCByZWYgJHNlbGY7CiAgICBpZiAoQF8pIHsKICAgICAgICBteSAoJHUpID0gQF87CiAgICAgICAgJHNlbGYtPnsnX25zX3VyaSd9ICAgICAgICAgPSAkdTsKICAgICAgICAkc2VsZi0+eydfbnNfcHJlZml4J30gICAgICA9ICcnOwogICAgICAgICRzZWxmLT57J191c2VfZGVmYXVsdF9ucyd9ID0gMTsKICAgICAgICByZXR1cm4gJHNlbGY7CiAgICB9CiAgICByZXR1cm4gJHNlbGYtPnsnX25zX3VyaSd9Owp9CgpzdWIgdXNlX3ByZWZpeCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgJHNlbGYgPSAkc2VsZi0+bmV3KCkgaWYgbm90IHJlZiAkc2VsZjsKICAgIHdhcm4gJ3VzZV9wcmVmaXggaGFzIGJlZW4gZGVwcmVjYXRlZC4gaWYgeW91IHdpc2ggdG8gdHVybiBvZmYgb3Igb24gdGhlICcKICAgICAgICAuICd1c2Ugb2YgYSBkZWZhdWx0IG5hbWVzcGFjZSwgdGhlbiBwbGVhc2UgdXNlIGVpdGhlciBucyh1cmkpIG9yIGRlZmF1bHRfbnModXJpKSc7CiAgICBpZiAoQF8pIHsKICAgICAgICBteSAkdXNlID0gc2hpZnQ7CiAgICAgICAgJHNlbGYtPnsnX3VzZV9kZWZhdWx0X25zJ30gPSAhJHVzZSB8fCAwOwogICAgICAgIHJldHVybiAkc2VsZjsKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICRzZWxmLT57J191c2VfZGVmYXVsdF9ucyd9OwogICAgfQp9CnN1YiB1cmkgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICRzZWxmID0gJHNlbGYtPm5ldygpIGlmIG5vdCByZWYgJHNlbGY7CiMgICAgd2FybiAndXJpIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIGlmIHlvdSB3aXNoIHRvIHNldCB0aGUgbmFtZXNwYWNlIGZvciB0aGUgcmVxdWVzdCwgdGhlbiBwbGVhc2UgdXNlIGVpdGhlciBucyh1cmkpIG9yIGRlZmF1bHRfbnModXJpKSc7CiAgICBpZiAoQF8pIHsKICAgICAgICBteSAkbnMgPSBzaGlmdDsKICAgICAgICBpZiAoJHNlbGYtPntfdXNlX2RlZmF1bHRfbnN9KSB7CiAgICAgICAgICAgJHNlbGYtPmRlZmF1bHRfbnMoJG5zKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgJHNlbGYtPm5zKCRucyk7CiAgICAgICAgfQojICAgICAgICRzZWxmLT57J19uc191cmknfSA9ICRuczsKIyAgICAgICAkc2VsZi0+cmVnaXN0ZXJfbnMoJHNlbGYtPnsnX25zX3VyaSd9KSBpZiAoISRzZWxmLT57X3VzZV9kZWZhdWx0X25zfSk7CiAgICAgICAgcmV0dXJuICRzZWxmOwogICAgfQogICAgcmV0dXJuICRzZWxmLT57J19uc191cmknfTsKfQoKc3ViIGVuY29kaW5nU3R5bGUgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICRzZWxmID0gJHNlbGYtPm5ldygpIGlmIG5vdCByZWYgJHNlbGY7CiAgICByZXR1cm4gJHNlbGYtPnsnX2VuY29kaW5nU3R5bGUnfSB1bmxlc3MgQF87CgogICAgbXkgJGN1cl9zdHlsZSA9ICRzZWxmLT57J19lbmNvZGluZ1N0eWxlJ307CiAgICBkZWxldGUoJHNlbGYtPnsnX25hbWVzcGFjZXMnfS0+eyRjdXJfc3R5bGV9KTsKCiAgICBteSAkbmV3X3N0eWxlID0gc2hpZnQ7CiAgICBpZiAoJG5ld19zdHlsZSBlcSAiIikgewogICAgICAgIGRlbGV0ZSgkc2VsZi0+eydfYXR0cid9LT57InskU09BUDo6Q29uc3RhbnRzOjpOU19FTlZ9ZW5jb2RpbmdTdHlsZSJ9KTsKICAgIH0KICAgIGVsc2UgewogICAgICAgICRzZWxmLT57J19hdHRyJ30tPnsieyRTT0FQOjpDb25zdGFudHM6Ok5TX0VOVn1lbmNvZGluZ1N0eWxlIn0gPSAkbmV3X3N0eWxlOwogICAgICAgICRzZWxmLT57J19uYW1lc3BhY2VzJ30tPnskbmV3X3N0eWxlfSA9ICRTT0FQOjpDb25zdGFudHM6OlBSRUZJWF9FTkM7CiAgICB9Cn0KCiMgVE9ETyAtIGNoYW5naW5nIFNPQVAgdmVyc2lvbiBjYW4gYWZmZWN0IHByZXZpb3VzbHkgc2V0IGVuY29kaW5nU3R5bGUKc3ViIHNvYXB2ZXJzaW9uIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICByZXR1cm4gJHNlbGYtPntfc29hcHZlcnNpb259IHVubGVzcyBAXzsKICAgIHJldHVybiAkc2VsZiBpZiAkc2VsZi0+e19zb2FwdmVyc2lvbn0gZXEgU09BUDo6TGl0ZS0+c29hcHZlcnNpb247CiAgICAkc2VsZi0+e19zb2FwdmVyc2lvbn0gPSBzaGlmdDsKCiAgICAkc2VsZi0+YXR0cih7CiAgICAgICAgInskU09BUDo6Q29uc3RhbnRzOjpOU19FTlZ9ZW5jb2RpbmdTdHlsZSIgPT4gJFNPQVA6OkNvbnN0YW50czo6TlNfRU5DLAogICAgfSk7CiAgICAkc2VsZi0+bmFtZXNwYWNlcyh7CiAgICAgICAgJFNPQVA6OkNvbnN0YW50czo6TlNfRU5DID0+ICRTT0FQOjpDb25zdGFudHM6OlBSRUZJWF9FTkMsCiAgICAgICAgJFNPQVA6OkNvbnN0YW50czo6UFJFRklYX0VOViA/ICgkU09BUDo6Q29uc3RhbnRzOjpOU19FTlYgPT4gJFNPQVA6OkNvbnN0YW50czo6UFJFRklYX0VOVikgOiAoKSwKICAgIH0pOwogICAgJHNlbGYtPnhtbHNjaGVtYSgkU09BUDo6Q29uc3RhbnRzOjpERUZBVUxUX1hNTF9TQ0hFTUEpOwoKICAgIHJldHVybiAkc2VsZjsKfQoKc3ViIHhtbHNjaGVtYSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CiAgICByZXR1cm4gJHNlbGYtPntfeG1sc2NoZW1hfSB1bmxlc3MgQF87CgogICAgbXkgQHNjaGVtYTsKICAgIGlmICgkX1swXSkgewogICAgICAgIEBzY2hlbWEgPSBncmVwIHsvWE1MU2NoZW1hLyAmJiAvJF9bMF0vfSBrZXlzICVTT0FQOjpDb25zdGFudHM6OlhNTF9TQ0hFTUFTOwogICAgICAgIENhcnA6OmNyb2FrICJNb3JlIHRoYW4gb25lIHNjaGVtYSBtYXRjaCBwYXJhbWV0ZXIgJyRfWzBdJzogQHtbam9pbiAnLCAnLCBAc2NoZW1hXX0iIGlmIEBzY2hlbWEgPiAxOwogICAgICAgIENhcnA6OmNyb2FrICJObyBzY2hlbWEgbWF0Y2ggcGFyYW1ldGVyICckX1swXSciIGlmIEBzY2hlbWEgIT0gMTsKICAgIH0KCiAgICAjIGRvIG5vdGhpbmcgaWYgY3VycmVudCBzY2hlbWEgaXMgdGhlIHNhbWUgYXMgbmV3CiAgICByZXR1cm4gJHNlbGYgaWYgJHNlbGYtPntfeG1sc2NoZW1hfSAmJiAkc2VsZi0+e194bWxzY2hlbWF9IGVxICRzY2hlbWFbMF07CgogICAgbXkgJG5zID0gJHNlbGYtPm5hbWVzcGFjZXM7CgogICAgIyBkZWxldGUgY3VycmVudCBzY2hlbWEgZnJvbSBuYW1lc3BhY2VzCiAgICBpZiAobXkgJHNjaGVtYSA9ICRzZWxmLT57X3htbHNjaGVtYX0pIHsKICAgICAgICBkZWxldGUgJG5zLT57JHNjaGVtYX07CiAgICAgICAgZGVsZXRlICRucy0+eyIkc2NoZW1hLWluc3RhbmNlIn07CiAgICB9CgogICAgIyBhZGQgbmV3IHNjaGVtYSBpbnRvIG5hbWVzcGFjZXMKICAgIGlmIChteSAkc2NoZW1hID0gJHNlbGYtPntfeG1sc2NoZW1hfSA9IHNoaWZ0IEBzY2hlbWEpIHsKICAgICAgICAkbnMtPnskc2NoZW1hfSA9ICd4c2QnOwogICAgICAgICRucy0+eyIkc2NoZW1hLWluc3RhbmNlIn0gPSAneHNpJzsKICAgIH0KCiAgICAjIGFuZCBoZXJlIGlzIHRoZSBjbGFzcyBzZXJpYWxpemVyIHNob3VsZCB3b3JrIHdpdGgKICAgIG15ICRjbGFzcyA9IGV4aXN0cyAkU09BUDo6Q29uc3RhbnRzOjpYTUxfU0NIRU1BU3skc2VsZi0+e194bWxzY2hlbWF9fQogICAgICAgID8gJFNPQVA6OkNvbnN0YW50czo6WE1MX1NDSEVNQVN7JHNlbGYtPntfeG1sc2NoZW1hfX0gLiAnOjpTZXJpYWxpemVyJwogICAgICAgIDogJHNlbGY7CgogICAgJHNlbGYtPnhtbHNjaGVtYWNsYXNzKCRjbGFzcyk7CgogICAgcmV0dXJuICRzZWxmOwp9CgpzdWIgZW52cHJlZml4IHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldygpOwogICAgcmV0dXJuICRzZWxmLT5uYW1lc3BhY2VzLT57JFNPQVA6OkNvbnN0YW50czo6TlNfRU5WfSB1bmxlc3MgQF87CiAgICAkc2VsZi0+bmFtZXNwYWNlcy0+eyRTT0FQOjpDb25zdGFudHM6Ok5TX0VOVn0gPSBzaGlmdDsKICAgIHJldHVybiAkc2VsZjsKfQoKc3ViIGVuY3ByZWZpeCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXcoKTsKICAgIHJldHVybiAkc2VsZi0+bmFtZXNwYWNlcy0+eyRTT0FQOjpDb25zdGFudHM6Ok5TX0VOQ30gdW5sZXNzIEBfOwogICAgJHNlbGYtPm5hbWVzcGFjZXMtPnskU09BUDo6Q29uc3RhbnRzOjpOU19FTkN9ID0gc2hpZnQ7CiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBnZW5faWQgeyBzcHJpbnRmICIlVSIsICRfWzFdIH0KCnN1YiBtdWx0aXJlZl9vYmplY3QgewogICAgbXkgKCRzZWxmLCAkb2JqZWN0KSA9IEBfOwogICAgbXkgJGlkID0gJHNlbGYtPmdlbl9pZCgkb2JqZWN0KTsKICAgIG15ICRzZWVuID0gJHNlbGYtPnNlZW47CiAgICAkc2Vlbi0+eyRpZH0tPntjb3VudH0rKzsKICAgICRzZWVuLT57JGlkfS0+e211bHRpcmVmfSB8fD0gJHNlZW4tPnskaWR9LT57Y291bnR9ID4gMTsKICAgICRzZWVuLT57JGlkfS0+e3ZhbHVlfSA9ICRvYmplY3Q7CiAgICAkc2Vlbi0+eyRpZH0tPntyZWN1cnNpdmV9IHx8PSAwOwogICAgcmV0dXJuICRpZDsKfQoKc3ViIHJlY3Vyc2l2ZV9vYmplY3QgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICRzZWxmLT5zZWVuLT57JHNlbGYtPmdlbl9pZChzaGlmdCl9LT57cmVjdXJzaXZlfSA9IDE7Cn0KCnN1YiBpc19ocmVmIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAkc2VlbiA9ICRzZWxmLT5zZWVuLT57c2hpZnQgfHwgcmV0dXJufSBvciByZXR1cm47CiAgICByZXR1cm4gMSBpZiAkc2Vlbi0+e2lkfTsKICAgIHJldHVybiAkc2Vlbi0+e211bHRpcmVmfQogICAgICAgICYmICEoJHNlZW4tPntpZH0gPSAoc2hpZnQKICAgICAgICAgICAgfHwgJHNlZW4tPntyZWN1cnNpdmV9CiAgICAgICAgICAgIHx8ICRzZWVuLT57bXVsdGlyZWZ9ICYmICRzZWxmLT5tdWx0aXJlZmlucGxhY2UpKTsKfQoKc3ViIG11bHRpcmVmX2FuY2hvciB7CiAgICBteSAkc2VlbiA9IHNoaWZ0LT5zZWVuLT57bXkgJGlkID0gc2hpZnQgfHwgcmV0dXJuIHVuZGVmfTsKICAgIHJldHVybiAkc2Vlbi0+e211bHRpcmVmfSA/ICJyZWYtJGlkIiA6IHVuZGVmOwp9CgpzdWIgZW5jb2RlX211bHRpcmVmcyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgcmV0dXJuIGlmICRzZWxmLT5tdWx0aXJlZmlucGxhY2UoKTsKCiAgICBteSAkc2VlbiA9ICRzZWxmLT5zZWVuKCk7CiAgICBtYXAgeyAkXy0+WzFdLT57X2lkfSA9IDE7ICRfIH0KICAgICAgICBtYXAgeyAkc2VsZi0+ZW5jb2RlX29iamVjdCgkc2Vlbi0+eyRffS0+e3ZhbHVlfSkgfQogICAgICAgICAgICBncmVwIHsgJHNlZW4tPnskX30tPnttdWx0aXJlZn0gJiYgISRzZWVuLT57JF99LT57cmVjdXJzaXZlfSB9CiAgICAgICAgICAgICAgICBrZXlzICUkc2VlbjsKfQoKc3ViIG1hcHR5cGV0b3VyaSB7CiAgICBteSgkc2VsZiwgJHR5cGUsICRzaW1wbGUpID0gQF87CgogICAgcmV0dXJuICR0eXBlIHVubGVzcyBkZWZpbmVkICR0eXBlOwogICAgbXkoJHByZWZpeCwgJG5hbWUpID0gU09BUDo6VXRpbHM6OnNwbGl0cW5hbWUoJHR5cGUpOwoKICAgIHVubGVzcyAoZGVmaW5lZCAkcHJlZml4KSB7CiAgICAgICAgJG5hbWUgPX4gcy9fX3xcLi86Oi9nOwogICAgICAgICRzZWxmLT5tYXB0eXBlLT57JG5hbWV9ID0gJHNpbXBsZQogICAgICAgICAgICA/IGRpZSAiU2NoZW1hL25hbWVzcGFjZSBmb3IgdHlwZSAnJHR5cGUnIGlzIG5vdCBzcGVjaWZpZWRcbiIKICAgICAgICAgICAgOiAkU09BUDo6Q29uc3RhbnRzOjpOU19TTF9QRVJMVFlQRQogICAgICAgICAgICAgICAgdW5sZXNzIGV4aXN0cyAkc2VsZi0+bWFwdHlwZS0+eyRuYW1lfTsKICAgICAgICAkdHlwZSA9ICRzZWxmLT5tYXB0eXBlLT57JG5hbWV9CiAgICAgICAgICAgID8gU09BUDo6VXRpbHM6OnF1YWxpZnkoJHNlbGYtPm5hbWVzcGFjZXMtPnskc2VsZi0+bWFwdHlwZS0+eyRuYW1lfX0gfHw9IGdlbl9ucywgJHR5cGUpCiAgICAgICAgICAgIDogdW5kZWY7CiAgICB9CiAgICByZXR1cm4gJHR5cGU7Cn0KCnN1YiBlbmNvZGVfb2JqZWN0IHsKICAgIG15KCRzZWxmLCAkb2JqZWN0LCAkbmFtZSwgJHR5cGUsICRhdHRyKSA9IEBfOwoKICAgICRhdHRyIHx8PSB7fTsKICAgIHJldHVybiAkc2VsZi0+ZW5jb2RlX3NjYWxhcigkb2JqZWN0LCAkbmFtZSwgJHR5cGUsICRhdHRyKQogICAgICAgIHVubGVzcyByZWYgJG9iamVjdDsKCiAgICBteSAkaWQgPSAkc2VsZi0+bXVsdGlyZWZfb2JqZWN0KCRvYmplY3QpOwoKICAgIHVzZSB2YXJzICclb2JqZWN0c3RhY2snOyAgICAgICAgICAgIyB3ZSdsbCBwbGF5IHdpdGggc3ltYm9sIHRhYmxlCiAgICBsb2NhbCAlb2JqZWN0c3RhY2sgPSAlb2JqZWN0c3RhY2s7ICMgd2FudCB0byBzZWUgb2JqZWN0cyBPTkxZIGluIHRoZSBjdXJyZW50IHRyZWUKICAgICMgZGlkIHdlIHNlZSB0aGlzIG9iamVjdCBpbiBjdXJyZW50IHRyZWU/IFNlZW1zIHRvIGJlIHJlY3Vyc2l2ZSByZWZzCiAgICAkc2VsZi0+cmVjdXJzaXZlX29iamVjdCgkb2JqZWN0KSBpZiArKyRvYmplY3RzdGFja3skaWR9ID4gMTsKICAgICMgcmV0dXJuIGlmIHdlIGFscmVhZHkgc2F3IGl0IHR3aWNlLiBJdCBzaG91bGQgYmUgYWxyZWFkeSBwcm9wZXJseSBzZXJpYWxpemVkCiAgICByZXR1cm4gaWYgJG9iamVjdHN0YWNreyRpZH0gPiAyOwoKICAgIGlmIChVTklWRVJTQUw6OmlzYSgkb2JqZWN0ID0+ICdTT0FQOjpEYXRhJykpIHsKICAgICAgICAjIHVzZSAkb2JqZWN0LT5TT0FQOjpEYXRhOjogdG8gZW5hYmxlIG92ZXJyaWRpbmcgbmFtZSgpIGFuZCBvdGhlcnMgaW4gaW5oZXJpdGVkIGNsYXNzZXMKICAgICAgICAkb2JqZWN0LT5TT0FQOjpEYXRhOjpuYW1lKCRuYW1lKQogICAgICAgICAgICB1bmxlc3MgZGVmaW5lZCAkb2JqZWN0LT5TT0FQOjpEYXRhOjpuYW1lOwoKICAgICAgICAjIGFwcGx5IC0+dXJpKCkgYW5kIC0+cHJlZml4KCkgd2hpY2ggY2FuIG1vZGlmeSBuYW1lIGFuZCBhdHRyaWJ1dGVzIG9mCiAgICAgICAgIyBlbGVtZW50LCBidXQgZG8gbm90IG1vZGlmeSBTT0FQOjpEYXRhIGl0c2VsZgogICAgICAgIG15KCRuYW1lLCAkYXR0cikgPSAkc2VsZi0+Zml4YXR0cnMoJG9iamVjdCk7CiAgICAgICAgJGF0dHIgPSAkc2VsZi0+YXR0cnN0b3FuYW1lKCRhdHRyKTsKCiAgICAgICAgbXkgQHJlYWx2YWx1ZXMgPSAkb2JqZWN0LT5TT0FQOjpEYXRhOjp2YWx1ZTsKICAgICAgICByZXR1cm4gWyRuYW1lIHx8IGdlbl9uYW1lLCAkYXR0cl0gdW5sZXNzIEByZWFsdmFsdWVzOwoKICAgICAgICBteSAkbWV0aG9kID0gImFzXyIgLiAoJG9iamVjdC0+U09BUDo6RGF0YTo6dHlwZSB8fCAnLScpOyAjIGR1bW15IHR5cGUgaWYgbm90IGRlZmluZWQKICAgICAgICAjIHRyeSB0byBjYWxsIG1ldGhvZCBzcGVjaWZpZWQgZm9yIHRoaXMgdHlwZQogICAgICAgIG5vIHN0cmljdCBxdyhyZWZzKTsKICAgICAgICBteSBAdmFsdWVzID0gbWFwIHsKICAgICAgICAgICAgIyBzdG9yZSBudWxsL25pbCBhdHRyaWJ1dGUgaWYgdmFsdWUgaXMgdW5kZWYKICAgICAgICAgICAgbG9jYWwgJGF0dHItPntTT0FQOjpVdGlsczo6cXVhbGlmeSh4c2kgPT4gJHNlbGYtPnhtbHNjaGVtYWNsYXNzLT5uaWxWYWx1ZSl9ID0gJHNlbGYtPnhtbHNjaGVtYWNsYXNzLT5hc191bmRlZigxKQogICAgICAgICAgICAgICAgdW5sZXNzIGRlZmluZWQ7CiAgICAgICAgICAgICRzZWxmLT5jYW4oJG1ldGhvZCkgJiYgJHNlbGYtPiRtZXRob2QoJF8sICRuYW1lIHx8IGdlbl9uYW1lLCAkb2JqZWN0LT5TT0FQOjpEYXRhOjp0eXBlLCAkYXR0cikKICAgICAgICAgICAgICAgIHx8ICRzZWxmLT50eXBlY2FzdCgkXywgJG5hbWUgfHwgZ2VuX25hbWUsICRvYmplY3QtPlNPQVA6OkRhdGE6OnR5cGUsICRhdHRyKQogICAgICAgICAgICAgICAgfHwgJHNlbGYtPmVuY29kZV9vYmplY3QoJF8sICRuYW1lLCAkb2JqZWN0LT5TT0FQOjpEYXRhOjp0eXBlLCAkYXR0cikKICAgICAgICB9IEByZWFsdmFsdWVzOwogICAgICAgICRvYmplY3QtPlNPQVA6OkRhdGE6OnNpZ25hdHVyZShbbWFwIHtqb2luICQ7LCAkXy0+WzBdLCBTT0FQOjpVdGlsczo6ZGlzcXVhbGlmeSgkXy0+WzFdLT57J3hzaTp0eXBlJ30gfHwgJycpfSBAdmFsdWVzXSkgaWYgQHZhbHVlczsKICAgICAgICByZXR1cm4gd2FudGFycmF5ID8gQHZhbHVlcyA6ICR2YWx1ZXNbMF07CiAgICB9CgogICAgbXkgJGNsYXNzID0gcmVmICRvYmplY3Q7CgogICAgaWYgKCRjbGFzcyAhfiAvXig/OlNDQUxBUnxBUlJBWXxIQVNIfFJFRikkL28pIHsKICAgICAgICAjIHdlIGNvdWxkIGFsc28gY2hlY2sgZm9yIENPREV8R0xPQnxMVkFMVUUsIGJ1dCB3ZSBjYW5ub3Qgc2VyaWFsaXplCiAgICAgICAgIyB0aGVtIGFueXdheSwgc28gdGhleSdsbCBiZSBjb3VnaHQgYnkgY2hlY2sgYmVsb3cKICAgICAgICAkY2xhc3MgPX4gcy86Oi9fXy9nOwoKICAgICAgICAkbmFtZSA9ICRjbGFzcyBpZiAhZGVmaW5lZCAkbmFtZTsKICAgICAgICAkdHlwZSA9ICRjbGFzcyBpZiAhZGVmaW5lZCAkdHlwZSAmJiAkc2VsZi0+YXV0b3R5cGU7CgogICAgICAgIG15ICRtZXRob2QgPSAnYXNfJyAuICRjbGFzczsKICAgICAgICBpZiAoJHNlbGYtPmNhbigkbWV0aG9kKSkgewogICAgICAgICAgICBubyBzdHJpY3QgcXcocmVmcyk7CiAgICAgICAgICAgIG15ICRlbmNvZGVkID0gJHNlbGYtPiRtZXRob2QoJG9iamVjdCwgJG5hbWUsICR0eXBlLCAkYXR0cik7CiAgICAgICAgICAgIHJldHVybiAkZW5jb2RlZCBpZiByZWYgJGVuY29kZWQ7CiAgICAgICAgICAgICMgcmV0dXJuIG9ubHkgaWYgaGFuZGxlZCwgb3RoZXJ3aXNlIGhhbmRsZSB3aXRoIGRlZmF1bHQgaGFuZGxlcnMKICAgICAgICB9CiAgICB9CgogICAgaWYgKFVOSVZFUlNBTDo6aXNhKCRvYmplY3QgPT4gJ1JFRicpIHx8IFVOSVZFUlNBTDo6aXNhKCRvYmplY3QgPT4gJ1NDQUxBUicpKSB7CiAgICAgICAgcmV0dXJuICRzZWxmLT5lbmNvZGVfc2NhbGFyKCRvYmplY3QsICRuYW1lLCAkdHlwZSwgJGF0dHIpOwogICAgfQogICAgZWxzaWYgKFVOSVZFUlNBTDo6aXNhKCRvYmplY3QgPT4gJ0FSUkFZJykpIHsKICAgICAgICAjIEFkZGVkIGluIFNPQVA6OkxpdGUgMC42NV82IHRvIGZpeCBhbiBYTUxSUEMgYnVnCiAgICAgICAgcmV0dXJuICRzZWxmLT5lbmNvZGluZ1N0eWxlIGVxICIiCiAgICAgICAgICAgIHx8ICRzZWxmLT5pc2EoJ1hNTFJQQzo6U2VyaWFsaXplcicpCiAgICAgICAgICAgICAgICA/ICRzZWxmLT5lbmNvZGVfYXJyYXkoJG9iamVjdCwgJG5hbWUsICR0eXBlLCAkYXR0cikKICAgICAgICAgICAgICAgIDogJHNlbGYtPmVuY29kZV9saXRlcmFsX2FycmF5KCRvYmplY3QsICRuYW1lLCAkdHlwZSwgJGF0dHIpOwogICAgfQogICAgZWxzaWYgKFVOSVZFUlNBTDo6aXNhKCRvYmplY3QgPT4gJ0hBU0gnKSkgewogICAgICAgIHJldHVybiAkc2VsZi0+ZW5jb2RlX2hhc2goJG9iamVjdCwgJG5hbWUsICR0eXBlLCAkYXR0cik7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICByZXR1cm4gJHNlbGYtPm9uX25vbnNlcmlhbGl6ZWQtPigkb2JqZWN0KTsKICAgIH0KfQoKc3ViIGVuY29kZV9zY2FsYXIgewogICAgbXkoJHNlbGYsICR2YWx1ZSwgJG5hbWUsICR0eXBlLCAkYXR0cikgPSBAXzsKICAgICRuYW1lIHx8PSBnZW5fbmFtZTsKCiAgICBteSAkc2NoZW1hY2xhc3MgPSAkc2VsZi0+eG1sc2NoZW1hY2xhc3M7CgogICAgIyBudWxsIHJlZmVyZW5jZQogICAgcmV0dXJuIFskbmFtZSwgeyUkYXR0ciwgU09BUDo6VXRpbHM6OnF1YWxpZnkoeHNpID0+ICRzY2hlbWFjbGFzcy0+bmlsVmFsdWUpID0+ICRzY2hlbWFjbGFzcy0+YXNfdW5kZWYoMSl9XSB1bmxlc3MgZGVmaW5lZCAkdmFsdWU7CgogICAgIyBvYmplY3QgcmVmZXJlbmNlCiAgICByZXR1cm4gWyRuYW1lLCB7J3hzaTp0eXBlJyA9PiAkc2VsZi0+bWFwdHlwZXRvdXJpKCR0eXBlKSwgJSRhdHRyfSwgWyRzZWxmLT5lbmNvZGVfb2JqZWN0KCQkdmFsdWUpXSwgJHNlbGYtPmdlbl9pZCgkdmFsdWUpXSBpZiByZWYgJHZhbHVlOwoKICAgICMgYXV0b2RlZmluZWQgdHlwZQogICAgaWYgKCRzZWxmLT5hdXRvdHlwZSkgewogICAgICAgIG15ICRsb29rdXAgPSAkc2VsZi0+dHlwZWxvb2t1cCgpOwogICAgICAgIG5vIHN0cmljdCBxdyhyZWZzKTsKICAgICAgICBmb3IgKHNvcnQgeyRsb29rdXAtPnskYX0tPlswXSA8PT4gJGxvb2t1cC0+eyRifS0+WzBdfSBrZXlzICUkbG9va3VwKSB7CiAgICAgICAgICAgIG15ICRtZXRob2QgPSAkbG9va3VwLT57JF99LT5bMl07CiAgICAgICAgICAgIHJldHVybiAkc2VsZi0+Y2FuKCRtZXRob2QpICYmICRzZWxmLT4kbWV0aG9kKCR2YWx1ZSwgJG5hbWUsICR0eXBlLCAkYXR0cikKICAgICAgICAgICAgICAgIHx8ICRtZXRob2QtPigkdmFsdWUsICRuYW1lLCAkdHlwZSwgJGF0dHIpCiAgICAgICAgICAgICAgICAgICAgaWYgJGxvb2t1cC0+eyRffS0+WzFdLT4oJHZhbHVlKTsKICAgICAgICB9CiAgICB9CgogICAgIyBpbnZhcmlhbnQKICAgIHJldHVybiBbJG5hbWUsICRhdHRyLCAkdmFsdWVdOwp9CgpzdWIgZW5jb2RlX2FycmF5IHsKICAgIG15KCRzZWxmLCAkYXJyYXksICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CiAgICBteSAkaXRlbXMgPSAnaXRlbSc7CgogICAgIyBJZiB0eXBpbmcgaXMgZGlzYWJsZWQsIGp1c3Qgc2VyaWFsaXplIGVhY2ggb2YgdGhlIGFycmF5IGl0ZW1zCiAgICAjIHdpdGggbm8gdHlwZSBpbmZvcm1hdGlvbiwgZWFjaCB1c2luZyB0aGUgc3BlY2lmaWVkIG5hbWUsCiAgICAjIGFuZCBkbyBub3QgY3JldGUgYSB3cmFwcGVyIGFycmF5IHRhZy4KICAgIGlmICghJHNlbGYtPmF1dG90eXBlKSB7CiAgICAgICAgJG5hbWUgfHw9IGdlbl9uYW1lOwogICAgICAgIHJldHVybiBtYXAgeyRzZWxmLT5lbmNvZGVfb2JqZWN0KCRfLCAkbmFtZSl9IEAkYXJyYXk7CiAgICB9CgogICAgIyBUT0RPOiBhZGQgc3VwcG9ydCBmb3IgbXVsdGlkaW1lbnNpb25hbCwgcGFydGlhbGx5IHRyYW5zbWl0dGVkIGFuZCBzcGFyc2UgYXJyYXlzCiAgICBteSBAaXRlbXMgPSBtYXAgeyRzZWxmLT5lbmNvZGVfb2JqZWN0KCRfLCAkaXRlbXMpfSBAJGFycmF5OwogICAgbXkgJG51bSA9IEBpdGVtczsKICAgIG15KCRhcnJheXR5cGUsICV0eXBlcykgPSAnLSc7CiAgICBmb3IgKEBpdGVtcykgeyAkYXJyYXl0eXBlID0gJF8tPlsxXS0+eyd4c2k6dHlwZSd9IHx8ICctJzsgJHR5cGVzeyRhcnJheXR5cGV9KysgfQogICAgJGFycmF5dHlwZSA9IHNwcmludGYgIiVzXFskbnVtXSIsIGtleXMgJXR5cGVzID4gMSB8fCAkYXJyYXl0eXBlIGVxICctJyA/IFNPQVA6OlV0aWxzOjpxdWFsaWZ5KHhzZCA9PiAkc2VsZi0+eG1sc2NoZW1hY2xhc3MtPmFueVR5cGVWYWx1ZSkgOiAkYXJyYXl0eXBlOwoKICAgICMgJHR5cGUgPSBTT0FQOjpVdGlsczo6cXVhbGlmeSgkc2VsZi0+ZW5jcHJlZml4ID0+ICdBcnJheScpIGlmICRzZWxmLT5hdXRvdHlwZSAmJiAhZGVmaW5lZCAkdHlwZTsKICAgICR0eXBlID0gcXVhbGlmeSgkc2VsZi0+ZW5jcHJlZml4ID0+ICdBcnJheScpIGlmICFkZWZpbmVkICR0eXBlOwogICAgcmV0dXJuIFskbmFtZSB8fCBTT0FQOjpVdGlsczo6cXVhbGlmeSgkc2VsZi0+ZW5jcHJlZml4ID0+ICdBcnJheScpLAogICAgICAgICAgewogICAgICAgICAgICAgIFNPQVA6OlV0aWxzOjpxdWFsaWZ5KCRzZWxmLT5lbmNwcmVmaXggPT4gJ2FycmF5VHlwZScpID0+ICRhcnJheXR5cGUsCiAgICAgICAgICAgICAgJ3hzaTp0eXBlJyA9PiAkc2VsZi0+bWFwdHlwZXRvdXJpKCR0eXBlKSwgJSRhdHRyCiAgICAgICAgICB9LAogICAgICAgICAgW0BpdGVtc10sCiAgICAgICAgICAkc2VsZi0+Z2VuX2lkKCRhcnJheSkKICAgIF07Cn0KCiMgV2lsbCBlbmNvZGUgYXJyYXlzIHVzaW5nIGRvYy1saXRlcmFsIHN0eWxlCnN1YiBlbmNvZGVfbGl0ZXJhbF9hcnJheSB7CiAgICBteSgkc2VsZiwgJGFycmF5LCAkbmFtZSwgJHR5cGUsICRhdHRyKSA9IEBfOwoKICAgIGlmICgkc2VsZi0+YXV0b3R5cGUpIHsKICAgICAgICBteSAkaXRlbXMgPSAnaXRlbSc7CiAgICAKICAgICAgICAjIFRPRE86IGFkZCBzdXBwb3J0IGZvciBtdWx0aWRpbWVuc2lvbmFsLCBwYXJ0aWFsbHkgdHJhbnNtaXR0ZWQgYW5kIHNwYXJzZSBhcnJheXMKICAgICAgICBteSBAaXRlbXMgPSBtYXAgeyRzZWxmLT5lbmNvZGVfb2JqZWN0KCRfLCAkaXRlbXMpfSBAJGFycmF5OwoKICAgIAogICAgICAgIG15ICRudW0gPSBAaXRlbXM7CiAgICAgICAgbXkoJGFycmF5dHlwZSwgJXR5cGVzKSA9ICctJzsKICAgICAgICBmb3IgKEBpdGVtcykgewogICAgICAgICAgICRhcnJheXR5cGUgPSAkXy0+WzFdLT57J3hzaTp0eXBlJ30gfHwgJy0nOwogICAgICAgICAgICR0eXBlc3skYXJyYXl0eXBlfSsrCiAgICAgICAgfQogICAgICAgICRhcnJheXR5cGUgPSBzcHJpbnRmICIlc1xbJG51bV0iLCBrZXlzICV0eXBlcyA+IDEgfHwgJGFycmF5dHlwZSBlcSAnLScKICAgICAgICAgICAgPyBTT0FQOjpVdGlsczo6cXVhbGlmeSh4c2QgPT4gJHNlbGYtPnhtbHNjaGVtYWNsYXNzLT5hbnlUeXBlVmFsdWUpCiAgICAgICAgICAgIDogJGFycmF5dHlwZTsKICAgIAogICAgICAgICR0eXBlID0gU09BUDo6VXRpbHM6OnF1YWxpZnkoJHNlbGYtPmVuY3ByZWZpeCA9PiAnQXJyYXknKQogICAgICAgICAgICBpZiAhZGVmaW5lZCAkdHlwZTsKICAgIAogICAgICAgIHJldHVybiBbJG5hbWUgfHwgU09BUDo6VXRpbHM6OnF1YWxpZnkoJHNlbGYtPmVuY3ByZWZpeCA9PiAnQXJyYXknKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgU09BUDo6VXRpbHM6OnF1YWxpZnkoJHNlbGYtPmVuY3ByZWZpeCA9PiAnYXJyYXlUeXBlJykgPT4gJGFycmF5dHlwZSwKICAgICAgICAgICAgICAgICd4c2k6dHlwZScgPT4gJHNlbGYtPm1hcHR5cGV0b3VyaSgkdHlwZSksICUkYXR0cgogICAgICAgICAgICB9LAogICAgICAgICAgICBbIEBpdGVtcyBdLAogICAgICAgICAgICAkc2VsZi0+Z2VuX2lkKCRhcnJheSkKICAgICAgICBdOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgIwogICAgICAgICMgbGl0ZXJhbCBhcnJheXMgYXJlIGRpZmZlcmVudCAtIHsgYXJyYXkgPT4gWyA1LDYgXSB9CiAgICAgICAgIyByZXN1bHRzIGluIDxhcnJheT41PC9hcnJheT48YXJyYXk+NjwvYXJyYXk+CiAgICAgICAgIyBUaGlzIG1lYW5zIHRoYXQgaWYgdGhlcmUncyBhIGxpdGVyYWwgaW5zaWRlIHRoZSBhcnJheSAobm90IGEgCiAgICAgICAgIyByZWZlcmVuY2UpLCB3ZSBoYXZlIHRvIGVuY29kZSBpdCB0aGlzIHdheS4gSWYgdGhlcmUncyBvbmx5IAogICAgICAgICMgbmVzdGVkIHRhZ3MsIGVuY29kZSBhcyAKICAgICAgICAjIDxhcnJheT48Zm9vPjE8L2Zvbz48Zm9vPjI8L2Zvbz48L2FycmF5PgogICAgICAgICMKICAgICAgICAKICAgICAgICBteSAkbGl0ZXJhbCA9IHVuZGVmOwogICAgICAgIG15IEBpdGVtcyA9IG1hcCB7CiAgICAgICAgICAgIHJlZiAkXyAKICAgICAgICAgICAgICAgID8gJHNlbGYtPmVuY29kZV9vYmplY3QoJF8pCiAgICAgICAgICAgICAgICA6IGRvIHsKICAgICAgICAgICAgICAgICAgICAkbGl0ZXJhbCsrOwogICAgICAgICAgICAgICAgICAgICRfCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0gQCRhcnJheTsKCiAgICAgICAgaWYgKCRsaXRlcmFsKSB7CiAgICAgICAgICAgIHJldHVybiBtYXAgeyBbICRuYW1lICwgJGF0dHIgLCAkXywgJHNlbGYtPmdlbl9pZCgkYXJyYXkpIF0gfSBAaXRlbXM7CiAgICAgICAgfQogICAgICAgIGVsc2UgeyAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gWyRuYW1lIHx8IFNPQVA6OlV0aWxzOjpxdWFsaWZ5KCRzZWxmLT5lbmNwcmVmaXggPT4gJ0FycmF5JyksCiAgICAgICAgICAgICAgICAkYXR0ciwKICAgICAgICAgICAgICAgIFsgQGl0ZW1zIF0sCiAgICAgICAgICAgICAgICAkc2VsZi0+Z2VuX2lkKCRhcnJheSkKICAgICAgICAgICAgXTsgICAgICAgICAgICAKICAgICAgICB9CiAgICB9Cn0KCnN1YiBlbmNvZGVfaGFzaCB7CiAgICBteSgkc2VsZiwgJGhhc2gsICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CgogICAgaWYgKCRzZWxmLT5hdXRvdHlwZSAmJiBncmVwIHshLyRTT0FQOjpDb25zdGFudHM6OkVMTUFTSy9vfSBrZXlzICUkaGFzaCkgewogICAgICAgIHdhcm4gcXEhQ2Fubm90IGVuY29kZSBAe1skbmFtZSA/ICInJG5hbWUnIiA6ICd1bm5hbWVkJ119IGVsZW1lbnQgYXMgJ2hhc2gnLiBXaWxsIGJlIGVuY29kZWQgYXMgJ21hcCcgaW5zdGVhZFxuISBpZiAkXlc7CiAgICAgICAgcmV0dXJuICRzZWxmLT5hc19tYXAoJGhhc2gsICRuYW1lIHx8IGdlbl9uYW1lLCAkdHlwZSwgJGF0dHIpOwogICAgfQoKICAgICR0eXBlID0gJ1NPQVBTdHJ1Y3QnCiAgICAgICAgaWYgJHNlbGYtPmF1dG90eXBlICYmICFkZWZpbmVkKCR0eXBlKSAmJiBleGlzdHMgJHNlbGYtPm1hcHR5cGUtPntTT0FQU3RydWN0fTsKICAgIHJldHVybiBbJG5hbWUgfHwgZ2VuX25hbWUsCiAgICAgICAgICAkc2VsZi0+YXV0b3R5cGUgPyB7J3hzaTp0eXBlJyA9PiAkc2VsZi0+bWFwdHlwZXRvdXJpKCR0eXBlKSwgJSRhdHRyfSA6IHsgJSRhdHRyIH0sCiAgICAgICAgICBbbWFwIHskc2VsZi0+ZW5jb2RlX29iamVjdCgkaGFzaC0+eyRffSwgJF8pfSBrZXlzICUkaGFzaF0sCiAgICAgICAgICAkc2VsZi0+Z2VuX2lkKCRoYXNoKQogICAgXTsKfQoKc3ViIGFzX29yZGVyZWRfaGFzaCB7CiAgICBteSAoJHNlbGYsICR2YWx1ZSwgJG5hbWUsICR0eXBlLCAkYXR0cikgPSBAXzsKICAgIGRpZSAiTm90IGFuIEFSUkFZIHJlZmVyZW5jZSBmb3IgJ29yZGVyZWRfaGFzaCcgdHlwZSIgdW5sZXNzIFVOSVZFUlNBTDo6aXNhKCR2YWx1ZSA9PiAnQVJSQVknKTsKICAgIHJldHVybiBbICRuYW1lLCAkYXR0ciwKICAgICAgICBbbWFweyRzZWxmLT5lbmNvZGVfb2JqZWN0KEB7JHZhbHVlfVsyKiRfKzEsMiokX10pfSAwLi4kIyR2YWx1ZS8yIF0sCiAgICAgICAgJHNlbGYtPmdlbl9pZCgkdmFsdWUpCiAgICBdOwp9CgpzdWIgYXNfbWFwIHsKICAgIG15ICgkc2VsZiwgJHZhbHVlLCAkbmFtZSwgJHR5cGUsICRhdHRyKSA9IEBfOwogICAgZGllICJOb3QgYSBIQVNIIHJlZmVyZW5jZSBmb3IgJ21hcCcgdHlwZSIgdW5sZXNzIFVOSVZFUlNBTDo6aXNhKCR2YWx1ZSA9PiAnSEFTSCcpOwogICAgbXkgJHByZWZpeCA9ICgkc2VsZi0+bmFtZXNwYWNlcy0+eyRTT0FQOjpDb25zdGFudHM6Ok5TX0FQU30gfHw9ICdhcGFjaGVucycpOwogICAgbXkgQGl0ZW1zID0gbWFwIHsKICAgICAgICAkc2VsZi0+ZW5jb2RlX29iamVjdCgKICAgICAgICAgICAgU09BUDo6RGF0YS0+dHlwZSgKICAgICAgICAgICAgICAgIG9yZGVyZWRfaGFzaCA9PiBbCiAgICAgICAgICAgICAgICAgICAga2V5ID0+ICRfLAogICAgICAgICAgICAgICAgICAgIHZhbHVlID0+ICR2YWx1ZS0+eyRffQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICApLAogICAgICAgICAgICAnaXRlbScsCiAgICAgICAgICAgICcnCiAgICAgICAgKX0ga2V5cyAlJHZhbHVlOwogICAgcmV0dXJuIFsKICAgICAgICAkbmFtZSwKICAgICAgICB7J3hzaTp0eXBlJyA9PiAiJHByZWZpeDpNYXAiLCAlJGF0dHJ9LAogICAgICAgIFtAaXRlbXNdLAogICAgICAgICRzZWxmLT5nZW5faWQoJHZhbHVlKQogICAgXTsKfQoKc3ViIGFzX3htbCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkoJHZhbHVlLCAkbmFtZSwgJHR5cGUsICRhdHRyKSA9IEBfOwogICAgcmV0dXJuIFskbmFtZSwgeydfeG1sJyA9PiAxfSwgJHZhbHVlXTsKfQoKc3ViIHR5cGVjYXN0IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSgkdmFsdWUsICRuYW1lLCAkdHlwZSwgJGF0dHIpID0gQF87CiAgICByZXR1cm4gaWYgcmVmICR2YWx1ZTsgIyBza2lwIGNvbXBsZXggb2JqZWN0LCBjYWxsZXIga25vd3MgaG93IHRvIGRlYWwgd2l0aCBpdAogICAgcmV0dXJuIGlmICRzZWxmLT5hdXRvdHlwZSAmJiAhZGVmaW5lZCAkdHlwZTsgIyB3ZSBkb24ndCBrbm93LCBhdXRvdHlwZSBrbm93cwogICAgcmV0dXJuIFskbmFtZSwKICAgICAgICAgIHsoZGVmaW5lZCAkdHlwZSAmJiAkdHlwZSBndCAnJyA/ICgneHNpOnR5cGUnID0+ICRzZWxmLT5tYXB0eXBldG91cmkoJHR5cGUsICdzaW1wbGUgdHlwZScpKSA6ICgpKSwgJSRhdHRyfSwKICAgICAgICAgICR2YWx1ZQogICAgXTsKfQoKc3ViIHJlZ2lzdGVyX25zIHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldygpOwogICAgbXkgKCRucywkcHJlZml4KSA9IEBfOwogICAgJHByZWZpeCA9IGdlbl9ucyBpZiAhJHByZWZpeDsKICAgICRzZWxmLT57J19uYW1lc3BhY2VzJ30tPnskbnN9ID0gJHByZWZpeCBpZiAkbnM7Cn0KCnN1YiBmaW5kX3ByZWZpeCB7CiAgICBteSAoJHNlbGYsICRucykgPSBAXzsKICAgIHJldHVybiAoZXhpc3RzICRzZWxmLT57J19uYW1lc3BhY2VzJ30tPnskbnN9KQogICAgICAgID8gJHNlbGYtPnsnX25hbWVzcGFjZXMnfS0+eyRuc30KICAgICAgICA6ICgpOwp9CgpzdWIgZml4YXR0cnMgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICRkYXRhID0gc2hpZnQ7CiAgICBteSgkbmFtZSwgJGF0dHIpID0gKCRkYXRhLT5TT0FQOjpEYXRhOjpuYW1lLCB7JXskZGF0YS0+U09BUDo6RGF0YTo6YXR0cn19KTsKICAgIG15KCR4bWxucywgJHByZWZpeCkgPSAoJGRhdGEtPnVyaSwgJGRhdGEtPnByZWZpeCk7CiAgICB1bmxlc3MgKGRlZmluZWQoJHhtbG5zKSB8fCBkZWZpbmVkKCRwcmVmaXgpKSB7CiAgICAgICAgJHNlbGYtPnJlZ2lzdGVyX25zKCR4bWxucywkcHJlZml4KSB1bmxlc3MgKCRzZWxmLT51c2VfZGVmYXVsdF9ucyk7CiAgICAgICAgcmV0dXJuICgkbmFtZSwgJGF0dHIpOwogICAgfQogICAgJG5hbWUgfHw9IGdlbl9uYW1lOyAjIGxvY2FsIG5hbWUKICAgICRwcmVmaXggPSBnZW5fbnMgaWYgIWRlZmluZWQgJHByZWZpeCAmJiAkeG1sbnMgZ3QgJyc7CiAgICAkcHJlZml4ID0gJycKICAgICAgICBpZiBkZWZpbmVkICR4bWxucyAmJiAkeG1sbnMgZXEgJycKICAgICAgICAgICAgfHwgZGVmaW5lZCAkcHJlZml4ICYmICRwcmVmaXggZXEgJyc7CgogICAgJGF0dHItPntqb2luICc6JywgeG1sbnMgPT4gJHByZWZpeCB8fCAoKX0gPSAkeG1sbnMgaWYgZGVmaW5lZCAkeG1sbnM7CiAgICAkbmFtZSA9IGpvaW4gJzonLCAkcHJlZml4LCAkbmFtZSBpZiAkcHJlZml4OwoKICAgICRzZWxmLT5yZWdpc3Rlcl9ucygkeG1sbnMsJHByZWZpeCkgdW5sZXNzICgkc2VsZi0+dXNlX2RlZmF1bHRfbnMpOwoKICAgIHJldHVybiAoJG5hbWUsICRhdHRyKTsKCn0KCnN1YiB0b3FuYW1lIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAkbG9uZyA9IHNoaWZ0OwoKICAgIHJldHVybiAkbG9uZyB1bmxlc3MgJGxvbmcgPX4gL15ceyguKilcfSguKykkLzsKICAgIHJldHVybiBTT0FQOjpVdGlsczo6cXVhbGlmeSAkc2VsZi0+bmFtZXNwYWNlcy0+eyQxfSB8fD0gZ2VuX25zLCAkMjsKfQoKc3ViIGF0dHJzdG9xbmFtZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgJGF0dHJzID0gc2hpZnQ7CgogICAgcmV0dXJuIHsKICAgICAgICBtYXAgeyAvXlx7KC4qKVx9KC4rKSQvCiAgICAgICAgICAgID8gKCRzZWxmLT50b3FuYW1lKCRfKSA9PiAkMiBlcSAndHlwZScKICAgICAgICAgICAgICAgIHx8ICQyIGVxICdhcnJheVR5cGUnCiAgICAgICAgICAgICAgICAgICAgPyAkc2VsZi0+dG9xbmFtZSgkYXR0cnMtPnskX30pCiAgICAgICAgICAgICAgICAgICAgOiAkYXR0cnMtPnskX30pCiAgICAgICAgICAgIDogKCRfID0+ICRhdHRycy0+eyRffSkKICAgICAgICB9IGtleXMgJSRhdHRycwogICAgfTsKfQoKc3ViIHRhZyB7CiAgICBteSAoJHNlbGYsICR0YWcsICRhdHRycywgQHZhbHVlcykgPSBAXzsKICAgIG15ICR2YWx1ZSA9IGpvaW4gJycsIEB2YWx1ZXM7CiAgICBteSAkbGV2ZWwgPSAkc2VsZi0+bGV2ZWw7CiAgICBteSAkaW5kZW50ID0gJHNlbGYtPnJlYWRhYmxlID8gJyAnIHggKCgkbGV2ZWwtMSkqMikgOiAnJzsKCiAgICAjIGNoZWNrIGZvciBzcGVjaWFsIGF0dHJpYnV0ZQogICAgcmV0dXJuICIkaW5kZW50JHZhbHVlIiBpZiBleGlzdHMgJGF0dHJzLT57X3htbH0gJiYgZGVsZXRlICRhdHRycy0+e194bWx9OwoKICAgIGRpZSAiRWxlbWVudCAnJHRhZycgY2FuJ3QgYmUgYWxsb3dlZCBpbiB2YWxpZCBYTUwgbWVzc2FnZS4gRGllZC4iCiAgICAgICAgaWYgJHRhZyAhfiAvXig/IVt4WF1bbU1dW2xMXSkkU09BUDo6Q29uc3RhbnRzOjpOU01BU0skL287CgogICAgbXkgJHByb2xvZyA9ICRzZWxmLT5yZWFkYWJsZSA/ICJcbiIgOiAiIjsKICAgIG15ICRlcGlsb2cgPSAkc2VsZi0+cmVhZGFibGUgPyAiXG4iIDogIiI7CiAgICBteSAkdGFnam9pbmVyID0gIiAiOwogICAgaWYgKCRsZXZlbCA9PSAxKSB7CiAgICAgICAgbXkgJG5hbWVzcGFjZXMgPSAkc2VsZi0+bmFtZXNwYWNlczsKICAgICAgICBmb3JlYWNoIChrZXlzICUkbmFtZXNwYWNlcykgewogICAgICAgICAgICAkYXR0cnMtPntTT0FQOjpVdGlsczo6cXVhbGlmeSh4bWxucyA9PiAkbmFtZXNwYWNlcy0+eyRffSl9ID0gJF8KICAgICAgICB9CiAgICAgICAgJHByb2xvZyA9IHFxITw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IkB7WyRzZWxmLT5lbmNvZGluZ119Ij8+IQogICAgICAgICAgICBpZiBkZWZpbmVkICRzZWxmLT5lbmNvZGluZzsKICAgICAgICAkcHJvbG9nIC49ICJcbiIgaWYgJHNlbGYtPnJlYWRhYmxlOwogICAgICAgICR0YWdqb2luZXIgPSAiIFxuIi4oJyAnIHggKCgkbGV2ZWwrMSkgKiAyKSkgaWYgJHNlbGYtPnJlYWRhYmxlOwogICAgfQogICAgbXkgJHRhZ2F0dHJzID0gam9pbigkdGFnam9pbmVyLCAnJywKICAgICAgICBtYXAgeyBzcHJpbnRmICclcz0iJXMiJywgJF8sIFNPQVA6OlV0aWxzOjplbmNvZGVfYXR0cmlidXRlKCRhdHRycy0+eyRffSkgfQogICAgICAgICAgICBncmVwIHsgJF8gJiYgZGVmaW5lZCAkYXR0cnMtPnskX30gJiYgKCRfIG5lICd4c2k6dHlwZScgfHwgJGF0dHJzLT57JF99IG5lICcnKSB9CiAgICAgICAgICAgICAgICBrZXlzICUkYXR0cnMpOwoKICAgIGlmICgkdmFsdWUgZ3QgJycpIHsKICAgICAgICByZXR1cm4gc3ByaW50ZigiJHByb2xvZyRpbmRlbnQ8JXMlcz4lcyVzPC8lcz4kZXBpbG9nIiwkdGFnLCR0YWdhdHRycywkdmFsdWUsKCR2YWx1ZSA9fiAvXlxzKjwvID8gJGluZGVudCA6ICIiKSwkdGFnKTsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHJldHVybiBzcHJpbnRmKCIkcHJvbG9nJGluZGVudDwlcyVzIC8+JGVwaWxvZyRpbmRlbnQiLCR0YWcsJHRhZ2F0dHJzKTsKICAgIH0KfQoKc3ViIHhtbGl6ZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkoJG5hbWUsICRhdHRycywgJHZhbHVlcywgJGlkKSA9IEB7K3NoaWZ0fTsKICAgICRhdHRycyB8fD0ge307CgogICAgbG9jYWwgJHNlbGYtPntfbGV2ZWx9ID0gJHNlbGYtPntfbGV2ZWx9ICsgMTsKICAgIHJldHVybiAkc2VsZi0+dGFnKCRuYW1lLCAkYXR0cnMpCiAgICAgICAgdW5sZXNzIGRlZmluZWQgJHZhbHVlczsKICAgIHJldHVybiAkc2VsZi0+dGFnKCRuYW1lLCAkYXR0cnMsICR2YWx1ZXMpCiAgICAgICAgdW5sZXNzIFVOSVZFUlNBTDo6aXNhKCR2YWx1ZXMgPT4gJ0FSUkFZJyk7CiAgICByZXR1cm4gJHNlbGYtPnRhZygkbmFtZSwgeyUkYXR0cnMsIGhyZWYgPT4gJyMnLiRzZWxmLT5tdWx0aXJlZl9hbmNob3IoJGlkKX0pCiAgICAgICAgaWYgJHNlbGYtPmlzX2hyZWYoJGlkLCBkZWxldGUoJGF0dHJzLT57X2lkfSkpOwogICAgcmV0dXJuICRzZWxmLT50YWcoJG5hbWUsCiAgICAgICAgewogICAgICAgICAgICAlJGF0dHJzLCBpZCA9PiAkc2VsZi0+bXVsdGlyZWZfYW5jaG9yKCRpZCkKICAgICAgICB9LAogICAgICAgIG1hcCB7JHNlbGYtPnhtbGl6ZSgkXyl9IEAkdmFsdWVzCiAgICApOwp9CgpzdWIgdXJpZm9ybWV0aG9kIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CgogICAgbXkgJG1ldGhvZF9pc19kYXRhID0gcmVmICRfWzBdICYmIFVOSVZFUlNBTDo6aXNhKCRfWzBdID0+ICdTT0FQOjpEYXRhJyk7CgogICAgIyBkcm9wIHByZWZpeCBmcm9tIG1ldGhvZCB0aGF0IGNvdWxkIGJlIHN0cmluZyBvciBTT0FQOjpEYXRhIG9iamVjdAogICAgbXkoJHByZWZpeCwgJG1ldGhvZCkgPSAkbWV0aG9kX2lzX2RhdGEKICAgICAgICA/ICgkX1swXS0+cHJlZml4LCAkX1swXS0+bmFtZSkKICAgICAgICA6IFNPQVA6OlV0aWxzOjpzcGxpdHFuYW1lKCRfWzBdKTsKCiAgICBteSAkYXR0ciA9IHtyZXZlcnNlICV7JHNlbGYtPm5hbWVzcGFjZXN9fTsKICAgICMgdHJ5IHRvIGRlZmluZSBuYW1lc3BhY2UgdGhhdCBjb3VsZCBiZSBzdG9yZWQgYXMKICAgICMgICBhKSBtZXRob2QgaXMgU09BUDo6RGF0YQogICAgIyAgICAgICAgPyBhdHRyaWJ1dGUgaW4gbWV0aG9kJ3MgZWxlbWVudCBhcyB4bWxucz0gb3IgeG1sbnM6JHtwcmVmaXh9PQogICAgIyAgICAgICAgOiB1cmkKICAgICMgICBiKSBhdHRyaWJ1dGUgaW4gRW52ZWxvcGUgZWxlbWVudCBhcyB4bWxucz0gb3IgeG1sbnM6JHtwcmVmaXh9PQogICAgIyAgIGMpIG5vIHByZWZpeCBvciBwcmVmaXggZXF1YWwgc2VyaWFsaXplci0+ZW52cHJlZml4CiAgICAjICAgICAgICA/ICcnLCBidXQgc2VlIGNvbWVudCBiZWxvdwogICAgIyAgICAgICAgOiBkaWUgd2l0aCBlcnJvciBtZXNzYWdlCiAgICBteSAkdXJpID0gJG1ldGhvZF9pc19kYXRhCiAgICAgICAgPyByZWYgJF9bMF0tPmF0dHIgJiYgKCRfWzBdLT5hdHRyLT57JHByZWZpeCA/ICJ4bWxuczokcHJlZml4IiA6ICd4bWxucyd9IHx8ICRfWzBdLT51cmkpCiAgICAgICAgOiAkc2VsZi0+dXJpOwoKICAgIGRlZmluZWQgJHVyaSBvciAkdXJpID0gJGF0dHItPnskcHJlZml4IHx8ICcnfTsKCiAgICBkZWZpbmVkICR1cmkgb3IgJHVyaSA9ICEkcHJlZml4IHx8ICRwcmVmaXggZXEgJHNlbGYtPmVudnByZWZpeAogICAgIyBzdGlsbCBpbiBkb3VidHMgd2hhdCBzaG91bGQgbmFtZXNwYWNlIGJlIGluIHRoaXMgY2FzZQogICAgIyBidXQgd2lsbCBrZWVwIGl0IGxpa2UgdGhpcyBmb3Igbm93IGFuZCBiZSBjb21wYXRpYmxlIHdpdGggb3VyIHNlcnZlcgogICAgICAgID8gKCAkbWV0aG9kX2lzX2RhdGEKICAgICAgICAgICAgJiYgJF5XCiAgICAgICAgICAgICYmIHdhcm4oIlVSSSBpcyBub3QgcHJvdmlkZWQgYXMgYW4gYXR0cmlidXRlIGZvciBtZXRob2QgKCRtZXRob2QpXG4iKSwKICAgICAgICAgICAgJycKICAgICAgICAgICAgKQogICAgICAgIDogZGllICJDYW4ndCBmaW5kIG5hbWVzcGFjZSBmb3IgbWV0aG9kICgkcHJlZml4OiRtZXRob2QpXG4iOwoKICAgIHJldHVybiAoJHVyaSwgJG1ldGhvZCk7Cn0KCnN1YiBzZXJpYWxpemUgeyBTT0FQOjpUcmFjZTo6dHJhY2UoJygpJyk7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CiAgICBAXyA9PSAxIG9yIENhcnA6OmNyb2FrICJzZXJpYWxpemUoKSBtZXRob2QgYWNjZXB0cyBvbmUgcGFyYW1ldGVyIjsKCiAgICAkc2VsZi0+c2Vlbih7fSk7ICMgcmVpbml0aWFsaXplIG11bHRpcmVmIHRhYmxlCiAgICBteSgkZW5jb2RlZCkgPSAkc2VsZi0+ZW5jb2RlX29iamVjdCgkX1swXSk7CgogICAgIyBub3cgZW5jb2RlIG11bHRpcmVmcyBpZiBhbnkKICAgICMgICAgICAgICAgICAgICAgIHYgLS0tLS0tLS0tLS0tLS0gc3ViZWxlbWVudHMgb2YgRW52ZWxvcGUKICAgIHB1c2goQHskZW5jb2RlZC0+WzJdfSwgJHNlbGYtPmVuY29kZV9tdWx0aXJlZnMpIGlmIHJlZiAkZW5jb2RlZC0+WzJdOwogICAgcmV0dXJuICRzZWxmLT54bWxpemUoJGVuY29kZWQpOwp9CgpzdWIgZW52ZWxvcGUgewogICAgU09BUDo6VHJhY2U6OnRyYWNlKCcoKScpOwogICAgbXkgJHNlbGYgPSBzaGlmdC0+bmV3OwogICAgbXkgJHR5cGUgPSBzaGlmdDsKICAgIG15KEBwYXJhbWV0ZXJzLCBAaGVhZGVyKTsKICAgIGZvciAoQF8pIHsKICAgICAgICAjIEZpbmQgYWxsIHRoZSBTT0FQIEhlYWRlcnMKICAgICAgICBpZiAoZGVmaW5lZCgkXykgJiYgcmVmKCRfKSAmJiBVTklWRVJTQUw6OmlzYSgkXyA9PiAnU09BUDo6SGVhZGVyJykpIHsKICAgICAgICAgICAgcHVzaChAaGVhZGVyLCAkXyk7CiAgICAgICAgfQogICAgICAgICMgRmluZCBhbGwgdGhlIFNPQVAgTWVzc2FnZSBQYXJ0cyAoYXR0YWNobWVudHMpCiAgICAgICAgZWxzaWYgKGRlZmluZWQoJF8pICYmIHJlZigkXykgJiYgJHNlbGYtPmNvbnRleHQKICAgICAgICAgICAgJiYgJHNlbGYtPmNvbnRleHQtPnBhY2thZ2VyLT5pc19zdXBwb3J0ZWRfcGFydCgkXykKICAgICAgICApIHsKICAgICAgICAgICAgJHNlbGYtPmNvbnRleHQtPnBhY2thZ2VyLT5wdXNoX3BhcnQoJF8pOwogICAgICAgIH0KICAgICAgICAjIEZpbmQgYWxsIHRoZSBTT0FQIEJvZHkgZWxlbWVudHMKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgIyBwcm9wb3NlZCByZXNvbHV0aW9uIGZvciBbIDE3MDAzMjYgXSBlbmNvZGVfZGF0YSBjYWxsZWQgaW5jb3JyZWN0bHkgaW4gZW52ZWxvcGUKICAgICAgICAgICAgcHVzaChAcGFyYW1ldGVycywgJF8pOwogICAgICAgICAgICAjIHB1c2ggKEBwYXJhbWV0ZXJzLCBTT0FQOjpVdGlsczo6ZW5jb2RlX2RhdGEoJF8pKTsKICAgICAgICB9CiAgICB9CiAgICBteSAkaGVhZGVyID0gQGhlYWRlciA/IFNPQVA6OkRhdGEtPnNldF92YWx1ZShAaGVhZGVyKSA6IHVuZGVmOwogICAgbXkoJGJvZHksJHBhcmFtZXRlcnMpOwogICAgaWYgKCR0eXBlIGVxICdtZXRob2QnIHx8ICR0eXBlIGVxICdyZXNwb25zZScpIHsKICAgICAgICBTT0FQOjpUcmFjZTo6bWV0aG9kKEBwYXJhbWV0ZXJzKTsKCiAgICAgICAgbXkgJG1ldGhvZCA9IHNoaWZ0KEBwYXJhbWV0ZXJzKTsKICAgICAgICAjICBvciBkaWUgIlVuc3BlY2lmaWVkIG1ldGhvZCBmb3IgU09BUCBjYWxsXG4iOwoKICAgICAgICAkcGFyYW1ldGVycyA9IEBwYXJhbWV0ZXJzID8gU09BUDo6RGF0YS0+c2V0X3ZhbHVlKEBwYXJhbWV0ZXJzKSA6IHVuZGVmOwogICAgICAgIGlmICghZGVmaW5lZCgkbWV0aG9kKSkge30KICAgICAgICBlbHNpZiAoVU5JVkVSU0FMOjppc2EoJG1ldGhvZCA9PiAnU09BUDo6RGF0YScpKSB7CiAgICAgICAgICAgICRib2R5ID0gJG1ldGhvZDsKICAgICAgICB9CiAgICAgICAgZWxzaWYgKCRzZWxmLT51c2VfZGVmYXVsdF9ucykgewogICAgICAgICAgICBpZiAoJHNlbGYtPnsnX25zX3VyaSd9KSB7CiAgICAgICAgICAgICAgICAkYm9keSA9IFNPQVA6OkRhdGEtPm5hbWUoJG1ldGhvZCkKICAgICAgICAgICAgICAgICAgICAtPmF0dHIoeyd4bWxucycgPT4gJHNlbGYtPnsnX25zX3VyaSd9IH0gKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRib2R5ID0gU09BUDo6RGF0YS0+bmFtZSgkbWV0aG9kKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgIyBDb21tZW50ZWQgb3V0IGJ5IEJ5cm5lIG9uIDEvNC8yMDA2IC0gdG8gYWRkcmVzcyBkZWZhdWx0IG5hbWVzcGFjZSBwcm9ibGVtcwogICAgICAgICAgICAjICAgICAgJGJvZHkgPSBTT0FQOjpEYXRhLT5uYW1lKCRtZXRob2QpLT51cmkoJHNlbGYtPnsnX25zX3VyaSd9KTsKICAgICAgICAgICAgIyAgICAgICRib2R5ID0gJGJvZHktPnByZWZpeCgkc2VsZi0+eydfbnNfcHJlZml4J30pIGlmICgkc2VsZi0+eydfbnNfcHJlZml4J30pOwoKICAgICAgICAgICAgIyBBZGRlZCBieSBCeXJuZSBvbiAxLzQvMjAwNiAtIHRvIGF2b2lkIHRoZSB1bm5lY2Vzc2FyeSBjcmVhdGlvbiBvZiBhIG5ldwogICAgICAgICAgICAjIG5hbWVzcGFjZQogICAgICAgICAgICAjIEJlZ2luIE5ldyBDb2RlIChyZXBsYWNlcyBjb2RlIGNvbW1lbnRlZCBvdXQgYWJvdmUpCiAgICAgICAgICAgICRib2R5ID0gU09BUDo6RGF0YS0+bmFtZSgkbWV0aG9kKTsKICAgICAgICAgICAgbXkgJHByZSA9ICRzZWxmLT5maW5kX3ByZWZpeCgkc2VsZi0+eydfbnNfdXJpJ30pOwogICAgICAgICAgICAkYm9keSA9ICRib2R5LT5wcmVmaXgoJHByZSkgaWYgKCRzZWxmLT57J19uc19wcmVmaXgnfSk7CiAgICAgICAgICAgICMgRW5kIG5ldyBjb2RlCiAgICAgICAgfQoKICAgICAgICAjIFRoaXMgaXMgYnJlYWtpbmcgYSB1bml0IHRlc3QgcmlnaHQgbm93Li4uCiAgICAgICAgIyBwcm9wb3NlZCByZXNvbHV0aW9uIGZvciBbIDE3MDAzMjYgXSBlbmNvZGVfZGF0YSBjYWxsZWQgaW5jb3JyZWN0bHkgaW4gZW52ZWxvcGUKICAgICAgICAjICAgICRib2R5LT5zZXRfdmFsdWUoU09BUDo6VXRpbHM6OmVuY29kZV9kYXRhKCRwYXJhbWV0ZXJzID8gXCRwYXJhbWV0ZXJzIDogKCkpKQogICAgICAgICMgICAgICBpZiAkYm9keTsKICAgICAgICAjIG11c3QgY2FsbCBlbmNvZGVfZGF0YSBvbiBub3RoaW5nIHRvIGVuZm9yY2UgeHNpOm5pbD0idHJ1ZSIgdG8gYmUgc2V0LgogICAgICAgICRib2R5LT5zZXRfdmFsdWUoJHBhcmFtZXRlcnMgPyBcJHBhcmFtZXRlcnMgOiBTT0FQOjpVdGlsczo6ZW5jb2RlX2RhdGEoKSkgaWYgJGJvZHk7CiAgICB9CiAgICBlbHNpZiAoJHR5cGUgZXEgJ2ZhdWx0JykgewogICAgICAgIFNPQVA6OlRyYWNlOjpmYXVsdChAcGFyYW1ldGVycyk7CiAgICAgICAgIyAtPiBhdHRyKHsneG1sbnMnID0+ICcnfSkKICAgICAgICAjIFBhcmFtZXRlciBvcmRlciBmaXhlZCB0aGFua3MgdG8gVG9tIEZpc2NoZXIKICAgICAgICAkYm9keSA9IFNPQVA6OkRhdGEtPiBuYW1lKFNPQVA6OlV0aWxzOjpxdWFsaWZ5KCRzZWxmLT5lbnZwcmVmaXggPT4gJ0ZhdWx0JykpCiAgICAgICAgICAtPiB2YWx1ZShcU09BUDo6RGF0YS0+c2V0X3ZhbHVlKAogICAgICAgICAgICAgICAgU09BUDo6RGF0YS0+bmFtZShmYXVsdGNvZGUgPT4gU09BUDo6VXRpbHM6OnF1YWxpZnkoJHNlbGYtPmVudnByZWZpeCA9PiAkcGFyYW1ldGVyc1swXSkpLT50eXBlKCIiKSwKICAgICAgICAgICAgICAgIFNPQVA6OkRhdGEtPm5hbWUoZmF1bHRzdHJpbmcgPT4gU09BUDo6VXRpbHM6OmVuY29kZV9kYXRhKCRwYXJhbWV0ZXJzWzFdKSktPnR5cGUoIiIpLAogICAgICAgICAgICAgICAgZGVmaW5lZCgkcGFyYW1ldGVyc1szXSkKICAgICAgICAgICAgICAgICAgICA/IFNPQVA6OkRhdGEtPm5hbWUoZmF1bHRhY3RvciA9PiAkcGFyYW1ldGVyc1szXSktPnR5cGUoIiIpCiAgICAgICAgICAgICAgICAgICAgOiAoKSwKICAgICAgICAgICAgICAgIGRlZmluZWQoJHBhcmFtZXRlcnNbMl0pCiAgICAgICAgICAgICAgICAgICAgPyBTT0FQOjpEYXRhLT5uYW1lKGRldGFpbCA9PiBkb3sKICAgICAgICAgICAgICAgICAgICAgICAgbXkgJGRldGFpbCA9ICRwYXJhbWV0ZXJzWzJdOwogICAgICAgICAgICAgICAgICAgICAgICByZWYgJGRldGFpbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcJGRldGFpbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBTT0FQOjpVdGlsczo6ZW5jb2RlX2RhdGEoJGRldGFpbCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIDogKCksCiAgICAgICAgKSk7CiAgICB9CiAgICBlbHNpZiAoJHR5cGUgZXEgJ2ZyZWVmb3JtJykgewogICAgICAgIFNPQVA6OlRyYWNlOjpmcmVlZm9ybShAcGFyYW1ldGVycyk7CiAgICAgICAgJGJvZHkgPSBTT0FQOjpEYXRhLT5zZXRfdmFsdWUoQHBhcmFtZXRlcnMpOwogICAgfQogICAgZWxzaWYgKCFkZWZpbmVkKCR0eXBlKSkgewogICAgICAgICMgVGhpcyBvY2N1cnMgd2hlbiB0aGUgQm9keSBpcyBpbnRlbmRlZCB0byBiZSBudWxsLiBXaGVuIG5vIG1ldGhvZCBoYXMgYmVlbgogICAgICAgICMgcGFzc2VkIGluIG9mIGFueSBraW5kLgogICAgfQogICAgZWxzZSB7CiAgICAgICAgZGllICJXcm9uZyB0eXBlIG9mIGVudmVsb3BlICgkdHlwZSkgZm9yIFNPQVAgY2FsbFxuIjsKICAgIH0KCiAgICAkc2VsZi0+c2Vlbih7fSk7ICMgcmVpbml0aWFsaXplIG11bHRpcmVmIHRhYmxlCiAgICAjIEJ1aWxkIHRoZSBlbnZlbG9wZQogICAgIyBSaWdodCBub3cgaXQgaXMgcG9zc2libGUgZm9yICRib2R5IHRvIGJlIGEgU09BUDo6RGF0YSBlbGVtZW50IHRoYXQgaGFzIG5vdAogICAgIyBYTUwgZXNjYXBlZCBhbnkgdmFsdWVzLiBIb3cgZG8geW91IHJlbWVkeSB0aGlzPwogICAgbXkoJGVuY29kZWQpID0gJHNlbGYtPmVuY29kZV9vYmplY3QoCiAgICAgICAgU09BUDo6RGF0YS0+bmFtZSgKICAgICAgICAgICAgU09BUDo6VXRpbHM6OnF1YWxpZnkoJHNlbGYtPmVudnByZWZpeCA9PiAnRW52ZWxvcGUnKSA9PiBcU09BUDo6RGF0YS0+dmFsdWUoCiAgICAgICAgICAgICAgICAoJGhlYWRlcgogICAgICAgICAgICAgICAgICAgID8gU09BUDo6RGF0YS0+bmFtZSggU09BUDo6VXRpbHM6OnF1YWxpZnkoJHNlbGYtPmVudnByZWZpeCA9PiAnSGVhZGVyJykgPT4gXCRoZWFkZXIpCiAgICAgICAgICAgICAgICAgICAgOiAoKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICgkYm9keQogICAgICAgICAgICAgICAgICAgID8gU09BUDo6RGF0YS0+bmFtZShTT0FQOjpVdGlsczo6cXVhbGlmeSgkc2VsZi0+ZW52cHJlZml4ID0+ICdCb2R5JykgPT4gXCRib2R5KQogICAgICAgICAgICAgICAgICAgIDogU09BUDo6RGF0YS0+bmFtZShTT0FQOjpVdGlsczo6cXVhbGlmeSgkc2VsZi0+ZW52cHJlZml4ID0+ICdCb2R5JykpICksCiAgICAgICAgICAgICkKICAgICAgICApLT5hdHRyKCRzZWxmLT5hdHRyKQogICAgKTsKCiAgICAkc2VsZi0+c2lnbmF0dXJlKCRwYXJhbWV0ZXJzLT5zaWduYXR1cmUpIGlmIHJlZiAkcGFyYW1ldGVyczsKCiAgICAjIElNSE8gbXVsdGlyZWZzIHNob3VsZCBiZSBlbmNvZGVkIGFmdGVyIEJvZHksIGJ1dCBvbmx5IHNvbWUKICAgICMgdG9vbGtpdHMgdW5kZXJzdGFuZCB0aGlzIGVuY29kaW5nLCBzbyB3ZSdsbCBrZWVwIHRoZW0gZm9yIG5vdyAoMDQvMTUvMjAwMSkKICAgICMgYXMgdGhlIGxhc3QgZWxlbWVudCBpbnNpZGUgdGhlIEJvZHkKICAgICMgICAgICAgICAgICAgICAgIHYgLS0tLS0tLS0tLS0tLS0gc3ViZWxlbWVudHMgb2YgRW52ZWxvcGUKICAgICMgICAgICAgICAgICAgICAgICAgICAgdnYgLS0tLS0tLS0gbGFzdCBvZiB0aGVtIChCb2R5KQogICAgIyAgICAgICAgICAgICAgICAgICAgICAgICAgICB2IC0tLSBzdWJlbGVtZW50cwogICAgcHVzaChAeyRlbmNvZGVkLT5bMl0tPlstMV0tPlsyXX0sICRzZWxmLT5lbmNvZGVfbXVsdGlyZWZzKSBpZiByZWYgJGVuY29kZWQtPlsyXS0+Wy0xXS0+WzJdOwoKICAgICMgU29tZXRpbWVzIFNPQVA6OlNlcmlhbGl6ZXIgaXMgaW52b2tlZCBzdGF0aWNhbGx5IHdoZW4gdGhlcmUgaXMgbm8gY29udGV4dC4KICAgICMgU28gZmlyc3QgY2hlY2sgdG8gc2VlIGlmIGEgY29udGV4dCBleGlzdHMuCiAgICAjIFRPRE8gLSBhIGNvbnRleHQgbmVlZHMgdG8gYmUgaW5pdGlhbGl6ZWQgYnkgYSBjb25zdHJ1Y3Rvcj8KICAgIGlmICgkc2VsZi0+Y29udGV4dCAmJiAkc2VsZi0+Y29udGV4dC0+cGFja2FnZXItPnBhcnRzKSB7CiAgICAgICAgIyBUT0RPIC0gdGhpcyBuZWVkcyB0byBiZSBjYWxsZWQhIENhbGxpbmcgaXQgdGhvdWdoIHdyYXBzIHRoZSBwYXlsb2FkIHR3aWNlIQogICAgICAgICMgIHJldHVybiAkc2VsZi0+Y29udGV4dC0+cGFja2FnZXItPnBhY2thZ2UoJHNlbGYtPnhtbGl6ZSgkZW5jb2RlZCkpOwogICAgfQoKICAgIHJldHVybiAkc2VsZi0+eG1saXplKCRlbmNvZGVkKTsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlBhcnNlcjsKCnN1YiBERVNUUk9ZIHsgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJykgfQoKc3ViIHhtbHBhcnNlciB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgcmV0dXJuIGV2YWwgewogICAgICAgICRTT0FQOjpDb25zdGFudHM6OkRPX05PVF9VU0VfWE1MX1BBUlNFUgogICAgICAgICAgICA/IHVuZGVmCiAgICAgICAgICAgIDogZG8gewogICAgICAgICAgICAgICAgcmVxdWlyZSBYTUw6OlBhcnNlcjsKICAgICAgICAgICAgICAgIFhNTDo6UGFyc2VyLT5uZXcoKSB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgfHwgZXZhbCB7IHJlcXVpcmUgWE1MOjpQYXJzZXI6OkxpdGU7IFhNTDo6UGFyc2VyOjpMaXRlLT5uZXcgfQogICAgICAgICAgICB8fCBkaWUgIlhNTDo6UGFyc2VyIGlzIG5vdCBAe1skU09BUDo6Q29uc3RhbnRzOjpET19OT1RfVVNFX1hNTF9QQVJTRVIgPyAndXNlZCcgOiAnYXZhaWxhYmxlJ119IGFuZCAiLCAkQDsKfQoKc3ViIHBhcnNlciB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CiAgICBAXwogICAgICAgID8gZG8gewogICAgICAgICAgICAkc2VsZi0+eydfcGFyc2VyJ30gPSBzaGlmdDsKICAgICAgICAgICAgcmV0dXJuICRzZWxmOwogICAgICAgIH0KICAgICAgICA6IHJldHVybiAoJHNlbGYtPnsnX3BhcnNlcid9IHx8PSAkc2VsZi0+eG1scGFyc2VyKTsKfQoKc3ViIG5ldyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgcmV0dXJuICRzZWxmIGlmIHJlZiAkc2VsZjsKICAgIG15ICRjbGFzcyA9ICRzZWxmOwogICAgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJyk7CiAgICByZXR1cm4gYmxlc3Mge19wYXJzZXIgPT4gc2hpZnR9LCAkY2xhc3M7Cn0KCnN1YiBkZWNvZGUgeyBTT0FQOjpUcmFjZTo6dHJhY2UoJygpJyk7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwoKICAgICRzZWxmLT5wYXJzZXItPnNldEhhbmRsZXJzKAogICAgICAgIEZpbmFsID0+IHN1YiB7IHNoaWZ0OyAkc2VsZi0+ZmluYWwoQF8pIH0sCiAgICAgICAgU3RhcnQgPT4gc3ViIHsgc2hpZnQ7ICRzZWxmLT5zdGFydChAXykgfSwKICAgICAgICBFbmQgICA9PiBzdWIgeyBzaGlmdDsgJHNlbGYtPmVuZChAXykgICB9LAogICAgICAgIENoYXIgID0+IHN1YiB7IHNoaWZ0OyAkc2VsZi0+Y2hhcihAXykgIH0sCiAgICAgICAgRXh0ZXJuRW50ID0+IHN1YiB7IHNoaWZ0OyBkaWUgIkV4dGVybmFsIGVudGl0eSAocG9pbnRpbmcgdG8gJyRfWzFdJykgaXMgbm90IGFsbG93ZWQiIH0sCiAgICApOwogICAgIyBteSAkcGFyc2VkID0gJHNlbGYtPnBhcnNlci0+cGFyc2UoJF9bMF0pOwogICAgIyByZXR1cm4gJHBhcnNlZDsKICAgICMKICAgIG15ICRyZXQgPSB1bmRlZjsKICAgIGV2YWwgewogICAgICAgICRyZXQgPSAkc2VsZi0+cGFyc2VyLT5wYXJzZSgkX1swXSk7CiAgICB9OwogICAgaWYgKCRAKSB7CiAgICAgICAgJHNlbGYtPmZpbmFsOyAjIENsZWFuIHVwIGluIHRoZSBldmVudCBvZiBhbiBlcnJvcgogICAgICAgIGRpZSAkQDsgIyBQYXNzIGJhY2sgdGhlIGVycm9yCiAgICB9CiAgICByZXR1cm4gJHJldDsKfQoKc3ViIGZpbmFsIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CgogICAgIyBjbGVhbiBoYW5kbGVycywgb3RoZXJ3aXNlIFNPQVA6OlBhcnNlciB3b24ndCBiZSBkZWxldGVkOgogICAgIyBpdCByZWZlcnMgdG8gWE1MOjpQYXJzZXIgd2hpY2ggcmVmZXJzIHRvIHN1YnMgZnJvbSBTT0FQOjpQYXJzZXIKICAgICMgVGhhbmtzIHRvIFJ5YW4gQWRhbXMgPGljZW1hbkBtaXQuZWR1PgogICAgIyBhbmQgQ3JhaWcgSm9obnN0b24gPGNyYWlnLmpvaG5zdG9uQHByZXNzcGxheS5jb20+CiAgICAjIGNoZWNrZWQgYnkgbnVtYmVyIG9mIHRlc3RzIGluIHQvMDItcGF5bG9hZC50CgogICAgdW5kZWYgJHNlbGYtPntfdmFsdWVzfTsKICAgICRzZWxmLT5wYXJzZXItPnNldEhhbmRsZXJzKAogICAgICAgIEZpbmFsID0+IHVuZGVmLAogICAgICAgIFN0YXJ0ID0+IHVuZGVmLAogICAgICAgIEVuZCA9PiB1bmRlZiwKICAgICAgICBDaGFyID0+IHVuZGVmLAogICAgICAgIEV4dGVybkVudCA9PiB1bmRlZiwKICAgICk7CiAgICAkc2VsZi0+e19kb25lfTsKfQoKc3ViIHN0YXJ0IHsgcHVzaCBAe3NoaWZ0LT57X3ZhbHVlc319LCBbc2hpZnQsIHtAX31dIH0KCiMgc3RyaW5nIGNvbmNhdGVuYXRpb24gY2hhbmdlZCB0byBhcnJheXMgd2hpY2ggc2hvdWxkIGltcHJvdmUgcGVyZm9ybWFuY2UKIyBmb3Igc3RyaW5ncyB3aXRoIG1hbnkgZW50aXR5LWVuY29kZWQgZWxlbWVudHMuCiMgVGhhbmtzIHRvIE1hdGhpZXUgTG9uZ3RpbiA8bXJkYW1uZnJlbmNoeUB5YWhvby5jb20+CnN1YiBjaGFyIHsgcHVzaCBAe3NoaWZ0LT57X3ZhbHVlc30tPlstMV0tPlszXX0sIHNoaWZ0IH0KCnN1YiBlbmQgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICRkb25lID0gcG9wIEB7JHNlbGYtPntfdmFsdWVzfX07CiAgICAkZG9uZS0+WzJdID0gZGVmaW5lZCAkZG9uZS0+WzNdCiAgICAgICAgPyBqb2luKCcnLEB7JGRvbmUtPlszXX0pCiAgICAgICAgOiAnJyB1bmxlc3MgcmVmICRkb25lLT5bMl07CiAgICB1bmRlZiAkZG9uZS0+WzNdOwogICAgQHskc2VsZi0+e192YWx1ZXN9fQogICAgICAgID8gKHB1c2ggQHskc2VsZi0+e192YWx1ZXN9LT5bLTFdLT5bMl19LCAkZG9uZSkKICAgICAgICA6ICgkc2VsZi0+e19kb25lfSA9ICRkb25lKTsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlNPTTsKCnVzZSBDYXJwICgpOwp1c2UgU09BUDo6TGl0ZTo6VXRpbHM7CgpzdWIgQkVHSU4gewogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgIG15ICVwYXRoID0gKAogICAgICAgIHJvb3QgICAgICAgID0+ICcvJywKICAgICAgICBlbnZlbG9wZSAgICA9PiAnL0VudmVsb3BlJywKICAgICAgICBib2R5ICAgICAgICA9PiAnL0VudmVsb3BlL0JvZHknLAogICAgICAgIGhlYWRlciAgICAgID0+ICcvRW52ZWxvcGUvSGVhZGVyJywKICAgICAgICBoZWFkZXJzICAgICA9PiAnL0VudmVsb3BlL0hlYWRlci9bPjBdJywKICAgICAgICBmYXVsdCAgICAgICA9PiAnL0VudmVsb3BlL0JvZHkvRmF1bHQnLAogICAgICAgIGZhdWx0Y29kZSAgID0+ICcvRW52ZWxvcGUvQm9keS9GYXVsdC9mYXVsdGNvZGUnLAogICAgICAgIGZhdWx0c3RyaW5nID0+ICcvRW52ZWxvcGUvQm9keS9GYXVsdC9mYXVsdHN0cmluZycsCiAgICAgICAgZmF1bHRhY3RvciAgPT4gJy9FbnZlbG9wZS9Cb2R5L0ZhdWx0L2ZhdWx0YWN0b3InLAogICAgICAgIGZhdWx0ZGV0YWlsID0+ICcvRW52ZWxvcGUvQm9keS9GYXVsdC9kZXRhaWwnLAogICAgKTsKICAgIGZvciBteSAkbWV0aG9kIChrZXlzICVwYXRoKSB7CiAgICAgICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgICAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgICAgICAgICByZWYgJHNlbGYgb3IgcmV0dXJuICRwYXRoeyRtZXRob2R9OwogICAgICAgICAgICBDYXJwOjpjcm9hayAiTWV0aG9kICckbWV0aG9kJyBpcyByZWFkb25seSBhbmQgZG9lc24ndCBhY2NlcHQgYW55IHBhcmFtZXRlcnMiIGlmIEBfOwogICAgICAgICAgICByZXR1cm4gJHNlbGYtPnZhbHVlb2YoJHBhdGh7JG1ldGhvZH0pOwogICAgICAgIH07CiAgICB9CiAgICBteSAlcmVzdWx0cyA9ICgKICAgICAgICBtZXRob2QgICAgPT4gJy9FbnZlbG9wZS9Cb2R5L1sxXScsCiAgICAgICAgcmVzdWx0ICAgID0+ICcvRW52ZWxvcGUvQm9keS9bMV0vWzFdJywKICAgICAgICBmcmVlZm9ybSAgPT4gJy9FbnZlbG9wZS9Cb2R5L1s+MF0nLAogICAgICAgIHBhcmFtc2luICA9PiAnL0VudmVsb3BlL0JvZHkvWzFdL1s+MF0nLAogICAgICAgIHBhcmFtc2FsbCA9PiAnL0VudmVsb3BlL0JvZHkvWzFdL1s+MF0nLAogICAgICAgIHBhcmFtc291dCA9PiAnL0VudmVsb3BlL0JvZHkvWzFdL1s+MV0nCiAgICApOwogICAgZm9yIG15ICRtZXRob2QgKGtleXMgJXJlc3VsdHMpIHsKICAgICAgICAqJG1ldGhvZCA9IHN1YiB7CiAgICAgICAgICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICAgICAgICAgIHJlZiAkc2VsZiBvciByZXR1cm4gJHJlc3VsdHN7JG1ldGhvZH07CiAgICAgICAgICAgIENhcnA6OmNyb2FrICJNZXRob2QgJyRtZXRob2QnIGlzIHJlYWRvbmx5IGFuZCBkb2Vzbid0IGFjY2VwdCBhbnkgcGFyYW1ldGVycyIgaWYgQF87CiAgICAgICAgICAgIGRlZmluZWQgJHNlbGYtPmZhdWx0ID8gcmV0dXJuIDogcmV0dXJuICRzZWxmLT52YWx1ZW9mKCRyZXN1bHRzeyRtZXRob2R9KTsKICAgICAgICB9OwogICAgfQoKICAgIGZvciBteSAkbWV0aG9kIChxdyhvX2NoaWxkIG9fdmFsdWUgb19sbmFtZSBvX2xhdHRyIG9fcW5hbWUpKSB7ICMgaW1wb3J0IGZyb20gU09BUDo6VXRpbHMKICAgICAgICAqJG1ldGhvZCA9IFwmeydTT0FQOjpVdGlsczo6Jy4kbWV0aG9kfTsKICAgIH0KCiAgICBfX1BBQ0tBR0VfXy0+X19ta19hY2Nlc3NvcnMoJ2NvbnRleHQnKTsKCn0KCiMgdXNlIG9iamVjdCBpbiBib29sZWFuIGNvbnRleHQgcmV0dXJuIHRydWUvZmFsc2Ugb24gbGFzdCBtYXRjaAojIEV4LjogJHNvbS0+bWF0Y2goJy8vRmF1bHQnKSA/ICdTT0FQIGNhbGwgZmFpbGVkJyA6ICdzdWNjZXNzJzsKdXNlIG92ZXJsb2FkIGZhbGxiYWNrID0+IDEsICdib29sJyAgPT4gc3ViIHsgQHtzaGlmdC0+e19jdXJyZW50fX0gPiAwIH07CgpzdWIgREVTVFJPWSB7IFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpIH0KCnN1YiBuZXcgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICRjbGFzcyA9IHJlZigkc2VsZikgfHwgJHNlbGY7CiAgICBteSAkY29udGVudCA9IHNoaWZ0OwogICAgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJyk7CiAgICByZXR1cm4gYmxlc3MgeyBfY29udGVudCA9PiAkY29udGVudCwgX2N1cnJlbnQgPT4gWyRjb250ZW50XSB9ID0+ICRjbGFzczsKfQoKc3ViIHBhcnRzIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBpZiAoQF8pIHsKICAgICAgICAkc2VsZi0+Y29udGV4dC0+cGFja2FnZXItPnBhcnRzKEBfKTsKICAgICAgICByZXR1cm4gJHNlbGY7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICByZXR1cm4gJHNlbGYtPmNvbnRleHQtPnBhY2thZ2VyLT5wYXJ0czsKICAgIH0KfQoKc3ViIGlzX211bHRpcGFydCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgcmV0dXJuIGRlZmluZWQoJHNlbGYtPnBhcnRzKTsKfQoKc3ViIGN1cnJlbnQgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICRzZWxmLT57X2N1cnJlbnR9ID0gW0BfXSwgcmV0dXJuICRzZWxmIGlmIEBfOwogICAgcmV0dXJuIHdhbnRhcnJheSA/IEB7JHNlbGYtPntfY3VycmVudH19IDogJHNlbGYtPntfY3VycmVudH0tPlswXTsKfQoKc3ViIHZhbHVlb2YgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIGxvY2FsICRzZWxmLT57X2N1cnJlbnR9ID0gJHNlbGYtPntfY3VycmVudH07CiAgICAkc2VsZi0+bWF0Y2goc2hpZnQpIGlmIEBfOwogICAgcmV0dXJuIHdhbnRhcnJheQogICAgICAgID8gbWFwIHtvX3ZhbHVlKCRfKX0gQHskc2VsZi0+e19jdXJyZW50fX0KICAgICAgICA6IEB7JHNlbGYtPntfY3VycmVudH19ID8gb192YWx1ZSgkc2VsZi0+e19jdXJyZW50fS0+WzBdKSA6IHVuZGVmOwp9CgpzdWIgaGVhZGVyb2YgeyAjIFNPQVA6OkhlYWRlciBpcyB0aGUgc2FtZSBhcyBTT0FQOjpEYXRhLCBzbyBqdXN0IHJlYmxlc3MgaXQKICAgIHdhbnRhcnJheQogICAgICAgID8gbWFwIHsgYmxlc3MgJF8gPT4gJ1NPQVA6OkhlYWRlcicgfSBzaGlmdC0+ZGF0YW9mKEBfKQogICAgICAgIDogZG8geyAjIGhlYWRlciByZXR1cm5lZCBieSAtPmRhdGFvZiBjYW4gYmUgdW5kZWYgaW4gc2NhbGFyIGNvbnRleHQKICAgICAgICAgICAgbXkgJGhlYWRlciA9IHNoaWZ0LT5kYXRhb2YoQF8pOwogICAgICAgICAgICByZWYgJGhlYWRlciA/IGJsZXNzKCRoZWFkZXIgPT4gJ1NPQVA6OkhlYWRlcicpIDogdW5kZWY7CiAgICAgICAgfTsKfQoKc3ViIGRhdGFvZiB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbG9jYWwgJHNlbGYtPntfY3VycmVudH0gPSAkc2VsZi0+e19jdXJyZW50fTsKICAgICRzZWxmLT5tYXRjaChzaGlmdCkgaWYgQF87CiAgICByZXR1cm4gd2FudGFycmF5CiAgICAgICAgPyBtYXAgeyRzZWxmLT5fYXNfZGF0YSgkXyl9IEB7JHNlbGYtPntfY3VycmVudH19CiAgICAgICAgOiBAeyRzZWxmLT57X2N1cnJlbnR9fQogICAgICAgICAgICA/ICRzZWxmLT5fYXNfZGF0YSgkc2VsZi0+e19jdXJyZW50fS0+WzBdKQogICAgICAgICAgICA6IHVuZGVmOwp9CgpzdWIgbmFtZXNwYWNldXJpb2YgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIGxvY2FsICRzZWxmLT57X2N1cnJlbnR9ID0gJHNlbGYtPntfY3VycmVudH07CiAgICAkc2VsZi0+bWF0Y2goc2hpZnQpIGlmIEBfOwogICAgcmV0dXJuIHdhbnRhcnJheQogICAgICAgID8gbWFwIHsoU09BUDo6VXRpbHM6OnNwbGl0bG9uZ25hbWUob19sbmFtZSgkXykpKVswXX0gQHskc2VsZi0+e19jdXJyZW50fX0KICAgICAgICA6IEB7JHNlbGYtPntfY3VycmVudH19ID8gKFNPQVA6OlV0aWxzOjpzcGxpdGxvbmduYW1lKG9fbG5hbWUoJHNlbGYtPntfY3VycmVudH0tPlswXSkpKVswXSA6IHVuZGVmOwp9Cgojc3ViIF9hc19kYXRhIHsKIyAgICBteSAkc2VsZiA9IHNoaWZ0OwojICAgIG15ICRwb2ludGVyID0gc2hpZnQ7CiMKIyAgICBTT0FQOjpEYXRhCiMgICAgICAgIC0+IG5ldyhwcmVmaXggPT4gJycsIG5hbWUgPT4gb19xbmFtZSgkcG9pbnRlciksIG5hbWUgPT4gb19sbmFtZSgkcG9pbnRlciksIGF0dHIgPT4gb19sYXR0cigkcG9pbnRlcikpCiMgICAgICAgIC0+IHNldF92YWx1ZShvX3ZhbHVlKCRwb2ludGVyKSk7CiN9CgpzdWIgX2FzX2RhdGEgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICRub2RlID0gc2hpZnQ7CgogICAgbXkgJGRhdGEgPSBTT0FQOjpEYXRhLT5uZXcoIHByZWZpeCA9PiAnJywKICAgICAgICAjIG5hbWUgPT4gb19xbmFtZSBoYXMgc2lkZSBlZmZlY3Q6IHNldHMgbmFtZXNwYWNlICEKICAgICAgICBuYW1lID0+IG9fcW5hbWUoJG5vZGUpLAogICAgICAgIG5hbWUgPT4gb19sbmFtZSgkbm9kZSksCiAgICAgICAgYXR0ciA9PiBvX2xhdHRyKCRub2RlKSApOwoKICAgIGlmICggZGVmaW5lZCBvX2NoaWxkKCRub2RlKSApIHsKICAgICAgICBteSBAY2hpbGRyZW47CiAgICAgICAgZm9yZWFjaCBteSAkY2hpbGQgKCBAeyBvX2NoaWxkKCRub2RlKSB9ICkgewogICAgICAgICAgICBwdXNoKCBAY2hpbGRyZW4sICRzZWxmLT5fYXNfZGF0YSgkY2hpbGQpICk7CiAgICAgICAgfQogICAgICAgICRkYXRhLT5zZXRfdmFsdWUoIFxTT0FQOjpEYXRhLT52YWx1ZShAY2hpbGRyZW4pICk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICAkZGF0YS0+c2V0X3ZhbHVlKCBvX3ZhbHVlKCRub2RlKSApOwogICAgfQoKICAgIHJldHVybiAkZGF0YTsKfQoKCnN1YiBtYXRjaCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgJHBhdGggPSBzaGlmdDsKICAgICRzZWxmLT57X2N1cnJlbnR9ID0gWwogICAgICAgICRwYXRoID1+IHMhXi8hISB8fCAhQHskc2VsZi0+e19jdXJyZW50fX0KICAgICAgICA/ICRzZWxmLT5fdHJhdmVyc2UoJHNlbGYtPntfY29udGVudH0sIDEgPT4gc3BsaXQgJy8nID0+ICRwYXRoKQogICAgICAgIDogbWFwIHskc2VsZi0+X3RyYXZlcnNlX3RyZWUob19jaGlsZCgkXyksIHNwbGl0ICcvJyA9PiAkcGF0aCl9IEB7JHNlbGYtPntfY3VycmVudH19CiAgICBdOwogICAgcmV0dXJuICRzZWxmOwp9CgpzdWIgX3RyYXZlcnNlIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAoJHBvaW50ZXIsICRpdHNlbGYsICRwYXRoLCBAcGF0aCkgPSBAXzsKCiAgICBkaWUgIkluY29ycmVjdCBwYXJhbWV0ZXIiIHVubGVzcyAkaXRzZWxmID1+IC9eXGQqJC87CgogICAgaWYgKCRwYXRoICYmIHN1YnN0cigkcGF0aCwgMCwgMSkgZXEgJ3snKSB7CiAgICAgICAgJHBhdGggPSBqb2luICcvJywgJHBhdGgsIHNoaWZ0IEBwYXRoIHdoaWxlIEBwYXRoICYmICRwYXRoICF+IC99LzsKICAgIH0KCiAgICBteSgkb3AsICRudW0pID0gJHBhdGggPX4gL15cWyg8PXw8fD49fD58PXwhPT8pPyhcZCspXF0kLyBpZiBkZWZpbmVkICRwYXRoOwoKICAgIHJldHVybiAkcG9pbnRlciB1bmxlc3MgZGVmaW5lZCAkcGF0aDsKCiAgICAkb3AgPSAnPT0nIHVubGVzcyAkb3A7ICRvcCAuPSAnPScgaWYgJG9wIGVxICc9JyB8fCAkb3AgZXEgJyEnOwogICAgbXkgJG51bW9rID0gZGVmaW5lZCAkbnVtICYmIGV2YWwgIiRpdHNlbGYgJG9wICRudW0iOwogICAgbXkgJG5hbWVvayA9IChvX2xuYW1lKCRwb2ludGVyKSB8fCAnJykgPX4gLyg/Ol58XH0pJHBhdGgkLyBpZiBkZWZpbmVkICRwYXRoOyAjIG5hbWUgY2FuIGJlIHdpdGggbmFtZXNwYWNlCgogICAgbXkgJGFueW5vZGUgPSAkcGF0aCBlcSAnJzsKICAgIHVubGVzcyAoJGFueW5vZGUpIHsKICAgICAgICBpZiAoQHBhdGgpIHsKICAgICAgICAgICAgcmV0dXJuIGlmIGRlZmluZWQgJG51bSAmJiAhJG51bW9rIHx8ICFkZWZpbmVkICRudW0gJiYgISRuYW1lb2s7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gJHBvaW50ZXIgaWYgZGVmaW5lZCAkbnVtICYmICRudW1vayB8fCAhZGVmaW5lZCAkbnVtICYmICRuYW1lb2s7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICB9CgogICAgbXkgQHdhbGs7CiAgICBwdXNoIEB3YWxrLCAkc2VsZi0+X3RyYXZlcnNlX3RyZWUoWyRwb2ludGVyXSwgQHBhdGgpIGlmICRhbnlub2RlOwogICAgcHVzaCBAd2FsaywgJHNlbGYtPl90cmF2ZXJzZV90cmVlKG9fY2hpbGQoJHBvaW50ZXIpLCAkYW55bm9kZSA/ICgkcGF0aCwgQHBhdGgpIDogQHBhdGgpOwogICAgcmV0dXJuIEB3YWxrOwp9CgpzdWIgX3RyYXZlcnNlX3RyZWUgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15KCRwb2ludGVyLCBAcGF0aCkgPSBAXzsKCiAgICAjIGNhbiBiZSBsaXN0IG9mIGNoaWxkcmVuIG9yIHZhbHVlIGl0c2VsZi4gVHJhdmVyc2Ugb25seSBjaGlsZHJlbgogICAgcmV0dXJuIHVubGVzcyByZWYgJHBvaW50ZXIgZXEgJ0FSUkFZJzsKCiAgICBteSAkaXRzZWxmID0gMTsKCiAgICBncmVwIHtkZWZpbmVkfQogICAgICAgIG1hcCB7JHNlbGYtPl90cmF2ZXJzZSgkXywgJGl0c2VsZisrLCBAcGF0aCl9CiAgICAgICAgZ3JlcCB7IXJlZiBvX2xhdHRyKCRfKSB8fAogICAgICAgICAgICAhZXhpc3RzIG9fbGF0dHIoJF8pLT57InskU09BUDo6Q29uc3RhbnRzOjpOU19FTkN9cm9vdCJ9IHx8CiAgICAgICAgICAgIG9fbGF0dHIoJF8pLT57InskU09BUDo6Q29uc3RhbnRzOjpOU19FTkN9cm9vdCJ9IG5lICcwJ30KICAgICAgICBAJHBvaW50ZXI7Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpEZXNlcmlhbGl6ZXI7Cgp1c2UgdmFycyBxdyhASVNBKTsKdXNlIFNPQVA6OkxpdGU6OlV0aWxzOwp1c2UgQ2xhc3M6Okluc3BlY3RvcjsKCkBJU0EgPSBxdyhTT0FQOjpDbG9uZWFibGUpOwoKc3ViIERFU1RST1kgeyBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKSB9CgpzdWIgQkVHSU4gewogICAgX19QQUNLQUdFX18tPl9fbWtfYWNjZXNzb3JzKCBxdyhpZHMgaHJlZnMgcGFydHMgcGFyc2VyCiAgICAgICAgYmFzZSB4bWxzY2hlbWFzIHhtbHNjaGVtYSBjb250ZXh0KSApOwp9CgpzdWIgbmV3IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICByZXR1cm4gJHNlbGYgaWYgcmVmICRzZWxmOwogICAgbXkgJGNsYXNzID0gJHNlbGY7CiAgICBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKTsKICAgIHJldHVybiBibGVzcyB7CiAgICAgICAgJ19pZHMnICAgICAgICA9PiB7fSwKICAgICAgICAnX2hyZWZzJyAgICAgID0+IHt9LAogICAgICAgICdfcGFyc2VyJyAgICAgPT4gU09BUDo6UGFyc2VyLT5uZXcsCiAgICAgICAgJ194bWxzY2hlbWFzJyA9PiB7CiAgICAgICAgICAgICRTT0FQOjpDb25zdGFudHM6Ok5TX0FQUyA9PiAnU09BUDo6WE1MU2NoZW1hQXBhY2hlU09BUDo6RGVzZXJpYWxpemVyJywKIyAgICAgICAgICAgIG1hcCB7CiMgICAgICAgICAgICAgICAgJF8gPT4gJFNPQVA6OkNvbnN0YW50czo6WE1MX1NDSEVNQVN7JF99IC4gJzo6RGVzZXJpYWxpemVyJwojICAgICAgICAgICAgICB9IGtleXMgJVNPQVA6OkNvbnN0YW50czo6WE1MX1NDSEVNQVMKICAgICAgICAgICAgbWFwIHsKICAgICAgICAgICAgICAgICRfID0+ICdTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OicgLiAkU09BUDo6Q29uc3RhbnRzOjpYTUxfU0NIRU1BX09GeyRffQogICAgICAgICAgICAgIH0ga2V5cyAlU09BUDo6Q29uc3RhbnRzOjpYTUxfU0NIRU1BX09GCgogICAgICAgIH0sCiAgICB9LCAkY2xhc3M7Cn0KCnN1YiBpc194bWwgewogICAgIyBBZGRlZCBjaGVjayBmb3IgZW52ZWxvcGUgZGVsaXZlcnkuIEZhaXJseSBzdGFuZGFyZCB3aXRoIE1NREYgYW5kIHNlbmRtYWlsCiAgICAjIFRoYW5rcyB0byBDaHJpcyBEYXZpZXMgPENocmlzLkRhdmllc0BNYW5oZWltRXVyb3BlLmNvbT4KICAgICRfWzFdID1+IC9eXHMqPC8gfHwgJF9bMV0gIX4gL14oPzpbXHctXSs6fEZyb20gKS87Cn0KCnN1YiBiYXNlbG9jYXRpb24gewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICRsb2NhdGlvbiA9IHNoaWZ0OwogICAgaWYgKCRsb2NhdGlvbikgewogICAgICAgIG15ICR1cmkgPSBVUkktPm5ldygkbG9jYXRpb24pOwogICAgICAgICMgbWFrZSBhYnNvbHV0ZSBsb2NhdGlvbiBpZiByZWxhdGl2ZQogICAgICAgICRsb2NhdGlvbiA9ICR1cmktPmFicygkc2VsZi0+YmFzZSB8fCAndGhpc21lc3NhZ2U6LycpLT5hc19zdHJpbmcgdW5sZXNzICR1cmktPnNjaGVtZTsKICAgIH0KICAgIHJldHVybiAkbG9jYXRpb247Cn0KCiMgUmV0dXJucyB0aGUgZW52ZWxvcGUgYW5kIHBvcHVsYXRlcyBTT0FQOjpQYWNrYWdlciB3aXRoIHBhcnRzCnN1YiBkZWNvZGVfcGFydHMgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICRlbnYgPSAkc2VsZi0+Y29udGV4dC0+cGFja2FnZXItPnVucGFja2FnZSgkX1swXSwkc2VsZi0+Y29udGV4dCk7CiAgICBteSAkYm9keSA9ICRzZWxmLT5wYXJzZXItPmRlY29kZSgkZW52KTsKICAgICMgVE9ETyAtIFRoaXMgc2hvdWxkbid0IGJlIGhlcmUhIFRoaXMgaXMgcGFja2FnZXIgc3BlY2lmaWMhCiAgICAjICAgICAgICBIb3dldmVyIHRoaXMgZG9lcyBuZWVkIHRvIHB1bGwgb3V0IGFsbCB0aGUgY2lkJ3MKICAgICMgICAgICAgIHRvIHBvcHVsYXRlIGlkcyBoYXNoIHdpdGguCiAgICBmb3JlYWNoIChAeyRzZWxmLT5jb250ZXh0LT5wYWNrYWdlci0+cGFydHN9KSB7CiAgICAgICAgbXkgJGRhdGEgICAgID0gJF8tPmJvZHloYW5kbGUtPmFzX3N0cmluZzsKICAgICAgICBteSAkdHlwZSAgICAgPSAkXy0+aGVhZC0+bWltZV9hdHRyKCdDb250ZW50LVR5cGUnKTsKICAgICAgICBteSAkbG9jYXRpb24gPSAkXy0+aGVhZC0+bWltZV9hdHRyKCdDb250ZW50LUxvY2F0aW9uJyk7CiAgICAgICAgbXkgJGlkICAgICAgID0gJF8tPmhlYWQtPm1pbWVfYXR0cignQ29udGVudC1JZCcpOwogICAgICAgICRsb2NhdGlvbiA9ICRzZWxmLT5iYXNlbG9jYXRpb24oJGxvY2F0aW9uKTsKICAgICAgICBteSAkcGFydCA9IGxjKCR0eXBlKSBlcSAndGV4dC94bWwnICYmICEkU09BUDo6Q29uc3RhbnRzOjpET19OT1RfUFJPQ0VTU19YTUxfSU5fTUlNRQogICAgICAgICAgICA/ICRzZWxmLT5wYXJzZXItPmRlY29kZSgkZGF0YSkKICAgICAgICAgICAgOiBbJ21pbWVwYXJ0Jywge30sICRkYXRhXTsKICAgICAgICAjIFRoaXMgYmVsb3cgbG9va3MgbGlrZSB1bm5lY2Vzc2FyeSBibG9hdCEhIQogICAgICAgICMgSSBzaG91bGQgcHJvYmFibHkgZGVyZWZlcmVuY2UgdGhlIG1pbWVwYXJ0LCBwcm92aWRlIGEgY2FsbGJhY2sgdG8gZ2V0IHRoZSBzdHJpbmcgZGF0YQogICAgICAgICRpZCA9fiBzL148KFtePl0qKT4kLyQxLzsgIyBzdHJpbmcgYW55IGxlYWRpbmcgYW5kIHRyYWlsaW5nIGJyYWNrZXRzCiAgICAgICAgJHNlbGYtPmlkcy0+eyRpZH0gPSAkcGFydCBpZiAkaWQ7CiAgICAgICAgJHNlbGYtPmlkcy0+eyRsb2NhdGlvbn0gPSAkcGFydCBpZiAkbG9jYXRpb247CiAgICB9CiAgICByZXR1cm4gJGJvZHk7Cn0KCiMgZGVjb2RlIHJldHVybnMgYSBwYXJzZWQgYm9keSBpbiB0aGUgZm9ybSBvZiBhbiBBUlJBWQojIGVhY2ggZWxlbWVudCBvZiB0aGUgQVJSQVkgaXMgYSBIQVNILCBBUlJBWSBvciBTQ0FMQVIKc3ViIGRlY29kZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7ICMgdGhpcyBhY3R1YWxseSBpcyBpbXBvcnRhbnQKICAgIHJldHVybiAkc2VsZi0+aXNfeG1sKCRfWzBdKQogICAgICAgID8gJHNlbGYtPnBhcnNlci0+ZGVjb2RlKCRfWzBdKQogICAgICAgIDogJHNlbGYtPmRlY29kZV9wYXJ0cygkX1swXSk7Cn0KCiMgZGVzZXJpYWxpemUgcmV0dXJucyBhIFNPQVA6OlNPTSBvYmplY3QgYW5kIHBhcnNlcyBzdHJhaWdodAojIHRleHQgYXMgaW5wdXQKc3ViIGRlc2VyaWFsaXplIHsKICAgIFNPQVA6OlRyYWNlOjp0cmFjZSgnKCknKTsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKCiAgICAjIGluaXRpYWxpemUKICAgICRzZWxmLT5ocmVmcyh7fSk7CiAgICAkc2VsZi0+aWRzKHt9KTsKCiAgICAjIElmIHRoZSBkb2N1bWVudCBpcyBYTUwsIHRoZW4gaWRzIHdpbGwgYmUgZW1wdHkKICAgICMgSWYgdGhlIGRvY3VtZW50IGlzIE1JTUUsIHRoZW4gaWRzIHdpbGwgaG9sZCBhIGxpc3Qgb2YgY2lkcwogICAgbXkgJHBhcnNlZCA9ICRzZWxmLT5kZWNvZGUoJF9bMF0pOwoKICAgICMgSGF2aW5nIHRoaXMgY29kZSBoZXJlIG1ha2VzIG11bHRpcmVmcyBpbiB0aGUgQm9keSB3b3JrLCBidXQgbXVsdGlyZWZzCiAgICAjIHRoYXQgcmVmZXJlbmNlIFhNTCBmcmFnbWVudHMgaW4gYSBNSU1FIHBhcnQgZG8gbm90IHdvcmsuCiAgICBpZiAoa2V5cyAleyRzZWxmLT5pZHMoKX0pIHsKICAgICAgICAkc2VsZi0+dHJhdmVyc2VfaWRzKCRwYXJzZWQpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgIyBkZWxheSAtIHNldCBpZHMgdG8gYmUgdHJhdmVyc2VkIGxhdGVyIGluIGRlY29kZV9vYmplY3QsIHRoZXkgb25seSBnZXQKICAgICAgICAjIHRyYXZlcnNlZCBpZiBhbiBocmVmIGlzIGZvdW5kIHRoYXQgaXMgcmVmZXJlbmNpbmcgYW4gaWQuCiAgICAgICAgJHNlbGYtPmlkcygkcGFyc2VkKTsKICAgIH0KICAgICRzZWxmLT5kZWNvZGVfb2JqZWN0KCRwYXJzZWQpOwogICAgbXkgJHNvbSA9IFNPQVA6OlNPTS0+bmV3KCRwYXJzZWQpOwogICAgJHNvbS0+Y29udGV4dCgkc2VsZi0+Y29udGV4dCk7ICMgVE9ETyAtIHRyeSByZW1vdmluZyB0aGlzIGFuZCBzZWUgaWYgaXQgd29ya3MhCiAgICByZXR1cm4gJHNvbTsKfQoKc3ViIHRyYXZlcnNlX2lkcyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgJHJlZiA9IHNoaWZ0OwogICAgbXkoJHVuZGVmLCAkYXR0cnMsICRjaGlsZHJlbikgPSBAJHJlZjsKICAgICMgIF5eXl5eXiB0byBmaXggbmFzdHkgZXJyb3Igb24gTWFjIHBsYXRmb3JtIChDYXJsIEsuIEN1bm5pbmdoYW0pCiAgICAkc2VsZi0+aWRzLT57JGF0dHJzLT57J2lkJ319ID0gJHJlZiBpZiBleGlzdHMgJGF0dHJzLT57J2lkJ307CiAgICByZXR1cm4gdW5sZXNzIHJlZiAkY2hpbGRyZW47CiAgICBmb3IgKEAkY2hpbGRyZW4pIHsKICAgICAgICAkc2VsZi0+dHJhdmVyc2VfaWRzKCRfKQogICAgfTsKfQoKdXNlIGNvbnN0YW50IF9BVFRSUyA9PiA2Owp1c2UgY29uc3RhbnQgX05BTUUgPT4gNTsKCnN1YiBkZWNvZGVfb2JqZWN0IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAkcmVmID0gc2hpZnQ7CiAgICBteSgkbmFtZSwgJGF0dHJzLCAkY2hpbGRyZW4sICR2YWx1ZSkgPSBAJHJlZjsKCiAgICAkcmVmLT5bIF9BVFRSUyBdID0gJGF0dHJzID0geyUkYXR0cnN9OyAjIG1ha2UgYSBjb3B5IGZvciBsb25nIGF0dHJpYnV0ZXMKCiAgICB1c2UgdmFycyBxdygldXJpcyk7CiAgICBsb2NhbCAldXJpcyA9ICgldXJpcywgbWFwIHsKICAgICAgICBkbyB7IChteSAkbnMgPSAkXykgPX4gcy9eeG1sbnM6Py8vOyAkbnMgfSA9PiBkZWxldGUgJGF0dHJzLT57JF99CiAgICB9IGdyZXAgey9eeG1sbnMoOnwkKS99IGtleXMgJSRhdHRycyk7CgogICAgZm9yZWFjaCAoa2V5cyAlJGF0dHJzKSB7CiAgICAgICAgbmV4dCB1bmxlc3MgbS9eKCRTT0FQOjpDb25zdGFudHM6Ok5TTUFTSz8pOigkU09BUDo6Q29uc3RhbnRzOjpOU01BU0spJC87CgogICAgJDEgPX4gL15beFhdW21NXVtsTF0vIHx8CiAgICAgICAgJHVyaXN7JDF9ICYmCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICRhdHRycy0+e1NPQVA6OlV0aWxzOjpsb25nbmFtZSgkdXJpc3skMX0sICQyKX0gPSBkbyB7CiAgICAgICAgICAgICAgICAgICAgbXkgJHZhbHVlID0gJGF0dHJzLT57JF99OwogICAgICAgICAgICAgICAgICAgICQyIG5lICd0eXBlJyAmJiAkMiBuZSAnYXJyYXlUeXBlJwogICAgICAgICAgICAgICAgICAgICAgICA/ICR2YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICA6IFNPQVA6OlV0aWxzOjpsb25nbmFtZSgkdmFsdWUgPX4gbS9eKCRTT0FQOjpDb25zdGFudHM6Ok5TTUFTSz8pOigke1NPQVA6OkNvbnN0YW50czo6TlNNQVNLfSg/OlxbW1xkLF0qXF0pKikvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgkdXJpc3skMX0gfHwgZGllKCJVbnJlc29sdmVkIHByZWZpeCAnJDEnIGZvciBhdHRyaWJ1dGUgdmFsdWUgJyR2YWx1ZSdcbiIpLCAkMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCR1cmlzeycnfSB8fCBkaWUoIlVuc3BlY2lmaWVkIG5hbWVzcGFjZSBmb3IgdHlwZSAnJHZhbHVlJ1xuIiksICR2YWx1ZSkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgfHwgZGllICJVbnJlc29sdmVkIHByZWZpeCAnJDEnIGZvciBhdHRyaWJ1dGUgJyRfJ1xuIjsKICB9CgogICAgIyBhbmQgbm93IGNoZWNrIHRoZSBlbGVtZW50CiAgICBteSAkbnMgPSAoJG5hbWUgPX4gcy9eKCRTT0FQOjpDb25zdGFudHM6Ok5TTUFTSz8pOi8vID8gJDEgOiAnJyk7CiAgICAkcmVmLT5bIF9OQU1FIF0gPSBTT0FQOjpVdGlsczo6bG9uZ25hbWUoCiAgICAgICAgJG5zCiAgICAgICAgICAgID8gKCR1cmlzeyRuc30gfHwgZGllICJVbnJlc29sdmVkIHByZWZpeCAnJG5zJyBmb3IgZWxlbWVudCAnJG5hbWUnXG4iKQogICAgICAgICAgICA6IChkZWZpbmVkICR1cmlzeycnfSA/ICR1cmlzeycnfSA6IHVuZGVmKSwKICAgICAgICAkbmFtZQogICAgKTsKCiAgICAoJGNoaWxkcmVuLCAkdmFsdWUpID0gKHVuZGVmLCAkY2hpbGRyZW4pIHVubGVzcyByZWYgJGNoaWxkcmVuOwoKICAgIHJldHVybiAkbmFtZSA9PiAoJHJlZi0+WzRdID0gJHNlbGYtPmRlY29kZV92YWx1ZSgKICAgICAgICBbJHJlZi0+WyBfTkFNRSBdLCAkYXR0cnMsICRjaGlsZHJlbiwgJHZhbHVlXQogICAgKSk7Cn0KCnN1YiBkZWNvZGVfdmFsdWUgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICRyZWYgPSBzaGlmdDsKICAgIG15KCRuYW1lLCAkYXR0cnMsICRjaGlsZHJlbiwgJHZhbHVlKSA9IEAkcmVmOwoKICAgICMgY2hlY2sgU09BUCB2ZXJzaW9uIGlmIGFwcGxpY2FibGUKICAgIHVzZSB2YXJzICckbGV2ZWwnOyBsb2NhbCAkbGV2ZWwgPSAkbGV2ZWwgfHwgMDsKICAgIGlmICgrKyRsZXZlbCA9PSAxKSB7CiAgICAgICAgbXkoJG5hbWVzcGFjZSwgJGVudmVsb3BlKSA9IFNPQVA6OlV0aWxzOjpzcGxpdGxvbmduYW1lKCRuYW1lKTsKICAgICAgICBTT0FQOjpMaXRlLT5zb2FwdmVyc2lvbigkbmFtZXNwYWNlKSBpZiAkZW52ZWxvcGUgZXEgJ0VudmVsb3BlJyAmJiAkbmFtZXNwYWNlOwogICAgfQoKICAgICMgY2hlY2sgZW5jb2RpbmdTdHlsZQogICAgIyBmdXR1cmUgdmVyc2lvbnMgbWF5IGJpbmQgZGVzZXJpYWxpemVyIHRvIGVuY29kaW5nU3R5bGUKICAgIG15ICRlbmNvZGluZ1N0eWxlID0gJGF0dHJzLT57InskU09BUDo6Q29uc3RhbnRzOjpOU19FTlZ9ZW5jb2RpbmdTdHlsZSJ9IHx8ICIiOwogICAgbXkgKCV1bmlvbiwlaXNlY3QpOwogICAgIyBUT0RPIC0gU09BUCAxLjIgYW5kIDEuMSBoYXZlIGRpZmZlcmVudCBydWxlcyBhYm91dCB2YWxpZCBlbmNvZGluZ1N0eWxlIHZhbHVlcwogICAgIyAgICAgICAgRm9yIGV4YW1wbGUsIGluIDEuMSAtIGFueSBodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy9zb2FwL2VuY29kaW5nLyoKICAgICMgICAgICAgIHZhbHVlIGlzIHZhbGlkCiAgICAjIEZpbmQgaW50ZXJzZWN0aW9uIG9mIGRlY2xhcmVkIGFuZCBzdXBwb3J0ZWQgZW5jb2Rpbmcgc3R5bGVzCiAgICBmb3JlYWNoIG15ICRlIChAU09BUDo6Q29uc3RhbnRzOjpTVVBQT1JURURfRU5DT0RJTkdfU1RZTEVTLCBzcGxpdCgvICsvLCRlbmNvZGluZ1N0eWxlKSkgewogICAgICAgICR1bmlvbnskZX0rKyAmJiAkaXNlY3R7JGV9Kys7CiAgICB9CiAgICBkaWUgIlVucmVjb2duaXplZC91bnN1cHBvcnRlZCB2YWx1ZSBvZiBlbmNvZGluZ1N0eWxlIGF0dHJpYnV0ZSAnJGVuY29kaW5nU3R5bGUnIgogICAgICAgIGlmIGRlZmluZWQoJGVuY29kaW5nU3R5bGUpICYmIGxlbmd0aCgkZW5jb2RpbmdTdHlsZSkgPiAwICYmICElaXNlY3QgJiYKICAgICAgICAgICAgIShTT0FQOjpMaXRlLT5zb2FwdmVyc2lvbiA9PSAxLjEgJiYgJGVuY29kaW5nU3R5bGUgPX4gLyg/Ol58XGIpJFNPQVA6OkNvbnN0YW50czo6TlNfRU5DLyk7CgogICAgIyByZW1vdmVkIHRvIHByb3ZpZGUgbGl0ZXJhbCBzdXBwb3J0IGluIDAuNjUKICAgICMkZW5jb2RpbmdTdHlsZSAhfiAvKD86XnxcYikkU09BUDo6Q29uc3RhbnRzOjpOU19FTkMvOwogICAgIyAgICAgICAgICAgICAgICAgIyBeXl5eXl5eXiBcYiBjYXVzaW5nIHByb2JsZW1zICghPykgb24gc29tZSBzeXN0ZW1zCiAgICAjICAgICAgICAgICAgICAgICAjIGFzIHJlcG9ydGVkIGJ5IERhdmlkIER5Y2sgPGRjZEB0Yy5mbHVrZS5jb20+CiAgICAjICAgICAgICAgICAgICAgICAjIHNvIHVzZSAoPzpefFxiKSBpbnN0ZWFkCgogICAgdXNlIHZhcnMgJyRhcnJheXR5cGUnOyAjIHR5cGUgb2YgQXJyYXkgZWxlbWVudCBzcGVjaWZpZWQgb24gQXJyYXkgaXRzZWxmCiAgICAjIGVpdGhlciBzcGVjaWZpZWQgd2l0aCB4c2k6dHlwZSwgb3IgPGVuYzpuYW1lLz4gb3IgYXJyYXkgZWxlbWVudAogICAgbXkgKCR0eXBlKSA9IGdyZXAgeyBkZWZpbmVkIH0KICAgICAgICBtYXAoJGF0dHJzLT57JF99LCBzb3J0IGdyZXAgey9eXHskU09BUDo6Q29uc3RhbnRzOjpOU19YU0lfQUxMXH10eXBlJC9vfSBrZXlzICUkYXR0cnMpLAogICAgICAgICAgICRuYW1lID1+IC9eXHskU09BUDo6Q29uc3RhbnRzOjpOU19FTkNcfS8gPyAkbmFtZSA6ICRhcnJheXR5cGU7CiAgICBsb2NhbCAkYXJyYXl0eXBlOyAjIGl0J3MgdXNlZCBvbmx5IGZvciBvbmUgbGV2ZWwsIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZQoKICAgICMgJG5hbWUgaXMgbm90IHVzZWQgaGVyZSBzaW5jZSB0eXBlIHNob3VsZCBiZSBlbmNvZGVkIGFzIHR5cGUsIG5vdCBhcyBuYW1lCiAgICBteSAoJHNjaGVtYSwgJGNsYXNzKSA9IFNPQVA6OlV0aWxzOjpzcGxpdGxvbmduYW1lKCR0eXBlKSBpZiAkdHlwZTsKICAgIG15ICRzY2hlbWFjbGFzcyA9IGRlZmluZWQoJHNjaGVtYSkgJiYgJHNlbGYtPnhtbHNjaGVtYXMtPnskc2NoZW1hfQogICAgICAgIHx8ICRzZWxmOwoKICAgIHsKICAgICAgICBubyBzdHJpY3QgcXcocmVmcyk7CiAgICAgICAgaWYgKCEgQ2xhc3M6Okluc3BlY3Rvci0+bG9hZGVkKCRzY2hlbWFjbGFzcykgKSB7CiAgICAgICAgICAgIGV2YWwgInJlcXVpcmUgJHNjaGVtYWNsYXNzIiBvciBkaWUgJEAgaWYgbm90IHJlZiAkc2NoZW1hY2xhc3M7CiAgICAgICAgfQogICAgfQoKICAgICMgc3RvcmUgc2NoZW1hIHRoYXQgaXMgdXNlZCBpbiBwYXJzZWQgbWVzc2FnZQogICAgJHNlbGYtPnhtbHNjaGVtYSgkc2NoZW1hKSBpZiAkc2NoZW1hICYmICRzY2hlbWEgPX4gL1hNTFNjaGVtYS87CgogICAgIyBkb24ndCB1c2UgY2xhc3MvdHlwZSBpZiBhbnlUeXBlL3VyLXR5cGUgaXMgc3BlY2lmaWVkIG9uIHdpcmUKICAgIHVuZGVmICRjbGFzcwogICAgICAgIGlmICRzY2hlbWFjbGFzcy0+Y2FuKCdhbnlUeXBlVmFsdWUnKQogICAgICAgICAgICAmJiAkc2NoZW1hY2xhc3MtPmFueVR5cGVWYWx1ZSBlcSAkY2xhc3M7CgogICAgbXkgJG1ldGhvZCA9ICdhc18nIC4gKCRjbGFzcyB8fCAnLScpOyAjIGR1bW15IHR5cGUgaWYgbm90IGRlZmluZWQKICAgICRjbGFzcyA9fiBzL19ffFwuLzo6L2cgaWYgJGNsYXNzOwoKICAgIG15ICRpZCA9ICRhdHRycy0+e2lkfTsKICAgIGlmIChkZWZpbmVkICRpZCAmJiBleGlzdHMgJHNlbGYtPmhyZWZzLT57JGlkfSkgewogICAgICAgIHJldHVybiAkc2VsZi0+aHJlZnMtPnskaWR9OwogICAgfQogICAgZWxzaWYgKGV4aXN0cyAkYXR0cnMtPntocmVmfSkgewogICAgICAgIChteSAkaWQgPSBkZWxldGUgJGF0dHJzLT57aHJlZn0pID1+IHMvXigjfGNpZDp8dXVpZDopPy8vOwogICAgICAgICMgY29udmVydCB0byBhYnNvbHV0ZSBpZiBub3QgaW50ZXJuYWwgJyMnIG9yICdjaWQ6JwogICAgICAgICRpZCA9ICRzZWxmLT5iYXNlbG9jYXRpb24oJGlkKSB1bmxlc3MgJDE7CiAgICAgICAgcmV0dXJuICRzZWxmLT5ocmVmcy0+eyRpZH0gaWYgZXhpc3RzICRzZWxmLT5ocmVmcy0+eyRpZH07CiAgICAgICAgIyBGaXJzdCB0aW1lIG9wdGltaXphdGlvbi4gd2UgZG9uJ3QgdHJhdmVyc2UgSURzIHVubGVzcyBhc2tlZCBmb3IgaXQuCiAgICAgICAgIyBUaGlzIGlzIHdoZXJlIHRyYXZlcnNpbmcgaWQncyBpcyBkZWxheWVkIGZyb20gYmVmb3JlCiAgICAgICAgIyAgIC0gdGhlIGZpcnN0IHRpbWUgdGhyb3VnaCAtIGlkcyBzaG91bGQgY29udGFpbiBhIGNvcHkgb2YgdGhlIHBhcnNlZCBYTUwKICAgICAgICAjICAgICBzdHJ1Y3R1cmUhIHNlZW1zIHNpbGx5IHRvIG1ha2Ugc28gbWFueSBjb3BpZXMKICAgICAgICBteSAkaWRzID0gJHNlbGYtPmlkczsKICAgICAgICBpZiAocmVmKCRpZHMpIG5lICdIQVNIJykgewogICAgICAgICAgICAkc2VsZi0+aWRzKHt9KTsgICAgICAgICAgICAjIHJlc2V0IGxpc3Qgb2YgaWRzIGZpcnN0IHRpbWUgdGhyb3VnaAogICAgICAgICAgICAkc2VsZi0+dHJhdmVyc2VfaWRzKCRpZHMpOwogICAgICAgIH0KICAgICAgICBpZiAoZXhpc3RzKCRzZWxmLT5pZHMtPnskaWR9KSkgewogICAgICAgICAgICBteSAkb2JqID0gKCRzZWxmLT5kZWNvZGVfb2JqZWN0KGRlbGV0ZSgkc2VsZi0+aWRzLT57JGlkfSkpKVsxXTsKICAgICAgICAgICAgcmV0dXJuICRzZWxmLT5ocmVmcy0+eyRpZH0gPSAkb2JqOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgZGllICJVbnJlc29sdmVkICh3cm9uZz8pIGhyZWYgKCRpZCkgaW4gZWxlbWVudCAnJG5hbWUnXG4iOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdW5kZWYgaWYgZ3JlcCB7CiAgICAgICAgL14kU09BUDo6Q29uc3RhbnRzOjpOU19YU0lfTklMUyQvICYmIGRvIHsKICAgICAgICAgICAgbXkgJGNsYXNzID0gJHNlbGYtPnhtbHNjaGVtYXMtPnsgJDEgfHwgJDIgfTsKICAgICAgICAgICAgZXZhbCAicmVxdWlyZSAkY2xhc3MiIG9yIGRpZSBAJDs7CiAgICAgICAgICAgICRjbGFzcy0+YXNfdW5kZWYoJGF0dHJzLT57JF99KQogICAgICAgIH0KICAgIH0ga2V5cyAlJGF0dHJzOwoKICAgICMgdHJ5IHRvIGhhbmRsZSB3aXRoIHR5cGVjYXN0aW5nCiAgICBteSAkcmVzID0gJHNlbGYtPnR5cGVjYXN0KCR2YWx1ZSwgJG5hbWUsICRhdHRycywgJGNoaWxkcmVuLCAkdHlwZSk7CiAgICByZXR1cm4gJHJlcyBpZiBkZWZpbmVkICRyZXM7CgogICAgIyBvaywgY29udGludWUgd2l0aCBvdGhlcnMKICAgIGlmIChleGlzdHMgJGF0dHJzLT57InskU09BUDo6Q29uc3RhbnRzOjpOU19FTkN9YXJyYXlUeXBlIn0pIHsKICAgICAgICBteSAkcmVzID0gW107CiAgICAgICAgJHNlbGYtPmhyZWZzLT57JGlkfSA9ICRyZXMgaWYgZGVmaW5lZCAkaWQ7CgogICAgICAgICMgY2hlY2sgZm9yIGFycmF5VHlwZSB3aGljaCBjb3VsZCBiZSBbMV0sIFssMl1bNV0gb3IgW10KICAgICAgICAjIFssXVsxXSB3aWxsIE5PVCBiZSBhbGxvd2VkIHJpZ2h0IG5vdyAobXVsdGlkaW1lbnNpb25hbCBzcGFyc2UgYXJyYXkpCiAgICAgICAgbXkoJHR5cGUsICRtdWx0aXNpemUpID0gJGF0dHJzLT57InskU09BUDo6Q29uc3RhbnRzOjpOU19FTkN9YXJyYXlUeXBlIn0KICAgICAgICAgICAgPX4gL14oLispXFsoXGQqKD86LFxkKykqKVxdKD86XFsoPzpcZCsoPzosXGQrKSopXF0pKiQvCiAgICAgICAgICAgICAgICBvciBkaWUgcXEhVW5yZWNvZ25pemVkL3Vuc3VwcG9ydGVkIGZvcm1hdCBvZiBhcnJheVR5cGUgYXR0cmlidXRlICdAe1skYXR0cnMtPnsieyRTT0FQOjpDb25zdGFudHM6Ok5TX0VOQ31hcnJheVR5cGUifV19J1xuITsKCiAgICAgICAgbXkgQGRpbWVuc2lvbnMgPSBtYXAgeyAkXyB8fCB1bmRlZiB9IHNwbGl0IC8sLywgJG11bHRpc2l6ZTsKICAgICAgICBteSAkc2l6ZSA9IDE7CiAgICAgICAgZm9yZWFjaCAoQGRpbWVuc2lvbnMpIHsgJHNpemUgKj0gJF8gfHwgMCB9CgogICAgICAgICMgVE9ETyDDpGhtLCBzaG91bGRuJ3QgdGhpcyBsb2NhbCBiZSBteT8KICAgICAgICBsb2NhbCAkYXJyYXl0eXBlID0gJHR5cGU7CgogICAgICAgICMgbXVsdGlkaW1lbnNpb25hbAogICAgICAgIGlmICgkbXVsdGlzaXplID1+IC8sLykgewogICAgICAgICAgICBAJHJlcyA9IHNwbGl0YXJyYXkoCiAgICAgICAgICAgICAgICBbQGRpbWVuc2lvbnNdLAogICAgICAgICAgICAgICAgW21hcCB7IHNjYWxhcigoJHNlbGYtPmRlY29kZV9vYmplY3QoJF8pKVsxXSkgfSBAeyRjaGlsZHJlbiB8fCBbXX1dCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgICMgbm9ybWFsCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIEAkcmVzID0gbWFwIHsgc2NhbGFyKCgkc2VsZi0+ZGVjb2RlX29iamVjdCgkXykpWzFdKSB9IEB7JGNoaWxkcmVuIHx8IFtdfTsKICAgICAgICB9CgogICAgICAgICMgc3BhcnNlIChwb3NpdGlvbikKICAgICAgICBpZiAocmVmICRjaGlsZHJlbiAmJiBleGlzdHMgU09BUDo6VXRpbHM6Om9fbGF0dHIoJGNoaWxkcmVuLT5bMF0pLT57InskU09BUDo6Q29uc3RhbnRzOjpOU19FTkN9cG9zaXRpb24ifSkgewogICAgICAgICAgICBteSBAbmV3OwogICAgICAgICAgICBmb3IgKG15ICRwb3MgPSAwOyAkcG9zIDwgQCRjaGlsZHJlbjsgJHBvcysrKSB7CiAgICAgICAgICAgICAgICAjIFRCRCBpbXBsZW1lbnQgcG9zaXRpb24gaW4gbXVsdGlkaW1lbnNpb25hbCBhcnJheQogICAgICAgICAgICAgICAgbXkoJHBvc2l0aW9uKSA9IFNPQVA6OlV0aWxzOjpvX2xhdHRyKCRjaGlsZHJlbi0+WyRwb3NdKS0+eyJ7JFNPQVA6OkNvbnN0YW50czo6TlNfRU5DfXBvc2l0aW9uIn0gPX4gL15cWyhcZCspXF0kLwogICAgICAgICAgICAgICAgICAgIG9yIGRpZSAiUG9zaXRpb24gbXVzdCBiZSBzcGVjaWZpZWQgZm9yIGFsbCBlbGVtZW50cyBvZiBzcGFyc2UgYXJyYXlcbiI7CiAgICAgICAgICAgICAgICAkbmV3WyRwb3NpdGlvbl0gPSAkcmVzLT5bJHBvc107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgQCRyZXMgPSBAbmV3OwogICAgICAgIH0KCiAgICAgICAgIyBwYXJ0aWFsbHkgdHJhbnNtaXR0ZWQgKG9mZnNldCkKICAgICAgICAjIFRCRCBpbXBsZW1lbnQgb2Zmc2V0IGluIG11bHRpZGltZW5zaW9uYWwgYXJyYXkKICAgICAgICBteSgkb2Zmc2V0KSA9ICRhdHRycy0+eyJ7JFNPQVA6OkNvbnN0YW50czo6TlNfRU5DfW9mZnNldCJ9ID1+IC9eXFsoXGQrKVxdJC8KICAgICAgICAgICAgaWYgZXhpc3RzICRhdHRycy0+eyJ7JFNPQVA6OkNvbnN0YW50czo6TlNfRU5DfW9mZnNldCJ9OwogICAgICAgIHVuc2hpZnQoQCRyZXMsICh1bmRlZikgeCAkb2Zmc2V0KSBpZiAkb2Zmc2V0OwoKICAgICAgICBkaWUgIlRvbyBtYW55IGVsZW1lbnRzIGluIGFycmF5LiBAe1tzY2FsYXJAJHJlc119IGluc3RlYWQgb2YgY2xhaW1lZCAkbXVsdGlzaXplICgkc2l6ZSlcbiIKICAgICAgICAgICAgaWYgJG11bHRpc2l6ZSAmJiAkc2l6ZSA8IEAkcmVzOwoKICAgICAgICAjIGV4dGVuZCB0aGUgYXJyYXkgaWYgbnVtYmVyIG9mIGVsZW1lbnRzIGlzIHNwZWNpZmllZAogICAgICAgICQjJHJlcyA9ICRkaW1lbnNpb25zWzBdLTEgaWYgZGVmaW5lZCAkZGltZW5zaW9uc1swXSAmJiBAJHJlcyA8ICRkaW1lbnNpb25zWzBdOwoKICAgICAgICByZXR1cm4gZGVmaW5lZCAkY2xhc3MgJiYgJGNsYXNzIG5lICdBcnJheScgPyBibGVzcygkcmVzID0+ICRjbGFzcykgOiAkcmVzOwoKICAgIH0KICAgIGVsc2lmICgkbmFtZSA9fiAvXlx7JFNPQVA6OkNvbnN0YW50czo6TlNfRU5DXH1TdHJ1Y3QkLwogICAgICAgIHx8ICEkc2NoZW1hY2xhc3MtPmNhbigkbWV0aG9kKQogICAgICAgICAgICYmIChyZWYgJGNoaWxkcmVuIHx8IGRlZmluZWQgJGNsYXNzICYmICR2YWx1ZSA9fiAvXlxzKiQvKSkgewogICAgICAgIG15ICRyZXMgPSB7fTsKICAgICAgICAkc2VsZi0+aHJlZnMtPnskaWR9ID0gJHJlcyBpZiBkZWZpbmVkICRpZDsKCiAgICAgICAgIyBQYXRjaCBjb2RlIGludHJvZHVjZWQgaW4gMC42NSAtIGRlc2VyaWFsaXplcyBhcnJheSBwcm9wZXJseQogICAgICAgICMgRGVjb2RlIGVhY2ggZWxlbWVudCBvZiB0aGUgc3RydWN0LgogICAgICAgIG15ICVjaGlsZF9jb3VudF9vZiA9ICgpOwogICAgICAgIGZvcmVhY2ggbXkgJGNoaWxkIChAeyRjaGlsZHJlbiB8fCBbXX0pIHsKICAgICAgICAgICAgbXkgKCRjaGlsZF9uYW1lLCAkY2hpbGRfdmFsdWUpID0gJHNlbGYtPmRlY29kZV9vYmplY3QoJGNoaWxkKTsKICAgICAgICAgICAgIyBTdG9yZSB0aGUgZGVjb2RlZCBlbGVtZW50IGluIHRoZSBzdHJ1Y3QuICBJZiB0aGUgZWxlbWVudCBuYW1lIGlzCiAgICAgICAgICAgICMgcmVwZWF0ZWQsIHJlcGxhY2UgdGhlIHByZXZpb3VzIHNjYWxhciB2YWx1ZSB3aXRoIGEgbmV3IGFycmF5CiAgICAgICAgICAgICMgY29udGFpbmluZyBib3RoIHZhbHVlcy4KICAgICAgICAgICAgaWYgKG5vdCAkY2hpbGRfY291bnRfb2Z7JGNoaWxkX25hbWV9KSB7CiAgICAgICAgICAgICAgICAjIGZpcnN0IHRpbWUgdG8gc2VlIHRoaXMgdmFsdWU6IHVzZSBzY2FsYXIKICAgICAgICAgICAgICAgICRyZXMtPnskY2hpbGRfbmFtZX0gPSAkY2hpbGRfdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzaWYgKCRjaGlsZF9jb3VudF9vZnskY2hpbGRfbmFtZX0gPT0gMSkgewogICAgICAgICAgICAgICAgIyBzZWNvbmQgdGltZSB0byBzZWUgdGhpcyB2YWx1ZTogY29udmVydCBzY2FsYXIgdG8gYXJyYXkKICAgICAgICAgICAgICAgICRyZXMtPnskY2hpbGRfbmFtZX0gPSBbICRyZXMtPnskY2hpbGRfbmFtZX0sICRjaGlsZF92YWx1ZSBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgIyBhbHJlYWR5IGhhdmUgYW4gYXJyYXk6IGFwcGVuZCB0byBpdAogICAgICAgICAgICAgICAgcHVzaCBAeyRyZXMtPnskY2hpbGRfbmFtZX19LCAkY2hpbGRfdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGNoaWxkX2NvdW50X29meyRjaGlsZF9uYW1lfSsrOwogICAgICAgIH0KICAgICAgICAjIEVuZCBwYXRjaCBjb2RlCgogICAgICAgIHJldHVybiBkZWZpbmVkICRjbGFzcyAmJiAkY2xhc3MgbmUgJ1NPQVBTdHJ1Y3QnID8gYmxlc3MoJHJlcyA9PiAkY2xhc3MpIDogJHJlczsKICAgIH0KICAgIGVsc2UgewogICAgICAgIG15ICRyZXM7CiAgICAgICAgaWYgKG15ICRtZXRob2RfcmVmID0gJHNjaGVtYWNsYXNzLT5jYW4oJG1ldGhvZCkpIHsKICAgICAgICAgICAgJHJlcyA9ICRtZXRob2RfcmVmLT4oJHNlbGYsICR2YWx1ZSwgJG5hbWUsICRhdHRycywgJGNoaWxkcmVuLCAkdHlwZSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAkcmVzID0gJHNlbGYtPnR5cGVjYXN0KCR2YWx1ZSwgJG5hbWUsICRhdHRycywgJGNoaWxkcmVuLCAkdHlwZSk7CiAgICAgICAgICAgICRyZXMgPSAkY2xhc3MgPyBkaWUgIlVucmVjb2duaXplZCB0eXBlICckdHlwZSdcbiIgOiAkdmFsdWUKICAgICAgICAgICAgICAgIHVubGVzcyBkZWZpbmVkICRyZXM7CiAgICAgICAgfQogICAgICAgICRzZWxmLT5ocmVmcy0+eyRpZH0gPSAkcmVzIGlmIGRlZmluZWQgJGlkOwogICAgICAgIHJldHVybiAkcmVzOwogICAgfQp9CgpzdWIgc3BsaXRhcnJheSB7CiAgICBteSBAc2l6ZXMgPSBAeytzaGlmdH07CiAgICBteSAkc2l6ZSA9IHNoaWZ0IEBzaXplczsKICAgIG15ICRhcnJheSA9IHNoaWZ0OwoKICAgIHJldHVybiBzcGxpY2UoQCRhcnJheSwgMCwgJHNpemUpIHVubGVzcyBAc2l6ZXM7CiAgICBteSBAYXJyYXkgPSAoKTsKICAgIHB1c2ggQGFycmF5LCBbCiAgICAgICAgc3BsaXRhcnJheShbQHNpemVzXSwgJGFycmF5KQogICAgXSB3aGlsZSBAJGFycmF5ICYmICghZGVmaW5lZCAkc2l6ZSB8fCAkc2l6ZS0tKTsKICAgIHJldHVybiBAYXJyYXk7Cn0KCnN1YiB0eXBlY2FzdCB7IH0gIyB0eXBlY2FzdCBpcyBjYWxsZWQgZm9yIGJvdGggb2JqZWN0cyBBTkQgc2NhbGFyIHR5cGVzCiAgICAgICAgICAgICAgICAgIyBjaGVjayByZWYgb2YgdGhlIHNlY29uZCBwYXJhbWV0ZXIgKGZpcnN0IGlzIHRoZSBvYmplY3QpCiAgICAgICAgICAgICAgICAgIyByZXR1cm4gdW5kZWYgaWYgeW91IGRvbid0IHdhbnQgdG8gaGFuZGxlIGl0CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6Q2xpZW50OwoKCnVzZSBTT0FQOjpMaXRlOjpVdGlsczsKCiRWRVJTSU9OID0gJFNPQVA6OkxpdGU6OlZFUlNJT047CnN1YiBCRUdJTiB7CiAgICBfX1BBQ0tBR0VfXy0+X19ta19hY2Nlc3NvcnMocXcoZW5kcG9pbnQgY29kZSBtZXNzYWdlCiAgICAgICAgaXNfc3VjY2VzcyBzdGF0dXMgb3B0aW9ucykpOwp9CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6U2VydmVyOjpPYmplY3Q7CgpzdWIgZ2VuX2lkOyAqZ2VuX2lkID0gXCZTT0FQOjpTZXJpYWxpemVyOjpnZW5faWQ7CgpteSAlYWxpdmU7Cm15ICVvYmplY3RzOwoKc3ViIG9iamVjdHNfYnlfcmVmZXJlbmNlIHsKICAgIHNoaWZ0OwogICAgd2hpbGUgKEBfKSB7CiAgICAgICAgQGFsaXZle3NoaWZ0KCl9ID0gcmVmICRfWzBdCiAgICAgICAgICAgID8gc2hpZnQKICAgICAgICAgICAgOiBzdWIgewogICAgICAgICAgICAgICAgJF9bMV0tJF9bJF9bNV0gPyA1IDogNF0gPiAkU09BUDo6Q29uc3RhbnRzOjpPQkpTX0JZX1JFRl9LRUVQQUxJVkUKICAgICAgICAgICAgfQogICAgfQogICAga2V5cyAlYWxpdmU7Cn0KCnN1YiByZWZlcmVuY2UgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICRzdGFtcCA9IHRpbWU7CiAgICBteSAkb2JqZWN0ID0gc2hpZnQ7CiAgICBteSAkaWQgPSAkc3RhbXAgLiAkc2VsZi0+Z2VuX2lkKCRvYmplY3QpOwoKICAgICMgdGhpcyBpcyBjb2RlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24KICAgIG15ICR0aW1lID0gdGltZTsKICAgIG15ICR0eXBlID0gcmVmICRvYmplY3Q7CiAgICBteSBAb2JqZWN0cyA9IGdyZXAgeyAkb2JqZWN0c3skX30tPlsxXSBlcSAkdHlwZSB9IGtleXMgJW9iamVjdHM7CiAgICBmb3IgKGdyZXAgeyAkYWxpdmV7JHR5cGV9LT4oc2NhbGFyIEBvYmplY3RzLCAkdGltZSwgQHskb2JqZWN0c3skX319KSB9IEBvYmplY3RzKSB7CiAgICAgICAgZGVsZXRlICRvYmplY3RzeyRffTsKICAgIH0KCiAgICAkb2JqZWN0c3skaWR9ID0gWyRvYmplY3QsICR0eXBlLCAkc3RhbXBdOwogICAgYmxlc3MgeyBpZCA9PiAkaWQgfSA9PiByZWYgJG9iamVjdDsKfQoKc3ViIHJlZmVyZW5jZXMgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIHJldHVybiBAXyB1bmxlc3MgJWFsaXZlOyAjIHNtYWxsIG9wdGltaXphdGlvbgogICAgcmV0dXJuIG1hcCB7CiAgICAgICAgcmVmKCRfKSAmJiBleGlzdHMgJGFsaXZle3JlZiAkX30KICAgICAgICAgICAgPyAkc2VsZi0+cmVmZXJlbmNlKCRfKQogICAgICAgICAgICA6ICRfCiAgICB9IEBfOwp9CgpzdWIgb2JqZWN0IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAkY2xhc3MgPSByZWYoJHNlbGYpIHx8ICRzZWxmOwogICAgbXkgJG9iamVjdCA9IHNoaWZ0OwogICAgcmV0dXJuICRvYmplY3QgdW5sZXNzIHJlZigkb2JqZWN0KSAmJiAkYWxpdmV7cmVmICRvYmplY3R9ICYmIGV4aXN0cyAkb2JqZWN0LT57aWR9OwoKICAgIG15ICRyZWZlcmVuY2UgPSAkb2JqZWN0c3skb2JqZWN0LT57aWR9fTsKICAgIGRpZSAiT2JqZWN0IHdpdGggc3BlY2lmaWVkIGlkIGNvdWxkbid0IGJlIGZvdW5kXG4iIHVubGVzcyByZWYgJHJlZmVyZW5jZS0+WzBdOwoKICAgICRyZWZlcmVuY2UtPlszXSA9IHRpbWU7ICMgbGFzdCBhY2Nlc3MgdGltZQogICAgcmV0dXJuICRyZWZlcmVuY2UtPlswXTsgIyByZWZlcmVuY2UgdG8gYWN0dWFsIG9iamVjdAp9CgpzdWIgb2JqZWN0cyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgcmV0dXJuIEBfIHVubGVzcyAlYWxpdmU7ICMgc21hbGwgb3B0aW1pemF0aW9uCiAgICByZXR1cm4gbWFwIHsKICAgICAgICByZWYoJF8pICYmIGV4aXN0cyAkYWxpdmV7cmVmICRffSAmJiBleGlzdHMgJF8tPntpZH0KICAgICAgICAgICAgPyAkc2VsZi0+b2JqZWN0KCRfKQogICAgICAgICAgICA6ICRfCiAgICB9IEBfOwp9CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6U2VydmVyOjpQYXJhbWV0ZXJzOwoKc3ViIGJ5TmFtZU9yT3JkZXIgewogICAgdW5sZXNzIChVTklWRVJTQUw6OmlzYSgkX1stMV0gPT4gJ1NPQVA6OlNPTScpKSB7CiAgICAgICAgd2FybiAiTGFzdCBwYXJhbWV0ZXIgaXMgZXhwZWN0ZWQgdG8gYmUgZW52ZWxvcGVcbiIgaWYgJF5XOwogICAgICAgIHBvcDsKICAgICAgICByZXR1cm4gQF87CiAgICB9CiAgICBteSAkcGFyYW1zID0gcG9wLT5tZXRob2Q7CiAgICBteSBAbWFuZGF0b3J5ID0gcmVmICRfWzBdIGVxICdBUlJBWScKICAgICAgICA/IEB7c2hpZnQoKX0KICAgICAgICA6IGRpZSAibGlzdCBvZiBwYXJhbWV0ZXJzIGV4cGVjdGVkIGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIgZm9yIGJ5TmFtZSI7CiAgICBteSAkYnluYW1lID0gMDsKICAgIG15IEByZXMgPSBtYXAgeyAkYnluYW1lICs9IGV4aXN0cyAkcGFyYW1zLT57JF99OyAkcGFyYW1zLT57JF99IH0gQG1hbmRhdG9yeTsKICAgIHJldHVybiAkYnluYW1lCiAgICAgICAgPyBAcmVzCiAgICAgICAgOiBAXzsKfQoKc3ViIGJ5TmFtZSB7CiAgdW5sZXNzIChVTklWRVJTQUw6OmlzYSgkX1stMV0gPT4gJ1NPQVA6OlNPTScpKSB7CiAgICB3YXJuICJMYXN0IHBhcmFtZXRlciBpcyBleHBlY3RlZCB0byBiZSBlbnZlbG9wZVxuIiBpZiAkXlc7CiAgICBwb3A7CiAgICByZXR1cm4gQF87CiAgfQogIHJldHVybiBAe3BvcC0+bWV0aG9kfXtyZWYgJF9bMF0gZXEgJ0FSUkFZJyA/IEB7c2hpZnQoKX0gOiBkaWUgImxpc3Qgb2YgcGFyYW1ldGVycyBleHBlY3RlZCBhcyB0aGUgZmlyc3QgcGFyYW1ldGVyIGZvciBieU5hbWUifTsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlNlcnZlcjsKCnVzZSBDYXJwICgpOwp1c2UgU2NhbGFyOjpVdGlsIHF3KHdlYWtlbik7CnN1YiBERVNUUk9ZIHsgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJykgfQoKc3ViIGluaXRpYWxpemUgewogICAgcmV0dXJuICgKICAgICAgICBwYWNrYWdlciA9PiBTT0FQOjpQYWNrYWdlcjo6TUlNRS0+bmV3LAogICAgICAgIHRyYW5zcG9ydCA9PiBTT0FQOjpUcmFuc3BvcnQtPm5ldywKICAgICAgICBzZXJpYWxpemVyID0+IFNPQVA6OlNlcmlhbGl6ZXItPm5ldywKICAgICAgICBkZXNlcmlhbGl6ZXIgPT4gU09BUDo6RGVzZXJpYWxpemVyLT5uZXcsCiAgICAgICAgb25fYWN0aW9uID0+IHN1YiB7IDsgfSwKICAgICAgICBvbl9kaXNwYXRjaCA9PiBzdWIgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSwKICAgICk7Cn0KCnN1YiBuZXcgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIHJldHVybiAkc2VsZiBpZiByZWYgJHNlbGY7CgogICAgdW5sZXNzIChyZWYgJHNlbGYpIHsKICAgICAgICBteSAkY2xhc3MgPSAkc2VsZjsKICAgICAgICBteShAcGFyYW1zLCBAbWV0aG9kcyk7CgogICAgICAgIHdoaWxlIChAXykgewogICAgICAgICAgICBteSgkbWV0aG9kLCAkcGFyYW1zKSA9IHNwbGljZShAXywwLDIpOwogICAgICAgICAgICAkY2xhc3MtPmNhbigkbWV0aG9kKQogICAgICAgICAgICAgICAgPyBwdXNoKEBtZXRob2RzLCAkbWV0aG9kLCAkcGFyYW1zKQogICAgICAgICAgICAgICAgOiAkXlcgJiYgQ2FycDo6Y2FycCAiVW5yZWNvZ25pemVkIHBhcmFtZXRlciAnJG1ldGhvZCcgaW4gbmV3KCkiOwogICAgICAgIH0KCiAgICAgICAgJHNlbGYgPSBibGVzcyB7CiAgICAgICAgICAgIF9kaXNwYXRjaF90byAgID0+IFtdLAogICAgICAgICAgICBfZGlzcGF0Y2hfd2l0aCA9PiB7fSwKICAgICAgICAgICAgX2Rpc3BhdGNoZWQgICAgPT4gW10sCiAgICAgICAgICAgIF9hY3Rpb24gICAgICAgID0+ICcnLAogICAgICAgICAgICBfb3B0aW9ucyAgICAgICA9PiB7fSwKICAgICAgICB9ID0+ICRjbGFzczsKICAgICAgICB1bnNoaWZ0KEBtZXRob2RzLCAkc2VsZi0+aW5pdGlhbGl6ZSk7CiAgICAgICAgbm8gc3RyaWN0IHF3KHJlZnMpOwogICAgICAgIHdoaWxlIChAbWV0aG9kcykgewogICAgICAgICAgICBteSgkbWV0aG9kLCAkcGFyYW1zKSA9IHNwbGljZShAbWV0aG9kcywwLDIpOwogICAgICAgICAgICAkc2VsZi0+JG1ldGhvZChyZWYgJHBhcmFtcyBlcSAnQVJSQVknID8gQCRwYXJhbXMgOiAkcGFyYW1zKQogICAgICAgIH0KICAgICAgICBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKTsKICAgIH0KCiAgICBDYXJwOjpjYXJwICJPZGQgKHdyb25nPykgbnVtYmVyIG9mIHBhcmFtZXRlcnMgaW4gbmV3KCkiCiAgICAgICAgaWYgJF5XICYmIChAXyAmIDEpOwoKICAgIG5vIHN0cmljdCBxdyhyZWZzKTsKICAgIHdoaWxlIChAXykgewogICAgICAgIG15KCRtZXRob2QsICRwYXJhbXMpID0gc3BsaWNlKEBfLDAsMik7CiAgICAgICAgJHNlbGYtPmNhbigkbWV0aG9kKQogICAgICAgICAgICA/ICRzZWxmLT4kbWV0aG9kKHJlZiAkcGFyYW1zIGVxICdBUlJBWScgPyBAJHBhcmFtcyA6ICRwYXJhbXMpCiAgICAgICAgICAgIDogJF5XICYmIENhcnA6OmNhcnAgIlVucmVjb2duaXplZCBwYXJhbWV0ZXIgJyRtZXRob2QnIGluIG5ldygpIgogICAgfQoKICAgIHJldHVybiAkc2VsZjsKfQoKc3ViIGluaXRfY29udGV4dCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgJHNlbGYtPnsnX2Rlc2VyaWFsaXplcid9LT57J19jb250ZXh0J30gPSAkc2VsZjsKICAgICMgd2Vha2VuIGNpcmN1bGFyIHJlZmVyZW5jZSB0byBhdm9pZCBhIG1lbW9yeSBob2xlCiAgICB3ZWFrZW4oJHNlbGYtPnsnX2Rlc2VyaWFsaXplcid9LT57J19jb250ZXh0J30pOwoKICAgICRzZWxmLT57J19zZXJpYWxpemVyJ30tPnsnX2NvbnRleHQnfSA9ICRzZWxmOwogICAgIyB3ZWFrZW4gY2lyY3VsYXIgcmVmZXJlbmNlIHRvIGF2b2lkIGEgbWVtb3J5IGhvbGUKICAgIHdlYWtlbigkc2VsZi0+eydfc2VyaWFsaXplcid9LT57J19jb250ZXh0J30pOwp9CgpzdWIgQkVHSU4gewogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgIGZvciBteSAkbWV0aG9kIChxdyhzZXJpYWxpemVyIGRlc2VyaWFsaXplciB0cmFuc3BvcnQpKSB7CiAgICAgICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICAgICAqJG1ldGhvZCA9IHN1YiB7CiAgICAgICAgICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldygpOwogICAgICAgICAgICBpZiAoQF8pIHsKICAgICAgICAgICAgICAgIG15ICRjb250ZXh0ID0gJHNlbGYtPnskZmllbGR9LT57J19jb250ZXh0J307ICMgc2F2ZSB0aGUgb2xkIGNvbnRleHQKICAgICAgICAgICAgICAgICRzZWxmLT57JGZpZWxkfSA9IHNoaWZ0OwogICAgICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9LT57J19jb250ZXh0J30gPSAkY29udGV4dDsgICAgIyByZXN0b3JlIHRoZSBvbGQgY29udGV4dAogICAgICAgICAgICAgICAgcmV0dXJuICRzZWxmOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuICRzZWxmLT57JGZpZWxkfTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmb3IgbXkgJG1ldGhvZCAocXcoYWN0aW9uIG15dXJpIG9wdGlvbnMgZGlzcGF0Y2hfd2l0aCBwYWNrYWdlcikpIHsKICAgIG15ICRmaWVsZCA9ICdfJyAuICRtZXRob2Q7CiAgICAgICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgICAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXcoKTsKICAgICAgICAgICAgKEBfKQogICAgICAgICAgICAgICAgPyBkbyB7CiAgICAgICAgICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9ID0gc2hpZnQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzZWxmOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgICAgIH0KICAgIH0KICAgIGZvciBteSAkbWV0aG9kIChxdyhvbl9hY3Rpb24gb25fZGlzcGF0Y2gpKSB7CiAgICAgICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICAgICAqJG1ldGhvZCA9IHN1YiB7CiAgICAgICAgICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgICAgICAgICAgIyBteSAkc2VsZiA9IHNoaWZ0OwogICAgICAgICAgICByZXR1cm4gJHNlbGYtPnskZmllbGR9IHVubGVzcyBAXzsKICAgICAgICAgICAgbG9jYWwgJEA7CiAgICAgICAgICAgICMgY29tbWVudGVkIG91dCBiZWNhdXNlIHRoYXQgJ2V2YWwnIHdhcyB1bnNlY3VyZQogICAgICAgICAgICAjID4gcmVmICRfWzBdIGVxICdDT0RFJyA/IHNoaWZ0IDogZXZhbCBzaGlmdDsKICAgICAgICAgICAgIyBBbSBJIHBhcmFub2lkIGVub3VnaD8KICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9ID0gc2hpZnQ7CiAgICAgICAgICAgIENhcnA6OmNyb2FrICRAIGlmICRAOwogICAgICAgICAgICBDYXJwOjpjcm9hayAiJG1ldGhvZCgpIGV4cGVjdHMgc3Vicm91dGluZSAoQ09ERSkgb3Igc3RyaW5nIHRoYXQgZXZhbHVhdGVzIGludG8gc3Vicm91dGluZSAoQ09ERSkiCiAgICAgICAgICAgICAgICB1bmxlc3MgcmVmICRzZWxmLT57JGZpZWxkfSBlcSAnQ09ERSc7CiAgICAgICAgICAgIHJldHVybiAkc2VsZjsKICAgICAgICB9CiAgICB9CgogICAgIyAgICBfX1BBQ0tBR0VfXy0+X19ta19hY2Nlc3NvcnMoIHF3KGRpc3BhdGNoX3RvKSApOwogICAgZm9yIG15ICRtZXRob2QgKHF3KGRpc3BhdGNoX3RvKSkgewogICAgICAgIG15ICRmaWVsZCA9ICdfJyAuICRtZXRob2Q7CiAgICAgICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgICAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CiAgICAgICAgICAgICMgbXkgJHNlbGYgPSBzaGlmdDsKICAgICAgICAgICAgKEBfKQogICAgICAgICAgICAgICAgPyBkbyB7CiAgICAgICAgICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9ID0gW0BfXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNlbGY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA6IHJldHVybiBAeyAkc2VsZi0+eyRmaWVsZH0gfTsKICAgICAgICB9CiAgICB9Cn0KCnN1YiBvYmplY3RzX2J5X3JlZmVyZW5jZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgJHNlbGYgPSAkc2VsZi0+bmV3KCkgaWYgbm90IHJlZiAkc2VsZjsKICAgIEBfCiAgICAgICAgPyAoU09BUDo6U2VydmVyOjpPYmplY3QtPm9iamVjdHNfYnlfcmVmZXJlbmNlKEBfKSwgcmV0dXJuICRzZWxmKQogICAgICAgIDogU09BUDo6U2VydmVyOjpPYmplY3QtPm9iamVjdHNfYnlfcmVmZXJlbmNlOwp9CgpzdWIgZGlzcGF0Y2hlZCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgJHNlbGYgPSAkc2VsZi0+bmV3KCkgaWYgbm90IHJlZiAkc2VsZjsKICAgIEBfCiAgICAgICAgPyAocHVzaChAeyRzZWxmLT57X2Rpc3BhdGNoZWR9fSwgQF8pLCByZXR1cm4gJHNlbGYpCiAgICAgICAgOiByZXR1cm4gQHskc2VsZi0+e19kaXNwYXRjaGVkfX07Cn0KCnN1YiBmaW5kX3RhcmdldCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgJHJlcXVlc3QgPSBzaGlmdDsKCiAgICAjIHRyeSB0byBmaW5kIFVSSS9tZXRob2QgZnJvbSBvbl9kaXNwYXRjaCBjYWxsIGZpcnN0CiAgICBteSgkbWV0aG9kX3VyaSwgJG1ldGhvZF9uYW1lKSA9ICRzZWxmLT5vbl9kaXNwYXRjaC0+KCRyZXF1ZXN0KTsKCiAgICAjIGlmIG5vdGhpbmcgdGhlcmUsIHRoZW4gZ2V0IGl0IGZyb20gZW52ZWxvcGUgaXRzZWxmCiAgICAkcmVxdWVzdC0+bWF0Y2goKHJlZiAkcmVxdWVzdCktPm1ldGhvZCk7CiAgICAoJG1ldGhvZF91cmksICRtZXRob2RfbmFtZSkgPSAoJHJlcXVlc3QtPm5hbWVzcGFjZXVyaW9mIHx8ICcnLCAkcmVxdWVzdC0+ZGF0YW9mLT5uYW1lKQogICAgICAgIHVubGVzcyAkbWV0aG9kX25hbWU7CgogICAgJHNlbGYtPm9uX2FjdGlvbi0+KG15ICRhY3Rpb24gPSAkc2VsZi0+YWN0aW9uLCAkbWV0aG9kX3VyaSwgJG1ldGhvZF9uYW1lKTsKCiAgICAjIGNoZWNrIHRvIGF2b2lkIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdHk6IFByb3RlY3RlZC0+VW5wcm90ZWN0ZWQ6Om1ldGhvZChAcGFyYW1ldGVycykKICAgICMgc2VlIGZvciBtb3JlIGRldGFpbHM6IGh0dHA6Ly93d3cucGhyYWNrLm9yZy9waHJhY2svNTgvcDU4LTB4MDkKICAgIGRpZSAiRGVuaWVkIGFjY2VzcyB0byBtZXRob2QgKCRtZXRob2RfbmFtZSlcbiIgdW5sZXNzICRtZXRob2RfbmFtZSA9fiAvXlx3KyQvOwoKICAgIG15ICgkY2xhc3MsICRzdGF0aWMpOwogICAgIyB0cnkgdG8gYmluZCBkaXJlY3RseQogICAgaWYgKGRlZmluZWQoJGNsYXNzID0gJHNlbGYtPmRpc3BhdGNoX3dpdGgtPnskbWV0aG9kX3VyaX0KICAgICAgICAgICAgfHwgJHNlbGYtPmRpc3BhdGNoX3dpdGgtPnskYWN0aW9uIHx8ICcnfQogICAgICAgICAgICB8fCAoJGFjdGlvbiA9fiAvXiIoLispIiQvCiAgICAgICAgICAgICAgICA/ICRzZWxmLT5kaXNwYXRjaF93aXRoLT57JDF9CiAgICAgICAgICAgICAgICA6IHVuZGVmKSkpIHsKICAgICAgICAjIHJldHVybiBvYmplY3QsIG5vdGhpbmcgZWxzZSB0byBkbyBoZXJlCiAgICAgICAgcmV0dXJuICgkY2xhc3MsICRtZXRob2RfdXJpLCAkbWV0aG9kX25hbWUpIGlmIHJlZiAkY2xhc3M7CiAgICAgICAgJHN0YXRpYyA9IDE7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBkaWUgIlVSSSBwYXRoIHNoYWxsIG1hcCB0byBjbGFzcyIgdW5sZXNzIGRlZmluZWQgKCRjbGFzcyA9IFVSSS0+bmV3KCRtZXRob2RfdXJpKS0+cGF0aCk7CgogICAgICAgIGZvciAoJGNsYXNzKSB7IHMhXi98LyQhIWc7IHMhLyE6OiFnOyBzL14kL21haW4vOyB9CiAgICAgICAgZGllICJGYWlsZWQgdG8gYWNjZXNzIGNsYXNzICgkY2xhc3MpIiB1bmxlc3MgJGNsYXNzID1+IC9eKFx3W1x3Ol0qKSQvOwoKICAgICAgICBteSAkZnVsbG5hbWUgPSAiJGNsYXNzXDo6JG1ldGhvZF9uYW1lIjsKICAgICAgICBmb3JlYWNoICgkc2VsZi0+ZGlzcGF0Y2hfdG8pIHsKICAgICAgICAgICAgcmV0dXJuICgkXywgJG1ldGhvZF91cmksICRtZXRob2RfbmFtZSkgaWYgcmVmIGVxICRjbGFzczsgIyAkT0JKRUNUCiAgICAgICAgICAgIG5leHQgaWYgcmVmOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBza2lwIG90aGVyIG9iamVjdHMKICAgICAgICAgICAgIyB3aWxsIGlnbm9yZSBlcnJvcnMsIGJlY2F1c2UgaXQgbWF5IGNvbXBsYWluIG9uCiAgICAgICAgICAgICMgZDpcZm9vXGJhciwgd2hpY2ggaXMgUEFUSCBhbmQgbm90IHJlZ2V4cAogICAgICAgICAgICBldmFsIHsKICAgICAgICAgICAgICAgICRzdGF0aWMgfHw9ICRjbGFzcyA9fiAvXiRfJC8gICAgICAgICAgICMgTU9EVUxFCiAgICAgICAgICAgICAgICAgICAgfHwgJGZ1bGxuYW1lID1+IC9eJF8kLyAgICAgICAgICAgICAjIE1PRFVMRTo6bWV0aG9kCiAgICAgICAgICAgICAgICAgICAgfHwgJG1ldGhvZF9uYW1lID1+IC9eJF8kLyAmJiAoJGNsYXNzIGVxICdtYWluJyk7ICMgbWV0aG9kICgnbWFpbicgYXNzdW1lZCkKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9CgogICAgbm8gc3RyaWN0ICdyZWZzJzsKCiMgVE9ETyAtIHNvcnQgdGhpcyBtZXNzIG91dDoKIyBUaGUgdGFzayBpcyB0byB0ZXN0IHdoZXRoZXIgdGhlIGNsYXNzIGluIHF1ZXN0aW9uIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkLgojCiMgU09BUDo6TGl0ZSAwLjYwOgojICB1bmxlc3MgKGRlZmluZWQgJXsiJHtjbGFzc306OiJ9KSB7CiMgUGF0Y2ggdG8gU09BUDo6TGl0ZSAwLjYwOgojIFRoZSBmb2xsb3dpbmcgcGF0Y2ggZG9lcyBub3Qgd29yayBmb3IgcGFja2FnZXMgZGVmaW5lZCB3aXRoaW4gYSBCRUdJTiBibG9jawojICB1bmxlc3MgKGV4aXN0cygkSU5De2pvaW4gJy8nLCBzcGxpdCAvOjovLCAkY2xhc3MuJy5wbSd9KSkgewojIENvbWJpbmF0aW9uIG9mIDAuNjAgYW5kIHBhdGNoIGRpZCBub3Qgd29yayByZWxpYWJseSwgZWl0aGVyLgojCiMgTm93IHdlIGRvIHRoZSBmb2xsb3dpbmc6IENoZWNrIHdoZXRoZXIgdGhlIGNsYXNzIGlzIG1haW4gKGFsd2F5cyBsb2FkZWQpCiMgb3IgdGhlIGNsYXNzIGltcGxlbWVudHMgdGhlIG1ldGhvZCBpbiBxdWVzdGlvbgojIG9yIHRoZSBwYWNrYWdlIGV4aXN0cyBhcyBmaWxlIGluICVJTkMuCiMKIyBUaGlzIGlzIHN0aWxsIHNvcnQgb2YgYSBoYWNrIC0gYnV0IEkgZG9uJ3Qga25vdyBhbnl0aGluZyBiZXR0ZXIKIyBJZiB5b3UgaGF2ZSBzb21lIGlkZWEsIHBsZWFzZSBoZWxwIG1lIG91dC4uLgojCiAgICB1bmxlc3MgKCgkY2xhc3MgZXEgJ21haW4nKSB8fCAkY2xhc3MtPmNhbigkbWV0aG9kX25hbWUpCiAgICAgICAgfHwgZXhpc3RzKCRJTkN7am9pbiAnLycsIHNwbGl0IC86Oi8sICRjbGFzcyAuICcucG0nfSkpIHsKCiAgICAgICAgIyBhbGxvdyBhbGwgZm9yIHN0YXRpYyBhbmQgb25seSBzcGVjaWZpZWQgcGF0aCBmb3IgZHluYW1pYyBiaW5kaW5ncwogICAgICAgIGxvY2FsIEBJTkMgPSAoKCRzdGF0aWMgPyBASU5DIDogKCkpLCBncmVwIHshcmVmICYmIG0hWy9cXC5dIX0gJHNlbGYtPmRpc3BhdGNoX3RvKCkpOwogICAgICAgIGV2YWwgJ2xvY2FsICReVzsgJyAuICJyZXF1aXJlICRjbGFzcyI7CiAgICAgICAgZGllICJGYWlsZWQgdG8gYWNjZXNzIGNsYXNzICgkY2xhc3MpOiAkQCIgaWYgJEA7CiAgICAgICAgJHNlbGYtPmRpc3BhdGNoZWQoJGNsYXNzKSB1bmxlc3MgJHN0YXRpYzsKICAgIH0KCiAgICBkaWUgIkRlbmllZCBhY2Nlc3MgdG8gbWV0aG9kICgkbWV0aG9kX25hbWUpIGluIGNsYXNzICgkY2xhc3MpIgogICAgICAgIHVubGVzcyAkc3RhdGljIHx8IGdyZXAgey9eJGNsYXNzJC99ICRzZWxmLT5kaXNwYXRjaGVkOwoKICAgIHJldHVybiAoJGNsYXNzLCAkbWV0aG9kX3VyaSwgJG1ldGhvZF9uYW1lKTsKfQoKc3ViIGhhbmRsZSB7CiAgICBTT0FQOjpUcmFjZTo6dHJhY2UoJygpJyk7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgJHNlbGYgPSAkc2VsZi0+bmV3IGlmICFyZWYgJHNlbGY7ICMgaW5pdHMgdGhlIHNlcnZlciB3aGVuIGNhbGxlZCBpbiBhIHN0YXRpYyBjb250ZXh0CiAgICAkc2VsZi0+aW5pdF9jb250ZXh0KCk7CiAgICAjIHdlIHdhbnQgdG8gcmVzdG9yZSBpdCB3aGVuIHdlIGFyZSBkb25lCiAgICBsb2NhbCAkU09BUDo6Q29uc3RhbnRzOjpERUZBVUxUX1hNTF9TQ0hFTUEKICAgICAgICA9ICRTT0FQOjpDb25zdGFudHM6OkRFRkFVTFRfWE1MX1NDSEVNQTsKCiAgICAjIFNPQVAgdmVyc2lvbiBXSUxMIE5PVCBiZSByZXN0b3JlZCB3aGVuIHdlIGFyZSBkb25lLgogICAgIyBpcyBpdCBwcm9ibGVtPwoKICAgIG15ICRyZXN1bHQgPSBldmFsIHsKICAgICAgICBsb2NhbCAkU0lHe19fRElFX199OwogICAgICAgICMgd2h5IGlzIHRoaXMgaGVyZToKICAgICAgICAkc2VsZi0+c2VyaWFsaXplci0+c29hcHZlcnNpb24oMS4xKTsKICAgICAgICBteSAkcmVxdWVzdCA9IGV2YWwgeyAkc2VsZi0+ZGVzZXJpYWxpemVyLT5kZXNlcmlhbGl6ZSgkX1swXSkgfTsKCiAgICAgICAgZGllIFNPQVA6OkZhdWx0CiAgICAgICAgICAgIC0+ZmF1bHRjb2RlKCRTT0FQOjpDb25zdGFudHM6OkZBVUxUX1ZFUlNJT05fTUlTTUFUQ0gpCiAgICAgICAgICAgIC0+ZmF1bHRzdHJpbmcoJEApCiAgICAgICAgICAgICAgICBpZiAkQCAmJiAkQCA9fiAvXiRTT0FQOjpDb25zdGFudHM6OldST05HX1ZFUlNJT04vOwoKICAgICAgICBkaWUgIkFwcGxpY2F0aW9uIGZhaWxlZCBkdXJpbmcgcmVxdWVzdCBkZXNlcmlhbGl6YXRpb246ICRAIiBpZiAkQDsKICAgICAgICBteSAkc29tID0gcmVmICRyZXF1ZXN0OwogICAgICAgIGRpZSAiQ2FuJ3QgZmluZCByb290IGVsZW1lbnQgaW4gdGhlIG1lc3NhZ2UiCiAgICAgICAgICAgIHVubGVzcyAkcmVxdWVzdC0+bWF0Y2goJHNvbS0+ZW52ZWxvcGUpOwogICAgICAgICRzZWxmLT5zZXJpYWxpemVyLT5zb2FwdmVyc2lvbihTT0FQOjpMaXRlLT5zb2FwdmVyc2lvbik7CiAgICAgICAgJHNlbGYtPnNlcmlhbGl6ZXItPnhtbHNjaGVtYSgkU09BUDo6Q29uc3RhbnRzOjpERUZBVUxUX1hNTF9TQ0hFTUEKICAgICAgICAgICAgPSAkc2VsZi0+ZGVzZXJpYWxpemVyLT54bWxzY2hlbWEpCiAgICAgICAgICAgICAgICBpZiAkc2VsZi0+ZGVzZXJpYWxpemVyLT54bWxzY2hlbWE7CgogICAgICAgIGRpZSBTT0FQOjpGYXVsdAogICAgICAgICAgICAtPmZhdWx0Y29kZSgkU09BUDo6Q29uc3RhbnRzOjpGQVVMVF9NVVNUX1VOREVSU1RBTkQpCiAgICAgICAgICAgIC0+ZmF1bHRzdHJpbmcoIlVucmVjb2duaXplZCBoZWFkZXIgaGFzIG11c3RVbmRlcnN0YW5kIGF0dHJpYnV0ZSBzZXQgdG8gJ3RydWUnIikKICAgICAgICAgICAgaWYgISRTT0FQOjpDb25zdGFudHM6OkRPX05PVF9DSEVDS19NVVNUVU5ERVJTVEFORCAmJgogICAgICAgICAgICAgICAgZ3JlcCB7CiAgICAgICAgICAgICAgICAgICAgJF8tPm11c3RVbmRlcnN0YW5kCiAgICAgICAgICAgICAgICAgICAgJiYgKCEkXy0+YWN0b3IgfHwgJF8tPmFjdG9yIGVxICRTT0FQOjpDb25zdGFudHM6Ok5FWFRfQUNUT1IpCiAgICAgICAgICAgICAgICB9ICRyZXF1ZXN0LT5kYXRhb2YoJHNvbS0+aGVhZGVycyk7CgogICAgICAgIGRpZSAiQ2FuJ3QgZmluZCBtZXRob2QgZWxlbWVudCBpbiB0aGUgbWVzc2FnZSIKICAgICAgICAgICAgdW5sZXNzICRyZXF1ZXN0LT5tYXRjaCgkc29tLT5tZXRob2QpOwogICAgICAgICMgVE9ETyAtIFNPQVA6OkRpc3BhdGNoZXIgcGx1Z3MgaW4gaGVyZQogICAgICAgICMgbXkgJGhhbmRsZXIgPSAkc2VsZi0+ZGlzcGF0Y2hlci0+ZmluZF9oYW5kbGVyKCRyZXF1ZXN0KTsKICAgICAgICBteSgkY2xhc3MsICRtZXRob2RfdXJpLCAkbWV0aG9kX25hbWUpID0gJHNlbGYtPmZpbmRfdGFyZ2V0KCRyZXF1ZXN0KTsKICAgICAgICBteSBAcmVzdWx0cyA9IGV2YWwgewogICAgICAgICAgICBsb2NhbCAkXlc7CiAgICAgICAgICAgIG15IEBwYXJhbWV0ZXJzID0gJHJlcXVlc3QtPnBhcmFtc2luOwoKICAgICAgICAgICAgIyBTT0FQOjpUcmFjZTo6ZGlzcGF0Y2goJGZ1bGxuYW1lKTsKICAgICAgICAgICAgU09BUDo6VHJhY2U6OnBhcmFtZXRlcnMoQHBhcmFtZXRlcnMpOwoKICAgICAgICAgICAgcHVzaCBAcGFyYW1ldGVycywgJHJlcXVlc3QKICAgICAgICAgICAgICAgIGlmIFVOSVZFUlNBTDo6aXNhKCRjbGFzcyA9PiAnU09BUDo6U2VydmVyOjpQYXJhbWV0ZXJzJyk7CgogICAgICAgICAgICBubyBzdHJpY3QgcXcocmVmcyk7CiAgICAgICAgICAgIFNPQVA6OlNlcnZlcjo6T2JqZWN0LT5yZWZlcmVuY2VzKAogICAgICAgICAgICAgICAgZGVmaW5lZCAkcGFyYW1ldGVyc1swXQogICAgICAgICAgICAgICAgJiYgcmVmICRwYXJhbWV0ZXJzWzBdCiAgICAgICAgICAgICAgICAmJiBVTklWRVJTQUw6OmlzYSgkcGFyYW1ldGVyc1swXSA9PiAkY2xhc3MpCiAgICAgICAgICAgICAgICAgICAgPyBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIG15ICRvYmplY3QgPSBzaGlmdCBAcGFyYW1ldGVyczsKICAgICAgICAgICAgICAgICAgICAgICAgU09BUDo6U2VydmVyOjpPYmplY3QtPm9iamVjdChyZWYgJGNsYXNzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICRjbGFzcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAkb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICktPiRtZXRob2RfbmFtZShTT0FQOjpTZXJ2ZXI6Ok9iamVjdC0+b2JqZWN0cyhAcGFyYW1ldGVycykpLAoKICAgICAgICAgICAgICAgICAgICAgICAgIyBzZW5kIG9iamVjdCBiYWNrIGFzIGEgaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICMgcHJlc2VydmUgbmFtZSwgc3BlY2lmeSBVUkkKICAgICAgICAgICAgICAgICAgICAgICAgU09BUDo6SGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPnVyaSgkU09BUDo6Q29uc3RhbnRzOjpOU19TTF9IRUFERVIgPT4gJG9iamVjdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+bmFtZSgkcmVxdWVzdC0+ZGF0YW9mKCRzb20tPm1ldGhvZC4nL1sxXScpLT5uYW1lKQogICAgICAgICAgICAgICAgICAgIH0gIyBlbmQgZG8gYmxvY2sKCiAgICAgICAgICAgICAgICAgICAgIyBTT0FQOjpEaXNwYXRjaGVyIHdpbGwgcGx1Zy1pbiBoZXJlIGFzIHdlbGwKICAgICAgICAgICAgICAgICAgICAjICRoYW5kbGVyLT5kaXNwYXRjaChTT0FQOjpTZXJ2ZXI6Ok9iamVjdC0+b2JqZWN0cyhAcGFyYW1ldGVycykKICAgICAgICAgICAgICAgICAgICA6ICRjbGFzcy0+JG1ldGhvZF9uYW1lKFNPQVA6OlNlcnZlcjo6T2JqZWN0LT5vYmplY3RzKEBwYXJhbWV0ZXJzKSkgKTsKICAgICAgICB9OyAjIGVuZCBldmFsIGJsb2NrCiAgICAgICAgU09BUDo6VHJhY2U6OnJlc3VsdChAcmVzdWx0cyk7CgogICAgICAgICMgbGV0IGFwcGxpY2F0aW9uIGVycm9ycyBwYXNzIHRocm91Z2ggd2l0aCAnU2VydmVyJyBjb2RlCiAgICAgICAgZGllIHJlZiAkQAogICAgICAgICAgICA/ICRACiAgICAgICAgICAgIDogJEAgPX4gL15DYW5cJ3QgbG9jYXRlIG9iamVjdCBtZXRob2QgIiRtZXRob2RfbmFtZSIvCiAgICAgICAgICAgICAgICA/ICJGYWlsZWQgdG8gbG9jYXRlIG1ldGhvZCAoJG1ldGhvZF9uYW1lKSBpbiBjbGFzcyAoJGNsYXNzKSIKICAgICAgICAgICAgICAgIDogU09BUDo6RmF1bHQtPmZhdWx0Y29kZSgkU09BUDo6Q29uc3RhbnRzOjpGQVVMVF9TRVJWRVIpLT5mYXVsdHN0cmluZygkQCkKICAgICAgICAgICAgICAgICAgICBpZiAkQDsKCiAgICAgICAgbXkgJHJlc3VsdCA9ICRzZWxmLT5zZXJpYWxpemVyCiAgICAgICAgICAgIC0+cHJlZml4KCdzJykgIyBkaXN0aW5ndWlzaCBnZW5lcmF0ZWQgZWxlbWVudCBuYW1lcyBiZXR3ZWVuIGNsaWVudCBhbmQgc2VydmVyCiAgICAgICAgICAgIC0+dXJpKCRtZXRob2RfdXJpKQogICAgICAgICAgICAtPmVudmVsb3BlKHJlc3BvbnNlID0+ICRtZXRob2RfbmFtZSAuICdSZXNwb25zZScsIEByZXN1bHRzKTsKICAgICAgICByZXR1cm4gJHJlc3VsdDsKICAgIH07CgogICAgIyB2b2lkIGNvbnRleHQKICAgIHJldHVybiB1bmxlc3MgZGVmaW5lZCB3YW50YXJyYXk7CgogICAgIyBub3JtYWwgcmVzdWx0CiAgICByZXR1cm4gJHJlc3VsdCB1bmxlc3MgJEA7CgogICAgIyBjaGVjayBmYWlscywgc29tZXRoaW5nIHdyb25nIHdpdGggbWVzc2FnZQogICAgcmV0dXJuICRzZWxmLT5tYWtlX2ZhdWx0KCRTT0FQOjpDb25zdGFudHM6OkZBVUxUX0NMSUVOVCwgJEApIHVubGVzcyByZWYgJEA7CgogICAgIyBkaWVkIHdpdGggU09BUDo6RmF1bHQKICAgIHJldHVybiAkc2VsZi0+bWFrZV9mYXVsdCgkQC0+ZmF1bHRjb2RlICAgfHwgJFNPQVA6OkNvbnN0YW50czo6RkFVTFRfU0VSVkVSLAogICAgICAgICRALT5mYXVsdHN0cmluZyB8fCAnQXBwbGljYXRpb24gZXJyb3InLAogICAgICAgICRALT5mYXVsdGRldGFpbCwgJEAtPmZhdWx0YWN0b3IpCiAgICBpZiBVTklWRVJTQUw6OmlzYSgkQCA9PiAnU09BUDo6RmF1bHQnKTsKCiAgICAjIGRpZWQgd2l0aCBjb21wbGV4IGRldGFpbAogICAgcmV0dXJuICRzZWxmLT5tYWtlX2ZhdWx0KCRTT0FQOjpDb25zdGFudHM6OkZBVUxUX1NFUlZFUiwgJ0FwcGxpY2F0aW9uIGVycm9yJyA9PiAkQCk7Cgp9ICMgZW5kIG9mIGhhbmRsZSgpCgpzdWIgbWFrZV9mYXVsdCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkoJGNvZGUsICRzdHJpbmcsICRkZXRhaWwsICRhY3RvcikgPSBAXzsKICAgICRzZWxmLT5zZXJpYWxpemVyLT5mYXVsdCgkY29kZSwgJHN0cmluZywgJGRldGFpbCwgJGFjdG9yIHx8ICRzZWxmLT5teXVyaSk7Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpUcmFjZTsKCnVzZSBDYXJwICgpOwoKbXkgQGxpc3QgPSBxdygKICAgIHRyYW5zcG9ydCAgIGRpc3BhdGNoICAgIHJlc3VsdAogICAgcGFyYW1ldGVycyAgaGVhZGVycyAgICAgb2JqZWN0cwogICAgbWV0aG9kICAgICAgZmF1bHQgICAgICAgZnJlZWZvcm0KICAgIHRyYWNlICAgICAgIGRlYnVnKTsKewogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgIGZvciAoQGxpc3QpIHsKICAgICAgICAqJF8gPSBzdWIge30KICAgIH0KfQoKc3ViIGRlZmF1bHRsb2cgewogICAgbXkgJGNhbGxlciA9IChjYWxsZXIoMSkpWzNdOyAjIHRoZSA0dGggZWxlbWVudCByZXR1cm5lZCBieSBjYWxsZXIgaXMgdGhlIHN1YnJvdXRpbmUgbmFtZWEKICAgICRjYWxsZXIgPSAoY2FsbGVyKDIpKVszXSBpZiAkY2FsbGVyID1+IC9ldmFsLzsKICAgIGNob21wKG15ICRtc2cgPSBqb2luICcgJywgQF8pOwogICAgcHJpbnRmIFNUREVSUiAiJXM6ICVzXG4iLCAkY2FsbGVyLCAkbXNnOwp9CgpzdWIgaW1wb3J0IHsKICAgIG5vIHN0cmljdCAncmVmcyc7CiAgICBsb2NhbCAkXlc7CiAgICBteSAkcGFjayA9IHNoaWZ0OwogICAgbXkoQG5vdHJhY2UsIEBzeW1ib2xzKTsKICAgIGZvciAoQF8pIHsKICAgICAgICBpZiAocmVmIGVxICdDT0RFJykgewogICAgICAgICAgICBteSAkY2FsbCA9ICRfOwogICAgICAgICAgICBmb3JlYWNoIChAc3ltYm9scykgeyAqJF8gPSBzdWIgeyAkY2FsbC0+KEBfKSB9IH0KICAgICAgICAgICAgQHN5bWJvbHMgPSAoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGxvY2FsICRfID0gJF87CiAgICAgICAgICAgIG15ICRtaW51cyA9IHMvXi0vLzsKICAgICAgICAgICAgbXkgJGFsbCA9ICRfIGVxICdhbGwnOwogICAgICAgICAgICBDYXJwOjpjYXJwICJJbGxlZ2FsIHN5bWJvbCBmb3IgdHJhY2luZyAoJF8pIiB1bmxlc3MgJGFsbCB8fCAkcGFjay0+Y2FuKCRfKTsKICAgICAgICAgICAgJG1pbnVzID8gcHVzaChAbm90cmFjZSwgJGFsbCA/IEBsaXN0IDogJF8pIDogcHVzaChAc3ltYm9scywgJGFsbCA/IEBsaXN0IDogJF8pOwogICAgICAgIH0KICAgIH0KICAgICMgVE9ETyAtIEkgYW0gZ2V0dGluZyBhIHdhcm5pbmcgaGVyZSBhYm91dCByZWRlZmluaW5nIGEgc3Vicm91dGluZQogICAgZm9yZWFjaCAoQHN5bWJvbHMpIHsgKiRfID0gXCZkZWZhdWx0bG9nIH0KICAgIGZvcmVhY2ggKEBub3RyYWNlKSB7ICokXyA9IHN1YiB7fSB9Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpDdXN0b206OlhNTDo6RGF0YTsKCnVzZSB2YXJzIHF3KEBJU0EgJEFVVE9MT0FEKTsKQElTQSA9IHF3KFNPQVA6OkRhdGEpOwoKdXNlIG92ZXJsb2FkIGZhbGxiYWNrID0+IDEsICciIicgPT4gc3ViIHsgc2hpZnQtPnZhbHVlIH07CgpzdWIgX2NvbXBpbGVpdCB7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgbXkgJG1ldGhvZCA9IHNoaWZ0OwogICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgIHJldHVybiBfX1BBQ0tBR0VfXy0+U1VQRVI6Om5hbWUoJG1ldGhvZCA9PiAkX1swXS0+YXR0ci0+eyRtZXRob2R9KQogICAgICAgICAgICBpZiBleGlzdHMgJF9bMF0tPmF0dHItPnskbWV0aG9kfTsKICAgICAgICBteSBAZWxlbXMgPSBncmVwIHsKICAgICAgICAgICAgcmVmICRfICYmIFVOSVZFUlNBTDo6aXNhKCRfID0+IF9fUEFDS0FHRV9fKQogICAgICAgICAgICAmJiAkXy0+U1VQRVI6Om5hbWUgPX4gLyhefDopJG1ldGhvZCQvCiAgICAgICAgfSAkX1swXS0+dmFsdWU7CiAgICAgICAgcmV0dXJuIHdhbnRhcnJheT8gQGVsZW1zIDogJGVsZW1zWzBdOwogICAgfTsKfQoKc3ViIEJFR0lOIHsgZm9yZWFjaCAocXcobmFtZSB0eXBlIGltcG9ydCB1c2UpKSB7IF9jb21waWxlaXQoJF8pIH0gfQoKc3ViIEFVVE9MT0FEIHsKICAgIG15ICRtZXRob2QgPSBzdWJzdHIoJEFVVE9MT0FELCByaW5kZXgoJEFVVE9MT0FELCAnOjonKSArIDIpOwogICAgcmV0dXJuIGlmICRtZXRob2QgZXEgJ0RFU1RST1knOwoKICAgIF9jb21waWxlaXQoJG1ldGhvZCk7CiAgICBnb3RvICYkQVVUT0xPQUQ7Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpDdXN0b206OlhNTDo6RGVzZXJpYWxpemVyOwoKdXNlIHZhcnMgcXcoQElTQSk7CkBJU0EgPSBxdyhTT0FQOjpEZXNlcmlhbGl6ZXIpOwoKc3ViIGRlY29kZV92YWx1ZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgJHJlZiA9IHNoaWZ0OwogICAgbXkoJG5hbWUsICRhdHRycywgJGNoaWxkcmVuLCAkdmFsdWUpID0gQCRyZWY7CiAgICAjIGJhc2UgY2xhc3Mga25vd3Mgd2hhdCB0byBkbyB3aXRoIGl0CiAgICByZXR1cm4gJHNlbGYtPlNVUEVSOjpkZWNvZGVfdmFsdWUoJHJlZikgaWYgZXhpc3RzICRhdHRycy0+e2hyZWZ9OwoKICAgIFNPQVA6OkN1c3RvbTo6WE1MOjpEYXRhCiAgICAgICAgLT4gU09BUDo6RGF0YTo6bmFtZSgkbmFtZSkKICAgICAgICAtPiBhdHRyKCRhdHRycykKICAgICAgICAtPiBzZXRfdmFsdWUocmVmICRjaGlsZHJlbiAmJiBAJGNoaWxkcmVuCiAgICAgICAgICAgID8gbWFwKHNjYWxhcigoJHNlbGYtPmRlY29kZV9vYmplY3QoJF8pKVsxXSksIEAkY2hpbGRyZW4pCiAgICAgICAgICAgIDogJHZhbHVlKTsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlNjaGVtYTo6RGVzZXJpYWxpemVyOwoKdXNlIHZhcnMgcXcoQElTQSk7CkBJU0EgPSBxdyhTT0FQOjpDdXN0b206OlhNTDo6RGVzZXJpYWxpemVyKTsKCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpTY2hlbWE6OldTREw7Cgp1c2UgdmFycyBxdyglaW1wb3J0ZWQgQElTQSk7CkBJU0EgPSBxdyhTT0FQOjpTY2hlbWEpOwoKc3ViIG5ldyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwoKICAgIHVubGVzcyAocmVmICRzZWxmKSB7CiAgICAgICAgbXkgJGNsYXNzID0gJHNlbGY7CiAgICAgICAgJHNlbGYgPSAkY2xhc3MtPlNVUEVSOjpuZXcoQF8pOwogICAgfQogICAgcmV0dXJuICRzZWxmOwp9CgpzdWIgYmFzZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CiAgICBAXwogICAgICAgID8gKCRzZWxmLT57X2Jhc2V9ID0gc2hpZnQsIHJldHVybiAkc2VsZikKICAgICAgICA6IHJldHVybiAkc2VsZi0+e19iYXNlfTsKfQoKc3ViIGltcG9ydCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CiAgICBteSAkcyA9IHNoaWZ0OwogICAgbXkgJGJhc2UgPSBzaGlmdCB8fCAkc2VsZi0+YmFzZSB8fCBkaWUgIk1pc3NpbmcgYmFzZSBhcmd1bWVudCBmb3IgIiwgX19QQUNLQUdFX18sICJcbiI7CgogICAgbXkgQGEgPSAkcy0+aW1wb3J0OwogICAgbG9jYWwgJWltcG9ydGVkID0gJWltcG9ydGVkOwogICAgZm9yZWFjaCAoQGEpIHsKICAgICAgICBuZXh0IHVubGVzcyAkXy0+bG9jYXRpb247CiAgICAgICAgbXkgJGxvY2F0aW9uID0gVVJJLT5uZXdfYWJzKCRfLT5sb2NhdGlvbi0+dmFsdWUsICRiYXNlKS0+YXNfc3RyaW5nOwogICAgICAgIGlmICgkaW1wb3J0ZWR7JGxvY2F0aW9ufSsrKSB7CiAgICAgICAgICAgIHdhcm4gIlJlY3Vyc2lvbiBsb29wIGRldGVjdGVkIGluIHNlcnZpY2UgZGVzY3JpcHRpb24gZnJvbSAnJGxvY2F0aW9uJy4gSWdub3JlZFxuIiBpZiAkXlc7CiAgICAgICAgICAgIHJldHVybiAkczsKICAgICAgICB9CiAgICAgICAgbXkgJHJvb3QgPSAkc2VsZi0+aW1wb3J0KAogICAgICAgICAgICAkc2VsZi0+ZGVzZXJpYWxpemVyLT5kZXNlcmlhbGl6ZSgKICAgICAgICAgICAgICAgICRzZWxmLT5hY2Nlc3MoJGxvY2F0aW9uKQogICAgICAgICAgICApLT5yb290LCAkbG9jYXRpb24pOwoKICAgICAgICAkcm9vdC0+U09BUDo6RGF0YTo6bmFtZSBlcSAnZGVmaW5pdGlvbnMnID8gJHMtPnNldF92YWx1ZSgkcy0+dmFsdWUsICRyb290LT52YWx1ZSkgOgogICAgICAgICRyb290LT5TT0FQOjpEYXRhOjpuYW1lIGVxICdzY2hlbWEnID8gZG8geyAjIGFkZCA8dHlwZXM+IGVsZW1lbnQgaWYgdGhlcmUgaXMgbm8gb25lCiAgICAgICAgJHMtPnNldF92YWx1ZSgkcy0+dmFsdWUsICRzZWxmLT5kZXNlcmlhbGl6ZXItPmRlc2VyaWFsaXplKCc8dHlwZXM+PC90eXBlcz4nKS0+cm9vdCkgdW5sZXNzICRzLT50eXBlczsKICAgICAgICAkcy0+dHlwZXMtPnNldF92YWx1ZSgkcy0+dHlwZXMtPnZhbHVlLCAkcm9vdCkgfSA6CiAgICAgICAgZGllICJEb24ndCBrbm93IHdoYXQgdG8gZG8gd2l0aCAnQHtbJHJvb3QtPlNPQVA6OkRhdGE6Om5hbWVdfScgaW4gc2NoZW1hIGltcG9ydGVkIGZyb20gJyRsb2NhdGlvbidcbiI7CiAgICB9CgogICAgIyByZXR1cm4gdGhlIHBhcnNlZCBXU0RMIGZpbGUKICAgICRzOwp9CgojIFRPRE8gLSBUaGlzIGlzIHdvZWZ1bGx5IGluY29tcGxldGUhCnN1YiBwYXJzZV9zY2hlbWFfZWxlbWVudCB7CiAgICBteSAkZWxlbWVudCA9IHNoaWZ0OwogICAgIyBDdXJyZW50IGVsZW1lbnQgaXMgYSBjb21wbGV4IHR5cGUKICAgIGlmIChkZWZpbmVkKCRlbGVtZW50LT5jb21wbGV4VHlwZSkpIHsKICAgICAgICBteSBAZWxlbWVudHMgPSAoKTsKICAgICAgICBpZiAoZGVmaW5lZCgkZWxlbWVudC0+Y29tcGxleFR5cGUtPnNlcXVlbmNlKSkgewoKICAgICAgICAgICAgZm9yZWFjaCBteSAkZSAoJGVsZW1lbnQtPmNvbXBsZXhUeXBlLT5zZXF1ZW5jZS0+ZWxlbWVudCkgewogICAgICAgICAgICAgICAgcHVzaCBAZWxlbWVudHMscGFyc2Vfc2NoZW1hX2VsZW1lbnQoJGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBAZWxlbWVudHM7CiAgICB9CiAgICBlbHNpZiAoJGVsZW1lbnQtPnNpbXBsZVR5cGUpIHsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHJldHVybiAkZWxlbWVudDsKICAgIH0KfQoKc3ViIHBhcnNlIHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgIG15KCRzLCAkc2VydmljZSwgJHBvcnQpID0gQF87CiAgICBteSBAcmVzdWx0OwoKICAgICMgaGFuZGxlIGltcG9ydHMKICAgICRzZWxmLT5pbXBvcnQoJHMpOwoKICAgICMgaGFuZGxlIGRlc2NyaXB0aW9ucyB3aXRob3V0IDxzZXJ2aWNlPiwgYWthIHRNb2RlbC10eXBlIGRlc2NyaXB0aW9ucwogICAgbXkgQHNlcnZpY2VzID0gJHMtPnNlcnZpY2U7CiAgICBteSAkdG5zID0gJHMtPnsnX2F0dHInfS0+eyd0YXJnZXROYW1lc3BhY2UnfTsKICAgICMgaWYgdGhlcmUgaXMgbm8gPHNlcnZpY2U+IGVsZW1lbnQgd2UnbGwgcHJvdmlkZSBpdAogICAgQHNlcnZpY2VzID0gJHNlbGYtPmRlc2VyaWFsaXplci0+ZGVzZXJpYWxpemUoPDwiRkFLRSIpLT5yb290LT5zZXJ2aWNlIHVubGVzcyBAc2VydmljZXM7CjxkZWZpbml0aW9ucz4KICA8c2VydmljZSBuYW1lPSJAe1skc2VydmljZSB8fCAnRmFrZVNlcnZpY2UnXX0iPgogICAgPHBvcnQgbmFtZT0iQHtbJHBvcnQgfHwgJ0Zha2VQb3J0J119IiBiaW5kaW5nPSJAe1skcy0+YmluZGluZy0+bmFtZV19Ii8+CiAgPC9zZXJ2aWNlPgo8L2RlZmluaXRpb25zPgpGQUtFCgogICAgbXkgJGhhc193YXJuZWQgPSAwOwogICAgZm9yZWFjaCAoQHNlcnZpY2VzKSB7CiAgICAgICAgbXkgJG5hbWUgPSAkXy0+bmFtZTsKICAgICAgICBuZXh0IGlmICRzZXJ2aWNlICYmICRzZXJ2aWNlIG5lICRuYW1lOwogICAgICAgIG15ICVzZXJ2aWNlczsKICAgICAgICBmb3JlYWNoICgkXy0+cG9ydCkgewogICAgICAgICAgICBuZXh0IGlmICRwb3J0ICYmICRwb3J0IG5lICRfLT5uYW1lOwogICAgICAgICAgICBteSAkYmluZGluZyA9IFNPQVA6OlV0aWxzOjpkaXNxdWFsaWZ5KCRfLT5iaW5kaW5nKTsKICAgICAgICAgICAgbXkgJGVuZHBvaW50ID0gcmVmICRfLT5hZGRyZXNzID8gJF8tPmFkZHJlc3MtPmxvY2F0aW9uIDogdW5kZWY7CiAgICAgICAgICAgIGZvcmVhY2ggKCRzLT5iaW5kaW5nKSB7CiAgICAgICAgICAgICAgICAjIGlzIHRoaXMgYSBTT0FQIGJpbmRpbmc/CiAgICAgICAgICAgICAgICBuZXh0IHVubGVzcyBncmVwIHsgJF8tPnVyaSBlcSAnaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3NkbC9zb2FwLycgfSAkXy0+YmluZGluZzsKICAgICAgICAgICAgICAgIG5leHQgdW5sZXNzICRfLT5uYW1lIGVxICRiaW5kaW5nOwogICAgICAgICAgICAgICAgbXkgJGRlZmF1bHRfc3R5bGUgPSAkXy0+YmluZGluZy0+c3R5bGU7CiAgICAgICAgICAgICAgICBteSAkcG9ydHR5cGUgPSBTT0FQOjpVdGlsczo6ZGlzcXVhbGlmeSgkXy0+dHlwZSk7CiAgICAgICAgICAgICAgICBmb3JlYWNoICgkXy0+b3BlcmF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgbXkgJG9wZXJuYW1lID0gJF8tPm5hbWU7CiAgICAgICAgICAgICAgICAgICAgJHNlcnZpY2VzeyRvcGVybmFtZX0gPSB7fTsgIyBzaG91bGQgYmUgaW5pdGlhbGl6ZWQgaW4gNS43IGFuZCBhZnRlcgogICAgICAgICAgICAgICAgICAgIG15ICRzb2FwYWN0aW9uID0gJF8tPm9wZXJhdGlvbi0+c29hcEFjdGlvbjsKICAgICAgICAgICAgICAgICAgICBteSAkaW52b2NhdGlvblN0eWxlID0gJF8tPm9wZXJhdGlvbi0+c3R5bGUgfHwgJGRlZmF1bHRfc3R5bGUgfHwgInJwYyI7CiAgICAgICAgICAgICAgICAgICAgbXkgJGVuY29kaW5nU3R5bGUgPSAkXy0+aW5wdXQtPmJvZHktPnVzZSB8fCAiZW5jb2RlZCI7CiAgICAgICAgICAgICAgICAgICAgbXkgJG5hbWVzcGFjZSA9ICRfLT5pbnB1dC0+Ym9keS0+bmFtZXNwYWNlIHx8ICR0bnM7CiAgICAgICAgICAgICAgICAgICAgbXkgQHBhcnRzOwogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRzLT5wb3J0VHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXh0IHVubGVzcyAkXy0+bmFtZSBlcSAkcG9ydHR5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRfLT5vcGVyYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgdW5sZXNzICRfLT5uYW1lIGVxICRvcGVybmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15ICRpbnB1dG1lc3NhZ2UgPSBTT0FQOjpVdGlsczo6ZGlzcXVhbGlmeSgkXy0+aW5wdXQtPm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCBteSAkbXNnICgkcy0+bWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgdW5sZXNzICRtc2ctPm5hbWUgZXEgJGlucHV0bWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGludm9jYXRpb25TdHlsZSBlcSAiZG9jdW1lbnQiICYmICRlbmNvZGluZ1N0eWxlIGVxICJsaXRlcmFsIikgewojICAgICAgICAgICAgICAgICAgd2FybiAiZG9jdW1lbnQvbGl0ZXJhbCBzdXBwb3J0IGlzIEVYUEVSSU1FTlRBTCBpbiBTT0FQOjpMaXRlIgojICAgICAgICAgICAgICAgICAgaWYgISRoYXNfd2FybmVkICYmICgkaGFzX3dhcm5lZCA9IDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteSAoJGlucHV0X25zLCRpbnB1dF9uYW1lKSA9IFNPQVA6OlV0aWxzOjpzcGxpdHFuYW1lKCRtc2ctPnBhcnQtPmVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIG15ICRzY2hlbWEgKCRzLT50eXBlcy0+c2NoZW1hKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoIG15ICRlbGVtZW50ICgkc2NoZW1hLT5lbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCB1bmxlc3MgJGVsZW1lbnQtPm5hbWUgZXEgJGlucHV0X25hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaCBAcGFydHMscGFyc2Vfc2NoZW1hX2VsZW1lbnQoJGVsZW1lbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlcnZpY2VzeyRvcGVybmFtZX0tPntwYXJhbWV0ZXJzfSA9IFsgQHBhcnRzIF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgVE9ETyAtIHN1cHBvcnQgYWxsIGNvbWJpbmF0aW9ucyBvZiBkb2N8cnBjL2xpdHxlbmMuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICN3YXJuICIkaW52b2NhdGlvblN0eWxlLyRlbmNvZGluZ1N0eWxlIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyB2ZXJzaW9uIG9mIFNPQVA6OkxpdGUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAcGFydHMgPSAkbXNnLT5wYXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VydmljZXN7JG9wZXJuYW1lfS0+e3BhcmFtZXRlcnN9ID0gWyBAcGFydHMgXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZm9yICgkc2VydmljZXN7JG9wZXJuYW1lfSkgewogICAgICAgICAgICAgICAgICAgICAgICAkXy0+e2VuZHBvaW50fSAgID0gJGVuZHBvaW50OwogICAgICAgICAgICAgICAgICAgICAgICAkXy0+e3NvYXBhY3Rpb259ID0gJHNvYXBhY3Rpb247CiAgICAgICAgICAgICAgICAgICAgICAgICRfLT57bmFtZXNwYWNlfSAgPSAkbmFtZXNwYWNlOwogICAgICAgICAgICAgICAgICAgICAgICAjICRfLT57cGFyYW1ldGVyc30gPSBbQHBhcnRzXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAjIGZpeCBub25hbGxvd2VkIGNoYXJhY3RlcnMgaW4gcGFja2FnZSBuYW1lLCBhbmQgYWRkICdzJyBpZiBzdGFydGVkIHdpdGggZGlnaXQKICAgIGZvciAoJG5hbWUpIHsgcy9cVysvXy9nOyBzL14oXGQpL3MkMS8gfQogICAgcHVzaCBAcmVzdWx0LCAkbmFtZSA9PiBcJXNlcnZpY2VzOwogICAgfQogICAgcmV0dXJuIEByZXN1bHQ7Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKIyBOYW1pbmc/IFNPQVA6OlNlcnZpY2U6OlNjaGVtYT8KcGFja2FnZSBTT0FQOjpTY2hlbWE7Cgp1c2UgQ2FycCAoKTsKCnN1YiBERVNUUk9ZIHsgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJykgfQoKc3ViIG5ldyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgcmV0dXJuICRzZWxmIGlmIHJlZiAkc2VsZjsKICAgIHVubGVzcyAocmVmICRzZWxmKSB7CiAgICAgICAgbXkgJGNsYXNzID0gJHNlbGY7CiAgICAgICAgcmVxdWlyZSBMV1A6OlVzZXJBZ2VudDsKICAgICAgICAkc2VsZiA9IGJsZXNzIHsKICAgICAgICAgICAgJ19kZXNlcmlhbGl6ZXInID0+IFNPQVA6OlNjaGVtYTo6RGVzZXJpYWxpemVyLT5uZXcsCiAgICAgICAgICAgICdfdXNlcmFnZW50JyAgICA9PiBMV1A6OlVzZXJBZ2VudC0+bmV3LAogICAgICAgIH0sICRjbGFzczsKCiAgICAgICAgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJyk7CiAgICB9CgogICAgQ2FycDo6Y2FycCAiT2RkICh3cm9uZz8pIG51bWJlciBvZiBwYXJhbWV0ZXJzIGluIG5ldygpIiBpZiAkXlcgJiYgKEBfICYgMSk7CiAgICBubyBzdHJpY3QgcXcocmVmcyk7CiAgICB3aGlsZSAoQF8pIHsKICAgICAgICBteSAkbWV0aG9kID0gc2hpZnQ7CiAgICAgICAgJHNlbGYtPiRtZXRob2Qoc2hpZnQpIGlmICRzZWxmLT5jYW4oJG1ldGhvZCkKICAgIH0KCiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBzY2hlbWEgewogICAgd2FybiAiU09BUDo6U2NoZW1hLT5zY2hlbWEgaGFzIGJlZW4gZGVwcmVjYXRlZC4gIgogICAgICAgIC4gIlBsZWFzZSB1c2UgU09BUDo6U2NoZW1hLT5zY2hlbWFfdXJsIGluc3RlYWQuIjsKICAgIHJldHVybiBzaGlmdC0+c2NoZW1hX3VybChAXyk7Cn0KCnN1YiBCRUdJTiB7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgZm9yIG15ICRtZXRob2QgKHF3KGRlc2VyaWFsaXplciBzY2hlbWFfdXJsIHNlcnZpY2VzIHVzZXJhZ2VudCBzdHViIGNhY2hlX2RpciBjYWNoZV90dGwpKSB7CiAgICAgICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICAgICAqJG1ldGhvZCA9IHN1YiB7CiAgICAgICAgICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgICAgICAgICAgQF8gPyAoJHNlbGYtPnskZmllbGR9ID0gc2hpZnQsIHJldHVybiAkc2VsZikgOiByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgICAgIH0KICAgIH0KfQoKc3ViIHBhcnNlIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAkcyA9ICRzZWxmLT5kZXNlcmlhbGl6ZXItPmRlc2VyaWFsaXplKCRzZWxmLT5hY2Nlc3MpLT5yb290OwogICAgIyBoZXJlIHNob3VsZCBiZSBzb21ldGhpbmcgdGhhdCBkZWZpbmVzIHdoYXQgc2NoZW1hIGRlc2NyaXB0aW9uIHdlIHdhbnQgdG8gdXNlCiAgICAkc2VsZi0+c2VydmljZXMoe1NPQVA6OlNjaGVtYTo6V1NETC0+YmFzZSgkc2VsZi0+c2NoZW1hX3VybCktPnBhcnNlKCRzLCBAXyl9KTsKfQoKc3ViIHJlZnJlc2hfY2FjaGUgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIG15ICgkZmlsZW5hbWUsJGNvbnRlbnRzKSA9IEBfOwogICAgb3BlbiBDQUNIRSwiPiRmaWxlbmFtZSIgb3IgQ2FycDo6Y3JvYWsgIkNvdWxkIG5vdCBvcGVuIGNhY2hlIGZpbGUgZm9yIHdyaXRpbmc6ICQhIjsKICAgIHByaW50IENBQ0hFICRjb250ZW50czsKICAgIGNsb3NlIENBQ0hFOwp9CgpzdWIgbG9hZCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CiAgICBsb2NhbCAkXlc7ICMgc3VwcmVzcyB3YXJuaW5ncyBhYm91dCByZWRlZmluaW5nCiAgICBmb3JlYWNoIChrZXlzICV7JHNlbGYtPnNlcnZpY2VzIHx8IENhcnA6OmNyb2FrICdOb3RoaW5nIHRvIGxvYWQuIFNjaGVtYSBpcyBub3Qgc3BlY2lmaWVkJ30pIHsKICAgICAgICAjIFRPRE8gLSBjaGVjayBhZ2Ugb2YgY2FjaGVkIGZpbGUsIGFuZCBkZWxldGUgaWYgb2xkZXIgdGhhbiBjb25maWd1cmVkIGFtb3VudAogICAgICAgIGlmICgkc2VsZi0+Y2FjaGVfZGlyKSB7CiAgICAgICAgICAgIG15ICRjYWNoZWRfZmlsZSA9IEZpbGU6OlNwZWMtPmNhdGZpbGUoJHNlbGYtPmNhY2hlX2RpciwkXy4iLnBtIik7CiAgICAgICAgICAgIG15ICR0dGwgPSAkc2VsZi0+Y2FjaGVfdHRsIHx8ICRTT0FQOjpDb25zdGFudHM6OkRFRkFVTFRfQ0FDSEVfVFRMOwogICAgICAgICAgICBvcGVuIChDQUNIRSwgIjwkY2FjaGVkX2ZpbGUiKTsKICAgICAgICAgICAgbXkgQHN0YXQgPSBzdGF0KCRjYWNoZWRfZmlsZSkgdW5sZXNzIGVvZihDQUNIRSk7CiAgICAgICAgICAgIGNsb3NlIENBQ0hFOwogICAgICAgICAgICBpZiAoQHN0YXQpIHsKICAgICAgICAgICAgICAgICMgQ2FjaGUgZXhpc3RzCiAgICAgICAgICAgICAgICBteSAkY2FjaGVfbGl2ZWQgPSB0aW1lKCkgLSAkc3RhdFs5XTsKICAgICAgICAgICAgICAgIGlmICgkdHRsID4gMCAmJiAkY2FjaGVfbGl2ZWQgPiAkdHRsKSB7CiAgICAgICAgICAgICAgICAgICAgJHNlbGYtPnJlZnJlc2hfY2FjaGUoJGNhY2hlZF9maWxlLCRzZWxmLT5nZW5lcmF0ZV9zdHViKCRfKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAjIENhY2hlIGRvZXNuJ3QgZXhpc3QKICAgICAgICAgICAgICAgICRzZWxmLT5yZWZyZXNoX2NhY2hlKCRjYWNoZWRfZmlsZSwkc2VsZi0+Z2VuZXJhdGVfc3R1YigkXykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHB1c2ggQElOQywkc2VsZi0+Y2FjaGVfZGlyOwogICAgICAgICAgICBldmFsICJyZXF1aXJlICRfIiBvciBDYXJwOjpjcm9hayAiQ291bGQgbm90IGxvYWQgY2FjaGVkIGZpbGU6ICRAIjsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGV2YWwgJHNlbGYtPmdlbmVyYXRlX3N0dWIoJF8pIG9yIENhcnA6OmNyb2FrICJCYWQgc3R1YjogJEAiOwogICAgICAgIH0KICAgIH0KICAgICRzZWxmOwp9CgpzdWIgYWNjZXNzIHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgIG15ICR1cmwgPSBzaGlmdCB8fCAkc2VsZi0+c2NoZW1hX3VybCB8fCBDYXJwOjpjcm9hayAnTm90aGluZyB0byBhY2Nlc3MuIFVSTCBpcyBub3Qgc3BlY2lmaWVkJzsKICAgICRzZWxmLT51c2VyYWdlbnQtPmVudl9wcm94eSBpZiAkRU5WeydIVFRQX3Byb3h5J307CgogICAgbXkgJHJlcSA9IEhUVFA6OlJlcXVlc3QtPm5ldyhHRVQgPT4gJHVybCk7CiAgICAkcmVxLT5wcm94eV9hdXRob3JpemF0aW9uX2Jhc2ljKCRFTlZ7J0hUVFBfcHJveHlfdXNlcid9LCAkRU5WeydIVFRQX3Byb3h5X3Bhc3MnfSkKICAgICAgICBpZiAoJEVOVnsnSFRUUF9wcm94eV91c2VyJ30gJiYgJEVOVnsnSFRUUF9wcm94eV9wYXNzJ30pOwoKICAgIG15ICRyZXNwID0gJHNlbGYtPnVzZXJhZ2VudC0+cmVxdWVzdCgkcmVxKTsKICAgICRyZXNwLT5pc19zdWNjZXNzID8gJHJlc3AtPmNvbnRlbnQgOiBkaWUgIlNlcnZpY2UgZGVzY3JpcHRpb24gJyR1cmwnIGNhbid0IGJlIGxvYWRlZDogIiwgICRyZXNwLT5zdGF0dXNfbGluZSwgIlxuIjsKfQoKc3ViIGdlbmVyYXRlX3N0dWIgewogICAgbXkgJHNlbGYgPSBzaGlmdC0+bmV3OwogICAgbXkgJHBhY2thZ2UgPSBzaGlmdDsKICAgIG15ICRzZXJ2aWNlcyA9ICRzZWxmLT5zZXJ2aWNlcy0+eyRwYWNrYWdlfTsKICAgIG15ICRzY2hlbWFfdXJsID0gJHNlbGYtPnNjaGVtYV91cmw7CgogICAgJHNlbGYtPnsnX3N0dWInfSA9IDw8IkVPUCI7CnBhY2thZ2UgJHBhY2thZ2U7CiMgR2VuZXJhdGVkIGJ5IFNPQVA6OkxpdGUgKHYkU09BUDo6TGl0ZTo6VkVSU0lPTikgZm9yIFBlcmwgLS0gc29hcGxpdGUuY29tCiMgQ29weXJpZ2h0IChDKSAyMDAwLTIwMDYgUGF1bCBLdWxjaGVua28sIEJ5cm5lIFJlZXNlCiMgLS0gZ2VuZXJhdGVkIGF0IFtAe1tzY2FsYXIgbG9jYWx0aW1lXX1dCkVPUAogICAgJHNlbGYtPnsnX3N0dWInfSAuPSAiIyAtLSBnZW5lcmF0ZWQgZnJvbSAkc2NoZW1hX3VybFxuIiBpZiAkc2NoZW1hX3VybDsKICAgICRzZWxmLT57J19zdHViJ30gLj0gJ215ICVtZXRob2RzID0gKCcuIlxuIjsKICAgIGZvcmVhY2ggbXkgJHNlcnZpY2UgKGtleXMgJSRzZXJ2aWNlcykgewogICAgICAgICRzZWxmLT57J19zdHViJ30gLj0gIiRzZXJ2aWNlID0+IHtcbiI7CiAgICAgICAgZm9yZWFjaCAocXcoZW5kcG9pbnQgc29hcGFjdGlvbiBuYW1lc3BhY2UpKSB7CiAgICAgICAgICAgICRzZWxmLT57J19zdHViJ30gLj0gIiAgICAkXyA9PiAnIi4kc2VydmljZXMtPnskc2VydmljZX17JF99LiInLFxuIjsKICAgICAgICB9CiAgICAgICAgJHNlbGYtPnsnX3N0dWInfSAuPSAiICAgIHBhcmFtZXRlcnMgPT4gW1xuIjsKICAgICAgICBmb3JlYWNoIChAeyRzZXJ2aWNlcy0+eyRzZXJ2aWNlfXtwYXJhbWV0ZXJzfX0pIHsKICAgICAgICAgICAgIyBUaGlzIGlzIGEgd29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9zb3VyY2Vmb3JnZS5uZXQvdHJhY2tlci9pbmRleC5waHA/ZnVuYz1kZXRhaWwmYWlkPTIwMDE1OTImZ3JvdXBfaWQ9NjYwMDAmYXRpZD01MTMwMTcKICAgICAgICAgICAgbmV4dCB1bmxlc3MgcmVmICRfOwogICAgICAgICAgICAkc2VsZi0+eydfc3R1Yid9IC49ICIgICAgICBTT0FQOjpEYXRhLT5uZXcobmFtZSA9PiAnIi4kXy0+bmFtZS4iJywgdHlwZSA9PiAnIi4kXy0+dHlwZS4iJywgYXR0ciA9PiB7IjsKICAgICAgICAgICAgJHNlbGYtPnsnX3N0dWInfSAuPSBkbyB7CiAgICAgICAgICAgICAgICBteSAlYXR0ciA9ICV7JF8tPmF0dHJ9OwogICAgICAgICAgICAgICAgam9pbignLCAnLCBtYXAgeyInJF8nID0+ICckYXR0cnskX30nIn0KICAgICAgICAgICAgICAgICAgICBncmVwIHsvXnhtbG5zOig/IS0pL30KICAgICAgICAgICAgICAgICAgICAgICAga2V5cyAlYXR0cik7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgICRzZWxmLT57J19zdHViJ30gLj0gIn0pLFxuIjsKICAgICAgICB9CiAgICAgICAgJHNlbGYtPnsnX3N0dWInfSAuPSAiICAgIF0sICMgZW5kIHBhcmFtZXRlcnNcbiI7CiAgICAgICAgJHNlbGYtPnsnX3N0dWInfSAuPSAiICB9LCAjIGVuZCAkc2VydmljZVxuIjsKICAgIH0KICAgICRzZWxmLT57J19zdHViJ30gLj0gIik7ICMgZW5kIG15ICVtZXRob2RzXG4iOwogICAgJHNlbGYtPnsnX3N0dWInfSAuPSA8PCdFT1AnOwoKdXNlIFNPQVA6OkxpdGU7CnVzZSBFeHBvcnRlcjsKdXNlIENhcnAgKCk7Cgp1c2UgdmFycyBxdyhASVNBICRBVVRPTE9BRCBARVhQT1JUX09LICVFWFBPUlRfVEFHUyk7CkBJU0EgPSBxdyhFeHBvcnRlciBTT0FQOjpMaXRlKTsKQEVYUE9SVF9PSyA9IChrZXlzICVtZXRob2RzKTsKJUVYUE9SVF9UQUdTID0gKCdhbGwnID0+IFtARVhQT1JUX09LXSk7CgpzdWIgX2NhbGwgewogICAgbXkgKCRzZWxmLCAkbWV0aG9kKSA9IChzaGlmdCwgc2hpZnQpOwogICAgbXkgJG5hbWUgPSBVTklWRVJTQUw6OmlzYSgkbWV0aG9kID0+ICdTT0FQOjpEYXRhJykgPyAkbWV0aG9kLT5uYW1lIDogJG1ldGhvZDsKICAgIG15ICVtZXRob2QgPSAleyRtZXRob2RzeyRuYW1lfX07CiAgICAkc2VsZi0+cHJveHkoJG1ldGhvZHtlbmRwb2ludH0gfHwgQ2FycDo6Y3JvYWsgIk5vIHNlcnZlciBhZGRyZXNzIChwcm94eSkgc3BlY2lmaWVkIikKICAgICAgICB1bmxlc3MgJHNlbGYtPnByb3h5OwogICAgbXkgQHRlbXBsYXRlcyA9IEB7JG1ldGhvZHtwYXJhbWV0ZXJzfX07CiAgICBteSBAcGFyYW1ldGVycyA9ICgpOwogICAgZm9yZWFjaCBteSAkcGFyYW0gKEBfKSB7CiAgICAgICAgaWYgKEB0ZW1wbGF0ZXMpIHsKICAgICAgICAgICAgbXkgJHRlbXBsYXRlID0gc2hpZnQgQHRlbXBsYXRlczsKICAgICAgICAgICAgbXkgKCRwcmVmaXgsJHR5cGVuYW1lKSA9IFNPQVA6OlV0aWxzOjpzcGxpdHFuYW1lKCR0ZW1wbGF0ZS0+dHlwZSk7CiAgICAgICAgICAgIG15ICRtZXRob2QgPSAnYXNfJy4kdHlwZW5hbWU7CiAgICAgICAgICAgICMgVE9ETyAtIGlmIGNhbignYXNfJy4kdHlwZW5hbWUpIHsuLi59CiAgICAgICAgICAgIG15ICRyZXN1bHQgPSAkc2VsZi0+c2VyaWFsaXplci0+JG1ldGhvZCgkcGFyYW0sICR0ZW1wbGF0ZS0+bmFtZSwgJHRlbXBsYXRlLT50eXBlLCAkdGVtcGxhdGUtPmF0dHIpOwogICAgICAgICAgICBwdXNoKEBwYXJhbWV0ZXJzLCAkdGVtcGxhdGUtPnZhbHVlKCRyZXN1bHQtPlsyXSkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcHVzaChAcGFyYW1ldGVycywgJHBhcmFtKTsKICAgICAgICB9CiAgICB9CiAgICAkc2VsZi0+ZW5kcG9pbnQoJG1ldGhvZHtlbmRwb2ludH0pCiAgICAgICAtPm5zKCRtZXRob2R7bmFtZXNwYWNlfSkKICAgICAgIC0+b25fYWN0aW9uKHN1YntxcSEiJG1ldGhvZHtzb2FwYWN0aW9ufSIhfSk7CkVPUAogICAgbXkgJG5hbWVzcGFjZXMgPSAkc2VsZi0+ZGVzZXJpYWxpemVyLT5pZHMtPlsxXTsKICAgIGZvcmVhY2ggbXkgJGtleSAoa2V5cyAleyRuYW1lc3BhY2VzfSkgewogICAgICAgIG15ICgkbnMsJHByZWZpeCkgPSBTT0FQOjpVdGlsczo6c3BsaXRxbmFtZSgka2V5KTsKICAgICAgICAkc2VsZi0+eydfc3R1Yid9IC49ICcgICRzZWxmLT5zZXJpYWxpemVyLT5yZWdpc3Rlcl9ucygiJy4kbmFtZXNwYWNlcy0+eyRrZXl9LiciLCInLiRwcmVmaXguJyIpOycuIlxuIgogICAgICAgICAgICBpZiAoJG5zIGVxICJ4bWxucyIpOwogICAgfQogICAgJHNlbGYtPnsnX3N0dWInfSAuPSA8PCdFT1AnOwogICAgbXkgJHNvbSA9ICRzZWxmLT5TVVBFUjo6Y2FsbCgkbWV0aG9kID0+IEBwYXJhbWV0ZXJzKTsKICAgIGlmICgkc2VsZi0+d2FudF9zb20pIHsKICAgICAgICByZXR1cm4gJHNvbTsKICAgIH0KICAgIFVOSVZFUlNBTDo6aXNhKCRzb20gPT4gJ1NPQVA6OlNPTScpID8gd2FudGFycmF5ID8gJHNvbS0+cGFyYW1zYWxsIDogJHNvbS0+cmVzdWx0IDogJHNvbTsKfQoKc3ViIEJFR0lOIHsKICAgIG5vIHN0cmljdCAncmVmcyc7CiAgICBmb3IgbXkgJG1ldGhvZCAocXcod2FudF9zb20pKSB7CiAgICAgICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICAgICAqJG1ldGhvZCA9IHN1YiB7CiAgICAgICAgICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgICAgICAgICAgQF8gPyAoJHNlbGYtPnskZmllbGR9ID0gc2hpZnQsIHJldHVybiAkc2VsZikgOiByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgICAgIH0KICAgIH0KfQpubyBzdHJpY3QgJ3JlZnMnOwpmb3IgbXkgJG1ldGhvZCAoQEVYUE9SVF9PSykgewogICAgbXkgJW1ldGhvZCA9ICV7JG1ldGhvZHN7JG1ldGhvZH19OwogICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgIG15ICRzZWxmID0gVU5JVkVSU0FMOjppc2EoJF9bMF0gPT4gX19QQUNLQUdFX18pCiAgICAgICAgICAgID8gcmVmICRfWzBdCiAgICAgICAgICAgICAgICA/IHNoaWZ0ICMgT0JKRUNUCiAgICAgICAgICAgICAgICAjIENMQVNTLCBlaXRoZXIgZ2V0IHNlbGYgb3IgY3JlYXRlIG5ldyBhbmQgYXNzaWduIHRvIHNlbGYKICAgICAgICAgICAgICAgIDogKHNoaWZ0LT5zZWxmIHx8IF9fUEFDS0FHRV9fLT5zZWxmKF9fUEFDS0FHRV9fLT5uZXcpKQogICAgICAgICAgICAjIGZ1bmN0aW9uIGNhbGwsIGVpdGhlciBnZXQgc2VsZiBvciBjcmVhdGUgbmV3IGFuZCBhc3NpZ24gdG8gc2VsZgogICAgICAgICAgICA6IChfX1BBQ0tBR0VfXy0+c2VsZiB8fCBfX1BBQ0tBR0VfXy0+c2VsZihfX1BBQ0tBR0VfXy0+bmV3KSk7CiAgICAgICAgJHNlbGYtPl9jYWxsKCRtZXRob2QsIEBfKTsKICAgIH0KfQoKc3ViIEFVVE9MT0FEIHsKICAgIG15ICRtZXRob2QgPSBzdWJzdHIoJEFVVE9MT0FELCByaW5kZXgoJEFVVE9MT0FELCAnOjonKSArIDIpOwogICAgcmV0dXJuIGlmICRtZXRob2QgZXEgJ0RFU1RST1knIHx8ICRtZXRob2QgZXEgJ3dhbnRfc29tJzsKICAgIGRpZSAiVW5yZWNvZ25pemVkIG1ldGhvZCAnJG1ldGhvZCcuIExpc3Qgb2YgYXZhaWxhYmxlIG1ldGhvZChzKTogQEVYUE9SVF9PS1xuIjsKfQoKMTsKRU9QCiAgICByZXR1cm4gJHNlbGYtPnN0dWI7Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOwoKdXNlIHZhcnMgcXcoJEFVVE9MT0FEKTsKcmVxdWlyZSBVUkk7CgpteSAkc29hcDsgIyBzaGFyZWQgYmV0d2VlbiBTT0FQIGFuZCBTT0FQOjpMaXRlIHBhY2thZ2VzCgp7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgKkFVVE9MT0FEID0gc3ViIHsKICAgICAgICBsb2NhbCgkMSwkMik7CiAgICAgICAgbXkoJHBhY2thZ2UsICRtZXRob2QpID0gJEFVVE9MT0FEID1+IG0vKD86KC4rKTo6KShbXjpdKykkLzsKICAgICAgICByZXR1cm4gaWYgJG1ldGhvZCBlcSAnREVTVFJPWSc7CgogICAgICAgIG15ICRzb2FwID0gcmVmICRfWzBdICYmIFVOSVZFUlNBTDo6aXNhKCRfWzBdID0+ICdTT0FQOjpMaXRlJykKICAgICAgICAgICAgPyAkX1swXQogICAgICAgICAgICA6ICRzb2FwCiAgICAgICAgICAgICAgICB8fCBkaWUgIlNPQVA6OiBwcmVmaXggc2hhbGwgb25seSBiZSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggK2F1dG9kaXNwYXRjaCBvcHRpb25cbiI7CgogICAgICAgIG15ICR1cmkgPSBVUkktPm5ldygkc29hcC0+dXJpKTsKICAgICAgICBteSAkY3VycmVudHVyaSA9ICR1cmktPnBhdGg7CiAgICAgICAgJHBhY2thZ2UgPSByZWYgJF9bMF0gJiYgVU5JVkVSU0FMOjppc2EoJF9bMF0gPT4gJ1NPQVA6OkxpdGUnKQogICAgICAgICAgICA/ICRjdXJyZW50dXJpCiAgICAgICAgICAgIDogJHBhY2thZ2UgZXEgJ1NPQVAnCiAgICAgICAgICAgICAgICA/IHJlZiAkX1swXSB8fCAoJF9bMF0gZXEgJ1NPQVAnCiAgICAgICAgICAgICAgICAgICAgPyAkY3VycmVudHVyaSB8fCBDYXJwOjpjcm9hayAiVVJJIGlzIG5vdCBzcGVjaWZpZWQgZm9yIG1ldGhvZCBjYWxsIgogICAgICAgICAgICAgICAgICAgIDogJF9bMF0pCiAgICAgICAgICAgICAgICA6ICRwYWNrYWdlIGVxICdtYWluJwogICAgICAgICAgICAgICAgICAgID8gJGN1cnJlbnR1cmkgfHwgJHBhY2thZ2UKICAgICAgICAgICAgICAgICAgICA6ICRwYWNrYWdlOwoKICAgICAgICAjIGRyb3AgZmlyc3QgcGFyYW1ldGVyIGlmIGl0J3MgYSBjbGFzcyBuYW1lCiAgICAgICAgewogICAgICAgICAgICBteSAkcGFjayA9ICRwYWNrYWdlOwogICAgICAgICAgICBmb3IgKCRwYWNrKSB7IHMhXi8hITsgcyEvITo6IWc7IH0KICAgICAgICAgICAgc2hpZnQgQF8gaWYgQF8gJiYgIXJlZiAkX1swXSAmJiAoJF9bMF0gZXEgJHBhY2sgfHwgJF9bMF0gZXEgJ1NPQVAnKQogICAgICAgICAgICAgICAgfHwgcmVmICRfWzBdICYmIFVOSVZFUlNBTDo6aXNhKCRfWzBdID0+ICdTT0FQOjpMaXRlJyk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKCRwYWNrYWdlKSB7IHMhOjohLyFnOyBzIV4vPyEvITsgfQogICAgICAgICR1cmktPnBhdGgoJHBhY2thZ2UpOwoKICAgICAgICBteSAkc29tID0gJHNvYXAtPnVyaSgkdXJpLT5hc19zdHJpbmcpLT5jYWxsKCRtZXRob2QgPT4gQF8pOwogICAgICAgIFVOSVZFUlNBTDo6aXNhKCRzb20gPT4gJ1NPQVA6OlNPTScpCiAgICAgICAgICAgID8gd2FudGFycmF5CiAgICAgICAgICAgICAgICA/ICRzb20tPnBhcmFtc2FsbAogICAgICAgICAgICAgICAgOiAkc29tLT5yZXN1bHQKICAgICAgICAgICAgOiAkc29tOwogICAgfTsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OkxpdGU7Cgp1c2UgdmFycyBxdygkQVVUT0xPQUQgQElTQSk7CnVzZSBDYXJwICgpOwoKdXNlIFNPQVA6OkxpdGU6OlV0aWxzOwp1c2UgU09BUDo6Q29uc3RhbnRzOwp1c2UgU09BUDo6UGFja2FnZXI7Cgp1c2UgU2NhbGFyOjpVdGlsIHF3KHdlYWtlbik7CgpASVNBID0gcXcoU09BUDo6Q2xvbmVhYmxlKTsKCiMgcHJvdmlkZSBhY2Nlc3MgdG8gZ2xvYmFsL2F1dG9kaXNwYXRjaGVkIG9iamVjdApzdWIgc2VsZiB7CiAgICBAXyA+IDEKICAgICAgICA/ICRzb2FwID0gJF9bMV0KICAgICAgICA6ICRzb2FwCn0KCiMgbm8gbW9yZSB3YXJuaW5ncyBhYm91dCAidXNlZCBvbmx5IG9uY2UiCipVTklWRVJTQUw6OkFVVE9MT0FEIGlmIDA7CgpzdWIgYXV0b2Rpc3BhdGNoZWQgeyBcJnsqVU5JVkVSU0FMOjpBVVRPTE9BRH0gZXEgXCZ7KlNPQVA6OkFVVE9MT0FEfSB9OwoKc3ViIHNvYXB2ZXJzaW9uIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAkdmVyc2lvbiA9IHNoaWZ0IG9yIHJldHVybiAkU09BUDo6Q29uc3RhbnRzOjpTT0FQX1ZFUlNJT047CgogICAgKCR2ZXJzaW9uKSA9IGdyZXAgewogICAgICAgICRTT0FQOjpDb25zdGFudHM6OlNPQVBfVkVSU0lPTlN7JF99LT57TlNfRU5WfSBlcSAkdmVyc2lvbgogICAgICAgIH0ga2V5cyAlU09BUDo6Q29uc3RhbnRzOjpTT0FQX1ZFUlNJT05TCiAgICAgICAgICAgIHVubGVzcyBleGlzdHMgJFNPQVA6OkNvbnN0YW50czo6U09BUF9WRVJTSU9OU3skdmVyc2lvbn07CgogICAgZGllIHFxISRTT0FQOjpDb25zdGFudHM6OldST05HX1ZFUlNJT04gU3VwcG9ydGVkIHZlcnNpb25zOlxuQHtbCiAgICAgICAgam9pbiAiXG4iLCBtYXAgeyIgICRfICgkU09BUDo6Q29uc3RhbnRzOjpTT0FQX1ZFUlNJT05TeyRffS0+e05TX0VOVn0pIn0ga2V5cyAlU09BUDo6Q29uc3RhbnRzOjpTT0FQX1ZFUlNJT05TCiAgICAgICAgXX1cbiEKICAgICAgICB1bmxlc3MgZGVmaW5lZCgkdmVyc2lvbikgJiYgZGVmaW5lZChteSAkZGVmID0gJFNPQVA6OkNvbnN0YW50czo6U09BUF9WRVJTSU9OU3skdmVyc2lvbn0pOwoKICAgIGZvcmVhY2ggKGtleXMgJSRkZWYpIHsKICAgICAgICBldmFsICJcJFNPQVA6OkNvbnN0YW50czo6JF8gPSAnJFNPQVA6OkNvbnN0YW50czo6U09BUF9WRVJTSU9OU3skdmVyc2lvbn0tPnskX30nIjsKICAgIH0KCiAgICAkU09BUDo6Q29uc3RhbnRzOjpTT0FQX1ZFUlNJT04gPSAkdmVyc2lvbjsKCiAgICByZXR1cm4gJHNlbGY7Cn0KCkJFR0lOIHsgU09BUDo6TGl0ZS0+c29hcHZlcnNpb24oMS4xKSB9CgpzdWIgaW1wb3J0IHsKICAgIG15ICRwa2cgPSBzaGlmdDsKICAgIG15ICRjYWxsZXIgPSBjYWxsZXI7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgIyBlbXVsYXRlICd1c2UgU09BUDo6TGl0ZSAwLjk5JyBiZWhhdmlvcgogICAgJHBrZy0+cmVxdWlyZV92ZXJzaW9uKHNoaWZ0KSBpZiBkZWZpbmVkICRfWzBdICYmICRfWzBdID1+IC9eXGQvOwoKICAgIHdoaWxlIChAXykgewogICAgICAgIG15ICRjb21tYW5kID0gc2hpZnQ7CgogICAgICAgIG15IEBwYXJhbWV0ZXJzID0gVU5JVkVSU0FMOjppc2EoJF9bMF0gPT4gJ0FSUkFZJykKICAgICAgICAgICAgPyBAe3NoaWZ0KCl9CiAgICAgICAgICAgIDogc2hpZnQKICAgICAgICAgICAgICAgIGlmIEBfICYmICRjb21tYW5kIG5lICdhdXRvZGlzcGF0Y2gnOwoKICAgICAgICBpZiAoJGNvbW1hbmQgZXEgJ2F1dG9kaXNwYXRjaCcgfHwgJGNvbW1hbmQgZXEgJ2Rpc3BhdGNoX2Zyb20nKSB7CiAgICAgICAgICAgICRzb2FwID0gKCRzb2FwfHwkcGtnKS0+bmV3OwogICAgICAgICAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgICAgICAgICBmb3JlYWNoICgkY29tbWFuZCBlcSAnYXV0b2Rpc3BhdGNoJwogICAgICAgICAgICAgICAgPyAnVU5JVkVSU0FMJwogICAgICAgICAgICAgICAgOiBAcGFyYW1ldGVycwogICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIG15ICRzdWIgPSAiJHtffTo6QVVUT0xPQUQiOwogICAgICAgICAgICAgICAgZGVmaW5lZCAmeyokc3VifQogICAgICAgICAgICAgICAgICAgID8gKFwmeyokc3VifSBlcSBcJnsqU09BUDo6QVVUT0xPQUR9CiAgICAgICAgICAgICAgICAgICAgICAgID8gKCkKICAgICAgICAgICAgICAgICAgICAgICAgOiBDYXJwOjpjcm9hayAiJHN1YiBhbHJlYWR5IGFzc2lnbmVkIGFuZCB3b24ndCB3b3JrIHdpdGggRElTUEFUQ0guIERpZWQiKQogICAgICAgICAgICAgICAgICAgIDogKCokc3ViID0gKlNPQVA6OkFVVE9MT0FEKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNpZiAoJGNvbW1hbmQgZXEgJ3NlcnZpY2UnKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKGtleXMgJXtTT0FQOjpTY2hlbWEtPnNjaGVtYV91cmwoc2hpZnQoQHBhcmFtZXRlcnMpKS0+cGFyc2UoQHBhcmFtZXRlcnMpLT5sb2FkLT5zZXJ2aWNlc30pIHsKICAgICAgICAgICAgICAgICRfLT5leHBvcnRfdG9fbGV2ZWwoMSwgdW5kZWYsICc6YWxsJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzaWYgKCRjb21tYW5kIGVxICdkZWJ1ZycgfHwgJGNvbW1hbmQgZXEgJ3RyYWNlJykgewogICAgICAgICAgICBTT0FQOjpUcmFjZS0+aW1wb3J0KEBwYXJhbWV0ZXJzID8gQHBhcmFtZXRlcnMgOiAnYWxsJyk7CiAgICAgICAgfQogICAgICAgIGVsc2lmICgkY29tbWFuZCBlcSAnaW1wb3J0JykgewogICAgICAgICAgICBsb2NhbCAkXlc7ICMgc3VwcmVzcyB3YXJuaW5ncyBhYm91dCByZWRlZmluaW5nCiAgICAgICAgICAgIG15ICRwYWNrYWdlID0gc2hpZnQoQHBhcmFtZXRlcnMpOwogICAgICAgICAgICAkcGFja2FnZS0+ZXhwb3J0X3RvX2xldmVsKDEsIHVuZGVmLCBAcGFyYW1ldGVycyA/IEBwYXJhbWV0ZXJzIDogJzphbGwnKSBpZiAkcGFja2FnZTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIENhcnA6OmNhcnAgIk9kZCAod3Jvbmc/KSBudW1iZXIgb2YgcGFyYW1ldGVycyBpbiBpbXBvcnQoKSwgc3RpbGwgY29udGludWUiIGlmICReVyAmJiAhKEBwYXJhbWV0ZXJzICYgMSk7CiAgICAgICAgICAgICRzb2FwID0gKCRzb2FwfHwkcGtnKS0+JGNvbW1hbmQoQHBhcmFtZXRlcnMpOwogICAgICAgIH0KICAgIH0KfQoKc3ViIERFU1RST1kgeyBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKSB9CgpzdWIgbmV3IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICByZXR1cm4gJHNlbGYgaWYgcmVmICRzZWxmOwogICAgdW5sZXNzIChyZWYgJHNlbGYpIHsKICAgICAgICBteSAkY2xhc3MgPSAkc2VsZjsKICAgICAgICAjIENoZWNrIHdoZXRoZXIgd2UgY2FuIGNsb25lLiBPbmx5IHRoZSBTQU1FIGNsYXNzIGFsbG93ZWQsIG5vIGluaGVyaXRhbmNlCiAgICAgICAgJHNlbGYgPSByZWYoJHNvYXApIGVxICRjbGFzcyA/ICRzb2FwLT5jbG9uZSA6IHsKICAgICAgICAgICAgX3RyYW5zcG9ydCAgICA9PiBTT0FQOjpUcmFuc3BvcnQtPm5ldywKICAgICAgICAgICAgX3NlcmlhbGl6ZXIgICA9PiBTT0FQOjpTZXJpYWxpemVyLT5uZXcsCiAgICAgICAgICAgIF9kZXNlcmlhbGl6ZXIgPT4gU09BUDo6RGVzZXJpYWxpemVyLT5uZXcsCiAgICAgICAgICAgIF9wYWNrYWdlciAgICAgPT4gU09BUDo6UGFja2FnZXI6Ok1JTUUtPm5ldywKICAgICAgICAgICAgX3NjaGVtYSAgICAgICA9PiB1bmRlZiwKICAgICAgICAgICAgX2F1dG9yZXN1bHQgICA9PiAwLAogICAgICAgICAgICBfb25fYWN0aW9uICAgID0+IHN1YiB7IHNwcmludGYgJyIlcyMlcyInLCBzaGlmdCB8fCAnJywgc2hpZnQgfSwKICAgICAgICAgICAgX29uX2ZhdWx0ICAgICA9PiBzdWIge3JlZiAkX1sxXSA/IHJldHVybiAkX1sxXSA6IENhcnA6OmNyb2FrICRfWzBdLT50cmFuc3BvcnQtPmlzX3N1Y2Nlc3MgPyAkX1sxXSA6ICRfWzBdLT50cmFuc3BvcnQtPnN0YXR1c30sCiAgICAgICAgfTsKICAgICAgICBibGVzcyAkc2VsZiA9PiAkY2xhc3M7CiAgICAgICAgJHNlbGYtPm9uX25vbnNlcmlhbGl6ZWQoJHNlbGYtPm9uX25vbnNlcmlhbGl6ZWQgfHwgJHNlbGYtPnNlcmlhbGl6ZXItPm9uX25vbnNlcmlhbGl6ZWQpOwogICAgICAgIFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpOwogICAgfQoKICAgIENhcnA6OmNhcnAgIk9kZCAod3Jvbmc/KSBudW1iZXIgb2YgcGFyYW1ldGVycyBpbiBuZXcoKSIgaWYgJF5XICYmIChAXyAmIDEpOwogICAgbm8gc3RyaWN0IHF3KHJlZnMpOwogICAgd2hpbGUgKEBfKSB7CiAgICAgICAgbXkoJG1ldGhvZCwgJHBhcmFtcykgPSBzcGxpY2UoQF8sMCwyKTsKICAgICAgICAkc2VsZi0+Y2FuKCRtZXRob2QpCiAgICAgICAgICAgID8gJHNlbGYtPiRtZXRob2QocmVmICRwYXJhbXMgZXEgJ0FSUkFZJyA/IEAkcGFyYW1zIDogJHBhcmFtcykKICAgICAgICAgICAgOiAkXlcgJiYgQ2FycDo6Y2FycCAiVW5yZWNvZ25pemVkIHBhcmFtZXRlciAnJG1ldGhvZCcgaW4gbmV3KCkiCiAgICB9CgogICAgcmV0dXJuICRzZWxmOwp9CgpzdWIgaW5pdF9jb250ZXh0IHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgICRzZWxmLT57J19kZXNlcmlhbGl6ZXInfS0+eydfY29udGV4dCd9ID0gJHNlbGY7CiAgICAjIHdlYWtlbiBjaXJjdWxhciByZWZlcmVuY2UgdG8gYXZvaWQgYSBtZW1vcnkgaG9sZQogICAgd2Vha2VuICRzZWxmLT57J19kZXNlcmlhbGl6ZXInfS0+eydfY29udGV4dCd9OwoKICAgICRzZWxmLT57J19zZXJpYWxpemVyJ30tPnsnX2NvbnRleHQnfSA9ICRzZWxmOwogICAgIyB3ZWFrZW4gY2lyY3VsYXIgcmVmZXJlbmNlIHRvIGF2b2lkIGEgbWVtb3J5IGhvbGUKICAgIHdlYWtlbiAkc2VsZi0+eydfc2VyaWFsaXplcid9LT57J19jb250ZXh0J307Cn0KCiMgTmFtaW5nPyB3c2RsX3BhcnNlcgpzdWIgc2NoZW1hIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBpZiAoQF8pIHsKICAgICAgICAkc2VsZi0+eydfc2NoZW1hJ30gPSBzaGlmdDsKICAgICAgICByZXR1cm4gJHNlbGY7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICBpZiAoIWRlZmluZWQgJHNlbGYtPnsnX3NjaGVtYSd9KSB7CiAgICAgICAgICAgICRzZWxmLT57J19zY2hlbWEnfSA9IFNPQVA6OlNjaGVtYS0+bmV3OwogICAgICAgIH0KICAgICAgICByZXR1cm4gJHNlbGYtPnsnX3NjaGVtYSd9OwogICAgfQp9CgpzdWIgQkVHSU4gewogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgIGZvciBteSAkbWV0aG9kIChxdyhzZXJpYWxpemVyIGRlc2VyaWFsaXplcikpIHsKICAgICAgICBteSAkZmllbGQgPSAnXycgLiAkbWV0aG9kOwogICAgICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgICAgICAgbXkgJHNlbGYgPSBzaGlmdC0+bmV3OwogICAgICAgICAgICBpZiAoQF8pIHsKICAgICAgICAgICAgICAgIG15ICRjb250ZXh0ID0gJHNlbGYtPnskZmllbGR9LT57J19jb250ZXh0J307ICMgc2F2ZSB0aGUgb2xkIGNvbnRleHQKICAgICAgICAgICAgICAgICRzZWxmLT57JGZpZWxkfSA9IHNoaWZ0OwogICAgICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9LT57J19jb250ZXh0J30gPSAkY29udGV4dDsgICAgIyByZXN0b3JlIHRoZSBvbGQgY29udGV4dAogICAgICAgICAgICAgICAgcmV0dXJuICRzZWxmOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuICRzZWxmLT57JGZpZWxkfTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBfX1BBQ0tBR0VfXy0+X19ta19hY2Nlc3NvcnMoCiAgICAgICAgcXcoZW5kcG9pbnQgdHJhbnNwb3J0IG91dHB1dHhtbCBhdXRvcmVzdWx0IHBhY2thZ2VyKQogICAgKTsKICAgICMgIGZvciBteSAkbWV0aG9kICgpIHsKICAgICMgICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICMgICAgKiRtZXRob2QgPSBzdWIgewogICAgIyAgICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgICMgICAgICBAXyA/ICgkc2VsZi0+eyRmaWVsZH0gPSBzaGlmdCwgcmV0dXJuICRzZWxmKSA6IHJldHVybiAkc2VsZi0+eyRmaWVsZH07CiAgICAjICAgIH0KICAgICMgIH0KICAgIGZvciBteSAkbWV0aG9kIChxdyhvbl9hY3Rpb24gb25fZmF1bHQgb25fbm9uc2VyaWFsaXplZCkpIHsKICAgICAgICBteSAkZmllbGQgPSAnXycgLiAkbWV0aG9kOwogICAgICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgICAgICAgbXkgJHNlbGYgPSBzaGlmdC0+bmV3OwogICAgICAgICAgICByZXR1cm4gJHNlbGYtPnskZmllbGR9IHVubGVzcyBAXzsKICAgICAgICAgICAgbG9jYWwgJEA7CiAgICAgICAgICAgICMgY29tbWVudGVkIG91dCBiZWNhdXNlIHRoYXQgJ2V2YWwnIHdhcyB1bnNlY3VyZQogICAgICAgICAgICAjID4gcmVmICRfWzBdIGVxICdDT0RFJyA/IHNoaWZ0IDogZXZhbCBzaGlmdDsKICAgICAgICAgICAgIyBBbSBJIHBhcmFub2lkIGVub3VnaD8KICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9ID0gc2hpZnQ7CiAgICAgICAgICAgIENhcnA6OmNyb2FrICRAIGlmICRAOwogICAgICAgICAgICBDYXJwOjpjcm9hayAiJG1ldGhvZCgpIGV4cGVjdHMgc3Vicm91dGluZSAoQ09ERSkgb3Igc3RyaW5nIHRoYXQgZXZhbHVhdGVzIGludG8gc3Vicm91dGluZSAoQ09ERSkiCiAgICAgICAgICAgICAgICB1bmxlc3MgcmVmICRzZWxmLT57JGZpZWxkfSBlcSAnQ09ERSc7CiAgICAgICAgICAgIHJldHVybiAkc2VsZjsKICAgICAgICB9CiAgICB9CiAgICAjIFNPQVA6OlRyYW5zcG9ydCBTaG9ydGN1dHMKICAgICMgVE9ETyAtIGRlcHJlY2F0ZSBwcm94eSgpIGluIGZhdm9yIG9mIG5ldyBsYW5ndWFnZSBlbmRwb2ludF91cmwoKQogICAgbm8gc3RyaWN0IHF3KHJlZnMpOwogICAgZm9yIG15ICRtZXRob2QgKHF3KHByb3h5KSkgewogICAgICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgICAgICAgbXkgJHNlbGYgPSBzaGlmdC0+bmV3OwogICAgICAgICAgICBAXyA/ICgkc2VsZi0+dHJhbnNwb3J0LT4kbWV0aG9kKEBfKSwgcmV0dXJuICRzZWxmKSA6IHJldHVybiAkc2VsZi0+dHJhbnNwb3J0LT4kbWV0aG9kKCk7CiAgICAgICAgfQogICAgfQoKICAgICMgU09BUDo6U2VyaWFpbGl6ZXIgU2hvcnRjdXRzCiAgICBmb3IgbXkgJG1ldGhvZCAocXcoYXV0b3R5cGUgcmVhZGFibGUgZW52cHJlZml4IGVuY29kaW5nU3R5bGUKICAgICAgICAgICAgICAgICAgICBlbmNwcmVmaXggbXVsdGlyZWZpbnBsYWNlIGVuY29kaW5nCiAgICAgICAgICAgICAgICAgICAgdHlwZWxvb2t1cCBoZWFkZXIgbWFwdHlwZSB4bWxzY2hlbWEKICAgICAgICAgICAgICAgICAgICB1cmkgbnNfcHJlZml4IG5zX3VyaSB1c2VfcHJlZml4IHVzZV9kZWZhdWx0X25zCiAgICAgICAgICAgICAgICAgICAgbnMgZGVmYXVsdF9ucykpIHsKICAgICAgICAqJG1ldGhvZCA9IHN1YiB7CiAgICAgICAgICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgICAgICAgICAgQF8gPyAoJHNlbGYtPnNlcmlhbGl6ZXItPiRtZXRob2QoQF8pLCByZXR1cm4gJHNlbGYpIDogcmV0dXJuICRzZWxmLT5zZXJpYWxpemVyLT4kbWV0aG9kKCk7CiAgICAgICAgfQogICAgfQoKICAgICMgU09BUDo6U2NoZW1hIFNob3J0Y3V0cwogICAgZm9yIG15ICRtZXRob2QgKHF3KGNhY2hlX2RpciBjYWNoZV90dGwpKSB7CiAgICAgICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgICAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CiAgICAgICAgICAgIEBfID8gKCRzZWxmLT5zY2hlbWEtPiRtZXRob2QoQF8pLCByZXR1cm4gJHNlbGYpIDogcmV0dXJuICRzZWxmLT5zY2hlbWEtPiRtZXRob2QoKTsKICAgICAgICB9CiAgICB9Cn0KCnN1YiBwYXJ0cyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgJHNlbGYtPnBhY2thZ2VyLT5wYXJ0cyhAXyk7CiAgICByZXR1cm4gJHNlbGY7Cn0KCiMgTmFtaW5nPyB3c2RsCnN1YiBzZXJ2aWNlIHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgIHJldHVybiAkc2VsZi0+eydfc2VydmljZSd9IHVubGVzcyBAXzsKICAgICRzZWxmLT5zY2hlbWEtPnNjaGVtYV91cmwoJHNlbGYtPnsnX3NlcnZpY2UnfSA9IHNoaWZ0KTsKICAgIG15ICVzZXJ2aWNlcyA9ICV7JHNlbGYtPnNjaGVtYS0+cGFyc2UoQF8pLT5sb2FkLT5zZXJ2aWNlc307CgogICAgQ2FycDo6Y3JvYWsgIk1vcmUgdGhhbiBvbmUgc2VydmljZSBpbiBzZXJ2aWNlIGRlc2NyaXB0aW9uLiBTZXJ2aWNlIGFuZCBwb3J0IG5hbWVzIGhhdmUgdG8gYmUgc3BlY2lmaWVkXG4iCiAgICAgICAgaWYga2V5cyAlc2VydmljZXMgPiAxOwogICAgbXkgJHNlcnZpY2UgPSAoa2V5cyAlc2VydmljZXMpWzBdLT5uZXc7CiAgICByZXR1cm4gJHNlcnZpY2U7Cn0KCnN1YiBBVVRPTE9BRCB7CiAgICBteSAkbWV0aG9kID0gc3Vic3RyKCRBVVRPTE9BRCwgcmluZGV4KCRBVVRPTE9BRCwgJzo6JykgKyAyKTsKICAgIHJldHVybiBpZiAkbWV0aG9kIGVxICdERVNUUk9ZJzsKCiAgICByZWYgJF9bMF0gb3IgQ2FycDo6Y3JvYWsgcXEhQ2FuXCd0IGxvY2F0ZSBjbGFzcyBtZXRob2QgIiRtZXRob2QiIHZpYSBwYWNrYWdlIFwiISAuIF9fUEFDS0FHRV9fIC4nXCInOwoKICAgIG5vIHN0cmljdCAncmVmcyc7CiAgICAqJEFVVE9MT0FEID0gc3ViIHsKICAgICAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgICAgIG15ICRzb20gPSAkc2VsZi0+Y2FsbCgkbWV0aG9kID0+IEBfKTsKICAgICAgICByZXR1cm4gJHNlbGYtPmF1dG9yZXN1bHQgJiYgVU5JVkVSU0FMOjppc2EoJHNvbSA9PiAnU09BUDo6U09NJykKICAgICAgICAgICAgPyB3YW50YXJyYXkgPyAkc29tLT5wYXJhbXNhbGwgOiAkc29tLT5yZXN1bHQKICAgICAgICAgICAgOiAkc29tOwogICAgfTsKICAgIGdvdG8gJiRBVVRPTE9BRDsKfQoKc3ViIGNhbGwgewogICAgU09BUDo6VHJhY2U6OnRyYWNlKCcoKScpOwogICAgbXkgJHNlbGYgPSBzaGlmdDsKCiAgICBkaWUgIkEgc2VydmljZSBhZGRyZXNzIGhhcyBub3QgYmVlbiBzcGVjaWZpZWQgZWl0aGVyIGJ5IHVzaW5nIFNPQVA6OkxpdGUtPnByb3h5KCkgb3IgYSBzZXJ2aWNlIGRlc2NyaXB0aW9uKVxuIgogICAgICAgIHVubGVzcyBkZWZpbmVkICRzZWxmLT5wcm94eSAmJiBVTklWRVJTQUw6OmlzYSgkc2VsZi0+cHJveHkgPT4gJ1NPQVA6OkNsaWVudCcpOwoKICAgICRzZWxmLT5pbml0X2NvbnRleHQoKTsKCiAgICBteSAkc2VyaWFsaXplciA9ICRzZWxmLT5zZXJpYWxpemVyOwogICAgJHNlcmlhbGl6ZXItPm9uX25vbnNlcmlhbGl6ZWQoJHNlbGYtPm9uX25vbnNlcmlhbGl6ZWQpOwoKICAgIG15ICRyZXNwb25zZSA9ICRzZWxmLT50cmFuc3BvcnQtPnNlbmRfcmVjZWl2ZSgKICAgICAgICBjb250ZXh0ICA9PiAkc2VsZiwgIyB0aGlzIGlzIHByb3ZpZGVkIGZvciBjb250ZXh0CiAgICAgICAgZW5kcG9pbnQgPT4gJHNlbGYtPmVuZHBvaW50LAogICAgICAgIGFjdGlvbiAgID0+IHNjYWxhcigkc2VsZi0+b25fYWN0aW9uLT4oJHNlcmlhbGl6ZXItPnVyaWZvcm1ldGhvZCgkX1swXSkpKSwKICAgICAgICAgICAgICAgICMgbGVhdmUgb25seSBwYXJhbWV0ZXJzIHNvIHdlIGNhbiBsYXRlciB1cGRhdGUgdGhlbSBpZiByZXF1aXJlZAogICAgICAgIGVudmVsb3BlID0+ICRzZXJpYWxpemVyLT5lbnZlbG9wZShtZXRob2QgPT4gc2hpZnQsIEBfKSwKICAgICAgICBlbmNvZGluZyA9PiAkc2VyaWFsaXplci0+ZW5jb2RpbmcsCiAgICAgICAgcGFydHMgICAgPT4gQHskc2VsZi0+cGFja2FnZXItPnBhcnRzfSA/ICRzZWxmLT5wYWNrYWdlci0+cGFydHMgOiB1bmRlZiwKICAgICk7CgogICAgcmV0dXJuICRyZXNwb25zZSBpZiAkc2VsZi0+b3V0cHV0eG1sOwoKICAgIG15ICRyZXN1bHQgPSBldmFsIHsgJHNlbGYtPmRlc2VyaWFsaXplci0+ZGVzZXJpYWxpemUoJHJlc3BvbnNlKSB9CiAgICAgICAgaWYgJHJlc3BvbnNlOwoKICAgIGlmICghJHNlbGYtPnRyYW5zcG9ydC0+aXNfc3VjY2VzcyB8fCAjIHRyYW5zcG9ydCBmYXVsdAogICAgICAgICRAIHx8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgbm90IGRlc2VyaWFsaXppYmxlCiAgICAgICAgIyBmYXVsdCBtZXNzYWdlIGV2ZW4gaWYgdHJhbnNwb3J0IE9LCiAgICAgICAgIyBvciBubyB0cmFuc3BvcnQgZXJyb3IgKGZvciBleGFtcGxlLCBmbyBUQ1AsIFBPUDMsIElPIGltcGxlbWVudGF0aW9ucykKICAgICAgICBVTklWRVJTQUw6OmlzYSgkcmVzdWx0ID0+ICdTT0FQOjpTT00nKSAmJiAkcmVzdWx0LT5mYXVsdCkgewogICAgICAgIHJldHVybiAoJHNlbGYtPm9uX2ZhdWx0LT4oJHNlbGYsICRACiAgICAgICAgICAgID8gJEAgLiAoJHJlc3BvbnNlIHx8ICcnKQogICAgICAgICAgICA6ICRyZXN1bHQpCiAgICAgICAgICAgICAgICB8fCAkcmVzdWx0CiAgICAgICAgKTsKICAgICAgICAjID8gIyB0cmljayBlZGl0b3JzCiAgICB9CiAgICAjIHRoaXMgbWlnaHQgYmUgdHJvdWJsZSBmb3IgY29ubmVjdGlvbiBjbG9zZS4uLgogICAgcmV0dXJuIHVubGVzcyAkcmVzcG9uc2U7ICMgbm90aGluZyB0byBkbyBmb3Igb25lLXdheXMKCiAgICAjIGxpdHRsZSBiaXQgdHJpY2t5IHBhcnQgdGhhdCBiaW5kcyBpbi9vdXQgcGFyYW1ldGVycwogICAgaWYgKFVOSVZFUlNBTDo6aXNhKCRyZXN1bHQgPT4gJ1NPQVA6OlNPTScpCiAgICAgICAgJiYgKCRyZXN1bHQtPnBhcmFtc291dCB8fCAkcmVzdWx0LT5oZWFkZXJzKQogICAgICAgICYmICRzZXJpYWxpemVyLT5zaWduYXR1cmUpIHsKICAgICAgICBteSAkbnVtID0gMDsKICAgICAgICBteSAlc2lnbmF0dXJlcyA9IG1hcCB7JF8gPT4gJG51bSsrfSBAeyRzZXJpYWxpemVyLT5zaWduYXR1cmV9OwogICAgICAgIGZvciAoJHJlc3VsdC0+ZGF0YW9mKFNPQVA6OlNPTTo6cGFyYW1zb3V0KSwgJHJlc3VsdC0+ZGF0YW9mKFNPQVA6OlNPTTo6aGVhZGVycykpIHsKICAgICAgICAgICAgbXkgJHNpZ25hdHVyZSA9IGpvaW4gJDssICRfLT5uYW1lLCAkXy0+dHlwZSB8fCAnJzsKICAgICAgICAgICAgaWYgKGV4aXN0cyAkc2lnbmF0dXJlc3skc2lnbmF0dXJlfSkgewogICAgICAgICAgICAgICAgbXkgJHBhcmFtID0gJHNpZ25hdHVyZXN7JHNpZ25hdHVyZX07CiAgICAgICAgICAgICAgICBteSgkdmFsdWUpID0gJF8tPnZhbHVlOyAjIHRha2UgZmlyc3QgdmFsdWUKCiAgICAgICAgICAgICAgICAjIGZpbGx1cCBwYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBVTklWRVJTQUw6OmlzYSgkX1skcGFyYW1dID0+ICdTT0FQOjpEYXRhJykKICAgICAgICAgICAgICAgICAgICA/ICRfWyRwYXJhbV0tPlNPQVA6OkRhdGE6OnZhbHVlKCR2YWx1ZSkKICAgICAgICAgICAgICAgICAgICA6IFVOSVZFUlNBTDo6aXNhKCRfWyRwYXJhbV0gPT4gJ0FSUkFZJykKICAgICAgICAgICAgICAgICAgICAgICAgPyAoQHskX1skcGFyYW1dfSA9IEAkdmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgIDogVU5JVkVSU0FMOjppc2EoJF9bJHBhcmFtXSA9PiAnSEFTSCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgleyRfWyRwYXJhbV19ID0gJSR2YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogVU5JVkVSU0FMOjppc2EoJF9bJHBhcmFtXSA9PiAnU0NBTEFSJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgkeyRfWyRwYXJhbV19ID0gJCR2YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgkX1skcGFyYW1dID0gJHZhbHVlKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICRyZXN1bHQ7Cn0gIyBlbmQgb2YgY2FsbCgpCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6TGl0ZTo6Q09NOwoKcmVxdWlyZSBTT0FQOjpMaXRlOwoKc3ViIHJlcXVpcmVkIHsKICBmb3JlYWNoIChxdygKICAgIFVSSTo6X2ZvcmVpZ24gVVJJOjpodHRwIFVSSTo6aHR0cHMKICAgIExXUDo6UHJvdG9jb2w6Omh0dHAgTFdQOjpQcm90b2NvbDo6aHR0cHMgTFdQOjpBdXRoZW46OkJhc2ljIExXUDo6QXV0aGVuOjpEaWdlc3QKICAgIEhUVFA6OkRhZW1vbiBDb21wcmVzczo6WmxpYiBTT0FQOjpUcmFuc3BvcnQ6OkhUVFAKICAgIFhNTFJQQzo6TGl0ZSBYTUxSUEM6OlRyYW5zcG9ydDo6SFRUUAogICkpIHsKICAgIGV2YWwgam9pbiAnOycsICdsb2NhbCAkU0lHe19fRElFX199JywgInJlcXVpcmUgJF8iOwogIH0KfQoKc3ViIG5ldyAgICB7IHJlcXVpcmVkOyBTT0FQOjpMaXRlLT5uZXcoQF8pIH0KCnN1YiBjcmVhdGU7ICpjcmVhdGUgPSBcJm5ldzsgIyBtYWtlIGFsaWFzLiBTb21ld2hlcmUgJ25ldycgaXMgcmVnaXN0ZXJlZCBrZXl3b3JkCgpzdWIgc29hcDsgKnNvYXAgPSBcJm5ldzsgICAgICMgYWxzbyBhbGlhcy4gSnVzdCB0byBiZSBjb25zaXN0ZW50IHdpdGggLnhtbHJwYyBjYWxsCgpzdWIgeG1scnBjIHsgcmVxdWlyZWQ7IFhNTFJQQzo6TGl0ZS0+bmV3KEBfKSB9CgpzdWIgc2VydmVyIHsgcmVxdWlyZWQ7IHNoaWZ0LT5uZXcoQF8pIH0KCnN1YiBkYXRhICAgeyBTT0FQOjpEYXRhLT5uZXcoQF8pIH0KCnN1YiBoZWFkZXIgeyBTT0FQOjpIZWFkZXItPm5ldyhAXykgfQoKc3ViIGhhc2ggICB7ICt7QF99IH0KCnN1YiBpbnN0YW5jZW9mIHsKICBteSAkY2xhc3MgPSBzaGlmdDsKICBkaWUgIkluY29ycmVjdCBjbGFzcyBuYW1lIiB1bmxlc3MgJGNsYXNzID1+IC9eKFx3W1x3Ol0qKSQvOwogIGV2YWwgInJlcXVpcmUgJGNsYXNzIjsKICAkY2xhc3MtPm5ldyhAXyk7Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKMTsKCl9fRU5EX18KCj1wb2QKCj1oZWFkMSBOQU1FCgpTT0FQOjpMaXRlIC0gUGVybCdzIFdlYiBTZXJ2aWNlcyBUb29sa2l0Cgo9aGVhZDEgREVTQ1JJUFRJT04KClNPQVA6OkxpdGUgaXMgYSBjb2xsZWN0aW9uIG9mIFBlcmwgbW9kdWxlcyB3aGljaCBwcm92aWRlcyBhIHNpbXBsZSBhbmQKbGlnaHR3ZWlnaHQgaW50ZXJmYWNlIHRvIHRoZSBTaW1wbGUgT2JqZWN0IEFjY2VzcyBQcm90b2NvbCAoU09BUCkgYm90aCBvbgpjbGllbnQgYW5kIHNlcnZlciBzaWRlLgoKPWhlYWQxIFBFUkwgVkVSU0lPTiBXQVJOSU5HCgpTT0FQOjpMaXRlIDAuNzEgd2lsbCBiZSB0aGUgbGFzdCB2ZXJzaW9uIG9mIFNPQVA6OkxpdGUgcnVubmluZyBvbiBwZXJsIDUuMDA1CgpGdXR1cmUgdmVyc2lvbnMgb2YgU09BUDo6TGl0ZSB3aWxsIHJlcXVpcmUgYXQgbGVhc3QgcGVybCA1LjYuMAoKSWYgeW91IGhhdmUgbm90IGhhZCB0aGUgdGltZSB0byB1cGdyYWQgeW91ciBwZXJsLCB5b3Ugc2hvdWxkIGNvbnNpZGVyIHRoaXMKbm93LgoKPWhlYWQxIE9WRVJWSUVXIE9GIENMQVNTRVMgQU5EIFBBQ0tBR0VTCgo9b3ZlcgoKPWl0ZW0gRjxsaWIvU09BUC9MaXRlLnBtPgoKTDxTT0FQOjpMaXRlPiAtIE1haW4gY2xhc3MgcHJvdmlkZXMgYWxsIGxvZ2ljCgpMPFNPQVA6OlRyYW5zcG9ydD4gLSBUcmFuc3BvcnQgYmFja2VuZAoKTDxTT0FQOjpEYXRhPiAtIERhdGEgb2JqZWN0cwoKTDxTT0FQOjpIZWFkZXI+IC0gSGVhZGVyIERhdGEgT2JqZWN0cwoKTDxTT0FQOjpTZXJpYWxpemVyPiAtIFNlcmlhbGl6ZXMgZGF0YSBzdHJ1Y3R1cmVzIHRvIFNPQVAgbWVzc2FnZXMKCkw8U09BUDo6RGVzZXJpYWxpemVyPiAtIERlc2VyaWFsaXplcyBTT0FQIG1lc3NhZ2VzIGludG8gU09BUDo6U09NIG9iamVjdHMKCkw8U09BUDo6U09NPiAtIFNPQVAgTWVzc2FnZSBvYmplY3RzCgpMPFNPQVA6OkNvbnN0YW50cz4gLSBQcm92aWRlcyBhY2Nlc3MgdG8gY29tbW9uIGNvbnN0YW50cyBhbmQgZGVmYXVsdHMKCkw8U09BUDo6VHJhY2U+IC0gVHJhY2luZyBmYWNpbGl0aWVzCgpMPFNPQVA6OlNjaGVtYT4gLSBQcm92aWRlcyBhY2Nlc3MgYW5kIHN0dWIocykgZm9yIHNjaGVtYShzKQoKTDxTT0FQOjpTY2hlbWE6OldTREx8U09BUDo6U2NoZW1hL1NPQVA6OlNjaGVtYTo6V1NETD4gLSBXU0RMIGltcGxlbWVudGF0aW9uIGZvciBTT0FQOjpTY2hlbWEKCkw8U09BUDo6U2VydmVyPiAtIEhhbmRsZXMgcmVxdWVzdHMgb24gc2VydmVyIHNpZGUKClNPQVA6OlNlcnZlcjo6T2JqZWN0IC0gSGFuZGxlcyBvYmplY3RzLWJ5LXJlZmVyZW5jZQoKTDxTT0FQOjpGYXVsdD4gLSBQcm92aWRlcyBzdXBwb3J0IGZvciBGYXVsdHMgb24gc2VydmVyIHNpZGUKCkw8U09BUDo6VXRpbHM+IC0gQSBzZXQgb2YgcHJpdmF0ZSBhbmQgcHVibGljIHV0aWxpdHkgc3Vicm91dGluZXMKCj1pdGVtIEY8bGliL1NPQVAvUGFja2FnZXIucG0+CgpMPFNPQVA6OlBhY2thZ2VyPiAtIFByb3ZpZGVzIGFuIGFic3RyYWN0IGNsYXNzIGZvciBpbXBsZW1lbnRpbmcgY3VzdG9tIHBhY2thZ2Vycy4KCkw8U09BUDo6UGFja2FnZXI6Ok1JTUV8U09BUDo6UGFja2FnZXIvU09BUDo6UGFja2FnZXI6Ok1JTUU+IC0gUHJvdmlkZXMgTUlNRSBzdXBwb3J0IHRvIFNPQVA6OkxpdGUKCkw8U09BUDo6UGFja2FnZXI6OkRJTUV8U09BUDo6UGFja2FnZXIvU09BUDo6UGFja2FnZXI6OkRJTUU+IC0gUHJvdmlkZXMgRElNRSBzdXBwb3J0IHRvIFNPQVA6OkxpdGUKCj1pdGVtIEY8bGliL1NPQVAvVHJhbnNwb3J0L0hUVFAucG0+CgpMPFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6Q2xpZW50fFNPQVA6OlRyYW5zcG9ydC9TT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkNsaWVudD4gLSBDbGllbnQgaW50ZXJmYWNlIHRvIEhUVFAgdHJhbnNwb3J0CgpMPFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6U2VydmVyfFNPQVA6OlRyYW5zcG9ydC9TT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OlNlcnZlcj4gLSBTZXJ2ZXIgaW50ZXJmYWNlIHRvIEhUVFAgdHJhbnNwb3J0CgpMPFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6Q0dJfFNPQVA6OlRyYW5zcG9ydC9TT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkNHST4gLSBDR0kgaW1wbGVtZW50YXRpb24gb2Ygc2VydmVyIGludGVyZmFjZQoKTDxTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkRhZW1vbnxTT0FQOjpUcmFuc3BvcnQvU09BUDo6VHJhbnNwb3J0OjpIVFRQOjpEYWVtb24+IC0gRGFlbW9uIGltcGxlbWVudGF0aW9uIG9mIHNlcnZlciBpbnRlcmZhY2UKCkw8U09BUDo6VHJhbnNwb3J0OjpIVFRQOjpBcGFjaGV8U09BUDo6VHJhbnNwb3J0L1NPQVA6OlRyYW5zcG9ydDo6SFRUUDo6QXBhY2hlPiAtIG1vZF9wZXJsIGltcGxlbWVudGF0aW9uIG9mIHNlcnZlciBpbnRlcmZhY2UKCj1pdGVtIEY8bGliL1NPQVAvVHJhbnNwb3J0L1BPUDMucG0+CgpMPFNPQVA6OlRyYW5zcG9ydDo6UE9QMzo6U2VydmVyfFNPQVA6OlRyYW5zcG9ydC9TT0FQOjpUcmFuc3BvcnQ6OlBPUDM6OlNlcnZlcj4gLSBTZXJ2ZXIgaW50ZXJmYWNlIHRvIFBPUDMgcHJvdG9jb2wKCj1pdGVtIEY8bGliL1NPQVAvVHJhbnNwb3J0L01BSUxUTy5wbT4KCkw8U09BUDo6VHJhbnNwb3J0OjpNQUlMVE86OkNsaWVudHxTT0FQOjpUcmFuc3BvcnQvU09BUDo6VHJhbnNwb3J0OjpNQUlMVE86OkNsaWVudD4gLSBDbGllbnQgaW50ZXJmYWNlIHRvIFNNVFAvc2VuZG1haWwKCj1pdGVtIEY8bGliL1NPQVAvVHJhbnNwb3J0L0xPQ0FMLnBtPgoKTDxTT0FQOjpUcmFuc3BvcnQ6OkxPQ0FMOjpDbGllbnR8U09BUDo6VHJhbnNwb3J0L1NPQVA6OlRyYW5zcG9ydDo6TE9DQUw6OkNsaWVudD4gLSBDbGllbnQgaW50ZXJmYWNlIHRvIGxvY2FsIHRyYW5zcG9ydAoKPWl0ZW0gRjxsaWIvU09BUC9UcmFuc3BvcnQvVENQLnBtPgoKTDxTT0FQOjpUcmFuc3BvcnQ6OlRDUDo6U2VydmVyfFNPQVA6OlRyYW5zcG9ydC9TT0FQOjpUcmFuc3BvcnQ6OlRDUDo6U2VydmVyPiAtIFNlcnZlciBpbnRlcmZhY2UgdG8gVENQIHByb3RvY29sCgpMPFNPQVA6OlRyYW5zcG9ydDo6VENQOjpDbGllbnR8U09BUDo6VHJhbnNwb3J0L1NPQVA6OlRyYW5zcG9ydDo6VENQOjpDbGllbnQ+IC0gQ2xpZW50IGludGVyZmFjZSB0byBUQ1AgcHJvdG9jb2wKCj1pdGVtIEY8bGliL1NPQVAvVHJhbnNwb3J0L0lPLnBtPgoKTDxTT0FQOjpUcmFuc3BvcnQ6OklPOjpTZXJ2ZXJ8U09BUDo6VHJhbnNwb3J0L1NPQVA6OlRyYW5zcG9ydDo6SU86OlNlcnZlcj4gLSBTZXJ2ZXIgaW50ZXJmYWNlIHRvIElPIHRyYW5zcG9ydAoKPWJhY2sKCj1oZWFkMSBNRVRIT0RTCgpBbGwgYWNjZXNzb3IgbWV0aG9kcyByZXR1cm4gdGhlIGN1cnJlbnQgdmFsdWUgd2hlbiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsCndoaWxlIHJldHVybmluZyB0aGUgb2JqZWN0IHJlZmVyZW5jZSBpdHNlbGYgd2hlbiBjYWxsZWQgd2l0aCBhIG5ldyB2YWx1ZS4KVGhpcyBhbGxvd3MgdGhlIHNldC1hdHRyaWJ1dGUgY2FsbHMgdG8gYmUgY2hhaW5lZCB0b2dldGhlci4KCj1vdmVyCgo9aXRlbSBuZXcob3B0aW9uYWwga2V5L3ZhbHVlIHBhaXJzKQoKICAgICRjbGllbnQgPSBTT0FQOjpMaXRlLT5uZXcocHJveHkgPT4gJGVuZHBvaW50KQoKQ29uc3RydWN0b3IuIE1hbnkgb2YgdGhlIGFjY2Vzc29yIG1ldGhvZHMgZGVmaW5lZCBoZXJlIG1heSBiZSBpbml0aWFsaXplZCBhdApjcmVhdGlvbiBieSBwcm92aWRpbmcgdGhlaXIgbmFtZSBhcyBhIGtleSwgZm9sbG93ZWQgYnkgdGhlIGRlc2lyZWQgdmFsdWUuClRoZSBleGFtcGxlIHByb3ZpZGVzIHRoZSB2YWx1ZSBmb3IgdGhlIHByb3h5IGVsZW1lbnQgb2YgdGhlIGNsaWVudC4KCj1pdGVtIHRyYW5zcG9ydChvcHRpb25hbCB0cmFuc3BvcnQgb2JqZWN0KQoKICAgICR0cmFuc3AgPSAkY2xpZW50LT50cmFuc3BvcnQoICk7CgpHZXRzIG9yIHNldHMgdGhlIHRyYW5zcG9ydCBvYmplY3QgdXNlZCBmb3Igc2VuZGluZy9yZWNlaXZpbmcgU09BUCBtZXNzYWdlcy4KClNlZSBMPFNPQVA6OlRyYW5zcG9ydD4gZm9yIGRldGFpbHMuCgo9aXRlbSBzZXJpYWxpemVyKG9wdGlvbmFsIHNlcmlhbGl6ZXIgb2JqZWN0KQoKICAgICRzZXJpYWwgPSAkY2xpZW50LT5zZXJpYWxpemVyKCApCgpHZXRzIG9yIHNldHMgdGhlIHNlcmlhbGl6ZXIgb2JqZWN0IHVzZWQgZm9yIGNyZWF0aW5nIFhNTCBtZXNzYWdlcy4KClNlZSBMPFNPQVA6OlNlcmlhbGl6ZXI+IGZvciBkZXRhaWxzLgoKPWl0ZW0gcGFja2FnZXIob3B0aW9uYWwgcGFja2FnZXIgb2JqZWN0KQoKICAgICRwYWNrYWdlciA9ICRjbGllbnQtPnBhY2thZ2VyKCApCgpQcm92aWRlcyBhY2Nlc3MgdG8gdGhlIEM8U09BUDo6UGFja2FnZXI+IG9iamVjdCB0aGF0IHRoZSBjbGllbnQgdXNlcyB0byBtYW5hZ2UKdGhlIHVzZSBvZiBhdHRhY2htZW50cy4gVGhlIGRlZmF1bHQgcGFja2FnZXIgaXMgYSBNSU1FIHBhY2thZ2VyLCBidXQgdW5sZXNzCnlvdSBzcGVjaWZ5IHBhcnRzIHRvIHNlbmQsIG5vIE1JTUUgZm9ybWF0dGluZyB3aWxsIGJlIGRvbmUuCgpTZWUgYWxzbzogTDxTT0FQOjpQYWNrYWdlcj4uCgo9aXRlbSBwcm94eShlbmRwb2ludCwgb3B0aW9uYWwgZXh0cmEgYXJndW1lbnRzKQoKICAgICRjbGllbnQtPnByb3h5KCdodHRwOi8vc29hcC54bWwuaW5mby8gZW5kUG9pbnQnKTsKClRoZSBwcm94eSBpcyB0aGUgc2VydmVyIG9yIGVuZHBvaW50IHRvIHdoaWNoIHRoZSBjbGllbnQgaXMgZ29pbmcgdG8gY29ubmVjdC4KVGhpcyBtZXRob2QgYWxsb3dzIHRoZSBzZXR0aW5nIG9mIHRoZSBlbmRwb2ludCwgYWxvbmcgd2l0aCBhbnkgZXh0cmEKaW5mb3JtYXRpb24gdGhhdCB0aGUgdHJhbnNwb3J0IG9iamVjdCBtYXkgbmVlZCB3aGVuIGNvbW11bmljYXRpbmcgdGhlIHJlcXVlc3QuCgpUaGlzIG1ldGhvZCBpcyBhY3R1YWxseSBhbiBhbGlhcyB0byB0aGUgcHJveHkgbWV0aG9kIG9mIEw8U09BUDo6VHJhbnNwb3J0Pi4KSXQgaXMgdGhlIHNhbWUgYXMgdHlwaW5nOgoKICAgICRjbGllbnQtPnRyYW5zcG9ydCggKS0+cHJveHkoLi4uYXJndW1lbnRzKTsKCkV4dHJhIHBhcmFtZXRlcnMgY2FuIGJlIHBhc3NlZCB0byBwcm94eSgpIC0gc2VlIGJlbG93LgoKPW92ZXIKCj1pdGVtIGNvbXByZXNzX3RocmVzaG9sZAoKU2VlIEw8Q09NUFJFU1NJT058U09BUDo6VHJhbnNwb3J0LyJDT01QUkVTU0lPTiI+IGluIEw8SFRUUDo6VHJhbnNwb3J0Pi4KCj1pdGVtIEFsbCBpbml0aWFsaXphdGlvbiBvcHRpb25zIGZyb20gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyCgpUaGUgb3B0aW9ucyBmb3IgSFRUUChTKSBhcmUgdGhlIHNhbWUgYXMgZm9yIExXUDo6VXNlckFnZW50J3MgbmV3KCkgbWV0aG9kLgoKQSBjb21tb24gb3B0aW9uIGlzIHRvIGNyZWF0ZSBhIGluc3RhbmNlIG9mIEhUVFA6OkNvb2tpZXMgYW5kIHBhc3MgaXQgYXMKY29va2llX2phciBvcHRpb246CgogbXkgJGNvb2tpZV9qYXIgPSBIVFRQOjpDb29raWVzLT5uZXcoKQogJGNsaWVudC0+cHJveHkoJ2h0dHA6Ly93d3cuZXhhbXBsZS5vcmcvd2Vic2VydmljZScsCiAgICBjb29raWVfamFyID0+ICRjb29raWVfamFyLAogKTsKCj1iYWNrCgpGb3IgZXhhbXBsZSwgaWYgeW91IHdpc2ggdG8gc2V0IHRoZSBIVFRQIHRpbWVvdXQgZm9yIGEgU09BUDo6TGl0ZSBjbGllbnQgdG8gNQpzZWNvbmRzLCB1c2UgdGhlIGZvbGxvd2luZyBjb2RlOgoKICBteSAkc29hcCA9IFNPQVA6OkxpdGUKICAgLT51cmkoJHVyaSkKICAgLT5wcm94eSgkcHJveHlVcmwsIHRpbWVvdXQgPT4gNSApOwoKU2VlIEw8TFdQOjpVc2VyQWdlbnQ+LgoKPWl0ZW0gZW5kcG9pbnQob3B0aW9uYWwgbmV3IGVuZHBvaW50IGFkZHJlc3MpCgogICAgJGNsaWVudC0+ZW5kcG9pbnQoJ2h0dHA6Ly9zb2FwLnhtbC5pbmZvLyBuZXdQb2ludCcpCgpJdCBtYXkgYmUgcHJlZmVyYWJsZSB0byBzZXQgYSBuZXcgZW5kcG9pbnQgd2l0aG91dCB0aGUgYWRkaXRpb25hbCB3b3JrIG9mCmV4YW1pbmluZyB0aGUgbmV3IGFkZHJlc3MgZm9yIHByb3RvY29sIGluZm9ybWF0aW9uIGFuZCBjaGVja2luZyB0byBlbnN1cmUgdGhlCnN1cHBvcnQgY29kZSBpcyBsb2FkZWQgYW5kIGF2YWlsYWJsZS4gVGhpcyBtZXRob2QgYWxsb3dzIHRoZSBjYWxsZXIgdG8gY2hhbmdlCnRoZSBlbmRwb2ludCB0aGF0IHRoZSBjbGllbnQgaXMgY3VycmVudGx5IHNldCB0byBjb25uZWN0IHRvLCB3aXRob3V0CnJlbG9hZGluZyB0aGUgcmVsZXZhbnQgdHJhbnNwb3J0IGNvZGUuIE5vdGUgdGhhdCB0aGUgcHJveHkgbWV0aG9kIG11c3QgaGF2ZQpiZWVuIGNhbGxlZCBiZWZvcmUgdGhpcyBtZXRob2QgaXMgdXNlZC4KCj1pdGVtIHNlcnZpY2Uoc2VydmljZSBVUkwpCgogICAgJGNsaWVudC0+c2VydmljZSgnaHR0cDovL3N2Yy5wZXJsLm9yZy9TdmMud3NkbCcpOwoKQzxTT0FQOjpMaXRlPiBvZmZlcnMgc29tZSBzdXBwb3J0IGZvciBjcmVhdGluZyBtZXRob2Qgc3R1YnMgZnJvbSBzZXJ2aWNlCmRlc2NyaXB0aW9ucy4gQXQgcHJlc2VudCwgb25seSBXU0RMIHN1cHBvcnQgaXMgaW4gcGxhY2UuIFRoaXMgbWV0aG9kIGxvYWRzCnRoZSBzcGVjaWZpZWQgV1NETCBzY2hlbWEgYW5kIHVzZXMgaXQgYXMgdGhlIGJhc2lzIGZvciBnZW5lcmF0aW5nIHN0dWJzLgoKPWl0ZW0gb3V0cHV0eG1sKGJvb2xlYW4pCgogICAgJGNsaWVudC0+b3V0cHV0eG1sKCd0cnVlJyk7CgpXaGVuIHNldCB0byBhIHRydWUgdmFsdWUsIHRoZSByYXcgWE1MIGlzIHJldHVybmVkIGJ5IHRoZSBjYWxsIHRvIGEgcmVtb3RlCm1ldGhvZC4KClRoZSBkZWZhdWx0IGlzIHRvIHJldHVybiB0aGUgYSBMPFNPQVA6OlNPTT4gb2JqZWN0IChmYWxzZSkuCgo9aXRlbSBhdXRvdHlwZShib29sZWFuKQoKICAgICRjbGllbnQtPmF1dG90eXBlKDApOwoKVGhpcyBtZXRob2QgaXMgYSBzaG9ydGN1dCBmb3I6CgogICAgJGNsaWVudC0+c2VyaWFsaXplci0+YXV0b3R5cGUoYm9vbGVhbik7CgpCeSBkZWZhdWx0LCB0aGUgc2VyaWFsaXplciB0cmllcyB0byBhdXRvbWF0aWNhbGx5IGRlZHVjZSB0eXBlcyBmb3IgdGhlIGRhdGEKYmVpbmcgc2VudCBpbiBhIG1lc3NhZ2UuIFNldHRpbmcgYSBmYWxzZSB2YWx1ZSB3aXRoIHRoaXMgbWV0aG9kIGRpc2FibGVzIHRoZQpiZWhhdmlvci4KCj1pdGVtIHJlYWRhYmxlKGJvb2xlYW4pCgogICAgJGNsaWVudC0+cmVhZGFibGUoMSk7CgpUaGlzIG1ldGhvZCBpcyBhIHNob3J0Y3V0IGZvcjoKCiAgICAkY2xpZW50LT5zZXJpYWxpemVyLT5yZWFkYWJsZShib29sZWFuKTsKCldoZW4gdGhpcyBpcyB1c2VkIHRvIHNldCBhIHRydWUgdmFsdWUgZm9yIHRoaXMgcHJvcGVydHksIHRoZSBnZW5lcmF0ZWQgWE1MCnNlbnQgdG8gdGhlIGVuZHBvaW50IGhhcyBleHRyYSBjaGFyYWN0ZXJzIChzcGFjZXMgYW5kIG5ldyBsaW5lcykgYWRkZWQgaW4gdG8KbWFrZSB0aGUgWE1MIGl0c2VsZiBtb3JlIHJlYWRhYmxlIHRvIGh1bWFuIGV5ZXMgKHByZXN1bWFibHkgZm9yIGRlYnVnZ2luZykuClRoZSBkZWZhdWx0IGlzIHRvIG5vdCBzZW5kIGFueSBhZGRpdGlvbmFsIGNoYXJhY3RlcnMuCgo9aXRlbSBkZWZhdWx0X25zKCR1cmkpCgpTZXRzIHRoZSBkZWZhdWx0IG5hbWVzcGFjZSBmb3IgdGhlIHJlcXVlc3QgdG8gdGhlIHNwZWNpZmllZCB1cmkuIFRoaXMKb3ZlcnJpZGVzIGFueSBwcmV2aW91cyBuYW1lc3BhY2UgZGVjbGFyYXRpb24gdGhhdCBtYXkgaGF2ZSBiZWVuIHNldCB1c2luZyBhCnByZXZpb3VzIGNhbGwgdG8gQzxucygpPiBvciBDPGRlZmF1bHRfbnMoKT4uIFNldHRpbmcgdGhlIGRlZmF1bHQgbmFtZXNwYWNlCmNhdXNlcyBlbGVtZW50cyB0byBiZSBzZXJpYWxpemVkIHdpdGhvdXQgYSBuYW1lc3BhY2UgcHJlZml4LCBsaWtlIHRoaXM6CgogIDxzb2FwOkVudmVsb3BlPgogICAgPHNvYXA6Qm9keT4KICAgICAgPG15TWV0aG9kIHhtbG5zPSJodHRwOi8vd3d3LnNvbWV1cmkuY29tIj4KICAgICAgICA8Zm9vIC8+CiAgICAgIDwvbXlNZXRob2Q+CiAgICA8L3NvYXA6Qm9keT4KICA8L3NvYXA6RW52ZWxvcGU+CgpTb21lIC5ORVQgd2ViIHNlcnZpY2VzIGhhdmUgYmVlbiByZXBvcnRlZCB0byByZXF1aXJlIHRoaXMgWE1MIG5hbWVzcGFjZSBpZGlvbS4KCj1pdGVtIG5zKCR1cmksJHByZWZpeD11bmRlZikKClNldHMgdGhlIG5hbWVzcGFjZSB1cmkgYW5kIG9wdGlvbmFsbHkgdGhlIG5hbWVzcGFjZSBwcmVmaXggZm9yIHRoZSByZXF1ZXN0IHRvCnRoZSBzcGVjaWZpZWQgdmFsdWVzLiBUaGlzIG92ZXJyaWRlcyBhbnkgcHJldmlvdXMgbmFtZXNwYWNlIGRlY2xhcmF0aW9uIHRoYXQKbWF5IGhhdmUgYmVlbiBzZXQgdXNpbmcgYSBwcmV2aW91cyBjYWxsIHRvIEM8bnMoKT4gb3IgQzxkZWZhdWx0X25zKCk+LgoKSWYgYSBwcmVmaXggaXMgbm90IHNwZWNpZmllZCwgb25lIHdpbGwgYmUgZ2VuZXJhdGVkIGZvciB5b3UgYXV0b21hdGljYWxseS4KU2V0dGluZyB0aGUgbmFtZXNwYWNlIGNhdXNlcyBlbGVtZW50cyB0byBiZSBzZXJpYWxpemVkIHdpdGggYSBkZWNsYXJlZApuYW1lc3BhY2UgcHJlZml4LCBsaWtlIHRoaXM6CgogIDxzb2FwOkVudmVsb3BlPgogICAgPHNvYXA6Qm9keT4KICAgICAgPG15Om15TWV0aG9kIHhtbG5zOm15PSJodHRwOi8vd3d3LnNvbWV1cmkuY29tIj4KICAgICAgICA8bXk6Zm9vIC8+CiAgICAgIDwvbXk6bXlNZXRob2Q+CiAgICA8L3NvYXA6Qm9keT4KICA8L3NvYXA6RW52ZWxvcGU+Cgo9aXRlbSB1c2VfcHJlZml4KGJvb2xlYW4pCgpEZXByZWNhdGVkLiBVc2UgdGhlIEM8bnMoKT4gYW5kIEM8ZGVmYXVsdF9ucz4gbWV0aG9kcyBkZXNjcmliZWQgYWJvdmUuCgpTaG9ydGN1dCBmb3IgQzw8IHNlcmlhbGl6ZXItPnVzZV9wcmVmaXgoKSA+Pi4gVGhpcyBsZXRzIHlvdSB0dXJuIG9uL29mZiB0aGUKdXNlIG9mIGEgbmFtZXNwYWNlIHByZWZpeCBmb3IgdGhlIGNoaWxkcmVuIG9mIHRoZSAvRW52ZWxvcGUvQm9keSBlbGVtZW50LgpEZWZhdWx0IGlzICd0cnVlJy4KCldoZW4gdXNlX3ByZWZpeCBpcyBzZXQgdG8gJ3RydWUnLCBzZXJpYWxpemVkIFhNTCB3aWxsIGxvb2sgbGlrZSB0aGlzOgoKICA8U09BUC1FTlY6RW52ZWxvcGUgLi4uYXR0cmlidXRlcyBza2lwcGVkPgogICAgPFNPQVAtRU5WOkJvZHk+CiAgICAgIDxuYW1lc3AxOm15bWV0aG9kIHhtbG5zOm5hbWVzcDE9InVybjpNeVVSSSIgLz4KICAgIDwvU09BUC1FTlY6Qm9keT4KICA8L1NPQVAtRU5WOkVudmVsb3BlPgoKV2hlbiB1c2VfcHJlZml4IGlzIHNldCB0byAnZmFsc2UnLCBzZXJpYWxpemVkIFhNTCB3aWxsIGxvb2sgbGlrZSB0aGlzOgoKICA8U09BUC1FTlY6RW52ZWxvcGUgLi4uYXR0cmlidXRlcyBza2lwcGVkPgogICAgPFNPQVAtRU5WOkJvZHk+CiAgICAgIDxteW1ldGhvZCB4bWxucz0idXJuOk15VVJJIiAvPgogICAgPC9TT0FQLUVOVjpCb2R5PgogIDwvU09BUC1FTlY6RW52ZWxvcGU+CgpTb21lIC5ORVQgd2ViIHNlcnZpY2VzIGhhdmUgYmVlbiByZXBvcnRlZCB0byByZXF1aXJlIHRoaXMgWE1MIG5hbWVzcGFjZSBpZGlvbS4KCj1pdGVtIHNvYXB2ZXJzaW9uKG9wdGlvbmFsIHZhbHVlKQoKICAgICRjbGllbnQtPnNvYXB2ZXJzaW9uKCcxLjInKTsKCklmIG5vIHBhcmFtZXRlciBpcyBnaXZlbiwgcmV0dXJucyB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIFNPQVAgdGhhdCBpcyBiZWluZwp1c2VkIGJ5IHRoZSBjbGllbnQgb2JqZWN0IHRvIGVuY29kZSByZXF1ZXN0cy4gSWYgYSBwYXJhbWV0ZXIgaXMgZ2l2ZW4sIHRoZQptZXRob2QgYXR0ZW1wdHMgdG8gc2V0IHRoYXQgYXMgdGhlIHZlcnNpb24gb2YgU09BUCBiZWluZyB1c2VkLgoKVGhlIHZhbHVlIHNob3VsZCBiZSBlaXRoZXIgMS4xIG9yIDEuMi4KCj1pdGVtIGVudnByZWZpeChRTmFtZSkKCiAgICAkY2xpZW50LT5lbnZwcmVmaXgoJ2VudicpOwoKVGhpcyBtZXRob2QgaXMgYSBzaG9ydGN1dCBmb3I6CgogICAgJGNsaWVudC0+c2VyaWFsaXplci0+ZW52cHJlZml4KFFOYW1lKTsKCkdldHMgb3Igc2V0cyB0aGUgbmFtZXNwYWNlIHByZWZpeCBmb3IgdGhlIFNPQVAgbmFtZXNwYWNlLiBUaGUgZGVmYXVsdCBpcwpTT0FQLgoKVGhlIHByZWZpeCBpdHNlbGYgaGFzIG5vIG1lYW5pbmcsIGJ1dCBhcHBsaWNhdGlvbnMgbWF5IHdpc2ggdG8gY2hvc2Ugb25lCmV4cGxpY2l0bHkgdG8gZGVub3RlIGRpZmZlcmVudCB2ZXJzaW9ucyBvZiBTT0FQIG9yIHRoZSBsaWtlLgoKPWl0ZW0gZW5jcHJlZml4KFFOYW1lKQoKICAgICRjbGllbnQtPmVuY3ByZWZpeCgnZW5jJyk7CgpUaGlzIG1ldGhvZCBpcyBhIHNob3J0Y3V0IGZvcjoKCiAgICAkY2xpZW50LT5zZXJpYWxpemVyLT5lbmNwcmVmaXgoUU5hbWUpOwoKR2V0cyBvciBzZXRzIHRoZSBuYW1lc3BhY2UgcHJlZml4IGZvciB0aGUgZW5jb2RpbmcgcnVsZXMgbmFtZXNwYWNlLgpUaGUgZGVmYXVsdCB2YWx1ZSBpcyBTT0FQLUVOQy4KCj1iYWNrCgpXaGlsZSBpdCBtYXkgc2VlbSB0byBiZSBhbiB1bm5lY2Vzc2FyeSBvcGVyYXRpb24gdG8gc2V0IGEgdmFsdWUgdGhhdCBpc24ndApyZWxldmFudCB0byB0aGUgbWVzc2FnZSwgc3VjaCBhcyB0aGUgbmFtZXNwYWNlIGxhYmVscyBmb3IgdGhlIGVudmVsb3BlIGFuZAplbmNvZGluZyBVUk5zLCB0aGUgYWJpbGl0eSB0byBzZXQgdGhlc2UgbGFiZWxzIGV4cGxpY2l0bHkgY2FuIHByb3ZlIHRvIGJlIGEKZ3JlYXQgYWlkIGluIGRpc3Rpbmd1aXNoaW5nIGFuZCBkZWJ1Z2dpbmcgbWVzc2FnZXMgb24gdGhlIHNlcnZlciBzaWRlIG9mCm9wZXJhdGlvbnMuCgo9b3ZlcgoKPWl0ZW0gZW5jb2RpbmcoZW5jb2RpbmcgVVJOKQoKICAgICRjbGllbnQtPmVuY29kaW5nKCRzb2FwXzEyX2VuY29kaW5nX1VSTik7CgpUaGlzIG1ldGhvZCBpcyBhIHNob3J0Y3V0IGZvcjoKCiAgICAkY2xpZW50LT5zZXJpYWxpemVyLT5lbmNvZGluZyhhcmdzKTsKCldoZXJlIHRoZSBlYXJsaWVyIG1ldGhvZCBkZWFsdCB3aXRoIHRoZSBsYWJlbCB1c2VkIGZvciB0aGUgYXR0cmlidXRlcyByZWxhdGVkCnRvIHRoZSBTT0FQIGVuY29kaW5nIHNjaGVtZSwgdGhpcyBtZXRob2QgYWN0dWFsbHkgc2V0cyB0aGUgVVJOIHRvIGJlIHNwZWNpZmllZAphcyB0aGUgZW5jb2Rpbmcgc2NoZW1lIGZvciB0aGUgbWVzc2FnZS4gVGhlIGRlZmF1bHQgaXMgdG8gc3BlY2lmeSB0aGUgZW5jb2RpbmcKZm9yIFNPQVAgMS4xLCBzbyB0aGlzIGlzIGhhbmR5IGZvciBhcHBsaWNhdGlvbnMgdGhhdCBuZWVkIHRvIGVuY29kZSBhY2NvcmRpbmcKdG8gU09BUCAxLjIgcnVsZXMuCgo9aXRlbSB0eXBlbG9va3VwCgogICAgJGNsaWVudC0+dHlwZWxvb2t1cDsKClRoaXMgbWV0aG9kIGlzIGEgc2hvcnRjdXQgZm9yOgoKICAgICRjbGllbnQtPnNlcmlhbGl6ZXItPnR5cGVsb29rdXA7CgpHaXZlcyB0aGUgYXBwbGljYXRpb24gYWNjZXNzIHRvIHRoZSB0eXBlLWxvb2t1cCB0YWJsZSBmcm9tIHRoZSBzZXJpYWxpemVyCm9iamVjdC4gU2VlIHRoZSBzZWN0aW9uIG9uIEw8U09BUDo6U2VyaWFsaXplcj4uCgo9aXRlbSB1cmkoc2VydmljZSBzcGVjaWZpZXIpCgpEZXByZWNhdGVkIC0gdGhlIEM8dXJpPiBzdWJyb3V0aW5lIGlzIGRlcHJlY2F0ZWQgaW4gb3JkZXIgdG8gcHJvdmlkZSBhIG1vcmUKaW50dWl0aXZlIG5hbWluZyBzY2hlbWUgZm9yIHN1YnJvdXRpbmVzIHRoYXQgc2V0IG5hbWVzcGFjZXMuIEluIHRoZSBmdXR1cmUsCnlvdSB3aWxsIGJlIHJlcXVpcmVkIHRvIHVzZSBlaXRoZXIgdGhlIEM8bnMoKT4gb3IgQzxkZWZhdWx0X25zKCk+IHN1YnJvdXRpbmVzCmluc3RlYWQgb2YgQzx1cmkoKT4uCgogICAgJGNsaWVudC0+dXJpKCRzZXJ2aWNlX3VyaSk7CgpUaGlzIG1ldGhvZCBpcyBhIHNob3J0Y3V0IGZvcjoKCiAgICAkY2xpZW50LT5zZXJpYWxpemVyLT51cmkoc2VydmljZSk7CgpUaGUgVVJJIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFjY2Vzc29yIG9uIGEgY2xpZW50IG9iamVjdCBpcyB0aGUKc2VydmljZS1zcGVjaWZpZXIgZm9yIHRoZSByZXF1ZXN0LCBvZnRlbiBlbmNvZGVkIGZvciBIVFRQLWJhc2VkIHJlcXVlc3RzIGFzCnRoZSBTT0FQQWN0aW9uIGhlYWRlci4gV2hpbGUgdGhlIG5hbWVzIG1heSBzZWVtIGNvbmZ1c2luZywgdGhpcyBtZXRob2QKZG9lc24ndCBzcGVjaWZ5IHRoZSBlbmRwb2ludCBpdHNlbGYuIEluIG1vc3QgY2lyY3Vtc3RhbmNlcywgdGhlIEM8dXJpPiByZWZlcnMKdG8gdGhlIG5hbWVzcGFjZSB1c2VkIGZvciB0aGUgcmVxdWVzdC4KCk9mdGVuIHRpbWVzLCB0aGUgdmFsdWUgbWF5IGxvb2sgbGlrZSBhIHZhbGlkIFVSTC4gRGVzcGl0ZSB0aGlzLCBpdCBkb2Vzbid0CmhhdmUgdG8gcG9pbnQgdG8gYW4gZXhpc3RpbmcgcmVzb3VyY2UgKGFuZCBvZnRlbiBkb2Vzbid0KS4gVGhpcyBtZXRob2Qgc2V0cwphbmQgcmV0cmlldmVzIHRoaXMgdmFsdWUgZnJvbSB0aGUgb2JqZWN0LiBOb3RlIHRoYXQgbm8gdHJhbnNwb3J0IGNvZGUgaXMKdHJpZ2dlcmVkIGJ5IHRoaXMgYmVjYXVzZSBpdCBoYXMgbm8gZGlyZWN0IGVmZmVjdCBvbiB0aGUgdHJhbnNwb3J0IG9mIHRoZQpvYmplY3QuCgo9aXRlbSBtdWx0aXJlZmlucGxhY2UoYm9vbGVhbikKCiAgICAkY2xpZW50LT5tdWx0aXJlZmlucGxhY2UoMSk7CgpUaGlzIG1ldGhvZCBpcyBhIHNob3J0Y3V0IGZvcjoKCiAgICAkY2xpZW50LT5zZXJpYWxpemVyLT5tdWx0aXJlZmlucGxhY2UoYm9vbGVhbik7CgpDb250cm9scyBob3cgdGhlIHNlcmlhbGl6ZXIgaGFuZGxlcyB2YWx1ZXMgdGhhdCBoYXZlIG11bHRpcGxlIHJlZmVyZW5jZXMgdG8KdGhlbS4gUmVjYWxsIGZyb20gcHJldmlvdXMgU09BUCBjaGFwdGVycyB0aGF0IGEgdmFsdWUgbWF5IGJlIHRhZ2dlZCB3aXRoIGFuCmlkZW50aWZpZXIsIHRoZW4gcmVmZXJyZWQgdG8gaW4gc2V2ZXJhbCBwbGFjZXMuIFdoZW4gdGhpcyBpcyB0aGUgY2FzZSBmb3IgYQp2YWx1ZSwgdGhlIHNlcmlhbGl6ZXIgZGVmYXVsdHMgdG8gcHV0dGluZyB0aGUgZGF0YSBlbGVtZW50IHRvd2FyZHMgdGhlIHRvcCBvZgp0aGUgbWVzc2FnZSwgcmlnaHQgYWZ0ZXIgdGhlIG9wZW5pbmcgdGFnIG9mIHRoZSBtZXRob2Qtc3BlY2lmaWNhdGlvbi4gSXQgaXMKc2VyaWFsaXplZCBhcyBhIHN0YW5kYWxvbmUgZW50aXR5IHdpdGggYW4gSUQgdGhhdCBpcyB0aGVuIHJlZmVyZW5jZWQgYXQgdGhlCnJlbGV2YW50IHBsYWNlcyBsYXRlciBvbi4gSWYgdGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXQgYSB0cnVlIHZhbHVlLCB0aGUKYmVoYXZpb3IgaXMgZGlmZmVyZW50LiBXaGVuIHRoZSBtdWx0aXJlZmlucGxhY2UgYXR0cmlidXRlIGlzIHRydWUsIHRoZSBkYXRhCmlzIHNlcmlhbGl6ZWQgYXQgdGhlIGZpcnN0IHBsYWNlIHRoYXQgcmVmZXJlbmNlcyBpdCwgcmF0aGVyIHRoYW4gYXMgYSBzZXBhcmF0ZQplbGVtZW50IGhpZ2hlciB1cCBpbiB0aGUgYm9keS4gVGhpcyBpcyBtb3JlIGNvbXBhY3QgYnV0IG1heSBiZSBoYXJkZXIgdG8gcmVhZApvciB0cmFjZSBpbiBhIGRlYnVnZ2luZyBlbnZpcm9ubWVudC4KCj1pdGVtIHBhcnRzKCBBUlJBWSApCgpVc2VkIHRvIHNwZWNpZnkgYW4gYXJyYXkgb2YgTDxNSU1FOjpFbnRpdHk+J3MgdG8gYmUgYXR0YWNoZWQgdG8gdGhlCnRyYW5zbWl0dGVkIFNPQVAgbWVzc2FnZS4gQXR0YWNobWVudHMgdGhhdCBhcmUgcmV0dXJuZWQgaW4gYSByZXNwb25zZSBjYW4gYmUKYWNjZXNzZWQgYnkgQzxTT0FQOjpTT006OnBhcnRzKCk+LgoKPWl0ZW0gc2VsZgoKICAgICRyZWYgPSBTT0FQOjpMaXRlLT5zZWxmOwoKUmV0dXJucyBhbiBvYmplY3QgcmVmZXJlbmNlIHRvIHRoZSBkZWZhdWx0IGdsb2JhbCBvYmplY3QgdGhlIEM8U09BUDo6TGl0ZT4KcGFja2FnZSBtYWludGFpbnMuIFRoaXMgaXMgdGhlIG9iamVjdCB0aGF0IHByb2Nlc3NlcyBtYW55IG9mIHRoZSBhcmd1bWVudHMKd2hlbiBwcm92aWRlZCBvbiB0aGUgdXNlIGxpbmUuCgo9YmFjawoKVGhlIGZvbGxvd2luZyBtZXRob2QgaXNuJ3QgYW4gYWNjZXNzb3Igc3R5bGUgb2YgbWV0aG9kIGJ1dCBuZWl0aGVyIGRvZXMgaXQgZml0CndpdGggdGhlIGdyb3VwIHRoYXQgaW1tZWRpYXRlbHkgZm9sbG93cyBpdDoKCj1vdmVyCgo9aXRlbSBjYWxsKGFyZ3VtZW50cykKCiAgICAkY2xpZW50LT5jYWxsKCRtZXRob2QgPT4gQGFyZ3VtZW50cyk7CgpBcyBoYXMgYmVlbiBpbGx1c3RyYXRlZCBpbiBwcmV2aW91cyBjaGFwdGVycywgdGhlIEM8U09BUDo6TGl0ZT4gY2xpZW50IG9iamVjdHMKY2FuIG1hbmFnZSByZW1vdGUgY2FsbHMgd2l0aCBhdXRvLWRpc3BhdGNoaW5nIHVzaW5nIHNvbWUgb2YgUGVybCdzIG1vcmUKZWxhYm9yYXRlIGZlYXR1cmVzLiBjYWxsIGlzIHVzZWQgd2hlbiB0aGUgYXBwbGljYXRpb24gd2FudHMgYSBncmVhdGVyIGRlZ3JlZQpvZiBjb250cm9sIG92ZXIgdGhlIGRldGFpbHMgb2YgdGhlIGNhbGwgaXRzZWxmLiBUaGUgbWV0aG9kIG1heSBiZSBidWlsdCB1cApmcm9tIGEgTDxTT0FQOjpEYXRhPiBvYmplY3QsIHNvIGFzIHRvIGFsbG93IGZ1bGwgY29udHJvbCBvdmVyIHRoZSBuYW1lc3BhY2UKYXNzb2NpYXRlZCB3aXRoIHRoZSB0YWcsIGFzIHdlbGwgYXMgb3RoZXIgYXR0cmlidXRlcyBsaWtlIGVuY29kaW5nLiBUaGlzIGlzCmFsc28gaW1wb3J0YW50IGZvciBjYWxsaW5nIG1ldGhvZHMgdGhhdCBjb250YWluIGNoYXJhY3RlcnMgbm90IGFsbG93YWJsZSBpbgpQZXJsIGZ1bmN0aW9uIG5hbWVzLCBzdWNoIGFzIEEuQi5DLgoKPWJhY2sKClRoZSBuZXh0IGZvdXIgbWV0aG9kcyB1c2VkIGluIHRoZSBDPFNPQVA6OkxpdGU+IGNsYXNzIGFyZSBnZWFyZWQgdG93YXJkcwpoYW5kbGluZyB0aGUgdHlwZXMgb2YgZXZlbnRzIHRoYW4gY2FuIG9jY3VyIGR1cmluZyB0aGUgbWVzc2FnZSBsaWZlY3ljbGUuIEVhY2gKb2YgdGhlc2Ugc2V0cyB1cCBhIGNhbGxiYWNrIGZvciB0aGUgZXZlbnQgaW4gcXVlc3Rpb246Cgo9b3ZlcgoKPWl0ZW0gb25fYWN0aW9uKGNhbGxiYWNrKQoKICAgICRjbGllbnQtPm9uX2FjdGlvbihzdWIgeyBxcSgiJF9bMF0iKSB9KTsKClRyaWdnZXJlZCB3aGVuIHRoZSB0cmFuc3BvcnQgb2JqZWN0IHNldHMgdXAgdGhlIFNPQVBBY3Rpb24gaGVhZGVyIGZvciBhbgpIVFRQLWJhc2VkIGNhbGwuIFRoZSBkZWZhdWx0IGlzIHRvIHNldCB0aGUgaGVhZGVyIHRvIHRoZSBzdHJpbmcsIHVyaSNtZXRob2QsCmluIHdoaWNoIFVSSSBpcyB0aGUgdmFsdWUgc2V0IGJ5IHRoZSB1cmkgbWV0aG9kIGRlc2NyaWJlZCBlYXJsaWVyLCBhbmQgbWV0aG9kCmlzIHRoZSBuYW1lIG9mIHRoZSBtZXRob2QgYmVpbmcgY2FsbGVkLiBXaGVuIGNhbGxlZCwgdGhlIHJvdXRpbmUgcmVmZXJlbmNlZAoob3IgdGhlIGNsb3N1cmUsIGlmIHNwZWNpZmllZCBhcyBpbiB0aGUgZXhhbXBsZSkgaXMgZ2l2ZW4gdHdvIGFyZ3VtZW50cywgdXJpCmFuZCBtZXRob2QsIGluIHRoYXQgb3JkZXIuCgouTkVUIHdlYiBzZXJ2aWNlcyB1c3VhbGx5IGV4cGVjdCBDPC8+IGFzIHNlcGFyYXRvciBmb3IgQzx1cmk+IGFuZCBDPG1ldGhvZD4uClRvIGNoYW5nZSBTT0FQOjpMaXRlJ3MgYmVoYXZpb3VyIHRvIHVzZSB1cmkvbWV0aG9kIGFzIFNPQVBBY3Rpb24gaGVhZGVyLCB1c2UKdGhlIGZvbGxvd2luZyBjb2RlOgoKICAgICRjbGllbnQtPm9uX2FjdGlvbiggc3ViIHsgam9pbiAnLycsIEBfIH0gKTsKPWl0ZW0gb25fZmF1bHQoY2FsbGJhY2spCgogICAgJGNsaWVudC0+b25fZmF1bHQoc3ViIHsgcG9wdXBfZGlhbG9nKCRfWzFdKSB9KTsKClRyaWdnZXJlZCB3aGVuIGEgbWV0aG9kIGNhbGwgcmVzdWx0cyBpbiBhIGZhdWx0IHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci4KV2hlbiBpdCBpcyBjYWxsZWQsIHRoZSBhcmd1bWVudCBsaXN0IGlzIGZpcnN0IHRoZSBjbGllbnQgb2JqZWN0IGl0c2VsZiwKZm9sbG93ZWQgYnkgdGhlIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgZmF1bHQuIEluIHRoZSBleGFtcGxlLCB0aGUgZmF1bHQKb2JqZWN0IGlzIHBhc3NlZCAod2l0aG91dCB0aGUgY2xpZW50IG9iamVjdCkgdG8gYSBoeXBvdGhldGljYWwgR1VJIGZ1bmN0aW9uCnRoYXQgcHJlc2VudHMgYW4gZXJyb3IgZGlhbG9nIHdpdGggdGhlIHRleHQgb2YgZmF1bHQgZXh0cmFjdGVkIGZyb20gdGhlIG9iamVjdAood2hpY2ggaXMgY292ZXJlZCBzaG9ydGx5IHVuZGVyIHRoZSBMPFNPQVA6OlNPTT4gbWV0aG9kcykuCgo9aXRlbSBvbl9ub25zZXJpYWxpemVkKGNhbGxiYWNrKQoKICAgICRjbGllbnQtPm9uX25vbnNlcmlhbGl6ZWQoc3ViIHsgZGllICIkX1swXT8hPyIgfSk7CgpPY2Nhc2lvbmFsbHksIHRoZSBzZXJpYWxpemVyIG1heSBiZSBnaXZlbiBkYXRhIGl0IGNhbid0IHR1cm4gaW50byBTT0FQLXNhdnZ5ClhNTDsgZm9yIGV4YW1wbGUsIGlmIGEgcHJvZ3JhbSBidWcgcmVzdWx0cyBpbiBhIGNvZGUgcmVmZXJlbmNlIG9yIHNvbWV0aGluZwpzaW1pbGFyIGJlaW5nIHBhc3NlZCBpbiBhcyBhIHBhcmFtZXRlciB0byBtZXRob2QgY2FsbC4gV2hlbiB0aGF0IGhhcHBlbnMsIHRoaXMKY2FsbGJhY2sgaXMgYWN0aXZhdGVkLCB3aXRoIG9uZSBhcmd1bWVudC4gVGhhdCBhcmd1bWVudCBpcyB0aGUgZGF0YSBpdGVtIHRoYXQKY291bGQgbm90IGJlIHVuZGVyc3Rvb2QuIEl0IHdpbGwgYmUgdGhlIG9ubHkgYXJndW1lbnQuIElmIHRoZSByb3V0aW5lIHJldHVybnMsCnRoZSByZXR1cm4gdmFsdWUgaXMgcGFzdGVkIGludG8gdGhlIG1lc3NhZ2UgYXMgdGhlIHNlcmlhbGl6YXRpb24uIEdlbmVyYWxseSwKYW4gZXJyb3IgaXMgaW4gb3JkZXIsIGFuZCB0aGlzIGNhbGxiYWNrIGFsbG93cyBmb3IgY29udHJvbCBvdmVyIHNpZ25hbGluZyB0aGF0CmVycm9yLgoKPWl0ZW0gb25fZGVidWcoY2FsbGJhY2spCgogICAgJGNsaWVudC0+b25fZGVidWcoc3ViIHsgcHJpbnQgQF8gfSk7CgpEZXByZWNhdGVkLiBVc2UgdGhlIGdsb2JhbCArZGVidWcgYW5kICt0cmFjZSBmYWNpbGl0aWVzIGRlc2NyaWJlZCBpbgpMPFNPQVA6OlRyYWNlPgoKTm90ZSB0aGF0IHRoaXMgbWV0aG9kIHdpbGwgbm90IHdvcmsgYXMgZXhwZWN0ZWQ6IEluc3RlYWQgb2YgYWZmZWN0aW5nIHRoZQpkZWJ1Z2dpbmcgYmVoYXZpb3VyIG9mIHRoZSBvYmplY3QgY2FsbGVkIG9uLCBpdCB3aWxsIGdsb2JhbGx5IGFmZmVjdCB0aGUKZGVidWdnaW5nIGJlaGF2aW91ciBmb3IgYWxsIG9iamVjdHMgb2YgdGhhdCBjbGFzcy4KCj1iYWNrCgo9aGVhZDEgV1JJVElORyBBIFNPQVAgQ0xJRU5UCgpUaGlzIGNoYXB0ZXIgZ3VpZGVzIHlvdSB0byB3cml0aW5nIGEgU09BUCBjbGllbnQgYnkgZXhhbXBsZS4KClRoZSBTT0FQIHNlcnZpY2UgdG8gYmUgYWNjZXNzZWQgaXMgYSBzaW1wbGUgdmFyaWF0aW9uIG9mIHRoZSB3ZWxsLWtub3duCmhlbGxvIHdvcmxkIHByb2dyYW0uIEl0IGFjY2VwdHMgdHdvIHBhcmFtZXRlcnMsIGEgbmFtZSBhbmQgYSBnaXZlbiBuYW1lLAphbmQgcmV0dXJucyAiSGVsbG8gJGdpdmVuX25hbWUgJG5hbWUiLgoKV2Ugd2lsbCB1c2UgIk1hcnRpbiBLdXR0ZXIiIGFzIHRoZSBuYW1lIGZvciB0aGUgY2FsbCwgc28gYWxsIHZhcmlhbnRzIHdpbGwKcHJpbnQgdGhlIGZvbGxvd2luZyBtZXNzYWdlIG9uIHN1Y2Nlc3M6CgogSGVsbG8gTWFydGluIEt1dHRlciEKCj1oZWFkMiBTT0FQIG1lc3NhZ2Ugc3R5bGVzCgpUaGVyZSBhcmUgdGhyZWUgY29tbW9uIChhbmQgb25lIGxlc3MgY29tbW9uKSB2YXJpYW50cyBvZiBTT0FQIG1lc3NhZ2VzLgoKVGhlc2UgYWRkcmVzcyB0aGUgbWVzc2FnZSBzdHlsZSAocG9zaXRpb25hbCBwYXJhbWV0ZXJzIHZzLiBzcGVjaWZpZWQgbWVzc2FnZQpkb2N1bWVudHMpIGFuZCBlbmNvZGluZyAoYXMtaXMgdnMuIHR5cGVkKS4KClRoZSBkaWZmZXJlbnQgbWVzc2FnZSBzdHlsZXMgYXJlOgoKPW92ZXIKCj1pdGVtICogcnBjL2VuY29kZWQKClR5cGVkLCBwb3NpdGlvbmFsIHBhcmFtZXRlcnMuIFdpZGVseSB1c2VkIGluIHNjcmlwdGluZyBsYW5ndWFnZXMuClRoZSB0eXBlIG9mIHRoZSBhcmd1bWVudHMgaXMgaW5jbHVkZWQgaW4gdGhlIG1lc3NhZ2UuCkFycmF5cyBhbmQgdGhlIGxpa2UgbWF5IGJlIGVuY29kZWQgdXNpbmcgU09BUCBlbmNvZGluZyBydWxlcyAob3Igb3RoZXJzKS4KCj1pdGVtICogcnBjL2xpdGVyYWwKCkFzLWlzLCBwb3NpdGlvbmFsIHBhcmFtZXRlcnMuIFRoZSB0eXBlIG9mIGFyZ3VtZW50cyBpcyBkZWZpbmVkIGJ5IHNvbWUKcHJlLWV4Y2hhbmdlZCBpbnRlcmZhY2UgZGVmaW5pdGlvbi4KCj1pdGVtICogZG9jdW1lbnQvZW5jb2RlZAoKU3BlY2lmaWVkIG1lc3NhZ2Ugd2l0aCB0eXBlZCBlbGVtZW50cy4gUmFyZWx5IHVzZWQuCgo9aXRlbSAqIGRvY3VtZW50L2xpdGVyYWwKClNwZWNpZmllZCBtZXNzYWdlIHdpdGggYXMtaXMgZWxlbWVudHMuIFRoZSBtZXNzYWdlIHNwZWNpZmljYXRpb24gYW5kCmVsZW1lbnQgdHlwZXMgYXJlIGRlZmluZWQgYnkgc29tZSBwcmUtZXhjaGFuZ2VkIGludGVyZmFjZSBkZWZpbml0aW9uLgoKPWJhY2sKCkFzIG9mIDIwMDgsIGRvY3VtZW50L2xpdGVyYWwgaGFzIGJlY29tZSB0aGUgcHJlZG9taW5hbnQgU09BUCBtZXNzYWdlCnZhcmlhbnQuIHJwYy9saXRlcmFsIGFuZCBycGMvZW5jb2RlZCBhcmUgc3RpbGwgaW4gdXNlLCBtYWlubHkgd2l0aCBzY3JpcHRpbmcKbGFuZ3VhZ2VzLCB3aGlsZSBkb2N1bWVudC9lbmNvZGVkIGlzIGhhcmRseSB1c2VkIGF0IGFsbC4KCllvdSB3aWxsIHNlZSBjbGllbnRzIGZvciB0aGUgcnBjL2VuY29kZWQgYW5kIGRvY3VtZW50L2xpdGVyYWwgU09BUCB2YXJpYW50cyBpbgp0aGlzIHNlY3Rpb24uCgo9aGVhZDIgRXhhbXBsZSBpbXBsZW1lbnRhdGlvbnMKCj1oZWFkMyBSUEMvRU5DT0RFRAoKUnBjL2VuY29kZWQgaXMgbW9zdCBwb3B1bGFyIHdpdGggc2NyaXB0aW5nIGxhbmd1YWdlcyBsaWtlIHBlcmwsIHBocCBhbmQgcHl0aG9uCndpdGhvdXQgdGhlIHVzZSBvZiBhIFdTREwuIFVzdWFsIG1ldGhvZCBkZXNjcmlwdGlvbnMgbG9vayBsaWtlIHRoaXM6CgogTWV0aG9kOiBzYXlIZWxsbyhzdHJpbmcsIHN0cmluZykKIFBhcmFtZXRlcnM6CiAgICBuYW1lOiBzdHJpbmcKICAgIGdpdmVuTmFtZTogc3RyaW5nCgpTdWNoIGEgZGVzY3JpcHRpb24gdXN1YWxseSBtZWFucyB0aGF0IHlvdSBjYW4gY2FsbCBhIG1ldGhvZCBuYW1lZCAic2F5SGVsbG8iCndpdGggdHdvIHBvc2l0aW9uYWwgcGFyYW1ldGVycywgIm5hbWUiIGFuZCAiZ2l2ZW5OYW1lIiwgd2hpY2ggYm90aCBhcmUKc3RyaW5ncy4KClRoZSBtZXNzYWdlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBkZXNjcmlwdGlvbiBsb29rcyBzb21ld2hhdCBsaWtlIHRoaXM6CgogPHNheUhlbGxvIHhtbG5zPSJ1cm46SGVsbG9Xb3JsZCI+CiAgIDxzLWdlbnN5bTAxIHhzaTp0eXBlPSJ4c2Q6c3RyaW5nIj5LdXR0ZXI8L3MtZ2Vuc3ltMDE+CiAgIDxzLWdlbnN5bTAyIHhzaTp0eXBlPSJ4c2Q6c3RyaW5nIj5NYXJ0aW48L3MtZ2Vuc3ltMDI+CiA8L3NheUhlbGxvPgoKQW55IFhNTCB0YWcgbmFtZXMgbWF5IGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgInMtZ2Vuc3ltMDEiIHN0dWZmIC0gcGFyYW1ldGVycwphcmUgcG9zaXRpb25hbCwgdGhlIHRhZyBuYW1lcyBoYXZlIG5vIG1lYW5pbmcuCgpBIGNsaWVudCBwcm9kdWNpbmcgc3VjaCBhIGNhbGwgaXMgaW1wbGVtZW50ZWQgbGlrZSB0aGlzOgoKIHVzZSBTT0FQOjpMaXRlOwogbXkgJHNvYXAgPSBTT0FQOjpMaXRlLT5uZXcoIHByb3h5ID0+ICdodHRwOi8vbG9jYWxob3N0OjgxL3NvYXAtd3NkbC10ZXN0L2hlbGxvd29ybGQucGwnKTsKICRzb2FwLT5kZWZhdWx0X25zKCd1cm46SGVsbG9Xb3JsZCcpOwogbXkgJHNvbSA9ICRzb2FwLT5jYWxsKCdzYXlIZWxsbycsICdLdXR0ZXInLCAnTWFydGluJyk7CiBkaWUgJHNvbS0+ZmF1bHRzdHJpbmcgaWYgKCRzb20tPmZhdWx0KTsKIHByaW50ICRzb20tPnJlc3VsdCwgIlxuIjsKCllvdSBjYW4gb2YgY291cnNlIHVzZSBhIG9uZS1saW5lciwgdG9vLi4uCgpTb21ldGltZXMsIHJwYy9lbmNvZGVkIGludGVyZmFjZXMgYXJlIGRlc2NyaWJlZCB3aXRoIFdTREwgZGVmaW5pdGlvbnMuCkEgV1NETCBhY2NlcHRpbmcgIm5hbWVkIiBwYXJhbWV0ZXJzIHdpdGggcnBjL2VuY29kZWQgbG9va3MgbGlrZSB0aGlzOgoKIDxkZWZpbml0aW9ucyB4bWxuczpzb2FwPSJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93c2RsL3NvYXAvIgogICB4bWxuczpzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSIKICAgeG1sbnM6czA9InVybjpIZWxsb1dvcmxkIgogICB0YXJnZXROYW1lc3BhY2U9InVybjpIZWxsb1dvcmxkIgogICB4bWxucz0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3NkbC8iPgogICA8dHlwZXM+CiAgICAgPHM6c2NoZW1hIHRhcmdldE5hbWVzcGFjZT0idXJuOkhlbGxvV29ybGQiPgogICAgIDwvczpzY2hlbWE+CiAgIDwvdHlwZXM+CiAgIDxtZXNzYWdlIG5hbWU9InNheUhlbGxvIj4KICAgICA8cGFydCBuYW1lPSJuYW1lIiB0eXBlPSJzOnN0cmluZyIgLz4KICAgICA8cGFydCBuYW1lPSJnaXZlbk5hbWUiIHR5cGU9InM6c3RyaW5nIiAvPgogICA8L21lc3NhZ2U+CiAgIDxtZXNzYWdlIG5hbWU9InNheUhlbGxvUmVzcG9uc2UiPgogICAgIDxwYXJ0IG5hbWU9InNheUhlbGxvUmVzdWx0IiB0eXBlPSJzOnN0cmluZyIgLz4KICAgPC9tZXNzYWdlPgoKICAgPHBvcnRUeXBlIG5hbWU9IlNlcnZpY2UxU29hcCI+CiAgICAgPG9wZXJhdGlvbiBuYW1lPSJzYXlIZWxsbyI+CiAgICAgICA8aW5wdXQgbWVzc2FnZT0iczA6c2F5SGVsbG8iIC8+CiAgICAgICA8b3V0cHV0IG1lc3NhZ2U9InMwOnNheUhlbGxvUmVzcG9uc2UiIC8+CiAgICAgPC9vcGVyYXRpb24+CiAgIDwvcG9ydFR5cGU+CgogICA8YmluZGluZyBuYW1lPSJTZXJ2aWNlMVNvYXAiIHR5cGU9InMwOlNlcnZpY2UxU29hcCI+CiAgICAgPHNvYXA6YmluZGluZyB0cmFuc3BvcnQ9Imh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvaHR0cCIKICAgICAgICAgc3R5bGU9InJwYyIgLz4KICAgICA8b3BlcmF0aW9uIG5hbWU9InNheUhlbGxvIj4KICAgICAgIDxzb2FwOm9wZXJhdGlvbiBzb2FwQWN0aW9uPSJ1cm46SGVsbG9Xb3JsZCNzYXlIZWxsbyIvPgogICAgICAgPGlucHV0PgogICAgICAgICA8c29hcDpib2R5IHVzZT0iZW5jb2RlZCIKICAgICAgICAgICBlbmNvZGluZ1N0eWxlPSJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy9zb2FwL2VuY29kaW5nLyIvPgogICAgICAgPC9pbnB1dD4KICAgICAgIDxvdXRwdXQ+CiAgICAgICAgIDxzb2FwOmJvZHkgdXNlPSJlbmNvZGVkIgogICAgICAgICAgIGVuY29kaW5nU3R5bGU9Imh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvZW5jb2RpbmcvIi8+CiAgICAgICA8L291dHB1dD4KICAgICA8L29wZXJhdGlvbj4KICAgPC9iaW5kaW5nPgogICA8c2VydmljZSBuYW1lPSJIZWxsb1dvcmxkIj4KICAgICA8cG9ydCBuYW1lPSJIZWxsb1dvcmxkU29hcCIgYmluZGluZz0iczA6U2VydmljZTFTb2FwIj4KICAgICAgIDxzb2FwOmFkZHJlc3MgbG9jYXRpb249Imh0dHA6Ly9sb2NhbGhvc3Q6ODEvc29hcC13c2RsLXRlc3QvaGVsbG93b3JsZC5wbCIgLz4KICAgICA8L3BvcnQ+CiAgIDwvc2VydmljZT4KIDwvZGVmaW5pdGlvbnM+CgpUaGUgbWVzc2FnZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgc2NoZW1hIGxvb2tzIGxpa2UgdGhpczoKCiA8c2F5SGVsbG8geG1sbnM9InVybjpIZWxsb1dvcmxkIj4KICAgPG5hbWUgeHNpOnR5cGU9InhzZDpzdHJpbmciPkt1dHRlcjwvbmFtZT4KICAgPGdpdmVuTmFtZSB4c2k6dHlwZT0ieHNkOnN0cmluZyI+TWFydGluPC9naXZlbk5hbWU+CiA8L3NheUhlbGxvPgoKQSB3ZWIgc2VydmljZSBjbGllbnQgdXNpbmcgdGhpcyBzY2hlbWEgbG9va3MgbGlrZSB0aGlzOgoKIHVzZSBTT0FQOjpMaXRlOwogbXkgJHNvYXAgPSBTT0FQOjpMaXRlLT5zZXJ2aWNlKCJmaWxlOnNheV9oZWxsb19ycGNlbmMud3NkbCIpOwogZXZhbCB7IG15ICRyZXN1bHQgPSAkc29hcC0+c2F5SGVsbG8oJ0t1dHRlcicsICdNYXJ0aW4nKTsgfTsKIGlmICgkQCkgewogICAgIGRpZSAkQDsKIH0KIHByaW50ICRzb20tPnJlc3VsdCgpOwoKWW91IG1heSBvZiBjb3Vyc2UgYWxzbyB1c2UgdGhlIGZvbGxvd2luZyBvbmUtbGluZXI6CgogcGVybCAtTVNPQVA6OkxpdGUgLWUgJ3ByaW50IFNPQVA6OkxpdGUtPnNlcnZpY2UoImZpbGU6c2F5X2hlbGxvX3JwY2VuYy53c2RsIilcCiAgIC0+c2F5SGVsbG8oJ0t1dHRlcicsICdNYXJ0aW4nKSwgIlxuIjsnCgpBIHdlYiBzZXJ2aWNlIGNsaWVudCAod2l0aG91dCBhIHNlcnZpY2UgZGVzY3JpcHRpb24pIGxvb2tzIGxpa2UgdGhpcy4KCiB1c2UgU09BUDo6TGl0ZTsKIG15ICRzb2FwID0gU09BUDo6TGl0ZS0+bmV3KCBwcm94eSA9PiAnaHR0cDovL2xvY2FsaG9zdDo4MS9zb2FwLXdzZGwtdGVzdC9oZWxsb3dvcmxkLnBsJyk7CiAkc29hcC0+ZGVmYXVsdF9ucygndXJuOkhlbGxvV29ybGQnKTsKIG15ICRzb20gPSAkc29hcC0+Y2FsbCgnc2F5SGVsbG8nLAogICAgU09BUDo6RGF0YS0+bmFtZSgnbmFtZScpLT52YWx1ZSgnS3V0dGVyJyksCiAgICBTT0FQOjpEYXRhLT5uYW1lKCdnaXZlbk5hbWUnKS0+dmFsdWUoJ01hcnRpbicpCiApOwogZGllICRzb20tPmZhdWx0c3RyaW5nIGlmICgkc29tLT5mYXVsdCk7CiBwcmludCAkc29tLT5yZXN1bHQsICJcbiI7Cgo9aGVhZDMgUlBDL0xJVEVSQUwKClNPQVAgd2ViIHNlcnZpY2VzIHVzaW5nIHRoZSBkb2N1bWVudC9saXRlcmFsIG1lc3NhZ2UgZW5jb2RpbmcgYXJlIHVzdWFsbHkKZGVzY3JpYmVkIGJ5IHNvbWUgV2ViIFNlcnZpY2UgRGVmaW5pdGlvbi4gT3VyIHdlYiBzZXJ2aWNlIGhhcyB0aGUgZm9sbG93aW5nCldTREwgZGVzY3JpcHRpb246CgogPGRlZmluaXRpb25zIHhtbG5zOnNvYXA9Imh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzZGwvc29hcC8iCiAgIHhtbG5zOnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIgogICB4bWxuczpzMD0idXJuOkhlbGxvV29ybGQiCiAgIHRhcmdldE5hbWVzcGFjZT0idXJuOkhlbGxvV29ybGQiCiAgIHhtbG5zPSJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93c2RsLyI+CiAgIDx0eXBlcz4KICAgICA8czpzY2hlbWEgdGFyZ2V0TmFtZXNwYWNlPSJ1cm46SGVsbG9Xb3JsZCI+CiAgICAgICA8czpjb21wbGV4VHlwZSBuYW1lPSJzYXlIZWxsbyI+CiAgICAgICAgIDxzOnNlcXVlbmNlPgogICAgICAgICAgIDxzOmVsZW1lbnQgbWluT2NjdXJzPSIwIiBtYXhPY2N1cnM9IjEiIG5hbWU9Im5hbWUiCiAgICAgICAgICAgICAgdHlwZT0iczpzdHJpbmciIC8+CiAgICAgICAgICAgPHM6ZWxlbWVudCBtaW5PY2N1cnM9IjAiIG1heE9jY3Vycz0iMSIgbmFtZT0iZ2l2ZW5OYW1lIgogICAgICAgICAgICAgIHR5cGU9InM6c3RyaW5nIiBuaWxsYWJsZT0iMSIgLz4KICAgICAgICAgPC9zOnNlcXVlbmNlPgogICAgICAgPC9zOmNvbXBsZXhUeXBlPgoKICAgICAgIDxzOmNvbXBsZXhUeXBlIG5hbWU9InNheUhlbGxvUmVzcG9uc2UiPgogICAgICAgICA8czpzZXF1ZW5jZT4KICAgICAgICAgICA8czplbGVtZW50IG1pbk9jY3Vycz0iMCIgbWF4T2NjdXJzPSIxIiBuYW1lPSJzYXlIZWxsb1Jlc3VsdCIKICAgICAgICAgICAgICB0eXBlPSJzOnN0cmluZyIgLz4KICAgICAgICAgPC9zOnNlcXVlbmNlPgogICAgICAgPC9zOmNvbXBsZXhUeXBlPgogICAgIDwvczpzY2hlbWE+CiAgIDwvdHlwZXM+CiAgIDxtZXNzYWdlIG5hbWU9InNheUhlbGxvIj4KICAgICA8cGFydCBuYW1lPSJwYXJhbWV0ZXJzIiB0eXBlPSJzMDpzYXlIZWxsbyIgLz4KICAgPC9tZXNzYWdlPgogICA8bWVzc2FnZSBuYW1lPSJzYXlIZWxsb1Jlc3BvbnNlIj4KICAgICA8cGFydCBuYW1lPSJwYXJhbWV0ZXJzIiB0eXBlPSJzMDpzYXlIZWxsb1Jlc3BvbnNlIiAvPgogICA8L21lc3NhZ2U+CgogICA8cG9ydFR5cGUgbmFtZT0iU2VydmljZTFTb2FwIj4KICAgICA8b3BlcmF0aW9uIG5hbWU9InNheUhlbGxvIj4KICAgICAgIDxpbnB1dCBtZXNzYWdlPSJzMDpzYXlIZWxsbyIgLz4KICAgICAgIDxvdXRwdXQgbWVzc2FnZT0iczA6c2F5SGVsbG9SZXNwb25zZSIgLz4KICAgICA8L29wZXJhdGlvbj4KICAgPC9wb3J0VHlwZT4KCiAgIDxiaW5kaW5nIG5hbWU9IlNlcnZpY2UxU29hcCIgdHlwZT0iczA6U2VydmljZTFTb2FwIj4KICAgICA8c29hcDpiaW5kaW5nIHRyYW5zcG9ydD0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9odHRwIgogICAgICAgICBzdHlsZT0icnBjIiAvPgogICAgIDxvcGVyYXRpb24gbmFtZT0ic2F5SGVsbG8iPgogICAgICAgPHNvYXA6b3BlcmF0aW9uIHNvYXBBY3Rpb249InVybjpIZWxsb1dvcmxkI3NheUhlbGxvIi8+CiAgICAgICA8aW5wdXQ+CiAgICAgICAgIDxzb2FwOmJvZHkgdXNlPSJsaXRlcmFsIiBuYW1lc3BhY2U9InVybjpIZWxsb1dvcmxkIi8+CiAgICAgICA8L2lucHV0PgogICAgICAgPG91dHB1dD4KICAgICAgICAgPHNvYXA6Ym9keSB1c2U9ImxpdGVyYWwiIG5hbWVzcGFjZT0idXJuOkhlbGxvV29ybGQiLz4KICAgICAgIDwvb3V0cHV0PgogICAgIDwvb3BlcmF0aW9uPgogICA8L2JpbmRpbmc+CiAgIDxzZXJ2aWNlIG5hbWU9IkhlbGxvV29ybGQiPgogICAgIDxwb3J0IG5hbWU9IkhlbGxvV29ybGRTb2FwIiBiaW5kaW5nPSJzMDpTZXJ2aWNlMVNvYXAiPgogICAgICAgPHNvYXA6YWRkcmVzcyBsb2NhdGlvbj0iaHR0cDovL2xvY2FsaG9zdDo4MC8vaGVsbG93b3JsZC5wbCIgLz4KICAgICA8L3BvcnQ+CiAgIDwvc2VydmljZT4KICA8L2RlZmluaXRpb25zPgoKVGhlIFhNTCBtZXNzYWdlIChpbnNpZGUgdGhlIFNPQVAgRW52ZWxvcGUpIGxvb2sgbGlrZSB0aGlzOgoKCiA8bnMwOnNheUhlbGxvIHhtbG5zOm5zMD0idXJuOkhlbGxvV29ybGQiPgogICAgPHBhcmFtZXRlcnM+CiAgICAgIDxuYW1lPkt1dHRlcjwvbmFtZT4KICAgICAgPGdpdmVuTmFtZT5NYXJ0aW48L2dpdmVuTmFtZT4KICAgIDwvcGFyYW1ldGVycz4KIDwvbnMwOnNheUhlbGxvPgoKIDxzYXlIZWxsb1Jlc3BvbnNlIHhtbG5zOm5zMD0idXJuOkhlbGxvV29ybGQiPgogICAgPHBhcmFtZXRlcnM+CiAgICAgICAgPHNheUhlbGxvUmVzdWx0PkhlbGxvIE1hcnRpbiBLdXR0ZXIhPC9zYXlIZWxsb1Jlc3VsdD4KICAgIDwvcGFyYW1ldGVycz4KIDwvc2F5SGVsbG9SZXNwb25zZT4KClRoaXMgaXMgdGhlIFNPQVA6OkxpdGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSB3ZWIgc2VydmljZSBjbGllbnQ6CgogdXNlIFNPQVA6OkxpdGUgK3RyYWNlOwogbXkgJHNvYXAgPSBTT0FQOjpMaXRlLT5uZXcoIHByb3h5ID0+ICdodHRwOi8vbG9jYWxob3N0OjgwL2hlbGxvd29ybGQucGwnKTsKCiAkc29hcC0+b25fYWN0aW9uKCBzdWIgeyAidXJuOkhlbGxvV29ybGQjc2F5SGVsbG8iIH0pOwogJHNvYXAtPmF1dG90eXBlKDApLT5yZWFkYWJsZSgxKTsKICRzb2FwLT5kZWZhdWx0X25zKCd1cm46SGVsbG9Xb3JsZCcpOwoKIG15ICRzb20gPSAkc29hcC0+Y2FsbCgnc2F5SGVsbG8nLCBTT0FQOjpEYXRhLT5uYW1lKCdwYXJhbWV0ZXJzJyktPnZhbHVlKAogICAgXFNPQVA6OkRhdGEtPnZhbHVlKFsKICAgICAgICBTT0FQOjpEYXRhLT5uYW1lKCduYW1lJyktPnZhbHVlKCAnS3V0dGVyJyApLAogICAgICAgIFNPQVA6OkRhdGEtPm5hbWUoJ2dpdmVuTmFtZScpLT52YWx1ZSgnTWFydGluJyksCiAgICBdKSkKKTsKCiBkaWUgJHNvbS0+ZmF1bHQtPnsgZmF1bHRzdHJpbmcgfSBpZiAoJHNvbS0+ZmF1bHQpOwogcHJpbnQgJHNvbS0+cmVzdWx0LCAiXG4iOwoKPWhlYWQzIERPQ1VNRU5UL0xJVEVSQUwKClNPQVAgd2ViIHNlcnZpY2VzIHVzaW5nIHRoZSBkb2N1bWVudC9saXRlcmFsIG1lc3NhZ2UgZW5jb2RpbmcgYXJlIHVzdWFsbHkKZGVzY3JpYmVkIGJ5IHNvbWUgV2ViIFNlcnZpY2UgRGVmaW5pdGlvbi4gT3VyIHdlYiBzZXJ2aWNlIGhhcyB0aGUgZm9sbG93aW5nCldTREwgZGVzY3JpcHRpb246CgogPGRlZmluaXRpb25zIHhtbG5zOnNvYXA9Imh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzZGwvc29hcC8iCiAgICB4bWxuczpzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSIKICAgIHhtbG5zOnMwPSJ1cm46SGVsbG9Xb3JsZCIKICAgIHRhcmdldE5hbWVzcGFjZT0idXJuOkhlbGxvV29ybGQiCiAgICB4bWxucz0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3NkbC8iPgogICA8dHlwZXM+CiAgICAgPHM6c2NoZW1hIHRhcmdldE5hbWVzcGFjZT0idXJuOkhlbGxvV29ybGQiPgogICAgICAgPHM6ZWxlbWVudCBuYW1lPSJzYXlIZWxsbyI+CiAgICAgICAgIDxzOmNvbXBsZXhUeXBlPgogICAgICAgICAgIDxzOnNlcXVlbmNlPgogICAgICAgICAgICAgIDxzOmVsZW1lbnQgbWluT2NjdXJzPSIwIiBtYXhPY2N1cnM9IjEiIG5hbWU9Im5hbWUiIHR5cGU9InM6c3RyaW5nIiAvPgogICAgICAgICAgICAgICA8czplbGVtZW50IG1pbk9jY3Vycz0iMCIgbWF4T2NjdXJzPSIxIiBuYW1lPSJnaXZlbk5hbWUiIHR5cGU9InM6c3RyaW5nIiBuaWxsYWJsZT0iMSIgLz4KICAgICAgICAgICA8L3M6c2VxdWVuY2U+CiAgICAgICAgICA8L3M6Y29tcGxleFR5cGU+CiAgICAgICAgPC9zOmVsZW1lbnQ+CgogICAgICAgIDxzOmVsZW1lbnQgbmFtZT0ic2F5SGVsbG9SZXNwb25zZSI+CiAgICAgICAgICA8czpjb21wbGV4VHlwZT4KICAgICAgICAgICAgPHM6c2VxdWVuY2U+CiAgICAgICAgICAgICAgPHM6ZWxlbWVudCBtaW5PY2N1cnM9IjAiIG1heE9jY3Vycz0iMSIgbmFtZT0ic2F5SGVsbG9SZXN1bHQiIHR5cGU9InM6c3RyaW5nIiAvPgogICAgICAgICAgICA8L3M6c2VxdWVuY2U+CiAgICAgICAgPC9zOmNvbXBsZXhUeXBlPgogICAgICA8L3M6ZWxlbWVudD4KICAgIDwvdHlwZXM+CiAgICA8bWVzc2FnZSBuYW1lPSJzYXlIZWxsb1NvYXBJbiI+CiAgICAgIDxwYXJ0IG5hbWU9InBhcmFtZXRlcnMiIGVsZW1lbnQ9InMwOnNheUhlbGxvIiAvPgogICAgPC9tZXNzYWdlPgogICAgPG1lc3NhZ2UgbmFtZT0ic2F5SGVsbG9Tb2FwT3V0Ij4KICAgICAgPHBhcnQgbmFtZT0icGFyYW1ldGVycyIgZWxlbWVudD0iczA6c2F5SGVsbG9SZXNwb25zZSIgLz4KICAgIDwvbWVzc2FnZT4KCiAgICA8cG9ydFR5cGUgbmFtZT0iU2VydmljZTFTb2FwIj4KICAgICAgPG9wZXJhdGlvbiBuYW1lPSJzYXlIZWxsbyI+CiAgICAgICAgPGlucHV0IG1lc3NhZ2U9InMwOnNheUhlbGxvU29hcEluIiAvPgogICAgICAgIDxvdXRwdXQgbWVzc2FnZT0iczA6c2F5SGVsbG9Tb2FwT3V0IiAvPgogICAgICA8L29wZXJhdGlvbj4KICAgIDwvcG9ydFR5cGU+CgogICAgPGJpbmRpbmcgbmFtZT0iU2VydmljZTFTb2FwIiB0eXBlPSJzMDpTZXJ2aWNlMVNvYXAiPgogICAgICA8c29hcDpiaW5kaW5nIHRyYW5zcG9ydD0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9odHRwIgogICAgICAgICAgc3R5bGU9ImRvY3VtZW50IiAvPgogICAgICA8b3BlcmF0aW9uIG5hbWU9InNheUhlbGxvIj4KICAgICAgICA8c29hcDpvcGVyYXRpb24gc29hcEFjdGlvbj0idXJuOkhlbGxvV29ybGQjc2F5SGVsbG8iLz4KICAgICAgICA8aW5wdXQ+CiAgICAgICAgICA8c29hcDpib2R5IHVzZT0ibGl0ZXJhbCIgLz4KICAgICAgICA8L2lucHV0PgogICAgICAgIDxvdXRwdXQ+CiAgICAgICAgICA8c29hcDpib2R5IHVzZT0ibGl0ZXJhbCIgLz4KICAgICAgICA8L291dHB1dD4KICAgICAgPC9vcGVyYXRpb24+CiAgICA8L2JpbmRpbmc+CiAgICA8c2VydmljZSBuYW1lPSJIZWxsb1dvcmxkIj4KICAgICAgPHBvcnQgbmFtZT0iSGVsbG9Xb3JsZFNvYXAiIGJpbmRpbmc9InMwOlNlcnZpY2UxU29hcCI+CiAgICAgICAgPHNvYXA6YWRkcmVzcyBsb2NhdGlvbj0iaHR0cDovL2xvY2FsaG9zdDo4MC8vaGVsbG93b3JsZC5wbCIgLz4KICAgICAgPC9wb3J0PgogICAgPC9zZXJ2aWNlPgogPC9kZWZpbml0aW9ucz4KClRoZSBYTUwgbWVzc2FnZSAoaW5zaWRlIHRoZSBTT0FQIEVudmVsb3BlKSBsb29rIGxpa2UgdGhpczoKCiA8c2F5SGVsbG8geG1sbnM9InVybjpIZWxsb1dvcmxkIj4KICAgPG5hbWU+S3V0dGVyPC9uYW1lPgogICA8Z2l2ZW5OYW1lPk1hcnRpbjwvZ2l2ZW5OYW1lPgogPC9zYXlIZWxsbz4KCiA8c2F5SGVsbG9SZXNwb25zZT4KICAgPHNheUhlbGxvUmVzdWx0PkhlbGxvIE1hcnRpbiBLdXR0ZXIhPC9zYXlIZWxsb1Jlc3VsdD4KIDwvc2F5SGVsbG9SZXNwb25zZT4KCllvdSBjYW4gY2FsbCB0aGlzIHdlYiBzZXJ2aWNlIHdpdGggdGhlIGZvbGxvd2luZyBjbGllbnQgY29kZToKCiB1c2UgU09BUDo6TGl0ZTsKIG15ICRzb2FwID0gU09BUDo6TGl0ZS0+bmV3KCBwcm94eSA9PiAnaHR0cDovL2xvY2FsaG9zdDo4MC9oZWxsb3dvcmxkLnBsJyk7CgogJHNvYXAtPm9uX2FjdGlvbiggc3ViIHsgInVybjpIZWxsb1dvcmxkI3NheUhlbGxvIiB9KTsKICRzb2FwLT5hdXRvdHlwZSgwKTsKICRzb2FwLT5kZWZhdWx0X25zKCd1cm46SGVsbG9Xb3JsZCcpOwoKIG15ICRzb20gPSAkc29hcC0+Y2FsbCgic2F5SGVsbG8iLAogICAgU09BUDo6RGF0YS0+bmFtZSgnbmFtZScpLT52YWx1ZSggJ0t1dHRlcicgKSwKICAgIFNPQVA6OkRhdGEtPm5hbWUoJ2dpdmVuTmFtZScpLT52YWx1ZSgnTWFydGluJyksCik7CgogZGllICRzb20tPmZhdWx0LT57IGZhdWx0c3RyaW5nIH0gaWYgKCRzb20tPmZhdWx0KTsKIHByaW50ICRzb20tPnJlc3VsdCwgIlxuIjsKCj1oZWFkMiBEaWZmZXJlbmNlcyBiZXR3ZWVuIHRoZSBpbXBsZW1lbnRhdGlvbnMKCllvdSBtYXkgaGF2ZSBub3RpY2VkIHRoYXQgdGhlcmUncyBsaXR0bGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBycGMvZW5jb2RlZCwKcnBjL2xpdGVyYWwgYW5kIHRoZSBkb2N1bWVudC9saXRlcmFsIGV4YW1wbGUncyBpbXBsZW1lbnRhdGlvbi4gSW4gZmFjdCwgZnJvbQpTT0FQOjpMaXRlJ3MgcG9pbnQgb2YgdmlldywgdGhlIG9ubHkgZGlmZmVyZW5jZXMgYmV0d2VlbiBycGMvbGl0ZXJhbCBhbmQKZG9jdW1lbnQvbGl0ZXJhbCB0aGF0IHBhcmFtZXRlcnMgYXJlIGFsd2F5cyBuYW1lZC4KCkluIG91ciBleGFtcGxlLCB0aGUgcnBjL2VuY29kZWQgdmFyaWFudCBhbHJlYWR5IHVzZWQgbmFtZWQgcGFyYW1ldGVycyAoYnkKdXNpbmcgdHdvIG1lc3NhZ2VzKSwgc28gdGhlcmUncyBubyBkaWZmZXJlbmNlIGF0IGFsbC4KCllvdSBtYXkgaGF2ZSBub3RpY2VkIHRoZSBzb21ld2hhdCBzdHJhbmdlIGlkaW9tIGZvciBwYXNzaW5nIGEgbGlzdCBvZiBuYW1lZApwYXJhbmV0ZXJzIGluIHRoZSBycGMvbGl0ZXJhbCBleGFtcGxlOgoKIG15ICRzb20gPSAkc29hcC0+Y2FsbCgnc2F5SGVsbG8nLCBTT0FQOjpEYXRhLT5uYW1lKCdwYXJhbWV0ZXJzJyktPnZhbHVlKAogICAgXFNPQVA6OkRhdGEtPnZhbHVlKFsKICAgICAgICBTT0FQOjpEYXRhLT5uYW1lKCduYW1lJyktPnZhbHVlKCAnS3V0dGVyJyApLAogICAgICAgIFNPQVA6OkRhdGEtPm5hbWUoJ2dpdmVuTmFtZScpLT52YWx1ZSgnTWFydGluJyksCiAgICBdKSkKICk7CgpXaGlsZSBTT0FQOjpEYXRhIHByb3ZpZGVzIGZ1bGwgY29udHJvbCBvdmVyIHRoZSBYTUwgZ2VuZXJhdGVkLCBwYXNzaW5nCmhhc2gtbGlrZSBzdHJ1Y3R1cmVzIHJlcXVpcmUgYWRkaXRpb25hbCBjb2RpbmcuCgo9aGVhZDEgV1JJVElORyBBIFNPQVAgU0VSVkVSCgpTZWUgTDxTT0FQOjpTZXJ2ZXI+LCBvciBMPFNPQVA6OlRyYW5zcG9ydD4uCgo9aGVhZDEgRkVBVFVSRVMKCj1oZWFkMiBBVFRBQ0hNRU5UUwoKQzxTT0FQOjpMaXRlPiBmZWF0dXJlcyBzdXBwb3J0IGZvciB0aGUgU09BUCB3aXRoIEF0dGFjaG1lbnRzIHNwZWNpZmljYXRpb24uCkN1cnJlbnRseSwgU09BUDo6TGl0ZSBvbmx5IHN1cHBvcnRzIE1JTUUgYmFzZWQgYXR0YWNobWVudHMuIERJTUUgYmFzZWQKYXR0YWNobWVudHMgYXJlIHlldCB0byBiZSBmdWxseSBmdW5jdGlvbmFsLgoKPWhlYWQzIEVYQU1QTEVTCgo9aGVhZDQgQ2xpZW50IHNlbmRpbmcgYW4gYXR0YWNobWVudAoKQzxTT0FQOjpMaXRlPiBjbGllbnRzIGNhbiBzcGVjaWZ5IGF0dGFjaG1lbnRzIHRvIGJlIHNlbnQgYWxvbmcgd2l0aCBhIHJlcXVlc3QKYnkgdXNpbmcgdGhlIEM8U09BUDo6TGl0ZTo6cGFydHMoKT4gbWV0aG9kLCB3aGljaCB0YWtlcyBhcyBhbiBhcmd1bWVudCBhbgpBUlJBWSBvZiBDPE1JTUU6OkVudGl0eT4ncy4KCiAgdXNlIFNPQVA6OkxpdGU7CiAgdXNlIE1JTUU6OkVudGl0eTsKICBteSAkZW50ID0gYnVpbGQgTUlNRTo6RW50aXR5CiAgICBUeXBlICAgICAgICA9PiAiaW1hZ2UvZ2lmIiwKICAgIEVuY29kaW5nICAgID0+ICJiYXNlNjQiLAogICAgUGF0aCAgICAgICAgPT4gInNvbWVmaWxlLmdpZiIsCiAgICBGaWxlbmFtZSAgICA9PiAic2F2ZW1lLmdpZiIsCiAgICBEaXNwb3NpdGlvbiA9PiAiYXR0YWNobWVudCI7CiAgbXkgJHNvbSA9IFNPQVA6OkxpdGUKICAgIC0+dXJpKCRTT01FX05BTUVTUEFDRSkKICAgIC0+cGFydHMoWyAkZW50IF0pCiAgICAtPnByb3h5KCRTT01FX0hPU1QpCiAgICAtPnNvbWVfbWV0aG9kKFNPQVA6OkRhdGEtPm5hbWUoImZvbyIgPT4gImJhciIpKTsKCj1oZWFkNCBDbGllbnQgcmV0cmlldmluZyBhbiBhdHRhY2htZW50CgpBIGNsaWVudCBhY2Nlc3NpbmcgYXR0YWNobWVudHMgdGhhdCB3ZXJlIHJldHVybmVkIGluIGEgcmVzcG9uc2UgYnkgdXNpbmcgdGhlCkM8U09BUDo6U09NOjpwYXJ0cygpPiBhY2Nlc3Nvci4KCiAgdXNlIFNPQVA6OkxpdGU7CiAgdXNlIE1JTUU6OkVudGl0eTsKICBteSAkc29hcCA9IFNPQVA6OkxpdGUKICAgIC0+dXJpKCROUykKICAgIC0+cHJveHkoJEhPU1QpOwogIG15ICRzb20gPSAkc29hcC0+Zm9vKCk7CiAgZm9yZWFjaCBteSAkcGFydCAoJHskc29tLT5wYXJ0c30pIHsKICAgIHByaW50ICRwYXJ0LT5zdHJpbmdpZnk7CiAgfQoKPWhlYWQ0IFNlcnZlciByZWNlaXZpbmcgYW4gYXR0YWNobWVudAoKU2VydmVycywgbGlrZSBjbGllbnRzLCB1c2UgdGhlIFM8U09BUDo6U09NPiBtb2R1bGUgdG8gYWNjZXNzIGF0dGFjaG1lbnRzCnRyYW5zbWl0dGVkIHRvIGl0LgoKICBwYWNrYWdlIEF0dGFjaG1lbnQ7CiAgdXNlIFNPQVA6OkxpdGU7CiAgdXNlIE1JTUU6OkVudGl0eTsKICB1c2Ugc3RyaWN0OwogIHVzZSB2YXJzIHF3KEBJU0EpOwogIEBJU0EgPSBxdyhTT0FQOjpTZXJ2ZXI6OlBhcmFtZXRlcnMpOwogIHN1YiBzb21lTWV0aG9kIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAkZW52ZWxvcGUgPSBwb3A7CiAgICBmb3JlYWNoIG15ICRwYXJ0IChAeyRlbnZlbG9wZS0+cGFydHN9KSB7CiAgICAgIHByaW50ICJBdHRhY2htZW50U2VydmljZTogYXR0YWNobWVudCBmb3VuZCEgKCIucmVmKCRwYXJ0KS4iKVxuIjsKICAgIH0KICAgICMgZG8gc29tZXRoaW5nCiAgfQoKPWhlYWQ0IFNlcnZlciByZXNwb25kaW5nIHdpdGggYW4gYXR0YWNobWVudAoKU2VydmVycyB3aXNoaW5nIHRvIHJldHVybiBhbiBhdHRhY2htZW50IHRvIHRoZSBjYWxsaW5nIGNsaWVudCBuZWVkIG9ubHkgcmV0dXJuCkM8TUlNRTo6RW50aXR5PiBvYmplY3RzIGFsb25nIHdpdGggU09BUDo6RGF0YSBlbGVtZW50cywgb3IgYW55IG90aGVyIGRhdGEKaW50ZW5kZWQgZm9yIHRoZSByZXNwb25zZS4KCiAgcGFja2FnZSBBdHRhY2htZW50OwogIHVzZSBTT0FQOjpMaXRlOwogIHVzZSBNSU1FOjpFbnRpdHk7CiAgdXNlIHN0cmljdDsKICB1c2UgdmFycyBxdyhASVNBKTsKICBASVNBID0gcXcoU09BUDo6U2VydmVyOjpQYXJhbWV0ZXJzKTsKICBzdWIgc29tZU1ldGhvZCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgJGVudmVsb3BlID0gcG9wOwogICAgbXkgJGVudCA9IGJ1aWxkIE1JTUU6OkVudGl0eQogICAgJ0lkJyAgICAgICAgICA9PiAiPDEyMzQ+IiwKICAgICdUeXBlJyAgICAgICAgPT4gInRleHQveG1sIiwKICAgICdQYXRoJyAgICAgICAgPT4gInNvbWUueG1sIiwKICAgICdGaWxlbmFtZScgICAgPT4gInNvbWUueG1sIiwKICAgICdEaXNwb3NpdGlvbicgPT4gImF0dGFjaG1lbnQiOwogICAgcmV0dXJuIFNPQVA6OkRhdGEtPm5hbWUoImZvbyIgPT4gImJsYWggYmxhaCBibGFoIiksJGVudDsKICB9Cgo9aGVhZDIgREVGQVVMVCBTRVRUSU5HUwoKVGhvdWdoIHRoaXMgZmVhdHVyZSBsb29rcyBzaW1pbGFyIHRvCkw8YXV0b2Rpc3BhdGNofC8iSU4vT1VULCBPVVQgUEFSQU1FVEVSUyBBTkQgQVVUT0JJTkRJTkciPiB0aGV5IGhhdmUgKGFsbW9zdCkKbm90aGluZyBpbiBjb21tb24uIFRoaXMgY2FwYWJpbGl0eSBhbGxvd3MgeW91IHNwZWNpZnkgZGVmYXVsdCBzZXR0aW5ncyBzbyB0aGF0CmFsbCBvYmplY3RzIGNyZWF0ZWQgYWZ0ZXIgdGhhdCB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggdGhlIHByb3BlciBkZWZhdWx0CnNldHRpbmdzLgoKSWYgeW91IHdpc2ggdG8gcHJvdmlkZSBjb21tb24gQzxwcm94eSgpPiBvciBDPHVyaSgpPiBzZXR0aW5ncyBmb3IgYWxsCkM8U09BUDo6TGl0ZT4gb2JqZWN0cyBpbiB5b3VyIGFwcGxpY2F0aW9uIHlvdSBtYXkgZG86CgogIHVzZSBTT0FQOjpMaXRlCiAgICBwcm94eSA9PiAnaHR0cDovL2xvY2FsaG9zdC9jZ2ktYmluL3NvYXAuY2dpJywKICAgIHVyaSA9PiAnaHR0cDovL215Lm93bi5jb20vTXkvRXhhbXBsZXMnOwoKICBteSAkc29hcDEgPSBuZXcgU09BUDo6TGl0ZTsgIyB3aWxsIGdldCB0aGUgc2FtZSBwcm94eSgpL3VyaSgpIGFzIGFib3ZlCiAgcHJpbnQgJHNvYXAxLT5nZXRTdGF0ZU5hbWUoMSktPnJlc3VsdDsKCiAgbXkgJHNvYXAyID0gU09BUDo6TGl0ZS0+bmV3OyAjIHNhbWUgdGhpbmcgYXMgYWJvdmUKICBwcmludCAkc29hcDItPmdldFN0YXRlTmFtZSgyKS0+cmVzdWx0OwoKICAjIG9yIHlvdSBtYXkgb3ZlcnJpZGUgYW55IHNldHRpbmdzIHlvdSB3YW50CiAgbXkgJHNvYXAzID0gU09BUDo6TGl0ZS0+cHJveHkoJ2h0dHA6Ly9sb2NhbGhvc3QvJyk7CiAgcHJpbnQgJHNvYXAzLT5nZXRTdGF0ZU5hbWUoMSktPnJlc3VsdDsKCkI8QW55PiBDPFNPQVA6OkxpdGU+IHByb3BlcnRpZXMgY2FuIGJlIHByb3BhZ2F0ZWQgdGhpcyB3YXkuIENoYW5nZXMgaW4gb2JqZWN0CmNvcGllcyB3aWxsIG5vdCBhZmZlY3QgZ2xvYmFsIHNldHRpbmdzIGFuZCB5b3UgbWF5IHN0aWxsIGNoYW5nZSBnbG9iYWwKc2V0dGluZ3Mgd2l0aCBDPDwgU09BUDo6TGl0ZS0+c2VsZiA+PiBjYWxsIHdoaWNoIHJldHVybnMgcmVmZXJlbmNlIHRvIGdsb2JhbApvYmplY3QuIFByb3ZpZGVkIHBhcmFtZXRlciB3aWxsIHVwZGF0ZSB0aGlzIG9iamVjdCBhbmQgeW91IGNhbiBldmVuIHNldCBpdCB0bwpDPHVuZGVmPjoKCiAgU09BUDo6TGl0ZS0+c2VsZih1bmRlZik7CgpUaGUgQzx1c2UgU09BUDo6TGl0ZT4gc3ludGF4IGFsc28gbGV0cyB5b3Ugc3BlY2lmeSBkZWZhdWx0IGV2ZW50IGhhbmRsZXJzIGZvcgp5b3VyIGNvZGUuIElmIHlvdSBoYXZlIGRpZmZlcmVudCBTT0FQIG9iamVjdHMgYW5kIHdhbnQgdG8gc2hhcmUgdGhlIHNhbWUKQzxvbl9hY3Rpb24oKT4gKG9yIEM8b25fZmF1bHQoKT4gZm9yIHRoYXQgbWF0dGVyKSBoYW5kbGVyLiBZb3UgY2FuIHNwZWNpZnkKQzxvbl9hY3Rpb24oKT4gZHVyaW5nIGluaXRpYWxpemF0aW9uIGZvciBldmVyeSBvYmplY3QsIGJ1dCB5b3UgbWF5IGFsc28gZG86CgogIHVzZSBTT0FQOjpMaXRlCiAgICBvbl9hY3Rpb24gPT4gc3ViIHtzcHJpbnRmICclcyMlcycsIEBffTsKCmFuZCB0aGlzIGhhbmRsZXIgd2lsbCBiZSB0aGUgZGVmYXVsdCBoYW5kbGVyIGZvciBhbGwgeW91ciBTT0FQIG9iamVjdHMuIFlvdQpjYW4gb3ZlcnJpZGUgaXQgaWYgeW91IHNwZWNpZnkgYSBoYW5kbGVyIGZvciBhIHBhcnRpY3VsYXIgb2JqZWN0LiBTZWUgRjx0LyoudD4KZm9yIGV4YW1wbGUgb2Ygb25fZmF1bHQoKSBoYW5kbGVyLgoKQmUgd2FybmVkLCB0aGF0IHNpbmNlIEM8dXNlIC4uLj4gaXMgZXhlY3V0ZWQgYXQgY29tcGlsZSB0aW1lIEI8YWxsPiBDPHVzZT4Kc3RhdGVtZW50cyB3aWxsIGJlIGV4ZWN1dGVkIEI8YmVmb3JlPiBzY3JpcHQgZXhlY3V0aW9uIHRoYXQgY2FuIG1ha2UKdW5leHBlY3RlZCByZXN1bHRzLiBDb25zaWRlciBjb2RlOgoKICB1c2UgU09BUDo6TGl0ZSBwcm94eSA9PiAnaHR0cDovL2xvY2FsaG9zdC8nOwogIHByaW50IFNPQVA6OkxpdGUtPmdldFN0YXRlTmFtZSgxKS0+cmVzdWx0OwoKICB1c2UgU09BUDo6TGl0ZSBwcm94eSA9PiAnaHR0cDovL2xvY2FsaG9zdC9jZ2ktYmluL3NvYXAuY2dpJzsKICBwcmludCBTT0FQOjpMaXRlLT5nZXRTdGF0ZU5hbWUoMSktPnJlc3VsdDsKCkI8Qm90aD4gU09BUCBjYWxscyB3aWxsIGdvIHRvIEM8J2h0dHA6Ly9sb2NhbGhvc3QvY2dpLWJpbi9zb2FwLmNnaSc+LiBJZiB5b3UKd2FudCB0byBleGVjdXRlIEM8dXNlPiBhdCBydW4tdGltZSwgcHV0IGl0IGluIEM8ZXZhbD46CgogIGV2YWwgInVzZSBTT0FQOjpMaXRlIHByb3h5ID0+ICdodHRwOi8vbG9jYWxob3N0L2NnaS1iaW4vc29hcC5jZ2knOyAxIiBvciBkaWU7CgpPciBhbHRlcm5hdGl2ZWx5LAoKICBTT0FQOjpMaXRlLT5zZWxmLT5wcm94eSgnaHR0cDovL2xvY2FsaG9zdC9jZ2ktYmluL3NvYXAuY2dpJyk7Cgo9aGVhZDIgU0VUVElORyBNQVhJTVVNIE1FU1NBR0UgU0laRQoKT25lIGZlYXR1cmUgb2YgQzxTT0FQOjpMaXRlPiBpcyB0aGUgYWJpbGl0eSB0byBjb250cm9sIHRoZSBtYXhpbXVtIHNpemUgb2YgYQptZXNzYWdlIGEgU09BUDo6TGl0ZSBzZXJ2ZXIgd2lsbCBiZSBhbGxvd2VkIHRvIHByb2Nlc3MuIFRvIGNvbnRyb2wgdGhpcwpmZWF0dXJlIHNpbXBseSBkZWZpbmUgQzwkU09BUDo6Q29uc3RhbnRzOjpNQVhfQ09OVEVOVF9TSVpFPiBpbiB5b3VyIGNvZGUgbGlrZQpzbzoKCiAgdXNlIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDsKICB1c2UgTUlNRTo6RW50aXR5OwogICRTT0FQOjpDb25zdGFudHM6Ok1BWF9DT05URU5UX1NJWkUgPSAxMDAwMDsKICBTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkNHSQogICAgLT5kaXNwYXRjaF90bygnVGVtcGVyYXR1cmVTZXJ2aWNlJykKICAgIC0+aGFuZGxlOwoKPWhlYWQyIElOL09VVCwgT1VUIFBBUkFNRVRFUlMgQU5EIEFVVE9CSU5ESU5HCgpDPFNPQVA6OkxpdGU+IGdpdmVzIHlvdSBhY2Nlc3MgdG8gYWxsIHBhcmFtZXRlcnMgKGJvdGggaW4vb3V0IGFuZCBvdXQpIGFuZAphbHNvIGRvZXMgc29tZSBhZGRpdGlvbmFsIHdvcmsgZm9yIHlvdS4gTGV0cyBjb25zaWRlciBmb2xsb3dpbmcgZXhhbXBsZToKCiAgPG1laG9kUmVzcG9uc2U+CiAgICA8cmVzMT5uYW1lMTwvcmVzMT4KICAgIDxyZXMyPm5hbWUyPC9yZXMyPgogICAgPHJlczM+bmFtZTM8L3JlczM+CiAgPC9tZWhvZFJlc3BvbnNlPgoKSW4gdGhhdCBjYXNlOgoKICAkcmVzdWx0ID0gJHItPnJlc3VsdDsgIyBnaXZlcyB5b3UgJ25hbWUxJwogICRwYXJhbW91dDEgPSAkci0+cGFyYW1zb3V0OyAgICAgICMgZ2l2ZXMgeW91ICduYW1lMicsIGJlY2F1c2Ugb2Ygc2NhbGFyIGNvbnRleHQKICAkcGFyYW1vdXQxID0gKCRyLT5wYXJhbXNvdXQpWzBdOyAjIGdpdmVzIHlvdSAnbmFtZTInIGFsc28KICAkcGFyYW1vdXQyID0gKCRyLT5wYXJhbXNvdXQpWzFdOyAjIGdpdmVzIHlvdSAnbmFtZTMnCgpvcgoKICBAcGFyYW1zb3V0ID0gJHItPnBhcmFtc291dDsgIyBnaXZlcyB5b3UgQVJSQVkgb2Ygb3V0IHBhcmFtZXRlcnMKICAkcGFyYW1vdXQxID0gJHBhcmFtc291dFswXTsgIyBnaXZlcyB5b3UgJ3JlczInLCBzYW1lIGFzICgkci0+cGFyYW1zb3V0KVswXQogICRwYXJhbW91dDIgPSAkcGFyYW1zb3V0WzFdOyAjIGdpdmVzIHlvdSAncmVzMycsIHNhbWUgYXMgKCRyLT5wYXJhbXNvdXQpWzFdCgpHZW5lcmFsbHksIGlmIHNlcnZlciByZXR1cm5zIEM8cmV0dXJuICgxLDIsMyk+IHlvdSB3aWxsIGdldCBDPDE+IGFzIHRoZSByZXN1bHQKYW5kIEM8Mj4gYW5kIEM8Mz4gYXMgb3V0IHBhcmFtZXRlcnMuCgpJZiB0aGUgc2VydmVyIHJldHVybnMgQzxyZXR1cm4gWzEsMiwzXT4geW91IHdpbGwgZ2V0IGFuIEFSUkFZIHJlZmVyZW5jZSBmcm9tCkM8cmVzdWx0KCk+IGFuZCBDPHVuZGVmPiBmcm9tIEM8cGFyYW1zb3V0KCk+LgoKUmVzdWx0cyBjYW4gYmUgYXJiaXRyYXJ5IGNvbXBsZXg6IHRoZXkgY2FuIGJlIGFuIGFycmF5IHJlZmVyZW5jZXMsIHRoZXkgY2FuIGJlCm9iamVjdHMsIHRoZXkgY2FuIGJlIGFueXRoaW5nIGFuZCBzdGlsbCBiZSByZXR1cm5lZCBieSBDPHJlc3VsdCgpPiAuIElmIG9ubHkKb25lIHBhcmFtZXRlciBpcyByZXR1cm5lZCwgQzxwYXJhbXNvdXQoKT4gd2lsbCByZXR1cm4gQzx1bmRlZj4uCgpGdXJ0aGVybW9yZSwgaWYgeW91IGhhdmUgaW4geW91ciBvdXRwdXQgcGFyYW1ldGVycyBhIHBhcmFtZXRlciB3aXRoIHRoZSBzYW1lCnNpZ25hdHVyZSAobmFtZSt0eXBlKSBhcyBpbiB0aGUgaW5wdXQgcGFyYW1ldGVycyB0aGlzIHBhcmFtZXRlciB3aWxsIGJlIG1hcHBlZAppbnRvIHlvdXIgaW5wdXQgYXV0b21hdGljYWxseS4gRm9yIGV4YW1wbGU6CgpCPFNlcnZlciBDb2RlPjoKCiAgc3ViIG15bWV0aG9kIHsKICAgIHNoaWZ0OyAjIG9iamVjdC9jbGFzcyByZWZlcmVuY2UKICAgIG15ICRwYXJhbTEgPSBzaGlmdDsKICAgIG15ICRwYXJhbTIgPSBTT0FQOjpEYXRhLT5uYW1lKCdteXBhcmFtJyA9PiBzaGlmdCgpICogMik7CiAgICByZXR1cm4gJHBhcmFtMSwgJHBhcmFtMjsKICB9CgpCPENsaWVudCBDb2RlPjoKCiAgJGEgPSAxMDsKICAkYiA9IFNPQVA6OkRhdGEtPm5hbWUoJ215cGFyYW0nID0+IDEyKTsKICAkcmVzdWx0ID0gJHNvYXAtPm15bWV0aG9kKCRhLCAkYik7CgpBZnRlciB0aGF0LCBDPDwgJHJlc3VsdCA9PSAxMCBhbmQgJGItPnZhbHVlID09IDI0ID4+ISBNYWdpYz8gU29ydCBvZi4KCkF1dG9iaW5kaW5nIGdpdmVzIGl0IHRvIHlvdS4gVGhhdCB3aWxsIHdvcmsgd2l0aCBvYmplY3RzIGFsc28gd2l0aCBvbmUKZGlmZmVyZW5jZTogeW91IGRvIG5vdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBuYW1lIGFuZCB0aGUgdHlwZSBvZiBvYmplY3QKcGFyYW1ldGVyLiBDb25zaWRlciB0aGUgQzxQaW5nUG9uZz4gZXhhbXBsZSAoRjxleGFtcGxlcy9NeS9QaW5nUG9uZy5wbT4KYW5kIEY8ZXhhbXBsZXMvcGluZ3BvbmcucGw+KToKCkI8U2VydmVyIENvZGU+OgoKICBwYWNrYWdlIE15OjpQaW5nUG9uZzsKCiAgc3ViIG5ldyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgJGNsYXNzID0gcmVmKCRzZWxmKSB8fCAkc2VsZjsKICAgIGJsZXNzIHtfbnVtPT5zaGlmdH0gPT4gJGNsYXNzOwogIH0KCiAgc3ViIG5leHQgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICRzZWxmLT57X251bX0rKzsKICB9CgpCPENsaWVudCBDb2RlPjoKCiAgdXNlIFNPQVA6OkxpdGUgK2F1dG9kaXNwYXRjaCA9PgogICAgdXJpID0+ICd1cm46JywKICAgIHByb3h5ID0+ICdodHRwOi8vbG9jYWxob3N0Lyc7CgogIG15ICRwID0gTXk6OlBpbmdQb25nLT5uZXcoMTApOyAjICRwLT57X251bX0gaXMgMTAgbm93LCByZWFsIG9iamVjdCByZXR1cm5lZAogIHByaW50ICRwLT5uZXh0LCAiXG4iOyAgICAgICAgICAjICRwLT57X251bX0gaXMgMTEgbm93ISwgb2JqZWN0IGF1dG9iaW5kZWQKCj1oZWFkMiBTVEFUSUMgQU5EIERZTkFNSUMgU0VSVklDRSBERVBMT1lNRU5UCgpMZXQgdXMgc2NydXRpbml6ZSB0aGUgZGVwbG95bWVudCBwcm9jZXNzLiBXaGVuIGRlc2lnbmluZyB5b3VyIFNPQVAgc2VydmVyIHlvdQpjYW4gY29uc2lkZXIgdHdvIGtpbmQgb2YgZGVwbG95bWVudDogQjxzdGF0aWM+IGFuZCBCPGR5bmFtaWM+LiBGb3IgYm90aCwKc3RhdGljIGFuZCBkeW5hbWljLCAgeW91IHNob3VsZCBzcGVjaWZ5IEM8TU9EVUxFPiwgQzxNT0RVTEU6Om1ldGhvZD4sCkM8bWV0aG9kPiBvciBDPFBBVEgvPiB3aGVuIGNyZWF0aW5nIEM8dXNlPmluZyB0aGUgU09BUDo6TGl0ZSBtb2R1bGUuIFRoZQpkaWZmZXJlbmNlIGJldHdlZW4gc3RhdGljIGFuZCBkeW5hbWljIGRlcGxveW1lbnQgaXMgdGhhdCBpbiBjYXNlIG9mICdkeW5hbWljJywKYW55IG1vZHVsZSB3aGljaCBpcyBub3QgcHJlc2VudCB3aWxsIGJlIGxvYWRlZCBvbiBkZW1hbmQuIFNlZSB0aGUKTDwvIlNFQ1VSSVRZIj4gc2VjdGlvbiBmb3IgZGV0YWlsZWQgZGVzY3JpcHRpb24uCgpXaGVuIHN0YXRpY2FsbHkgZGVwbG95aW5nIGEgU09BUCBTZXJ2ZXIsIHlvdSBuZWVkIHRvIGtub3cgYWxsIG1vZHVsZXMgaGFuZGxpbmcKU09BUCByZXF1ZXN0cyBiZWZvcmUuCgpEeW5hbWljIGRlcGxveW1lbnQgYWxsb3dzIGV4dGVuZGluZyB5b3VyIFNPQVAgU2VydmVyJ3MgaW50ZXJmYWNlIGJ5IGp1c3QKaW5zdGFsbGluZyBhbm90aGVyIG1vZHVsZSBpbnRvIHRoZSBkaXNwYXRjaF90byBwYXRoIChzZWUgYmVsb3cpLgoKPWhlYWQzIFNUQVRJQyBERVBMT1lNRU5UIEVYQU1QTEUKCiAgdXNlIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDsKICB1c2UgTXk6OkV4YW1wbGVzOyAgICAgICAgICAgIyBtb2R1bGUgaXMgcHJlbG9hZGVkCgogIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6Q0dJCiAgICAgIyBkZXBsb3llZCBtb2R1bGUgc2hvdWxkIGJlIHByZXNlbnQgaGVyZSBvciBjbGllbnQgd2lsbCBnZXQKICAgICAjICdhY2Nlc3MgZGVuaWVkJwogICAgLT4gZGlzcGF0Y2hfdG8oJ015OjpFeGFtcGxlcycpCiAgICAtPiBoYW5kbGU7CgpGb3Igc3RhdGljIGRlcGxveW1lbnQgeW91IHNob3VsZCBzcGVjaWZ5IHRoZSBNT0RVTEUgbmFtZSBkaXJlY3RseS4KCllvdSBzaG91bGQgYWxzbyB1c2Ugc3RhdGljIGJpbmRpbmcgd2hlbiB5b3UgaGF2ZSBzZXZlcmFsIGRpZmZlcmVudCBjbGFzc2VzIGluCm9uZSBmaWxlIGFuZCB3YW50IHRvIG1ha2UgdGhlbSBhdmFpbGFibGUgZm9yIFNPQVAgY2FsbHMuCgo9aGVhZDMgRFlOQU1JQyBERVBMT1lNRU5UIEVYQU1QTEUKCiAgdXNlIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDsKICAjIG5hbWUgaXMgdW5rbm93biwgbW9kdWxlIHdpbGwgYmUgbG9hZGVkIG9uIGRlbWFuZAoKICBTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkNHSQogICAgIyBkZXBsb3llZCBtb2R1bGUgc2hvdWxkIGJlIHByZXNlbnQgaGVyZSBvciBjbGllbnQgd2lsbCBnZXQgJ2FjY2VzcyBkZW5pZWQnCiAgICAtPiBkaXNwYXRjaF90bygnL1lvdXIvUGF0aC9Uby9EZXBsb3llZC9Nb2R1bGVzJywgJ015OjpFeGFtcGxlcycpCiAgICAtPiBoYW5kbGU7CgpGb3IgZHluYW1pYyBkZXBsb3ltZW50IHlvdSBjYW4gc3BlY2lmeSB0aGUgbmFtZSBlaXRoZXIgZGlyZWN0bHkgKGluIHRoYXQgY2FzZQppdCB3aWxsIGJlIEM8cmVxdWlyZT5kIHdpdGhvdXQgYW55IHJlc3RyaWN0aW9uKSBvciBpbmRpcmVjdGx5LCB3aXRoIGEgUEFUSC4gSW4KdGhhdCBjYXNlLCB0aGUgT05MWSBwYXRoIHRoYXQgd2lsbCBiZSBhdmFpbGFibGUgd2lsbCBiZSB0aGUgUEFUSCBnaXZlbiB0byB0aGUKZGlzcGF0Y2hfdG8oKSBtZXRob2QpLiBGb3IgaW5mb3JtYXRpb24gaG93IHRvIGhhbmRsZSB0aGlzIHNpdHVhdGlvbiBzZWUKTDwvIlNFQ1VSSVRZIj4gc2VjdGlvbi4KCj1oZWFkMyBTVU1NQVJZCgogIGRpc3BhdGNoX3RvKAogICAgIyBkeW5hbWljIGRpc3BhdGNoIHRoYXQgYWxsb3dzIGFjY2VzcyB0byBBTEwgbW9kdWxlcyBpbiBzcGVjaWZpZWQgZGlyZWN0b3J5CiAgICBQQVRIL1RPL01PRFVMRVMKICAgICMgMS4gc3BlY2lmaWVzIGRpcmVjdG9yeQogICAgIyAtLSBBTkQgLS0KICAgICMgMi4gZ2l2ZXMgYWNjZXNzIHRvIEFMTCBtb2R1bGVzIGluIHRoaXMgZGlyZWN0b3J5IHdpdGhvdXQgbGltaXRzCgogICAgIyBzdGF0aWMgZGlzcGF0Y2ggdGhhdCBhbGxvd3MgYWNjZXNzIHRvIEFMTCBtZXRob2RzIGluIHBhcnRpY3VsYXIgTU9EVUxFCiAgICBNT0RVTEUKICAgICMgIDEuIGdpdmVzIGFjY2VzcyB0byBwYXJ0aWN1bGFyIG1vZHVsZSAoYWxsIGF2YWlsYWJsZSBtZXRob2RzKQogICAgIyAgUFJFUkVRVUlTSVRFUzoKICAgICMgICAgbW9kdWxlIHNob3VsZCBiZSBsb2FkZWQgbWFudWFsbHkgKGZvciBleGFtcGxlIHdpdGggJ3VzZSAuLi4nKQogICAgIyAgICAtLSBPUiAtLQogICAgIyAgICB5b3UgY2FuIHN0aWxsIHNwZWNpZnkgaXQgaW4gUEFUSC9UTy9NT0RVTEVTCgogICAgIyBzdGF0aWMgZGlzcGF0Y2ggdGhhdCBhbGxvd3MgYWNjZXNzIHRvIHBhcnRpY3VsYXIgbWV0aG9kIE9OTFkKICAgIE1PRFVMRTo6bWV0aG9kCiAgICAjIHNhbWUgYXMgTU9EVUxFLCBidXQgZ2l2ZXMgYWNjZXNzIHRvIE9OTFkgcGFydGljdWxhciBtZXRob2QsCiAgICAjIHNvIHRoZXJlIGlzIG5vdCBtdWNoIHNlbnNlIHRvIHVzZSBib3RoIE1PRFVMRSBhbmQgTU9EVUxFOjptZXRob2QKICAgICMgZm9yIHRoZSBzYW1lIE1PRFVMRQogICk7CgpJbiBhZGRpdGlvbiB0byB0aGlzIEM8U09BUDo6TGl0ZT4gYWxzbyBzdXBwb3J0cyBhbiBleHBlcmltZW50YWwgc3ludGF4IHRoYXQKYWxsb3dzIHlvdSB0byBiaW5kIGEgc3BlY2lmaWMgVVJMIG9yIFNPQVBBY3Rpb24gdG8gYSBDTEFTUy9NT0RVTEUgb3Igb2JqZWN0LgoKRm9yIGV4YW1wbGU6CgogIGRpc3BhdGNoX3dpdGgoewogICAgVVJJID0+IE1PRFVMRSwgICAgICAgICMgJ2h0dHA6Ly93d3cuc29hcGxpdGUuY29tLycgPT4gJ015OjpDbGFzcycsCiAgICBTT0FQQWN0aW9uID0+IE1PRFVMRSwgIyAnaHR0cDovL3d3dy5zb2FwbGl0ZS5jb20vbWV0aG9kJyA9PiAnQW5vdGhlcjo6Q2xhc3MnLAogICAgVVJJID0+IG9iamVjdCwgICAgICAgICMgJ2h0dHA6Ly93d3cuc29hcGxpdGUuY29tL29iaicgPT4gTXk6OkNsYXNzLT5uZXcsCiAgfSkKCkM8VVJJPiBpcyBjaGVja2VkIGJlZm9yZSBDPFNPQVBBY3Rpb24+LiBZb3UgbWF5IHVzZSBib3RoIHRoZSBDPGRpc3BhdGNoX3RvKCk+CmFuZCBDPGRpc3BhdGNoX3dpdGgoKT4gbWV0aG9kcyBpbiB0aGUgc2FtZSBzZXJ2ZXIsIGJ1dCBub3RlIHRoYXQKQzxkaXNwYXRjaF93aXRoKCk+IGhhcyBhIGhpZ2hlciBvcmRlciBvZiBwcmVjZWRlbmNlLiBDPGRpc3BhdGNoX3RvKCk+IHdpbGwgYmUKY2hlY2tlZCBvbmx5IGFmdGVyIEM8VVJJPiBhbmQgQzxTT0FQQWN0aW9uPiBoYXMgYmVlbiBjaGVja2VkLgoKU2VlIGFsc286Ckw8RVhBTVBMRSBBUEFDSEU6OlJFR0lTVFJZIFVTQUdFfFNPQVA6OlRyYW5zcG9ydC8iRVhBTVBMRSBBUEFDSEU6OlJFR0lTVFJZIFVTQUdFIj4sCkw8LyJTRUNVUklUWSI+Cgo9aGVhZDIgQ09NUFJFU1NJT04KCkM8U09BUDo6TGl0ZT4gcHJvdmlkZXMgeW91IG9wdGlvbiB0byBlbmFibGUgdHJhbnNwYXJlbnQgY29tcHJlc3Npb24gb3ZlciB0aGUKd2lyZS4gQ29tcHJlc3Npb24gY2FuIGJlIGVuYWJsZWQgYnkgc3BlY2lmeWluZyBhIHRocmVzaG9sZCB2YWx1ZSAoaW4gdGhlIGZvcm0Kb2Yga2lsb2J5dGVzKSBmb3IgY29tcHJlc3Npb24gb24gYm90aCB0aGUgY2xpZW50IGFuZCBzZXJ2ZXIgc2lkZXM6CgpJPE5vdGU6IENvbXByZXNzaW9uIGN1cnJlbnRseSBvbmx5IHdvcmtzIGZvciBIVFRQIGJhc2VkIHNlcnZlcnMgYW5kIGNsaWVudHMuPgoKQjxDbGllbnQgQ29kZT4KCiAgcHJpbnQgU09BUDo6TGl0ZQogICAgLT51cmkoJ2h0dHA6Ly9sb2NhbGhvc3QvTXkvUGFyYW1ldGVycycpCiAgICAtPnByb3h5KCdodHRwOi8vbG9jYWxob3N0LycsIG9wdGlvbnMgPT4ge2NvbXByZXNzX3RocmVzaG9sZCA9PiAxMDAwMH0pCiAgICAtPmVjaG8oMSB4IDEwMDAwKQogICAgLT5yZXN1bHQ7CgpCPFNlcnZlciBDb2RlPgoKICBteSAkc2VydmVyID0gU09BUDo6VHJhbnNwb3J0OjpIVFRQOjpDR0kKICAgIC0+ZGlzcGF0Y2hfdG8oJ015OjpQYXJhbWV0ZXJzJykKICAgIC0+b3B0aW9ucyh7Y29tcHJlc3NfdGhyZXNob2xkID0+IDEwMDAwfSkKICAgIC0+aGFuZGxlOwoKRm9yIG1vcmUgaW5mb3JtYXRpb24gc2VlIEw8Q09NUFJFU1NJT058U09BUDo6VHJhbnNwb3J0LyJDT01QUkVTU0lPTiI+IGluCkw8SFRUUDo6VHJhbnNwb3J0Pi4KCj1oZWFkMSBTRUNVUklUWQoKRm9yIHNlY3VyaXR5IHJlYXNvbnMsIHRoZSBleGlzaXRpbmcgcGF0aCBmb3IgUGVybCBtb2R1bGVzIChDPEBJTkM+KSB3aWxsIGJlCmRpc2FibGVkIG9uY2UgeW91IGhhdmUgY2hvc2VuIGR5bmFtaWMgZGVwbG95bWVudCBhbmQgc3BlY2lmaWVkIHlvdXIgb3duCkM8UEFUSC8+LiBJZiB5b3Ugd2lzaCB0byBhY2Nlc3Mgb3RoZXIgbW9kdWxlcyBpbiB5b3VyIGluY2x1ZGVkIHBhY2thZ2UgeW91CmhhdmUgc2V2ZXJhbCBvcHRpb25zOgoKPW92ZXIgNAoKPWl0ZW0gMQoKU3dpdGNoIHRvIHN0YXRpYyBsaW5raW5nOgoKICAgdXNlIE1PRFVMRTsKICAgJHNlcnZlci0+ZGlzcGF0Y2hfdG8oJ01PRFVMRScpOwoKV2hpY2ggY2FuIGFsc28gYmUgdXNlZnVsIHdoZW4geW91IHdhbnQgdG8gaW1wb3J0IHNvbWV0aGluZyBzcGVjaWZpYyBmcm9tIHRoZQpkZXBsb3llZCBtb2R1bGVzOgoKICAgdXNlIE1PRFVMRSBxdyhpbXBvcnRfbGlzdCk7Cgo9aXRlbSAyCgpDaGFuZ2UgQzx1c2U+IHRvIEM8cmVxdWlyZT4uIFRoZSBwYXRoIGlzIG9ubHkgdW5hdmFpbGFibGUgZHVyaW5nIHRoZQppbml0aWFsaXphdGlvbiBwaGFzZS4gSXQgaXMgYXZhaWxhYmxlIG9uY2UgbW9yZSBkdXJpbmcgZXhlY3V0aW9uLiBUaGVyZWZvcmUsCmlmIHlvdSB1dGlsaXplIEM8cmVxdWlyZT4gc29tZXdoZXJlIGluIHlvdXIgcGFja2FnZSwgaXQgd2lsbCB3b3JrLgoKPWl0ZW0gMwoKV3JhcCBDPHVzZT4gaW4gYW4gQzxldmFsPiBibG9jazoKCiAgIGV2YWwgJ3VzZSBNT0RVTEUgcXcoaW1wb3J0X2xpc3QpJzsgZGllIGlmICRAOwoKPWl0ZW0gNAoKU2V0IHlvdXIgaW5jbHVkZSBwYXRoIGluIHlvdXIgcGFja2FnZSBhbmQgdGhlbiBzcGVjaWZ5IEM8dXNlPi4gRG9uJ3QgZm9yZ2V0IHRvCnB1dCBDPEBJTkM+IGluIGEgQzxCRUdJTnt9PiBibG9jayBvciBpdCB3b24ndCB3b3JrLiBGb3IgZXhhbXBsZSwKCiAgIEJFR0lOIHsgQElOQyA9IHF3KG15X2RpcmVjdG9yeSk7IHVzZSBNT0RVTEUgfQoKPWJhY2sKCj1oZWFkMSBJTlRFUk9QRVJBQklMSVRZCgo9aGVhZDIgTWljcm9zb2Z0IC5ORVQgY2xpZW50IHdpdGggU09BUDo6TGl0ZSBTZXJ2ZXIKCkluIG9yZGVyIHRvIHVzZSBhIC5ORVQgY2xpZW50IHdpdGggYSBTT0FQOjpMaXRlIHNlcnZlciwgYmUgc3VyZSB5b3UgdXNlIGZ1bGx5CnF1YWxpZmllZCBuYW1lcyBmb3IgeW91ciByZXR1cm4gdmFsdWVzLiBGb3IgZXhhbXBsZToKCiAgcmV0dXJuIFNPQVA6OkRhdGEtPm5hbWUoJ215bmFtZScpCiAgICAgICAgICAgICAgICAgICAtPnR5cGUoJ3N0cmluZycpCiAgICAgICAgICAgICAgICAgICAtPnVyaSgkTVlfTkFNRVNQQUNFKQogICAgICAgICAgICAgICAgICAgLT52YWx1ZSgkb3V0cHV0KTsKCkluIGFkZGl0aW9uIHNlZSBjb21tZW50IGFib3V0IGRlZmF1bHQgaW5jb2RpbmcgaW4gLk5FVCBXZWIgU2VydmljZXMgYmVsb3cuCgo9aGVhZDIgU09BUDo6TGl0ZSBjbGllbnQgd2l0aCBhIC5ORVQgc2VydmVyCgpJZiBleHBlcmllbmNpbmcgcHJvYmxlbXMgd2hlbiB1c2luZyBhIFNPQVA6OkxpdGUgY2xpZW50IHRvIGNhbGwgYSAuTkVUIFdlYgpzZXJ2aWNlLCBpdCBpcyByZWNvbW1lbmRlZCB5b3UgY2hlY2ssIG9yIGFkaGVyZSB0byBhbGwgb2YgdGhlIGZvbGxvd2luZwpyZWNvbW1lbmRhdGlvbnM6Cgo9b3ZlciA0Cgo9aXRlbSBEZWNsYXJlIGEgcHJvcGVyIHNvYXBBY3Rpb24gaW4geW91ciBjYWxsCgpGb3IgZXhhbXBsZSwgdXNlCkM8b25fYWN0aW9uKCBzdWIgeyAnaHR0cDovL3d3dy5teXVyaS5jb20vV2ViU2VydmljZS5hc3B4I3NvbWVNZXRob2QnOyB9ICk+LgoKPWl0ZW0gRGlzYWJsZSBjaGFyc2V0IGRlZmluaXRpb24gaW4gQ29udGVudC10eXBlIGhlYWRlcgoKU29tZSB1c2VycyBoYXZlIHNhaWQgdGhhdCBNaWNyb3NvZnQgLk5FVCBwcmVmZXJzIHRoZSB2YWx1ZSBvZgp0aGUgQ29udGVudC10eXBlIGhlYWRlciB0byBiZSBhIG1pbWV0eXBlIGV4Y2x1c2l2ZWx5LCBidXQgU09BUDo6TGl0ZSBzcGVjaWZpZXMKYSBjaGFyYWN0ZXIgc2V0IGluIGFkZGl0aW9uIHRvIHRoZSBtaW1ldHlwZS4gVGhpcyByZXN1bHRzIGluIGFuIGVycm9yIHNpbWlsYXIKdG86CgogIFNlcnZlciBmb3VuZCByZXF1ZXN0IGNvbnRlbnQgdHlwZSB0byBiZSAndGV4dC94bWw7IGNoYXJzZXQ9dXRmLTgnLAogIGJ1dCBleHBlY3RlZCAndGV4dC94bWwnCgpUbyB0dXJuIG9mZiB0aGlzIGJlaGF2aW9yIHNwZWNpZnkgdXNlIHRoZSBmb2xsb3dpbmcgY29kZToKCiAgdXNlIFNPQVA6OkxpdGU7CiAgJFNPQVA6OkNvbnN0YW50czo6RE9fTk9UX1VTRV9DSEFSU0VUID0gMTsKICAjIFRoZSByZXN0IG9mIHlvdXIgY29kZQoKPWl0ZW0gVXNlIGZ1bGx5IHF1YWxpZmllZCBuYW1lIGZvciBtZXRob2QgcGFyYW1ldGVycwoKRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmcgY29kZSBpcyBwcmVmZXJyZWQ6CgogIFNPQVA6OkRhdGEtPm5hbWUoUXVlcnkgID0+ICdiaXp0YWxrJykKICAgICAgICAgICAgLT51cmkoJ2h0dHA6Ly90ZW1wdXJpLm9yZy8nKQoKQXMgb3Bwb3NlZCB0bzoKCiAgU09BUDo6RGF0YS0+bmFtZSgnUXVlcnknICA9PiAnYml6dGFsaycpCgo9aXRlbSBQbGFjZSBtZXRob2QgaW4gZGVmYXVsdCBuYW1lc3BhY2UKCkZvciBleGFtcGxlLCB0aGUgZm9sbG93aW5nIGNvZGUgaXMgcHJlZmVycmVkOgoKICBteSAkbWV0aG9kID0gU09BUDo6RGF0YS0+bmFtZSgnYWRkJykKICAgICAgICAgICAgICAgICAgICAgICAgIC0+YXR0cih7eG1sbnMgPT4gJ2h0dHA6Ly90ZW1wdXJpLm9yZy8nfSk7CiAgbXkgQHJjID0gJHNvYXAtPmNhbGwoJG1ldGhvZCA9PiBAcGFybXMpLT5yZXN1bHQ7CgpBcyBvcHBvc2VkIHRvOgoKICBteSBAcmMgPSAkc29hcC0+Y2FsbChhZGQgPT4gQHBhcm1zKS0+cmVzdWx0OwogICMgLS0gT1IgLS0KICBteSBAcmMgPSAkc29hcC0+YWRkKEBwYXJtcyktPnJlc3VsdDsKCj1pdGVtIERpc2FibGUgdXNlIG9mIGV4cGxpY2l0IG5hbWVzcGFjZSBwcmVmaXhlcwoKU29tZSB1c2VyJ3MgaGF2ZSByZXBvcnRlZCB0aGF0IC5ORVQgd2lsbCBzaW1wbHkgbm90IHBhcnNlIG1lc3NhZ2VzIHRoYXQgdXNlCm5hbWVzcGFjZSBwcmVmaXhlcyBvbiBhbnl0aGluZyBidXQgU09BUCBlbGVtZW50cyB0aGVtc2VsdmVzLiBGb3IgZXhhbXBsZSwgdGhlCmZvbGxvd2luZyBYTUwgd291bGQgbm90IGJlIHBhcnNlZDoKCiAgPFNPQVAtRU5WOkVudmVsb3BlIC4uLmF0dHJpYnV0ZXMgc2tpcHBlZD4KICAgIDxTT0FQLUVOVjpCb2R5PgogICAgICA8bmFtZXNwMTpteW1ldGhvZCB4bWxuczpuYW1lc3AxPSJ1cm46TXlVUkkiIC8+CiAgICA8L1NPQVAtRU5WOkJvZHk+CiAgPC9TT0FQLUVOVjpFbnZlbG9wZT4KClNPQVA6OkxpdGUgYWxsb3dzIHVzZXJzIHRvIGRpc2FibGUgdGhlIHVzZSBvZiBleHBsaWNpdCBuYW1lc3BhY2VzIHRocm91Z2ggdGhlCkM8dXNlX3ByZWZpeCgpPiBtZXRob2QuIEZvciBleGFtcGxlLCB0aGUgZm9sbG93aW5nIGNvZGU6CgogICRzb20gPSBTT0FQOjpMaXRlLT51cmkoJ3VybjpNeVVSSScpCiAgICAgICAgICAgICAgICAgICAtPnByb3h5KCRIT1NUKQogICAgICAgICAgICAgICAgICAgLT51c2VfcHJlZml4KDApCiAgICAgICAgICAgICAgICAgICAtPm15TWV0aG9kKCk7CgpXaWxsIHJlc3VsdCBpbiB0aGUgZm9sbG93aW5nIFhNTCwgd2hpY2ggaXMgbW9yZSBwYWxsYXRhYmxlIGJ5IC5ORVQ6CgogIDxTT0FQLUVOVjpFbnZlbG9wZSAuLi5hdHRyaWJ1dGVzIHNraXBwZWQ+CiAgICA8U09BUC1FTlY6Qm9keT4KICAgICAgPG15bWV0aG9kIHhtbG5zPSJ1cm46TXlVUkkiIC8+CiAgICA8L1NPQVAtRU5WOkJvZHk+CiAgPC9TT0FQLUVOVjpFbnZlbG9wZT4KCj1pdGVtIE1vZGlmeSB5b3VyIC5ORVQgc2VydmVyLCBpZiBwb3NzaWJsZQoKU3RlZmFuIFBoYXJpZXMgPHN0ZWZhbnBoQG1pY3Jvc29mdC5jb20+OgoKU09BUDo6TGl0ZSB1c2VzIHRoZSBTT0FQIGVuY29kaW5nIChzZWN0aW9uIDUgb2YgdGhlIHNvYXAgMS4xIHNwZWMpLCBhbmQKdGhlIGRlZmF1bHQgZm9yIC5ORVQgV2ViIFNlcnZpY2VzIGlzIHRvIHVzZSBhIGxpdGVyYWwgZW5jb2RpbmcuIFNvCmVsZW1lbnRzIGluIHRoZSByZXF1ZXN0IGFyZSB1bnF1YWxpZmllZCwgYnV0IHlvdXIgc2VydmljZSBleHBlY3RzIHRoZW0gdG8KYmUgcXVhbGlmaWVkLiAuTmV0IFdlYiBTZXJ2aWNlcyBoYXMgYSB3YXkgZm9yIHlvdSB0byBjaGFuZ2UgdGhlIGV4cGVjdGVkCm1lc3NhZ2UgZm9ybWF0LCB3aGljaCBzaG91bGQgYWxsb3cgeW91IHRvIGdldCB5b3VyIGludGVyb3Agd29ya2luZy4KQXQgdGhlIHRvcCBvZiB5b3VyIGNsYXNzIGluIHRoZSBhc214LCBhZGQgdGhpcyBhdHRyaWJ1dGUgKGZvciBCZXRhIDEpOgoKICBbU29hcFNlcnZpY2UoU3R5bGU9U29hcFNlcnZpY2VTdHlsZS5SUEMpXQoKQW5vdGhlciBzb3VyY2Ugc2FpZCBpdCBtaWdodCBiZSB0aGlzIGF0dHJpYnV0ZSAoZm9yIEJldGEgMik6CgogIFtTb2FwUnBjU2VydmljZV0KCkZ1bGwgV2ViIFNlcnZpY2UgdGV4dCBtYXkgbG9vayBsaWtlOgoKICA8JUAgV2ViU2VydmljZSBMYW5ndWFnZT0iQyMiIENsYXNzPSJUZXN0IiAlPgogIHVzaW5nIFN5c3RlbTsKICB1c2luZyBTeXN0ZW0uV2ViLlNlcnZpY2VzOwogIHVzaW5nIFN5c3RlbS5YbWwuU2VyaWFsaXphdGlvbjsKCiAgW1NvYXBTZXJ2aWNlKFN0eWxlPVNvYXBTZXJ2aWNlU3R5bGUuUlBDKV0KICBwdWJsaWMgY2xhc3MgVGVzdCA6IFdlYlNlcnZpY2UgewogICAgW1dlYk1ldGhvZF0KICAgIHB1YmxpYyBpbnQgYWRkKGludCBhLCBpbnQgYikgewogICAgICByZXR1cm4gYSArIGI7CiAgICB9CiAgfQoKQW5vdGhlciBleGFtcGxlIGZyb20gS2lyaWxsIEdhdnJ5bHl1ayA8a2lyaWxsZ0BtaWNyb3NvZnQuY29tPjoKCiJZb3UgY2FuIGluc2VydCBbU29hcFJwY1NlcnZpY2UoKV0gYXR0cmlidXRlIGVpdGhlciBvbiB5b3VyIGNsYXNzIG9yIG9uCm9wZXJhdGlvbiBsZXZlbCIuCgogIDwlQCBXZWJTZXJ2aWNlIExhbmd1YWdlPUNTIGNsYXNzPSJEYXRhVHlwZS5TdHJpbmdUZXN0IiU+CgogIG5hbWVzcGFjZSBEYXRhVHlwZSB7CgogICAgdXNpbmcgU3lzdGVtOwogICAgdXNpbmcgU3lzdGVtLldlYi5TZXJ2aWNlczsKICAgIHVzaW5nIFN5c3RlbS5XZWIuU2VydmljZXMuUHJvdG9jb2xzOwogICAgdXNpbmcgU3lzdGVtLldlYi5TZXJ2aWNlcy5EZXNjcmlwdGlvbjsKCiAgIFtTb2FwUnBjU2VydmljZSgpXQogICBwdWJsaWMgY2xhc3MgU3RyaW5nVGVzdDogV2ViU2VydmljZSB7CiAgICAgW1dlYk1ldGhvZF0KICAgICBbU29hcFJwY01ldGhvZCgpXQogICAgIHB1YmxpYyBzdHJpbmcgUmV0U3RyaW5nKHN0cmluZyB4KSB7CiAgICAgICByZXR1cm4oeCk7CiAgICAgfQogICB9CiB9CgpFeGFtcGxlIGZyb20gWWFubiBDaHJpc3RlbnNlbiA8eWFubmNAbWljcm9zb2Z0LmNvbT46CgogIHVzaW5nIFN5c3RlbTsKICB1c2luZyBTeXN0ZW0uV2ViLlNlcnZpY2VzOwogIHVzaW5nIFN5c3RlbS5XZWIuU2VydmljZXMuUHJvdG9jb2xzOwoKICBuYW1lc3BhY2UgQ3VycmVuY3kgewogICAgW1dlYlNlcnZpY2UoTmFtZXNwYWNlPSJodHRwOi8vd3d3LnlvdXJkb21haW4uY29tL2V4YW1wbGUiKV0KICAgIFtTb2FwUnBjU2VydmljZV0KICAgIHB1YmxpYyBjbGFzcyBFeGNoYW5nZSB7CiAgICAgIFtXZWJNZXRob2RdCiAgICAgIHB1YmxpYyBkb3VibGUgZ2V0UmF0ZShTdHJpbmcgY291bnRyeSwgU3RyaW5nIGNvdW50cnkyKSB7CiAgICAgICAgcmV0dXJuIDEyMi42OTsKICAgICAgfQogICAgfQogIH0KCj1iYWNrCgpTcGVjaWFsIHRoYW5rcyBnb2VzIHRvIHRoZSBmb2xsb3dpbmcgcGVvcGxlIGZvciBwcm92aWRpbmcgdGhlIGFib3ZlCmRlc2NyaXB0aW9uIGFuZCBkZXRhaWxzIG9uIC5ORVQgaW50ZXJvcGVyYWJpbGl0eSBpc3N1ZXM6CgpQZXRyIEphbmF0YSA8cGV0ci5qYW5hdGFAaS5jej4sCgpTdGVmYW4gUGhhcmllcyA8c3RlZmFucGhAbWljcm9zb2Z0LmNvbT4sCgpCcmlhbiBKZXBzb24gPGJqZXBzb25AamVwc3RvbmUubmV0PiwgYW5kIG90aGVycwoKPWhlYWQxIFRST1VCTEVTSE9PVElORwoKPW92ZXIgNAoKPWl0ZW0gU09BUDo6TGl0ZSBzZXJpYWxpemVzICIxODM3MyIgYXMgYW4gaW50ZWdlciwgYnV0IEkgd2FudCBpdCB0byBiZSBhIHN0cmluZyEKClNPQVA6OkxpdGUgZ3Vlc3NlcyBkYXRhdHlwZXMgZnJvbSB0aGUgY29udGVudCBwcm92aWRlZCwgdXNpbmcgYSBzZXQgb2YKY29tbW9uLXNlbnNlIHJ1bGVzLiBUaGVzZSBydWxlcyBhcmUgbm90IDEwMCUgcmVsaWFibGUsIHRob3VnaCB0aGV5IGZpdCBmb3IKbW9zdCBkYXRhLgoKWW91IG1heSBmb3JjZSB0aGUgdHlwZSBieSBwYXNzaW5nIGEgU09BUDo6RGF0YSBvYmplY3Qgd2l0aCBhIHR5cGUgc3BlY2lmaWVkOgoKIG15ICRwcm94eSA9IFNPQVA6OkxpdGUtPnByb3h5KCdodHRwOi8vd3d3LmV4YW1wbGUub3JnL3NvYXBzZXJ2aWNlJyk7CiBteSAkc29tID0gJHByb3h5LT5teU1ldGhvZCgKICAgICBTT0FQOjpEYXRhLT5uYW1lKCdmb28nKS0+dmFsdWUoMTIzNDUpLT50eXBlKCdzdHJpbmcnKQogKTsKCllvdSBtYXkgYWxzbyBjaGFuZ2UgdGhlIHByZWNlZGVuY2Ugb2YgdGhlIHR5cGUtZ3Vlc3NpbmcgcnVsZXMuIE5vdGUgdGhhdCB0aGlzCm1lYW5zIGZpZGRsaW5nIHdpdGggU09BUDo6TGl0ZSdzIGludGVybmFscyAtIHRoaXMgbWF5IG5vdCB3b3JrIGFzCmV4cGVjdGVkIGluIGZ1dHVyZSB2ZXJzaW9ucy4KClRoZSBleGFtcGxlIGFib3ZlIGZvcmNlcyBldmVyeXRoaW5nIHRvIGJlIGVuY29kZWQgYXMgc3RyaW5nICh0aGlzIGlzIGJlY2F1c2UKdGhlIHN0cmluZyB0ZXN0IGlzIG5vcm1hbGx5IGxhc3QgYW5kIGFsbHdheXMgcmV0dXJucyB0cnVlKToKCiAgbXkgQGxpc3QgPSBxdygtMSA0NSBmb28gYmFyIDM4MzgpOwogIG15ICRwcm94eSA9IFNPQVA6OkxpdGUtPnVyaSgkdXJpKS0+cHJveHkoJHByb3h5VXJsKTsKICAkcHJveHktPnNlcmlhbGl6ZXItPnR5cGVsb29rdXAtPntzdHJpbmd9LT5bMF0gPSAwOwogICRwcm94eS0+bXlNZXRob2QoXEBsaXN0KTsKClNlZSBMPFNPQVA6OlNlcmlhbGl6ZXJ8U09BUDo6U2VyaWFsaXplci9BVVRPVFlQSU5HPiBmb3IgbW9yZSBkZXRhaWxzLgoKPWl0ZW0gQzwrYXV0b2Rpc3BhdGNoPiBkb2Vzbid0IHdvcmsgaW4gUGVybCA1LjgKClRoZXJlIGlzIGEgYnVnIGluIFBlcmwgNS44J3MgQzxVTklWRVJTQUw6OkFVVE9MT0FEPiBmdW5jdGlvbmFsaXR5IHRoYXQKcHJldmVudHMgdGhlIEM8K2F1dG9kaXNwYXRjaD4gZnVuY3Rpb25hbGl0eSBmcm9tIHdvcmtpbmcgcHJvcGVybHkuIFRoZQp3b3JrYXJvdW5kIGlzIHRvIHVzZSBDPGRpc3BhdGNoX2Zyb20+IGluc3RlYWQuIFdoZXJlIHlvdSBtaWdodCBub3JtYWxseSBkbwpzb21ldGhpbmcgbGlrZSB0aGlzOgoKICAgdXNlIFNvbWU6Ok1vZHVsZTsKICAgdXNlIFNPQVA6OkxpdGUgK2F1dG9kaXNwYXRjaCA9PgogICAgICAgdXJpID0+ICd1cm46Rm9vJwogICAgICAgcHJveHkgPT4gJ2h0dHA6Ly8uLi4nOwoKWW91IHdvdWxkIGRvIHNvbWV0aGluZyBsaWtlIHRoaXM6CgogICB1c2UgU09BUDo6TGl0ZSBkaXNwYXRjaF9mcm9tKFNvbWU6Ok1vZHVsZSkgPT4KICAgICAgIHVyaSA9PiAndXJuOkZvbycKICAgICAgIHByb3h5ID0+ICdodHRwOi8vLi4uJzsKCj1pdGVtIFByb2JsZW1zIHVzaW5nIFNPQVA6OkxpdGUncyBDT00gSW50ZXJmYWNlCgo9b3ZlcgoKPWl0ZW0gQ2FuJ3QgY2FsbCBtZXRob2QgInNlcnZlciIgb24gdW5kZWZpbmVkIHZhbHVlCgpZb3UgcHJvYmFibHkgZGlkIG5vdCByZWdpc3RlciBGPExpdGUuZGxsPiB1c2luZyBDPHJlZ3N2cjMyIExpdGUuZGxsPgoKPWl0ZW0gRmFpbGVkIHRvIGxvYWQgUGVybEN0cmwgUnVudGltZQoKSXQgaXMgbGlrZWx5IHRoYXQgeW91IGhhdmUgaW5zdGFsbCBQZXJsIGluIHR3byBkaWZmZXJlbnQgbG9jYXRpb25zIGFuZCB0aGUKbG9jYXRpb24gb2YgQWN0aXZlU3RhdGUncyBQZXJsIGlzIG5vdCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgUGVybCBzcGVjaWZpZWQKaW4geW91ciBQQVRILiBUbyByZWN0aWZ5LCByZW5hbWUgdGhlIGRpcmVjdG9yeSBpbiB3aGljaCB0aGUgbm9uLUFjdGl2ZVN0YXRlClBlcmwgaXMgaW5zdGFsbGVkLCBvciBiZSBzdXJlIHRoZSBwYXRoIHRvIEFjdGl2ZVN0YXRlJ3MgUGVybCBpcyBzcGVjaWZpZWQKcHJpb3IgdG8gYW55IG90aGVyIGluc3RhbmNlIG9mIFBlcmwgaW4geW91ciBQQVRILgoKPWJhY2sKCj1pdGVtIER5bmFtaWMgbGlicmFyaWVzIGFyZSBub3QgZm91bmQKCklmIHlvdSBhcmUgdXNpbmcgdGhlIEFwYWNoZSB3ZWIgc2VydmVyLCBhbmQgeW91IGFyZSBzZWVpbmcgc29tZXRoaW5nIGxpa2UgdGhlCmZvbGxvd2luZyBpbiB5b3VyIHdlYnNlcnZlciBsb2cgZmlsZToKCiAgQ2FuJ3QgbG9hZCAnL3Vzci9sb2NhbC9saWIvcGVybDUvc2l0ZV9wZXJsLy4uLi9YTUwvUGFyc2VyL0V4cGF0L0V4cGF0LnNvJwogICAgZm9yIG1vZHVsZSBYTUw6OlBhcnNlcjo6RXhwYXQ6IGR5bmFtaWMgbGlua2VyOiAvdXNyL2xvY2FsL2Jpbi9wZXJsOgogICAgbGliZXhwYXQuc28uMCBpcyBORUVERUQsIGJ1dCBvYmplY3QgZG9lcyBub3QgZXhpc3QgYXQKICAgIC91c3IvbG9jYWwvbGliL3Blcmw1Ly4uLi9EeW5hTG9hZGVyLnBtIGxpbmUgMjAwLgoKVGhlbiB0cnkgcGxhY2luZyB0aGUgZm9sbG93aW5nIGludG8geW91ciBGPGh0dHBkLmNvbmY+IGZpbGUgYW5kIHNlZSBpZiBpdApmaXhlcyB5b3VyIHByb2JsZW0uCgogPElmTW9kdWxlIG1vZF9lbnYuYz4KICAgICBQYXNzRW52IExEX0xJQlJBUllfUEFUSAogPC9JZk1vZHVsZT4KCj1pdGVtIFNPQVAgY2xpZW50IHJlcG9ydHMgIjUwMCB1bmV4cGVjdGVkIEVPRiBiZWZvcmUgc3RhdHVzIGxpbmUgc2VlbgoKU2VlIEw8LyJBcGFjaGUgaXMgY3Jhc2hpbmcgd2l0aCBzZWdmYXVsdHMiPgoKPWl0ZW0gQXBhY2hlIGlzIGNyYXNoaW5nIHdpdGggc2VnZmF1bHRzCgpVc2luZyBDPFNPQVA6OkxpdGU+IChvciBMPFhNTDo6UGFyc2VyOjpFeHBhdD4pIGluIGNvbWJpbmF0aW9uIHdpdGggbW9kX3BlcmwKY2F1c2VzIHJhbmRvbSBzZWdtZW50YXRpb24gZmF1bHRzIGluIGh0dHBkIHByb2Nlc3Nlcy4gVG8gZml4LCB0cnkgY29uZmlndXJpbmcKQXBhY2hlIHdpdGggdGhlIGZvbGxvd2luZzoKCiBSVUxFX0VYUEFUPW5vCgpJZiB5b3UgYXJlIHVzaW5nIEFwYWNoZSAxLjMuMjAgYW5kIGxhdGVyLCB0cnkgY29uZmlndXJpbmcgQXBhY2hlIHdpdGggdGhlCmZvbGxvd2luZyBvcHRpb246CgogLi9jb25maWd1cmUgLS1kaXNhYmxlLXJ1bGU9RVhQQVQKClNlZSBodHRwOi8vYXJjaGl2ZS5jb3ZhbGVudC5uZXQvbW9kcGVybC8yMDAwLzA0LzAxODUueG1sIGZvciBtb3JlIGRldGFpbHMgYW5kCmxvdCBvZiB0aGFua3MgdG8gUm9iZXJ0IEJhcnRhIDxyaG9AYmlncG9uZC5uZXQuYXU+IGZvciBleHBsYWluaW5nIHRoaXMgd2VpcmQKYmVoYXZpb3IuCgpJZiB0aGlzIGRvZXNuJ3QgYWRkcmVzcyB0aGUgcHJvYmxlbSwgeW91IG1heSB3aXNoIHRvIHRyeSBDPC1VdXNlbXltYWxsb2M+LApvciBhIHNpbWlsYXIgb3B0aW9uIGluIG9yZGVyIHRvIGluc3RydWN0IFBlcmwgdG8gdXNlIHRoZSBzeXN0ZW0ncyBvd24gQzxtYWxsb2M+LgoKVGhhbmtzIHRvIFRpbSBCdW5jZSA8VGltLkJ1bmNlQHBvYm94LmNvbT4uCgo9aXRlbSBDR0kgc2NyaXB0cyBkbyBub3Qgd29yayB1bmRlciBNaWNyb3NvZnQgSW50ZXJuZXQgSW5mb3JtYXRpb24gU2VydmVyIChJSVMpCgpDR0kgc2NyaXB0cyBtYXkgbm90IHdvcmsgdW5kZXIgSUlTIHVubGVzcyBzY3JpcHRzIHVzZSB0aGUgQzwucGw+IGV4dGVuc2lvbiwKb3Bwb3NlZCB0byBDPC5jZ2k+LgoKPWl0ZW0gSmF2YSBTQVggcGFyc2VyIHVuYWJsZSB0byBwYXJzZSBtZXNzYWdlIGNvbXBvc2VkIGJ5IFNPQVA6OkxpdGUKCkluIHNvbWUgY2FzZXMgU09BUCBtZXNzYWdlcyBjcmVhdGVkIGJ5IEM8U09BUDo6TGl0ZT4gbWF5IG5vdCBiZSBwYXJzZWQKcHJvcGVybHkgYnkgYSBTQVgyL0phdmEgWE1MIHBhcnNlci4gVGhpcyBpcyBkdWUgdG8gYSBrbm93biBidWcgaW4KQzxvcmcueG1sLnNheC5oZWxwZXJzLlBhcnNlckFkYXB0ZXI+LiBUaGlzIGJ1ZyBtYW5pZmVzdHMgaXRzZWxmIHdoZW4gYW4KYXR0cmlidXRlIGluIGFuIFhNTCBlbGVtZW50IG9jY3VycyBwcmlvciB0byB0aGUgWE1MIG5hbWVzcGFjZSBkZWNsYXJhdGlvbiBvbgp3aGljaCBpdCBkZXBlbmRzLiBIb3dldmVyLCBhY2NvcmRpbmcgdG8gdGhlIFhNTCBzcGVjaWZpY2F0aW9uLCB0aGUgb3JkZXIgb2YKdGhlc2UgYXR0cmlidXRlcyBpcyBub3Qgc2lnbmlmaWNhbnQuCgpodHRwOi8vd3d3Lm1lZ2dpbnNvbi5jb20vU0FYL2luZGV4Lmh0bWwKClRoYW5rcyB0byBTdGV2ZSBBbHBlcnQgKFN0ZXZlX0FscGVydEBpZHguY29tKSBmb3IgcG9pbnRpbmcgb24gaXQuCgo9YmFjawoKPWhlYWQxIFBFUkZPUk1BTkNFCgo9b3ZlciA0Cgo9aXRlbSBQcm9jZXNzaW5nIG9mIFhNTCBlbmNvZGVkIGZyYWdtZW50cwoKQzxTT0FQOjpMaXRlPiBpcyBiYXNlZCBvbiBMPFhNTDo6UGFyc2VyPiB3aGljaCBpcyBiYXNpY2FsbHkgd3JhcHBlciBhcm91bmQKSmFtZXMgQ2xhcmsncyBleHBhdCBwYXJzZXIuIEV4cGF0J3MgYmVoYXZpb3IgZm9yIHBhcnNpbmcgWE1MIGVuY29kZWQgc3RyaW5nCmNhbiBhZmZlY3QgcHJvY2Vzc2luZyBtZXNzYWdlcyB0aGF0IGhhdmUgbG90IG9mIGVuY29kZWQgZW50aXRpZXMsIGxpa2UgWE1MCmZyYWdtZW50cywgZW5jb2RlZCBhcyBzdHJpbmdzLiBQcm92aWRpbmcgbG93LWxldmVsIGRldGFpbHMsIHBhcnNlciB3aWxsIGNhbGwKY2hhcigpIGNhbGxiYWNrIGZvciBldmVyeSBwb3J0aW9uIG9mIHByb2Nlc3NlZCBzdHJlYW0sIGJ1dCBpbmRpdmlkdWFsbHkgZm9yCmV2ZXJ5IHByb2Nlc3NlZCBlbnRpdHkgb3IgbmV3bGluZS4gSXQgY2FuIGxlYWQgdG8gbG90IG9mIGNhbGxzIGFuZCBhZGRpdGlvbmFsCm1lbW9yeSBtYW5hZ2VyIGV4cGVuc2VzIGV2ZW4gZm9yIHNtYWxsIG1lc3NhZ2VzLiBCeSBjb250cmFzdCwgWE1MIG1lc3NhZ2VzCndoaWNoIGFyZSBlbmNvZGVkIGFzIGJhc2U2NEJpbmFyeSwgZG9uJ3QgaGF2ZSB0aGlzIHByb2JsZW0gYW5kIGRpZmZlcmVuY2UgaW4KcHJvY2Vzc2luZyB0aW1lIGNhbiBiZSBzaWduaWZpY2FudC4gRm9yIFhNTCBlbmNvZGVkIHN0cmluZyB0aGF0IGhhcyBhYm91dCAyMApsaW5lcyBhbmQgMzAgdGFncywgbnVtYmVyIG9mIGNhbGwgY291bGQgYmUgYWJvdXQgMTAwIGluc3RlYWQgb2Ygb25lIGZvcgp0aGUgc2FtZSBzdHJpbmcgZW5jb2RlZCBhcyBiYXNlNjRCaW5hcnkuCgpTaW5jZSBpdCBpcyBwYXJzZXIncyBmZWF0dXJlIHRoZXJlIGlzIE5PIGZpeCBmb3IgdGhpcyBiZWhhdmlvciAobGV0IG1lIGtub3cKaWYgeW91IGZpbmQgb25lKSwgZXNwZWNpYWxseSBiZWNhdXNlIHlvdSBuZWVkIHRvIHBhcnNlIG1lc3NhZ2UgeW91IGFscmVhZHkKZ290IChhbmQgeW91IGNhbm5vdCBjb250cm9sIGNvbnRlbnQgb2YgdGhpcyBtZXNzYWdlKSwgaG93ZXZlciwgaWYgeW91ciBhcmUKaW4gY2hhcmdlIGZvciBib3RoIGVuZHMgb2YgcHJvY2Vzc2luZyB5b3UgY2FuIHN3aXRjaCBlbmNvZGluZyB0byBiYXNlNjQgb24Kc2VuZGVyJ3Mgc2lkZS4gSXQgd2lsbCBkZWZpbml0ZWx5IHdvcmsgd2l0aCBTT0FQOjpMaXRlIGFuZCBpdCBCPG1heT4gd29yayB3aXRoCm90aGVyIHRvb2xraXRzL2ltcGxlbWVudGF0aW9ucyBhbHNvLCBidXQgb2J2aW91c2x5IEkgY2Fubm90IGd1YXJhbnRlZSB0aGF0LgoKSWYgeW91IHdhbnQgdG8gZW5jb2RlIHNwZWNpZmljIHN0cmluZyBhcyBiYXNlNjQsIGp1c3QgZG8KQzw8IFNPQVA6OkRhdGEtPnR5cGUoYmFzZTY0ID0+ICRzdHJpbmcpID4+IGVpdGhlciBvbiBjbGllbnQgb3Igb24gc2VydmVyCnNpZGUuIElmIHlvdSB3YW50IGNoYW5nZSBiZWhhdmlvciBmb3Igc3BlY2lmaWMgaW5zdGFuY2Ugb2YgU09BUDo6TGl0ZSwgeW91Cm1heSBzdWJjbGFzcyBDPFNPQVA6OlNlcmlhbGl6ZXI+LCBvdmVycmlkZSBDPGFzX3N0cmluZygpPiBtZXRob2QgdGhhdCBpcwpyZXNwb25zaWJsZSBmb3Igc3RyaW5nIGVuY29kaW5nICh0YWtlIGEgbG9vayBpbnRvIEM8YXNfYmFzZTY0QmluYXJ5KCk+KSBhbmQKc3BlY2lmeSBCPG5ldz4gc2VyaWFsaXplciBjbGFzcyBmb3IgeW91ciBTT0FQOjpMaXRlIG9iamVjdCB3aXRoOgoKICBteSAkc29hcCA9IG5ldyBTT0FQOjpMaXRlCiAgICBzZXJpYWxpemVyID0+IE15OjpTZXJpYWxpemVyLT5uZXcsCiAgICAuLi4uLiBvdGhlciBwYXJhbWV0ZXJzCgpvciBvbiBzZXJ2ZXIgc2lkZToKCiAgbXkgJHNlcnZlciA9IG5ldyBTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkRhZW1vbiAjIG9yIGFueSBvdGhlciBzZXJ2ZXIKICAgIHNlcmlhbGl6ZXIgPT4gTXk6OlNlcmlhbGl6ZXItPm5ldywKICAgIC4uLi4uIG90aGVyIHBhcmFtZXRlcnMKCklmIHlvdSB3YW50IHRvIGNoYW5nZSB0aGlzIGJlaGF2aW9yIGZvciBCPGFsbD4gaW5zdGFuY2VzIG9mIFNPQVA6OkxpdGUsIGp1c3QKc3Vic3RpdHV0ZSBDPGFzX3N0cmluZygpPiBtZXRob2Qgd2l0aCBDPGFzX2Jhc2U2NEJpbmFyeSgpPiBzb21ld2hlcmUgaW4geW91cgpjb2RlIEI8YWZ0ZXI+IEM8dXNlIFNPQVA6OkxpdGU+IGFuZCBCPGJlZm9yZT4gYWN0dWFsIHByb2Nlc3Npbmcvc2VuZGluZzoKCiAgKlNPQVA6OlNlcmlhbGl6ZXI6OmFzX3N0cmluZyA9IFwmU09BUDo6WE1MU2NoZW1hMjAwMTo6U2VyaWFsaXplcjo6YXNfYmFzZTY0QmluYXJ5OwoKQmUgd2FybmVkIHRoYXQgbGFzdCB0d28gbWV0aG9kcyB3aWxsIGFmZmVjdCBCPGFsbD4gc3RyaW5ncyBhbmQgY29udmVydCB0aGVtCmludG8gYmFzZTY0IGVuY29kZWQuIEl0IGRvZXNuJ3QgbWFrZSBhbnkgZGlmZmVyZW5jZSBmb3IgU09BUDo6TGl0ZSwgYnV0IGl0CkI8bWF5PiBtYWtlIGEgZGlmZmVyZW5jZSBmb3Igb3RoZXIgdG9vbGtpdHMuCgo9YmFjawoKPWhlYWQxIEJVR1MgQU5EIExJTUlUQVRJT05TCgo9b3ZlciA0Cgo9aXRlbSAqCgpObyBzdXBwb3J0IGZvciBtdWx0aWRpbWVuc2lvbmFsLCBwYXJ0aWFsbHkgdHJhbnNtaXR0ZWQgYW5kIHNwYXJzZSBhcnJheXMKKGhvd2V2ZXIgYXJyYXlzIG9mIGFycmF5cyBhcmUgc3VwcG9ydGVkLCBhcyB3ZWxsIGFzIGFueSBvdGhlciBkYXRhIHN0cnVjdHVyZXMsCmFuZCB5b3UgY2FuIGFkZCB5b3VyIG93biBpbXBsZW1lbnRhdGlvbiB3aXRoIFNPQVA6OkRhdGEpLgoKPWl0ZW0gKgoKTGltaXRlZCBzdXBwb3J0IGZvciBXU0RMIHNjaGVtYS4KCj1pdGVtICoKClhNTDo6UGFyc2VyOjpMaXRlIHJlbGllcyBvbiBVbmljb2RlIHN1cHBvcnQgaW4gUGVybCBhbmQgZG9lc24ndCBkbyBlbnRpdHkgZGVjb2RpbmcuCgo9aXRlbSAqCgpMaW1pdGVkIHN1cHBvcnQgZm9yIG11c3RVbmRlcnN0YW5kIGFuZCBBY3RvciBhdHRyaWJ1dGVzLgoKPWJhY2sKCj1oZWFkMSBQTEFURk9STSBTUEVDSUZJQ1MKCj1vdmVyIDQKCj1pdGVtIE1hY09TCgpJbmZvcm1hdGlvbiBhYm91dCBYTUw6OlBhcnNlciBmb3IgTWFjUGVybCBjb3VsZCBiZSBmb3VuZCBoZXJlOgoKaHR0cDovL2J1bXBwby5uZXQvbGlzdHMvbWFjcGVybC1tb2R1bGVzLzE5OTkvMDcvbXNnMDAwNDcuaHRtbAoKQ29tcGlsZWQgWE1MOjpQYXJzZXIgZm9yIE1hY09TIGNvdWxkIGJlIGZvdW5kIGhlcmU6CgpodHRwOi8vd3d3LnBlcmwuY29tL0NQQU4tbG9jYWwvYXV0aG9ycy9pZC9BL0FTL0FTQU5EU1RSTS9YTUwtUGFyc2VyLTIuMjctYmluLTEtTWFjT1MudGd6Cgo9YmFjawoKPWhlYWQxIFJFTEFURUQgTU9EVUxFUwoKPWhlYWQyIFRyYW5zcG9ydCBNb2R1bGVzCgpTT0FQOjpMaXRlIGFsbG93cyB0byBhZGQgc3VwcG9ydCBmb3IgYWRkaXRpb25hbCB0cmFuc3BvcnQgcHJvdG9jb2xzLCBvcgpzZXJ2ZXIgaGFuZGxlcnMsIHZpYSBzZXBhcmF0ZSBtb2R1bGVzIGltcGxlbWVudGluZyB0aGUgU09BUDo6VHJhbnNwb3J0OjoqIAppbnRlcmZhY2UuIFRoZSBmb2xsb3dpbmcgbW9kdWxlcyBhcmUgYXZhaWxhYmxlIGZyb20gQ1BBTjoKCj1vdmVyIAoKPWl0ZW0gKiBTT0FQLVRyYW5zcG9ydC1IVFRQLU5naW54CgpMPFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6Tmdpbnh8U09BUDo6VHJhbnNwb3J0OjpIVFRQOjpOZ2lueD4gcHJvdmlkZXMgYSB0cmFuc3BvcnQgbW9kdWxlIGZvciBuZ2lueCAoPGh0dHA6Ly9uZ2lueC5uZXQvPikKCj1iYWNrCgo9aGVhZDEgQVZBSUxBQklMSVRZCgpZb3UgY2FuIGRvd25sb2FkIHRoZSBsYXRlc3QgdmVyc2lvbiBTT0FQOjpMaXRlIGZvciBVbml4IG9yIFNPQVA6OkxpdGUgZm9yCldpbjMyIGZyb20gdGhlIGZvbGxvd2luZyBzb3VyY2VzOgoKICogQ1BBTjogICAgICAgICAgICAgICAgaHR0cDovL3NlYXJjaC5jcGFuLm9yZy9zZWFyY2g/ZGlzdD1TT0FQLUxpdGUKICogU291cmNlZm9yZ2U6ICAgICAgICAgaHR0cDovL3NvdXJjZWZvcmdlLm5ldC9wcm9qZWN0cy9zb2FwbGl0ZS8KClBQTSBwYWNrYWdlcyBhcmUgYWxzbyBhdmFpbGFibGUgZnJvbSBzb3VyY2Vmb3JnZS4KCllvdSBhcmUgd2VsY29tZSB0byBzZW5kIGUtbWFpbCB0byB0aGUgbWFpbnRhaW5lcnMgb2YgU09BUDo6TGl0ZSB3aXRoIHlvdXIKY29tbWVudHMsIHN1Z2dlc3Rpb25zLCBidWcgcmVwb3J0cyBhbmQgY29tcGxhaW50cy4KCj1oZWFkMSBBQ0tOT1dMRURHRU1FTlRTCgpTcGVjaWFsIHRoYW5rcyB0byBSYW5keSBKLiBSYXksIGF1dGhvciBvZgpJPFByb2dyYW1taW5nIFdlYiBTZXJ2aWNlcyB3aXRoIFBlcmw+LCB3aG8gaGFzIGNvbnRyaWJ1dGVkIGdyZWF0bHkgdG8gdGhlCmRvY3VtZW50YXRpb24gZWZmb3J0IG9mIFNPQVA6OkxpdGUuCgpTcGVjaWFsIHRoYW5rcyB0byBPJ1JlaWxseSBwdWJsaXNoaW5nIHdoaWNoIGhhcyBncmFjaW91c2x5IGFsbG93ZWQgU09BUDo6TGl0ZQp0byByZXB1Ymxpc2ggYW5kIHJlZGlzdHJpYnV0ZSB0aGUgU09BUDo6TGl0ZSByZWZlcmVuY2UgbWFudWFsIGZvdW5kIGluCkFwcGVuZGl4IEIgb2YgSTxQcm9ncmFtbWluZyBXZWIgU2VydmljZXMgd2l0aCBQZXJsPi4KCkFuZCBzcGVjaWFsIGdyYXRpdHVkZSB0byBhbGwgdGhlIGRldmVsb3BlcnMgd2hvIGhhdmUgY29udHJpYnV0ZWQgcGF0Y2hlcywKaWRlYXMsIHRpbWUsIGVuZXJneSwgYW5kIGhlbHAgaW4gYSBtaWxsaW9uIGRpZmZlcmVudCBmb3JtcyB0byB0aGUgZGV2ZWxvcG1lbnQKb2YgdGhpcyBzb2Z0d2FyZS4KCj1oZWFkMSBIQUNLSU5HCgpTT0FQOjpMaXRlJ3MgZGV2ZWxvcG1lbnQgdGFrZXMgcGxhY2Ugb24gc291cmNlZm9yZ2UubmV0LgoKVGhlcmUncyBhIHN1YnZlcnNpb24gcmVwb3NpdG9yeSBzZXQgdXAgYXQKCiBodHRwczovL3NvYXBsaXRlLnN2bi5zb3VyY2Vmb3JnZS5uZXQvc3Zucm9vdC9zb2FwbGl0ZS8KCj1oZWFkMSBSRVBPUlRJTkcgQlVHUwoKUGxlYXNlIHJlcG9ydCBhbGwgc3VzcGVjdGVkIFNPQVA6OkxpdGUgYnVncyB1c2luZyBTb3VyY2Vmb3JnZS4gVGhpcyBlbnN1cmVzCnByb3BlciB0cmFja2luZyBvZiB0aGUgaXNzdWUgYW5kIGFsbG93cyB5b3UgdGhlIHJlcG9ydGVyIHRvIGtub3cgd2hlbiBzb21ldGhpbmcKZ2V0cyBmaXhlZC4KCmh0dHA6Ly9zb3VyY2Vmb3JnZS5uZXQvdHJhY2tlci8/Z3JvdXBfaWQ9NjYwMDAmYXRpZD01MTMwMTcKCj1oZWFkMSBDT1BZUklHSFQKCkNvcHlyaWdodCAoQykgMjAwMC0yMDA3IFBhdWwgS3VsY2hlbmtvLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoKQ29weXJpZ2h0IChDKSAyMDA3LTIwMDggTWFydGluIEt1dHRlcgoKPWhlYWQxIExJQ0VOU0UKClRoaXMgbGlicmFyeSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5Cml0IHVuZGVyIHRoZSBzYW1lIHRlcm1zIGFzIFBlcmwgaXRzZWxmLgoKVGhpcyB0ZXh0IGFuZCBhbGwgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZvciB0aGlzIGxpYnJhcnkgaXMgbWFkZSBhdmFpbGFibGUKdW5kZXIgdGhlIENyZWF0aXZlIENvbW1vbnMgQXR0cmlidXRpb24tTm9EZXJpdnMgMi4wIGxpY2Vuc2UuCmh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5kLzIuMC8KCj1oZWFkMSBBVVRIT1JTCgpQYXVsIEt1bGNoZW5rbyAocGF1bGNsaW5nZXJAeWFob28uY29tKQoKUmFuZHkgSi4gUmF5IChyanJheUBibGFja3BlcmwuY29tKQoKQnlybmUgUmVlc2UgKGJ5cm5lQG1ham9yZG9qby5jb20pCgpNYXJ0aW4gS3V0dGVyIChtYXJ0aW4ua3V0dGVyQGZlbi1uZXQuZGUpCgo9Y3V0Cg==</File>
        <File Location="Kernel/cpan-lib/SOAP/Packager.pm" Permission="644" Encode="Base64">IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMKIyBDb3B5cmlnaHQgKEMpIDIwMDAtMjAwNCBQYXVsIEt1bGNoZW5rbyAocGF1bGNsaW5nZXJAeWFob28uY29tKQojIFNPQVA6OkxpdGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQKIyBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSBzYW1lIHRlcm1zIGFzIFBlcmwgaXRzZWxmLgojCiMgJElkOiBQYWNrYWdlci5wbSAzNzIgMjAxMC0wNC0yOSAxODozMjozMVoga3V0dGVybWEgJAojCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpQYWNrYWdlcjsKCnVzZSBzdHJpY3Q7CnVzZSB2YXJzOwoKb3VyICRWRVJTSU9OID0gMC43MTNfMDE7Cm91ciAkU1VQUE9SVEVEX1RZUEVTID0geyB9OwoKc3ViIEJFR0lOIHsKICBubyBzdHJpY3QgJ3JlZnMnOwogIGZvciBteSAkbWV0aG9kICggcXcocGFyc2VyIGhlYWRlcnNfaHR0cCBwZXJzaXN0X3BhcnRzKSApIHsKICAgIG15ICRmaWVsZCA9ICdfJyAuICRtZXRob2Q7CiAgICAqJG1ldGhvZCA9IHN1YiB7CiAgICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICAgIGlmIChAXykgeyAkc2VsZi0+eyRmaWVsZH0gPSBzaGlmdDsgcmV0dXJuICRzZWxmIH0KICAgICAgcmV0dXJuICRzZWxmLT57JGZpZWxkfTsKICAgIH0KICB9Cn0KCnN1YiBuZXcgewogICAgbXkoJGNsYXNzKSAgPSBzaGlmdDsKICAgIG15KCVwYXJhbXMpID0gQF87CiAgICBibGVzcyB7CiAgICAgICAgIl9wYXJ0cyIgICAgICAgICA9PiBbIF0sCiAgICAgICAgIl9wYXJzZXIiICAgICAgICA9PiB1bmRlZiwKICAgICAgICAiX3BlcnNpc3RfcGFydHMiID0+IDAsCiAgICB9LCAkY2xhc3M7Cn0KCnN1YiBpc19zdXBwb3J0ZWRfcGFydCB7CiAgbXkgJHNlbGYgPSBzaGlmdDsKICByZXR1cm4gJFNVUFBPUlRFRF9UWVBFUy0+e3JlZiAkX1swXX07Cn0KCnN1YiBwYXJ0cyB7CiAgbXkgJHNlbGYgPSBzaGlmdDsKICBpZiAoQF8pIHsKICAgICRzZWxmLT57J19wYXJ0cyd9ID0gc2hpZnQ7CiAgfQogIHJldHVybiAkc2VsZi0+eydfcGFydHMnfTsKfQoKIyBUaGlzIGlzIGEgc3RhdGljIG1ldGhvZCB0aGF0IGhlbHBzIGZpbmQgdGhlIHJpZ2h0IFBhY2thZ2VyCnN1YiBmaW5kX3BhY2thZ2VyIHsKICAgIyBUT0RPIC0gSW5wdXQ6CiAgICMgICAgICAgICogdGhlIG1pbWV0eXBlIG9mIHRoZSBkYXRhIHRvIGJlIGRlY29kZWQgcmF3IGRhdGEgdGhhdCBuZWVkcwogICAjICAgICAgICAqIHRoZSBkYXRhIHRvIGJlIGRlY29kZWQKICAgIyAgICAgICAgUmV0dXJuczoKICAgIyAgICAgICAgKiB0aGUgcHJvcGVyIFNPQVA6OlBhY2thZ2VyIGluc3RhbmNlCn0KCnN1YiBwdXNoX3BhcnQgewogICBteSAkc2VsZiA9IHNoaWZ0OwogICBteSAoJHBhcnQpID0gQF87CiAgIHB1c2ggQHskc2VsZi0+eydfcGFydHMnfX0sICRwYXJ0Owp9CgpzdWIgcGFja2FnZSB7CiAgICAjIGRvIG5vdGhpbmcKICAgIGRpZSAiU09BUDo6UGFja2FnZXI6OnBhY2thZ2UoKSBtdXN0IGJlIGltcGxlbWVudGVkIjsKfQoKc3ViIHVucGFja2FnZSB7CiAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICRzZWxmLT57J19wYXJ0cyd9ID0gW10gaWYgISRzZWxmLT5wZXJzaXN0X3BhcnRzOyAjIGV4cGVyaW1lbnRhbAp9CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6UGFja2FnZXI6Ok1JTUU7Cgp1c2Ugc3RyaWN0Owp1c2UgdmFycyBxdyhASVNBKTsKQElTQSA9IHF3KFNPQVA6OlBhY2thZ2VyKTsKCnN1YiBCRUdJTiB7CiAgbm8gc3RyaWN0ICdyZWZzJzsKICBmb3IgbXkgJG1ldGhvZCAoIHF3KHRyYW5zZmVyX2VuY29kaW5nIGVudl9pZCBlbnZfbG9jYXRpb24pICkgewogICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICAgaWYgKEBfKSB7ICRzZWxmLT57JGZpZWxkfSA9IHNoaWZ0OyByZXR1cm4gJHNlbGYgfQogICAgICByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgfQogIH0KfQoKc3ViIG5ldyB7CiAgICBteSAoJGNsYXNzbmFtZSkgPSBAXzsKICAgIG15ICRzZWxmID0gU09BUDo6UGFja2FnZXI6Om5ldyhAXyk7CiAgICAkc2VsZi0+eydfY29udGVudF9lbmNvZGluZyd9ID0gJzhiaXQnOwogICAgJHNlbGYtPnsnX2Vudl9pZCd9ICAgICAgICAgICA9ICc8bWFpbl9lbnZlbG9wZT4nOwogICAgJHNlbGYtPnsnX2Vudl9sb2NhdGlvbid9ICAgICA9ICcvbWFpbl9lbnZlbG9wZSc7CiAgICBibGVzcyAkc2VsZiwgJGNsYXNzbmFtZTsKICAgICRTT0FQOjpQYWNrYWdlcjo6U1VQUE9SVEVEX1RZUEVTLT57Ik1JTUU6OkVudGl0eSJ9ID0gMTsKICAgIHJldHVybiAkc2VsZjsKfQoKc3ViIGluaXRpYWxpemVfcGFyc2VyIHsKICBteSAkc2VsZiA9IHNoaWZ0OwogIGV2YWwgInJlcXVpcmUgTUlNRTo6UGFyc2VyOyI7CiAgZGllICJDb3VsZCBub3QgZmluZCBNSU1FOjpQYXJzZXIgLSBpcyBNSU1FOjpUb29scyBpbnN0YWxsZWQ/IEFib3J0aW5nLiIgaWYgJEA7CiAgJHNlbGYtPnsnX3BhcnNlcid9ID0gTUlNRTo6UGFyc2VyLT5uZXc7CiAgJHNlbGYtPnsnX3BhcnNlcid9LT5vdXRwdXRfdG9fY29yZSgnQUxMJyk7CiAgJHNlbGYtPnsnX3BhcnNlcid9LT50bXBfdG9fY29yZSgxKTsKICAkc2VsZi0+eydfcGFyc2VyJ30tPmlnbm9yZV9lcnJvcnMoMSk7Cn0KCnN1YiBnZW5lcmF0ZV9yYW5kb21fc3RyaW5nIHsKICBteSAoJHNlbGYsJGxlbikgPSBAXzsKICBteSBAY2hhcnM9KCdhJy4uJ3onLCdBJy4uJ1onLCcwJy4uJzknLCdfJyk7CiAgbXkgJHJhbmRvbV9zdHJpbmc7CiAgZm9yZWFjaCAoMS4uJGxlbikgewogICAgJHJhbmRvbV9zdHJpbmcgLj0gJGNoYXJzW3JhbmQgQGNoYXJzXTsKICB9CiAgcmV0dXJuICRyYW5kb21fc3RyaW5nOwp9CgpzdWIgZ2V0X211bHRpcGFydF9pZCB7CiAgbXkgKCRpZCkgPSBzaGlmdDsKICAoJGlkIHx8ICcnKSA9fiAvXjw/KFtePl0rKT4/JC87ICQxIHx8ICcnOwp9CgpzdWIgcGFja2FnZSB7CiAgIG15ICRzZWxmID0gc2hpZnQ7CiAgIG15ICgkZW52ZWxvcGUsJGNvbnRleHQpID0gQF87CiAgIHJldHVybiAkZW52ZWxvcGUgaWYgKCEkc2VsZi0+cGFydHMpOyAjIGlmIHRoZXJlIGFyZSBubyBwYXJ0cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgdGhlbiB0aGVyZSBpcyBub3RoaW5nIHRvIGRvCiAgIHJlcXVpcmUgTUlNRTo6RW50aXR5OwogICBsb2NhbCAkTUlNRTo6RW50aXR5OjpCT1VOREFSWV9ERUxJTUlURVIgPSAiXHJcbiI7CiAgIG15ICR0b3AgPSBNSU1FOjpFbnRpdHktPmJ1aWxkKCdUeXBlJyAgICAgPT4gIk11bHRpcGFydC9SZWxhdGVkIik7CiAgIG15ICRzb2FwdmVyc2lvbiA9IGRlZmluZWQoJGNvbnRleHQpID8gJGNvbnRleHQtPnNvYXB2ZXJzaW9uIDogJzEuMSc7CiAgICR0b3AtPmF0dGFjaCgnVHlwZScgICAgICAgICAgICAgICAgICAgICAgPT4gJHNvYXB2ZXJzaW9uID09IDEuMSA/ICJ0ZXh0L3htbCIgOiAiYXBwbGljYXRpb24vc29hcCt4bWwiLAogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmcnID0+ICRzZWxmLT50cmFuc2Zlcl9lbmNvZGluZygpLAogICAgICAgICAgICAgICAgJ0NvbnRlbnQtTG9jYXRpb24nICAgICAgICAgID0+ICRzZWxmLT5lbnZfbG9jYXRpb24oKSwKICAgICAgICAgICAgICAgICdDb250ZW50LUlEJyAgICAgICAgICAgICAgICA9PiAkc2VsZi0+ZW52X2lkKCksCiAgICAgICAgICAgICAgICAnRGF0YScgICAgICAgICAgICAgICAgICAgICAgPT4gJGVudmVsb3BlICk7CiAgICMgY29uc3VtZSB0aGUgYXR0YWNobWVudHMgdGhhdCBjb21lIGluIGFzIGlucHV0IGJ5ICdzaGlmdCdpbmcKICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgd2hpbGUgKG15ICRwYXJ0ID0gc2hpZnQoQHskc2VsZi0+cGFydHN9KSkgewogICAgICAkdG9wLT5hZGRfcGFydCgkcGFydCk7CiAgIH0KICAgIyBkZXRlcm1pbmUgTUlNRSBib3VuZGFyeQogICBteSAkYm91bmRhcnkgPSAkdG9wLT5oZWFkLT5tdWx0aXBhcnRfYm91bmRhcnk7CiAgICRzZWxmLT5oZWFkZXJzX2h0dHAoeyAnQ29udGVudC1UeXBlJyA9PiAnTXVsdGlwYXJ0L1JlbGF0ZWQ7IHR5cGU9InRleHQveG1sIjsgc3RhcnQ9IjxtYWluX2VudmVsb3BlPiI7IGJvdW5kYXJ5PSInLiRib3VuZGFyeS4nIid9KTsKICAgcmV0dXJuICR0b3AtPnN0cmluZ2lmeV9ib2R5Owp9CgpzdWIgdW5wYWNrYWdlIHsKICBteSAkc2VsZiA9IHNoaWZ0OwogIG15ICgkcmF3X2lucHV0LCRjb250ZXh0KSA9IEBfOwogICRzZWxmLT5TVVBFUjo6dW5wYWNrYWdlKCk7CgogICMgUGFyc2UgdGhlIHJhdyBpbnB1dCBpbnRvIGEgTUlNRTo6RW50aXR5IHN0cnVjdHVyZS4KICAjICAgLSBmYWlsIGlmIHRoZSByYXdfaW5wdXQgaXMgbm90IE1JTUUgZm9ybWF0dGVkCiAgJHNlbGYtPmluaXRpYWxpemVfcGFyc2VyKCkgaWYgIWRlZmluZWQoJHNlbGYtPnBhcnNlcik7CiAgbXkgJGVudGl0eSA9IGV2YWwgeyAkc2VsZi0+cGFyc2VyLT5wYXJzZV9kYXRhKCRyYXdfaW5wdXQpIH0KICAgIG9yIGRpZSAiU29tZXRoaW5nIHdyb25nIHdpdGggTUlNRSBtZXNzYWdlOiBAe1skQCB8fCAkc2VsZi0+cGFyc2VyLT5sYXN0X2Vycm9yXX1cbiI7CgogIG15ICRlbnYgPSB1bmRlZjsKICAjIG1ham9yIG1lbW9yeSBibG9hdCBiZWxvdyEgVE9ETyAtIGZpeCEKICBpZiAobGMoJGVudGl0eS0+aGVhZC0+bWltZV90eXBlKSBlcSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpIHsKICAgICRlbnYgPSAkc2VsZi0+cHJvY2Vzc19mb3JtX2RhdGEoJGVudGl0eSk7CiAgfSBlbHNpZiAobGMoJGVudGl0eS0+aGVhZC0+bWltZV90eXBlKSBlcSAnbXVsdGlwYXJ0L3JlbGF0ZWQnKSB7CiAgICAkZW52ID0gJHNlbGYtPnByb2Nlc3NfcmVsYXRlZCgkZW50aXR5KTsKICB9IGVsc2lmIChsYygkZW50aXR5LT5oZWFkLT5taW1lX3R5cGUpIGVxICd0ZXh0L3htbCcpIHsKICAgICMgSSBkb24ndCB0aGluayB0aGlzIGV2ZXIgZ2V0cyBjYWxsZWQuCiAgICAjIHdhcm4gIkkgYW0gc29tZXdoZXJlIGluIHRoZSBTT0FQOjpQYWNrYWdlcjo6TUlNRSBjb2RlIEkgZGlkbid0IGtub3cgSSB3b3VsZCBiZSBpbiEiOwogICAgJGVudiA9ICRlbnRpdHktPmJvZHloYW5kbGUtPmFzX3N0cmluZzsKICB9IGVsc2UgewogICAgZGllICJDYW4ndCBoYW5kbGUgTUlNRSBtZXNzc2FnZSB3aXRoIHNwZWNpZmllZCB0eXBlIChAe1skZW50aXR5LT5oZWFkLT5taW1lX3R5cGVdfSlcbiI7CiAgfQoKICAjIHJldHVybiB0aGUgZW52ZWxvcGUKICBpZiAoJGVudikgewogICAgcmV0dXJuICRlbnY7CiAgfSBlbHNpZiAoJGVudGl0eS0+Ym9keWhhbmRsZS0+YXNfc3RyaW5nKSB7CiAgICByZXR1cm4gJGVudGl0eS0+Ym9keWhhbmRsZS0+YXNfc3RyaW5nOwogIH0gZWxzZSB7CiAgICBkaWUgIk5vIGNvbnRlbnQgaW4gTUlNRSBtZXNzYWdlXG4iOwogIH0KfQoKc3ViIHByb2Nlc3NfZm9ybV9kYXRhIHsKICBteSAoJHNlbGYsICRlbnRpdHkpID0gQF87CiAgbXkgJGVudiA9IHVuZGVmOwogIGZvcmVhY2ggbXkgJHBhcnQgKCRlbnRpdHktPnBhcnRzKSB7CiAgICBteSAkbmFtZSA9ICRwYXJ0LT5oZWFkLT5taW1lX2F0dHIoJ2NvbnRlbnQtZGlzcG9zaXRpb24ubmFtZScpOwogICAgJG5hbWUgZXEgJ3BheWxvYWQnID8KICAgICAgJGVudiA9ICRwYXJ0LT5ib2R5aGFuZGxlLT5hc19zdHJpbmcKCTogJHNlbGYtPnB1c2hfcGFydCgkcGFydCk7CiAgfQogIHJldHVybiAkZW52Owp9CgpzdWIgcHJvY2Vzc19yZWxhdGVkIHsKICBteSAkc2VsZiA9IHNoaWZ0OwogIG15ICgkZW50aXR5KSA9IEBfOwogIGRpZSAiTXVsdGlwYXJ0IE1JTUUgbWVzc2FnZXMgTVVTVCBkZWNsYXJlIE11bHRpcGFydC9SZWxhdGVkIGNvbnRlbnQtdHlwZSIKICAgIGlmICgkZW50aXR5LT5oZWFkLT5taW1lX2F0dHIoJ2NvbnRlbnQtdHlwZScpICF+IC9ebXVsdGlwYXJ0XC9yZWxhdGVkL2kpOwogICMgQXMgaXQgdHVybnMgb3V0LCB0aGUgQ29udGVudC1JRCBhbmQgc3RhcnQgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwKICAjIGFjY29yZGluZyB0byB0aGUgTUlNRSBhbmQgU09BUCBzcGVjcy4gSW4gdGhlIGV2ZW50IHRoYXQgdGhlIGhlYWQgY2Fubm90CiAgIyBiZSBmb3VuZCwgdGhlIGhlYWQvcm9vdCBlbnRpdHkgaXMgdXNlZCBhcyBhIHN0YXJ0aW5nIHBvaW50LgogICAgIyBbMTkgTWFyIDIwMDhdIE1vZGlmaWVkIGJ5IEZlbmcgTGkgPGZlbmcubGlAc3liYXNlLmNvbT4KICAgICMgQ2hlY2sgb3B0aW9uYWwgc3RhcnQgcGFyYW1ldGVyLCB0aGVuIG9wdGlvbmFsIENvbnRlbnQtSUQsIHRoZW4gY3JlYXRlL2FkZAogICAgIyBDb250ZW50LUlEICh0aGUgc2FtZSBhcHByb2FjaCBhcyBpbiBTT0FQOjpMaXRlIDAuNjYpCgogICAgI215ICRzdGFydCA9IGdldF9tdWx0aXBhcnRfaWQoJGVudGl0eS0+aGVhZC0+bWltZV9hdHRyKCdjb250ZW50LXR5cGUuc3RhcnQnKSk7CiAgICBteSAkc3RhcnQgPSBnZXRfbXVsdGlwYXJ0X2lkKCRlbnRpdHktPmhlYWQtPm1pbWVfYXR0cignY29udGVudC10eXBlLnN0YXJ0JykpCiAgICAgICAgfHwgZ2V0X211bHRpcGFydF9pZCgkZW50aXR5LT5wYXJ0cygwKS0+aGVhZC0+bWltZV9hdHRyKCdjb250ZW50LWlkJykpOwoKICBpZiAoIWRlZmluZWQoJHN0YXJ0KSB8fCAkc3RhcnQgZXEgIiIpIHsKICAgICAgJHN0YXJ0ID0gJHNlbGYtPmdlbmVyYXRlX3JhbmRvbV9zdHJpbmcoMTApOwogICAgICAkZW50aXR5LT5wYXJ0cygwKS0+aGVhZC0+YWRkKCdjb250ZW50LWlkJywkc3RhcnQpOwogIH0KICBteSAkbG9jYXRpb24gPSAkZW50aXR5LT5oZWFkLT5taW1lX2F0dHIoJ2NvbnRlbnQtbG9jYXRpb24nKSB8fAogICAgJ3RoaXNtZXNzYWdlOi8nOwogIG15ICRlbnY7CiAgZm9yZWFjaCBteSAkcGFydCAoJGVudGl0eS0+cGFydHMpIHsKICAgIG5leHQgaWYgIVVOSVZFUlNBTDo6aXNhKCRwYXJ0ID0+ICJNSU1FOjpFbnRpdHkiKTsKCiAgICAjIFdlaXJkLCB0aGUgZm9sbG93aW5nIHVzZSBvZiBoZWFkLT5nZXQoU0NBTEFSWyxJTkRFWF0pIGRvZXNuJ3Qgd29yayBhcwogICAgIyBleHBlY3RlZC4gV29yayBhcm91bmQgaXMgdG8gZWxpbWluYXRlIHRoZSBJTkRFWC4KICAgIG15ICRwaWQgPSBnZXRfbXVsdGlwYXJ0X2lkKCRwYXJ0LT5oZWFkLT5taW1lX2F0dHIoJ2NvbnRlbnQtaWQnKSk7CgogICAgIyBJZiBDb250ZW50LUlEIGlzIG5vdCBzdXBwbGllZCwgdGhlbiBnZW5lcmF0ZSBhIHJhbmRvbSBvbmUgKEhBQ0sgLSBiZWNhdXNlCiAgICAjIE1JTUU6OkVudGl0eSBkb2VzIG5vdCBkbyB0aGlzIGFzIGl0IHNob3VsZC4uLiBjb250ZW50LWlkIGlzIHJlcXVpcmVkCiAgICAjIGFjY29yZGluZyB0byBNSU1FIHNwZWNpZmljYXRpb24pCiAgICAkcGlkID0gJHNlbGYtPmdlbmVyYXRlX3JhbmRvbV9zdHJpbmcoMTApIGlmICRwaWQgZXEgJyc7CiAgICBteSAkdHlwZSA9ICRwYXJ0LT5oZWFkLT5taW1lX3R5cGU7CgogICAgIyBJZiBhIENvbnRlbnQtTG9jYXRpb24gaGVhZGVyIGNhbm5vdCBiZSBmb3VuZCwgdGhpcyB3aWxsIGxvb2sgZm9yIGFuCiAgICAjIGFsdGVybmF0aXZlIGluIHRoZSBmb2xsb3dpbmcgTUlNRSBIZWFkZXIgYXR0cmlidXRlcwogICAgbXkgJHBsb2NhdGlvbiA9ICRwYXJ0LT5oZWFkLT5nZXQoJ2NvbnRlbnQtbG9jYXRpb24nKSB8fAogICAgICAkcGFydC0+aGVhZC0+bWltZV9hdHRyKCdDb250ZW50LURpc3Bvc2l0aW9uLmZpbGVuYW1lJykgfHwKCSRwYXJ0LT5oZWFkLT5taW1lX2F0dHIoJ0NvbnRlbnQtVHlwZS5uYW1lJyk7CiAgICBpZiAoJHN0YXJ0ICYmICRwaWQgZXEgJHN0YXJ0KSB7CiAgICAgICRlbnYgPSAkcGFydC0+Ym9keWhhbmRsZS0+YXNfc3RyaW5nOwogICAgfSBlbHNlIHsKICAgICAgJHNlbGYtPnB1c2hfcGFydCgkcGFydCk7CiAgICB9CiAgfQojICBkaWUgIkNhbid0IGZpbmQgJ3N0YXJ0JyBwYXJhbWV0ZXIgaW4gbXVsdGlwYXJ0IE1JTUUgbWVzc2FnZVxuIgojICAgIGlmIEB7JHNlbGYtPnBhcnRzfSA+IDEgJiYgISRzdGFydDsKICByZXR1cm4gJGVudjsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlBhY2thZ2VyOjpESU1FOwoKdXNlIHN0cmljdDsKdXNlIHZhcnMgcXcoQElTQSk7CkBJU0EgPSBxdyhTT0FQOjpQYWNrYWdlcik7CgpzdWIgQkVHSU4gewogIG5vIHN0cmljdCAncmVmcyc7CiAgZm9yIG15ICRtZXRob2QgKCBxdyhmb28pICkgewogICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICAgaWYgKEBfKSB7ICRzZWxmLT57JGZpZWxkfSA9IHNoaWZ0OyByZXR1cm4gJHNlbGYgfQogICAgICByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgfQogIH0KfQoKc3ViIG5ldyB7CiAgICBteSAoJGNsYXNzbmFtZSkgPSBAXzsKICAgIG15ICRzZWxmID0gU09BUDo6UGFja2FnZXI6Om5ldyhAXyk7CiAgICBibGVzcyAkc2VsZiwgJGNsYXNzbmFtZTsKICAgICRTT0FQOjpQYWNrYWdlcjo6U1VQUE9SVEVEX1RZUEVTLT57IkRJTUU6OlBheWxvYWQifSA9IDE7CiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBpbml0aWFsaXplX3BhcnNlciB7CiAgbXkgJHNlbGYgPSBzaGlmdDsKICBwcmludCBTVERFUlIgIkluaXRpYWxpemluZyBwYXJzZXJcbiI7CiAgZXZhbCAicmVxdWlyZSBESU1FOjpQYXJzZXI7IjsKICBkaWUgIkNvdWxkIG5vdCBmaW5kIERJTUU6OlBhcnNlciAtIGlzIERJTUU6OlRvb2xzIGluc3RhbGxlZD8gQWJvcnRpbmcuIiBpZiAkQDsKICAkc2VsZi0+eydfcGFyc2VyJ30gPSBESU1FOjpQYXJzZXItPm5ldzsKfQoKc3ViIHBhY2thZ2UgewogICBteSAkc2VsZiA9IHNoaWZ0OwogICBteSAoJGVudmVsb3BlLCRjb250ZXh0KSA9IEBfOwogICByZXR1cm4gJGVudmVsb3BlIGlmICghJHNlbGYtPnBhcnRzKTsgIyBpZiB0aGVyZSBhcmUgbm8gcGFydHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHRoZW4gdGhlcmUgaXMgbm90aGluZyB0byBkbwogICByZXF1aXJlIERJTUU6Ok1lc3NhZ2U7CiAgIHJlcXVpcmUgRElNRTo6UGF5bG9hZDsKICAgbXkgJG1lc3NhZ2UgPSBESU1FOjpNZXNzYWdlLT5uZXc7CiAgIG15ICR0b3AgPSBESU1FOjpQYXlsb2FkLT5uZXc7CiAgIG15ICRzb2FwdmVyc2lvbiA9IGRlZmluZWQoJGNvbnRleHQpID8gJGNvbnRleHQtPnNvYXB2ZXJzaW9uIDogJzEuMSc7CiAgICR0b3AtPmF0dGFjaCgnTUlNRVR5cGUnID0+ICRzb2FwdmVyc2lvbiA9PSAxLjEgPwogICAgICAgICAgICAgICAgICAiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIDogImFwcGxpY2F0aW9uL3NvYXAreG1sIiwKICAgICAgICAgICAgICAgICdEYXRhJyAgICAgPT4gJGVudmVsb3BlICk7CiAgICRtZXNzYWdlLT5hZGRfcGF5bG9hZCgkdG9wKTsKICAgIyBjb25zdW1lIHRoZSBhdHRhY2htZW50cyB0aGF0IGNvbWUgaW4gYXMgaW5wdXQgYnkgJ3NoaWZ0J2luZwogICBubyBzdHJpY3QgJ3JlZnMnOwogICB3aGlsZSAobXkgJHBhcnQgPSBzaGlmdChAeyRzZWxmLT5wYXJ0c30pKSB7CiAgICAgIGRpZSAiWW91IGFyZSBvbmx5IGFsbG93ZWQgdG8gYWRkIHBhcnRzIG9mIHR5cGUgRElNRTo6UGF5bG9hZCB0byBhIERJTUU6Ok1lc3NhZ2UiCiAgICAgICAgaWYgKCEkcGFydC0+aXNhKCdESU1FOjpQYXlsb2FkJykpOwojICAgICAgcHJpbnQgU1RERVJSICJBZGRpbmcgcGF5bG9hZCB0byBESU1FIG1lc3NhZ2U6ICIucmVmKCRwYXJ0KS4iXG4iOwogICAgICAkbWVzc2FnZS0+YWRkX3BheWxvYWQoJHBhcnQpOwojICAgICAgcHJpbnQgU1RERVJSICJQYXlsb2FkJ3MgcGF5bG9hZCBpczogIi4keyRwYXJ0LT5wcmludF9jb250ZW50X2RhdGF9LiJcbiI7CiAgIH0KICAgJHNlbGYtPmhlYWRlcnNfaHR0cCh7ICdDb250ZW50LVR5cGUnID0+ICdhcHBsaWNhdGlvbi9kaW1lJyB9KTsKICAgcmV0dXJuICRtZXNzYWdlLT5wcmludF9kYXRhOwp9CgpzdWIgdW5wYWNrYWdlIHsKICBteSAkc2VsZiA9IHNoaWZ0OwogIG15ICgkcmF3X2lucHV0LCRjb250ZXh0KSA9IEBfOwogICRzZWxmLT5TVVBFUjo6dW5wYWNrYWdlKCk7CgogICMgUGFyc2UgdGhlIHJhdyBpbnB1dCBpbnRvIGEgRElNRTo6TWVzc2FnZSBzdHJ1Y3R1cmUuCiAgIyAgIC0gZmFpbCBpZiB0aGUgcmF3X2lucHV0IGlzIG5vdCBESU1FIGZvcm1hdHRlZAogIHByaW50IFNUREVSUiAicmF3X2RhdGE6ICRyYXdfaW5wdXRcbiI7CiAgJHNlbGYtPmluaXRpYWxpemVfcGFyc2VyKCkgaWYgIWRlZmluZWQoJHNlbGYtPnBhcnNlcik7CiAgbXkgJG1lc3NhZ2UgPSBldmFsIHsgJHNlbGYtPnBhcnNlci0+cGFyc2VfZGF0YShcJHJhd19pbnB1dCkgfQogICAgb3IgZGllICJTb21ldGhpbmcgd3Jvbmcgd2l0aCBESU1FIG1lc3NhZ2U6IEB7WyRAXX1cbiI7CgogICMgVGhlIGZpcnN0IHBheWxvYWQgaXMgYWx3YXlzIHRoZSBTT0FQIE1lc3NhZ2UKICAjIFRPRE8gLSBFcnJvciBjaGVjawogIG15IEBwYXlsb2FkcyA9IEB7JG1lc3NhZ2UtPnsnX1BBWUxPQURTJ319OwogIG15ICRlbnYgPSBzaGlmdChAcGF5bG9hZHMpOwogIG15ICRlbnZfc3RyID0gJGVudi0+cHJpbnRfY29udGVudF9kYXRhOwogIHByaW50IFNUREVSUiAiUmVjZWl2ZWQgdGhpcyBlbnZlbG9wZTogIi4kZW52X3N0ci4iXG4iOwogIHdoaWxlIChteSAkcCA9IHNoaWZ0KEBwYXlsb2FkcykpIHsKICAgIHByaW50IFNUREVSUiAiQWRkaW5nIHBhcnQgdG8gUGFja2FnZXJcbiI7CiAgICAkc2VsZi0+cHVzaF9wYXJ0KCRwKTsKICB9CiAgcmV0dXJuICRlbnZfc3RyOwp9CgoxOwpfX0VORF9fCgo9cG9kCgo9aGVhZDEgTkFNRQoKU09BUDo6UGFja2FnZXIgLSB0aGlzIGNsYXNzIGlzIGFuIGFic3RyYWN0IGNsYXNzIHdoaWNoIGFsbG93cyBmb3IgbXVsdGlwbGUgdHlwZXMgb2YgcGFja2FnaW5nIGFnZW50cyBzdWNoIGFzIE1JTUUgYW5kIERJTUUuCgo9aGVhZDEgREVTQ1JJUFRJT04KClRoZSBTT0FQOjpQYWNrYWdlciBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgbWFuYWdpbmcgYSBzZXQgb2YgInBhcnRzLiIgUGFydHMgYXJlCmFkZGl0aW9uYWwgcGllY2VzIG9mIGluZm9ybWF0aW9uLCBhZGRpdGlvbmFsIGRvY3VtZW50cywgb3IgdmlydHVhbGx5IGFueXRoaW5nIHRoYXQKbmVlZHMgdG8gYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBTT0FQIEVudmVsb3BlL3BheWxvYWQuIFRoZSBwYWNrYWdlciB0aGVuIHdpbGwgdGFrZQp0aGVzZSBwYXJ0cyBhbmQgZW5jb2RlL2RlY29kZSBvciAicGFja2FnZSIvInVucGFja2FnZSIgdGhlbSBhcyB0aGV5IGNvbWUgYW5kIGdvCm92ZXIgdGhlIHdpcmUuCgo9aGVhZDEgTUVUSE9EUwoKPW92ZXIKCj1pdGVtIG5ldwoKSW5zdGFudGlhdGVzIGEgbmV3IGluc3RhbmNlIG9mIGEgU09BUDo6UGFja2FnZXIuCgo9aXRlbSBwYXJ0cwoKQ29udGFpbnMgYW4gYXJyYXkgb2YgcGFydHMuIFRoZSBjb250ZW50cyBvZiB0aGlzIGFycmF5IGFuZCB0aGVpciB0eXBlcyBhcmUgY29tcGxldGVseQpkZXBlbmRlbnQgdXBvbiB0aGUgUGFja2FnZXIgYmVpbmcgdXNlZC4gRm9yIGV4YW1wbGUsIHdoZW4gdXNpbmcgTUlNRSwgdGhlIGNvbnRlbnQKb2YgdGhpcyBhcnJheSBpcyBNSU1FOjpFbnRpdHkncy4KCj1pdGVtIHB1c2hfcGFydAoKQWRkcyBhIHBhcnQgdG8gc2V0IG9mIHBhcnRzIG1hbmFnZWQgYnkgdGhlIGN1cnJlbnQgaW5zdGFuY2Ugb2YgU09BUDo6UGFja2FnZXIuCgo9aXRlbSBwYXJzZXIKClJldHVybnMgdGhlIHBhcnNlciB1c2VkIHRvIHBhcnNlIGF0dGFjaG1lbnRzIG91dCBvZiBhIGRhdGEgc3RyZWFtLgoKPWl0ZW0gaGVhZGVyc19odHRwCgpUaGlzIGlzIGEgaG9vayBpbnRvIHRoZSBIVFRQIGxheWVyLiBJdCBwcm92aWRlcyBhIHdheSBmb3IgYSBwYWNrYWdlciB0byBhZGQgYW5kL29yIG1vZGlmeQpIVFRQIGhlYWRlcnMgaW4gYSByZXF1ZXN0L3Jlc3BvbnNlLiBGb3IgZXhhbXBsZSwgbW9zdCBwYWNrYWdpbmcgbGF5ZXJzIHdpbGwgbmVlZCB0bwpvdmVycmlkZSB0aGUgQ29udGVudC1UeXBlIChlLmcuIG11bHRpcGFydC9yZWxhdGVkLCBvciBhcHBsaWNhdGlvbi9kaW1lKS4KCj1iYWNrCgo9aGVhZDEgQUJTVFJBQ1QgTUVUSE9EUwoKSWYgeW91IHdpc2ggdG8gaW1wbGVtZW50IHlvdXIgb3duIFNPQVA6OlBhY2thZ2VyLCB0aGVuIHRoZSBtZXRob2RzIGJlbG93IG11c3QgYmUKaW1wbGVtZW50ZWQgYnkgeW91IGFjY29yZGluZyB0byB0aGUgcHJlc2NyaWJlZCBpbnB1dCBhbmQgb3V0cHV0IHJlcXVpcmVtZW50cy4KCj1vdmVyCgo9aXRlbSBwYWNrYWdlKCkKClRoZSBDPHBhY2thZ2U+IHN1YnJvdXRpbmUgdGFrZXMgYXMgaW5wdXQgdGhlIFNPQVAgZW52ZWxvcGUgaW4gc3RyaW5nL1NDQUxBUiBmb3JtLgpUaGlzIHdpbGwgc2VydmUgYXMgdGhlIGNvbnRlbnQgb2YgdGhlIHJvb3QgcGFydC4gVGhlIHBhY2thZ2VyIHRoZW4gZW5jYXBzdWxhdGVzIHRoZQplbnZlbG9wZSB3aXRoIHRoZSBwYXJ0cyBjb250YWluZWQgd2l0aGluIEM8cGFydHM+IGFuZCByZXR1cm5zIHRoZSBwcm9wZXJseQplbmNhcHN1bGF0ZWQgZW52ZWxvcGUgaW4gc3RyaW5nL1NDQUxBUiBmb3JtLgoKPWl0ZW0gdW5wYWNrYWdlKCkKClRoZSBDPHVucGFja2FnZT4gc3Vicm91dGluZXMgdGFrZXMgYXMgaW5wdXQgcmF3IGRhdGEgdGhhdCBuZWVkcyB0byBiZSBwYXJzZWQgaW50bwphIHNldCBvZiBwYXJ0cy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGV4dHJhY3RpbmcgdGhlIGVudmVsb3BlIGZyb20gdGhlIGlucHV0LCBhbmQKcG9wdWxhdGluZyBDPHBhcnRzPiB3aXRoIGFuIEFSUkFZIG9mIHBhcnRzIGV4dHJhY3RlZCBmcm9tIHRoZSBpbnB1dC4gSXQgdGhlbiByZXR1cm5zCnRoZSBTT0FQIEVudmVsb3BlIGluIHN0cmluZy9TQ0FMQVIgZm9ybSBzbyB0aGF0IFNPQVA6OkxpdGUgY2FuIHBhcnNlIGl0LgoKPWJhY2sKCj1oZWFkMSBTVVBQT1JURUQgUEFDS0FHSU5HIEZPUk1BVFMKCj1oZWFkMiBTT0FQOjpQYWNrYWdlcjo6TUlNRQoKQzxTT0FQOjpQYWNrYWdlcjo6TUlNRT4gdXRpbGl6ZXMgTDxNSU1FOjpUb29scz4gdG8gcHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gc2VuZAphbmQgcmVjZWl2ZSBNdWx0aXBhcnQvUmVsYXRlZCBhbmQgTXVsdGlwYXJ0L0Zvcm0tRGF0YSBmb3JtYXR0ZWQgcmVxdWVzdHMgYW5kCnJlc3BvbnNlcy4KCj1oZWFkMyBNSU1FIE1FVEhPRFMKClRoZSBmb2xsb3dpbmcgbWV0aG9kcyBhcmUgdXNlZCB3aGVuIGNvbXBvc2luZyBhIE1JTUUgZm9ybWF0dGVkIG1lc3NhZ2UuCgo9b3ZlcgoKPWl0ZW0gdHJhbnNmZXJfZW5jb2RpbmcKClRoZSB2YWx1ZSBvZiB0aGUgcm9vdCBwYXJ0J3MgQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZyBNSU1FIEhlYWRlci4gRGVmYXVsdCBpczogOGJpdC4KCj1pdGVtIGVudl9pZAoKVGhlIHZhbHVlIG9mIHRoZSByb290IHBhcnQncyBDb250ZW50LUlkIE1JTUUgSGVhZGVyLiBEZWZhdWx0IGlzOiA8bWFpbl9lbnZlbG9wZT4uCgo9aXRlbSBlbnZfbG9jYXRpb24KClRoZSB2YWx1ZSBvZiB0aGUgcm9vdCBwYXJ0J3MgQ29udGVudC1Mb2NhdGlvbiBNSU1FIEhlYWRlci4gRGVmYXVsdCBpczogL21haW5fZW52ZWxvcGUuCgo9aXRlbSBlbnZfdHlwZQoKVGhlIHZhbHVlIG9mIHRoZSByb290IHBhcnQncyBDb250ZW50LVR5cGUgTUlNRSBIZWFkZXIuIERlZmF1bHQgaXM6IHRleHQveG1sLgoKPWJhY2sKCj1oZWFkMyBPUFRJTUlaSU5HIFRIRSBNSU1FIFBBUlNFUgoKVGhlIHVzZSBvZiBhdHRhY2htZW50cyBjYW4gb2Z0ZW4gcmVzdWx0IGluIGEgaGVhdnkgZHJhaW4gb24gc3lzdGVtIHJlc291cmNlcyBkZXBlbmRpbmcKdXBvbiBob3cgeW91ciBNSU1FIHBhcnNlciBpcyBjb25maWd1cmVkLiBGb3IgZXhhbXBsZSwgeW91IGNhbiBpbnN0cnVjdCB0aGUgcGFyc2VyIHRvCnN0b3JlIGF0dGFjaG1lbnRzIGluIG1lbW9yeSwgb3IgdG8gdXNlIHRlbXAgZmlsZXMuIFVzaW5nIG9uZSBvZiB0aGUgb3RoZXIgY2FuIGFmZmVjdApwZXJmb3JtYW5jZSwgZGlzayB1dGlsaXphdGlvbiwgYW5kL29yIHJlbGlhYmlsaXR5LiBUaGVyZWZvcmUgeW91IHNob3VsZCBjb25zdWx0IHRoZQpmb2xsb3dpbmcgVVJMIGZvciBvcHRpbWl6YXRpb24gdGVjaG5pcXVlcyBhbmQgdHJhZGUtb2ZmczoKCmh0dHA6Ly9zZWFyY2guY3Bhbi5vcmcvZGlzdC9NSU1FLXRvb2xzL2xpYi9NSU1FL1BhcnNlci5wbSNPUFRJTUlaSU5HX1lPVVJfUEFSU0VSCgpUbyBtb2RpZnkgdGhlIHBhcnNlcidzIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBjb25zdWx0IHRoZSBmb2xsb3dpbmcgY29kZSBzYW1wbGUsCndoaWNoIGluY2lkZW50YWxseSBzaG93cyBob3cgdG8gbWluaW1pemUgbWVtb3J5IHV0aWxpemF0aW9uOgoKICBteSAkcGFja2FnZXIgPSBTT0FQOjpQYWNrYWdlcjo6TUlNRS0+bmV3OwogICMgJHBhY2thZ2VyLT5wYXJzZXItPmRlY29kZV9oZWFkZXJzKDEpOyAjIG5vIGRpZmZlcmVuY2UKICAjICRwYWNrYWdlci0+cGFyc2VyLT5leHRyYWN0X25lc3RlZF9tZXNzYWdlcygxKTsgIyBubyBkaWZmZXJlbmNlCiAgJHBhY2thZ2VyLT5wYXJzZXItPm91dHB1dF90b19jb3JlKDApOyAjIG11Y2ggbGVzcyBtZW1vcnkKICAkcGFja2FnZXItPnBhcnNlci0+dG1wX3RvX2NvcmUoMCk7ICMgbXVjaCBsZXNzIG1lbW9yeQogICRwYWNrYWdlci0+cGFyc2VyLT50bXBfcmVjeWNsaW5nKDApOyAjIHByb21vdGVzIGZhc3RlciBnYXJiYWdlIGNvbGxlY3Rpb24KICAkcGFja2FnZXItPnBhcnNlci0+dXNlX2lubmVyX2ZpbGVzKDEpOyAjIG5vIGRpZmZlcmVuY2UKICBteSAkY2xpZW50ID0gU09BUDo6TGl0ZS0+dXJpKCROUyktPnByb3h5KCRVUkwpLT5wYWNrYWdlcigkcGFja2FnZXIpOwogICRjbGllbnQtPnNvbWVNZXRob2QoKTsKCj1oZWFkMyBDTElFTlQgU0lERSBFWEFNUExFCgpUaGUgZm9sbG93aW5nIGNvZGUgc2FtcGxlIHNob3dzIGhvdyB0byB1c2UgYXR0YWNobWVudHMgd2l0aGluIHRoZSBjb250ZXh0IG9mIGEKU09BUDo6TGl0ZSBjbGllbnQuCgogICMhL3Vzci9iaW4vcGVybAogIHVzZSBTT0FQOjpMaXRlOwogIHVzZSBNSU1FOjpFbnRpdHk7CiAgbXkgJGVudCA9IGJ1aWxkIE1JTUU6OkVudGl0eQogICAgVHlwZSAgICAgICAgPT4gInRleHQvcGxhaW4iLAogICAgUGF0aCAgICAgICAgPT4gImF0dGFjaG1lbnQudHh0IiwKICAgIEZpbGVuYW1lICAgID0+ICJhdHRhY2htZW50LnR4dCIsCiAgICBEaXNwb3NpdGlvbiA9PiAiYXR0YWNobWVudCI7CiAgJE5TID0gInVybjpNYWpvcmRvam86VGVtcGVyYXR1cmVTZXJ2aWNlIjsKICAkSE9TVCA9ICJodHRwOi8vbG9jYWxob3N0L2NnaS1iaW4vc29hcGxpdGUuY2dpIjsKICBteSAkY2xpZW50ID0gU09BUDo6TGl0ZQogICAgLT5wYWNrYWdlcihTT0FQOjpQYWNrYWdlcjo6TUlNRS0+bmV3KQogICAgLT5wYXJ0cyhbICRlbnQgXSkKICAgIC0+dXJpKCROUykKICAgIC0+cHJveHkoJEhPU1QpOwogICRyZXNwb25zZSA9ICRjbGllbnQtPmMyZihTT0FQOjpEYXRhLT5uYW1lKCJ0ZW1wZXJhdHVyZSIgPT4gJzEwMCcpKTsKICBwcmludCAkcmVzcG9uc2UtPnZhbHVlb2YoJy8vYzJmUmVzcG9uc2UvZm9vJyk7Cgo9aGVhZDMgU0VSVkVSIFNJREUgRVhBTVBMRQoKVGhlIGZvbGxvd2luZyBjb2RlIHNob3dzIGhvdyB0byB1c2UgYXR0YWNobWVudHMgd2l0aGluIHRoZSBjb250ZXh0IG9mIGEgQ0dJCnNjcmlwdC4gSXQgc2hvd3MgaG93IHRvIHJlYWQgaW5jb21pbmcgYXR0YWNobWVudHMsIGFuZCB0byByZXR1cm4gYXR0YWNobWVudHMgdG8KdGhlIGNsaWVudC4KCiAgIyEvdXNyL2Jpbi9wZXJsIC13CiAgdXNlIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDsKICB1c2UgTUlNRTo6RW50aXR5OwogIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6Q0dJCiAgICAtPnBhY2thZ2VyKFNPQVA6OlBhY2thZ2VyOjpNSU1FLT5uZXcpCiAgICAtPmRpc3BhdGNoX3dpdGgoeyd1cm46TWFqb3Jkb2pvOlRlbXBlcmF0dXJlU2VydmljZScgPT4gJ1RlbXBlcmF0dXJlU2VydmljZSd9KQogICAgLT5oYW5kbGU7CgogIEJFR0lOIHsKICAgIHBhY2thZ2UgVGVtcGVyYXR1cmVTZXJ2aWNlOwogICAgdXNlIHZhcnMgcXcoQElTQSk7CiAgICBASVNBID0gcXcoRXhwb3J0ZXIgU09BUDo6U2VydmVyOjpQYXJhbWV0ZXJzKTsKICAgIHVzZSBTT0FQOjpMaXRlOwogICAgc3ViIGMyZiB7CiAgICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICAgIG15ICRlbnZlbG9wZSA9IHBvcDsKICAgICAgbXkgJHRlbXAgPSAkZW52ZWxvcGUtPmRhdGFvZigiLy9jMmYvdGVtcGVyYXR1cmUiKTsKICAgICAgdXNlIE1JTUU6OkVudGl0eTsKICAgICAgbXkgJGVudCA9IGJ1aWxkIE1JTUU6OkVudGl0eQogICAgICAgIFR5cGUgICAgICAgID0+ICJ0ZXh0L3BsYWluIiwKICAgICAgICBQYXRoICAgICAgICA9PiAicHJpbnRlbnYiLAogICAgICAgIEZpbGVuYW1lICAgID0+ICJwcmludGVudiIsCiAgICAgICAgRGlzcG9zaXRpb24gPT4gImF0dGFjaG1lbnQiOwogICAgICAjIHJlYWQgYXR0YWNobWVudHMKICAgICAgZm9yZWFjaCBteSAkcGFydCAoQHskZW52ZWxvcGUtPnBhcnRzfSkgewogICAgICAgIHByaW50IFNUREVSUiAic29hcGxpdGUuY2dpOiBhdHRhY2htZW50IGZvdW5kISAoIi5yZWYoJHBhcnQpLiIpXG4iOwogICAgICAgIHByaW50IFNUREVSUiAic29hcGxpdGUuY2dpOiBjb250ZW50cyA9PiAiLiRwYXJ0LT5zdHJpbmdpZnkuIlxuIjsKICAgICAgfQogICAgICAjIHNlbmQgYXR0YWNobWVudHMKICAgICAgcmV0dXJuIFNPQVA6OkRhdGEtPm5hbWUoJ2NvbnZlcnRlZFRlbXAnID0+ICgoKDkvNSkqKCR0ZW1wLT52YWx1ZSkpICsgMzIpKSwKICAgICAgICAkZW50OwogICAgfQogIH0KCj1oZWFkMiBTT0FQOjpQYWNrYWdlcjo6RElNRQoKVE9ETwoKPWhlYWQxIFNFRSBBTFNPCgpMPE1JTUU6OlRvb2xzPiwgTDxESU1FOjpUb29scz4KCj1oZWFkMSBDT1BZUklHSFQKCkNvcHlyaWdodCAoQykgMjAwMC0yMDA0IFBhdWwgS3VsY2hlbmtvLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoKVGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKaXQgdW5kZXIgdGhlIHNhbWUgdGVybXMgYXMgUGVybCBpdHNlbGYuCgo9aGVhZDEgQVVUSE9SUwoKQnlybmUgUmVlc2UgKGJ5cm5lQG1ham9yZG9qby5jb20pCgo9Y3V0Cg==</File>
        <File Location="Kernel/cpan-lib/SOAP/Lite/Packager.pm" Permission="644" Encode="Base64">IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMKIyBDb3B5cmlnaHQgKEMpIDIwMDAtMjAwNCBQYXVsIEt1bGNoZW5rbyAocGF1bGNsaW5nZXJAeWFob28uY29tKQojIFNPQVA6OkxpdGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQKIyBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSBzYW1lIHRlcm1zIGFzIFBlcmwgaXRzZWxmLgojCiMgJElkOiBQYWNrYWdlci5wbSAzNzIgMjAxMC0wNC0yOSAxODozMjozMVoga3V0dGVybWEgJAojCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpMaXRlOjpQYWNrYWdlcjsKCnVzZSBzdHJpY3Q7CnVzZSB2YXJzOwoKdXNlIHZhcnMgcXcoJFNVUFBPUlRFRF9UWVBFUyk7CiRTVVBQT1JURURfVFlQRVMgPSB7IH07CgpzdWIgQkVHSU4gewogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgIGZvciBteSAkbWV0aG9kICggcXcocGFyc2VyIGhlYWRlcnNfaHR0cCBwZXJzaXN0X3BhcnRzKSApIHsKICAgICAgICBteSAkZmllbGQgPSAnXycgLiAkbWV0aG9kOwogICAgICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgICAgICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICAgICAgICAgaWYgKEBfKSB7CiAgICAgICAgICAgICAgICAkc2VsZi0+eyRmaWVsZH0gPSBzaGlmdDsKICAgICAgICAgICAgICAgIHJldHVybiAkc2VsZgogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAkc2VsZi0+eyRmaWVsZH07CiAgICAgICAgfQogICAgfQp9CgpzdWIgbmV3IHsKICAgIG15KCRjbGFzcykgID0gc2hpZnQ7CiAgICBteSglcGFyYW1zKSA9IEBfOwogICAgYmxlc3MgewogICAgICAgICJfcGFydHMiICAgICAgICAgPT4gWyBdLAogICAgICAgICJfcGFyc2VyIiAgICAgICAgPT4gdW5kZWYsCiAgICAgICAgIl9wZXJzaXN0X3BhcnRzIiA9PiAwLAogICAgfSwgJGNsYXNzOwp9CgpzdWIgaXNfc3VwcG9ydGVkX3BhcnQgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIHJldHVybiAkU1VQUE9SVEVEX1RZUEVTLT57cmVmICRfWzBdfTsKfQoKc3ViIHBhcnRzIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBpZiAoQF8pIHsKICAgICAgICAkc2VsZi0+eydfcGFydHMnfSA9IHNoaWZ0OwogICAgfQogICAgcmV0dXJuICRzZWxmLT57J19wYXJ0cyd9Owp9CgojIFRoaXMgaXMgYSBzdGF0aWMgbWV0aG9kIHRoYXQgaGVscHMgZmluZCB0aGUgcmlnaHQgUGFja2FnZXIKc3ViIGZpbmRfcGFja2FnZXIgewogICAgIyBUT0RPIC0gSW5wdXQ6CiAgICAjICAgICAgICAqIHRoZSBtaW1ldHlwZSBvZiB0aGUgZGF0YSB0byBiZSBkZWNvZGVkIHJhdyBkYXRhIHRoYXQgbmVlZHMKICAgICMgICAgICAgICogdGhlIGRhdGEgdG8gYmUgZGVjb2RlZAogICAgIyAgICAgICAgUmV0dXJuczoKICAgICMgICAgICAgICogdGhlIHByb3BlciBTT0FQOjpMaXRlOjpQYWNrYWdlciBpbnN0YW5jZQp9CgpzdWIgcHVzaF9wYXJ0IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAoJHBhcnQpID0gQF87CiAgICBwdXNoIEB7JHNlbGYtPnsnX3BhcnRzJ319LCAkcGFydDsKfQoKc3ViIHBhY2thZ2UgewogICAgIyBkbyBub3RoaW5nCiAgICBkaWUgIlNPQVA6OkxpdGU6OlBhY2thZ2VyOjpwYWNrYWdlKCkgbXVzdCBiZSBpbXBsZW1lbnRlZCI7Cn0KCnN1YiB1bnBhY2thZ2UgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICRzZWxmLT57J19wYXJ0cyd9ID0gW10gaWYgISRzZWxmLT5wZXJzaXN0X3BhcnRzOyAjIGV4cGVyaW1lbnRhbAp9CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6TGl0ZTo6UGFja2FnZXI6Ok1JTUU7Cgp1c2Ugc3RyaWN0Owp1c2UgdmFycyBxdyhASVNBKTsKQElTQSA9IHF3KFNPQVA6OkxpdGU6OlBhY2thZ2VyKTsKCnN1YiBCRUdJTiB7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgZm9yIG15ICRtZXRob2QgKCBxdyh0cmFuc2Zlcl9lbmNvZGluZyBlbnZfaWQgZW52X2xvY2F0aW9uKSApIHsKICAgICAgICBteSAkZmllbGQgPSAnXycgLiAkbWV0aG9kOwogICAgICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgICAgICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgICAgICAgICAgaWYgKEBfKSB7CiAgICAgICAgICAgICAgICAkc2VsZi0+eyRmaWVsZH0gPSBzaGlmdDsKICAgICAgICAgICAgICAgIHJldHVybiAkc2VsZgogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAkc2VsZi0+eyRmaWVsZH07CiAgICAgICAgfQogICAgfQp9CgpzdWIgbmV3IHsKICAgIG15ICgkY2xhc3NuYW1lKSA9IEBfOwogICAgbXkgJHNlbGYgPSBTT0FQOjpMaXRlOjpQYWNrYWdlcjo6bmV3KEBfKTsKICAgICRzZWxmLT57J19jb250ZW50X2VuY29kaW5nJ30gPSAnOGJpdCc7CiAgICAkc2VsZi0+eydfZW52X2lkJ30gICAgICAgICAgID0gJzxtYWluX2VudmVsb3BlPic7CiAgICAkc2VsZi0+eydfZW52X2xvY2F0aW9uJ30gICAgID0gJy9tYWluX2VudmVsb3BlJzsKICAgIGJsZXNzICRzZWxmLCAkY2xhc3NuYW1lOwogICAgJFNPQVA6OkxpdGU6OlBhY2thZ2VyOjpTVVBQT1JURURfVFlQRVMtPnsiTUlNRTo6RW50aXR5In0gPSAxOwogICAgcmV0dXJuICRzZWxmOwp9CgpzdWIgaW5pdGlhbGl6ZV9wYXJzZXIgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIGV2YWwgInJlcXVpcmUgTUlNRTo6UGFyc2VyOyI7CiAgICBkaWUgIkNvdWxkIG5vdCBmaW5kIE1JTUU6OlBhcnNlciAtIGlzIE1JTUU6OlRvb2xzIGluc3RhbGxlZD8gQWJvcnRpbmcuIiBpZiAkQDsKICAgICRzZWxmLT57J19wYXJzZXInfSA9IE1JTUU6OlBhcnNlci0+bmV3OwogICAgJHNlbGYtPnsnX3BhcnNlcid9LT5vdXRwdXRfdG9fY29yZSgnQUxMJyk7CiAgICAkc2VsZi0+eydfcGFyc2VyJ30tPnRtcF90b19jb3JlKDEpOwogICAgJHNlbGYtPnsnX3BhcnNlcid9LT5pZ25vcmVfZXJyb3JzKDEpOwp9CgpzdWIgZ2VuZXJhdGVfcmFuZG9tX3N0cmluZyB7CiAgICBteSAoJHNlbGYsJGxlbikgPSBAXzsKICAgIG15IEBjaGFycz0oJ2EnLi4neicsJ0EnLi4nWicsJzAnLi4nOScsJ18nKTsKICAgIG15ICRyYW5kb21fc3RyaW5nOwogICAgZm9yZWFjaCAoMS4uJGxlbikgewogICAgICAgICRyYW5kb21fc3RyaW5nIC49ICRjaGFyc1tyYW5kIEBjaGFyc107CiAgICB9CiAgICByZXR1cm4gJHJhbmRvbV9zdHJpbmc7Cn0KCnN1YiBnZXRfbXVsdGlwYXJ0X2lkIHsKICAgIG15ICgkaWQpID0gc2hpZnQ7CiAgICAoJGlkIHx8ICcnKSA9fiAvXjw/KFtePl0rKT4/JC87ICQxIHx8ICcnOwp9CgpzdWIgcGFja2FnZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgKCRlbnZlbG9wZSwkY29udGV4dCkgPSBAXzsKICAgIHJldHVybiAkZW52ZWxvcGUgaWYgKCEkc2VsZi0+cGFydHMpOyAjIGlmIHRoZXJlIGFyZSBubyBwYXJ0cywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgdGhlbiB0aGVyZSBpcyBub3RoaW5nIHRvIGRvCiAgICByZXF1aXJlIE1JTUU6OkVudGl0eTsKICAgIGxvY2FsICRNSU1FOjpFbnRpdHk6OkJPVU5EQVJZX0RFTElNSVRFUiA9ICJcclxuIjsKICAgIG15ICR0b3AgPSBNSU1FOjpFbnRpdHktPmJ1aWxkKCdUeXBlJyAgICAgPT4gIk11bHRpcGFydC9SZWxhdGVkIik7CiAgICBteSAkc29hcHZlcnNpb24gPSBkZWZpbmVkKCRjb250ZXh0KSA/ICRjb250ZXh0LT5zb2FwdmVyc2lvbiA6ICcxLjEnOwogICAgJHRvcC0+YXR0YWNoKCdUeXBlJyAgICAgICAgICAgICAgICAgICAgICA9PiAkc29hcHZlcnNpb24gPT0gMS4xID8gInRleHQveG1sIiA6ICJhcHBsaWNhdGlvbi9zb2FwK3htbCIsCiAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmcnID0+ICRzZWxmLT50cmFuc2Zlcl9lbmNvZGluZygpLAogICAgICAgICAgICAgICAgICdDb250ZW50LUxvY2F0aW9uJyAgICAgICAgICA9PiAkc2VsZi0+ZW52X2xvY2F0aW9uKCksCiAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtSUQnICAgICAgICAgICAgICAgID0+ICRzZWxmLT5lbnZfaWQoKSwKICAgICAgICAgICAgICAgICAnRGF0YScgICAgICAgICAgICAgICAgICAgICAgPT4gJGVudmVsb3BlICk7CiAgICAjIGNvbnN1bWUgdGhlIGF0dGFjaG1lbnRzIHRoYXQgY29tZSBpbiBhcyBpbnB1dCBieSAnc2hpZnQnaW5nCiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgd2hpbGUgKG15ICRwYXJ0ID0gc2hpZnQoQHskc2VsZi0+cGFydHN9KSkgewogICAgICAgICR0b3AtPmFkZF9wYXJ0KCRwYXJ0KTsKICAgIH0KICAgICMgZGV0ZXJtaW5lIE1JTUUgYm91bmRhcnkKICAgIG15ICRib3VuZGFyeSA9ICR0b3AtPmhlYWQtPm11bHRpcGFydF9ib3VuZGFyeTsKICAgICRzZWxmLT5oZWFkZXJzX2h0dHAoeyAnQ29udGVudC1UeXBlJyA9PiAnTXVsdGlwYXJ0L1JlbGF0ZWQ7IHR5cGU9InRleHQveG1sIjsgc3RhcnQ9IjxtYWluX2VudmVsb3BlPiI7IGJvdW5kYXJ5PSInLiRib3VuZGFyeS4nIid9KTsKICAgIHJldHVybiAkdG9wLT5zdHJpbmdpZnlfYm9keTsKfQoKc3ViIHVucGFja2FnZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgbXkgKCRyYXdfaW5wdXQsJGNvbnRleHQpID0gQF87CiAgICAkc2VsZi0+U1VQRVI6OnVucGFja2FnZSgpOwoKICAgICMgUGFyc2UgdGhlIHJhdyBpbnB1dCBpbnRvIGEgTUlNRTo6RW50aXR5IHN0cnVjdHVyZS4KICAgICMgICAtIGZhaWwgaWYgdGhlIHJhd19pbnB1dCBpcyBub3QgTUlNRSBmb3JtYXR0ZWQKICAgICRzZWxmLT5pbml0aWFsaXplX3BhcnNlcigpIGlmICFkZWZpbmVkKCRzZWxmLT5wYXJzZXIpOwogICAgbXkgJGVudGl0eSA9IGV2YWwgeyAkc2VsZi0+cGFyc2VyLT5wYXJzZV9kYXRhKCRyYXdfaW5wdXQpIH0KICAgICAgICBvciBkaWUgIlNvbWV0aGluZyB3cm9uZyB3aXRoIE1JTUUgbWVzc2FnZTogQHtbJEAgfHwgJHNlbGYtPnBhcnNlci0+bGFzdF9lcnJvcl19XG4iOwoKICAgIG15ICRlbnYgPSB1bmRlZjsKICAgICMgbWFqb3IgbWVtb3J5IGJsb2F0IGJlbG93ISBUT0RPIC0gZml4IQogICAgaWYgKGxjKCRlbnRpdHktPmhlYWQtPm1pbWVfdHlwZSkgZXEgJ211bHRpcGFydC9mb3JtLWRhdGEnKSB7CiAgICAgICAgJGVudiA9ICRzZWxmLT5wcm9jZXNzX2Zvcm1fZGF0YSgkZW50aXR5KTsKICAgIH0KICAgIGVsc2lmIChsYygkZW50aXR5LT5oZWFkLT5taW1lX3R5cGUpIGVxICdtdWx0aXBhcnQvcmVsYXRlZCcpIHsKICAgICAgICAkZW52ID0gJHNlbGYtPnByb2Nlc3NfcmVsYXRlZCgkZW50aXR5KTsKICAgIH0KICAgIGVsc2lmIChsYygkZW50aXR5LT5oZWFkLT5taW1lX3R5cGUpIGVxICd0ZXh0L3htbCcpIHsKICAgICAgICAjIEkgZG9uJ3QgdGhpbmsgdGhpcyBldmVyIGdldHMgY2FsbGVkLgogICAgICAgICMgd2FybiAiSSBhbSBzb21ld2hlcmUgaW4gdGhlIFNPQVA6OkxpdGU6OlBhY2thZ2VyOjpNSU1FIGNvZGUgSSBkaWRuJ3Qga25vdyBJIHdvdWxkIGJlIGluISI7CiAgICAgICAgJGVudiA9ICRlbnRpdHktPmJvZHloYW5kbGUtPmFzX3N0cmluZzsKICAgIH0KICAgIGVsc2UgewogICAgICAgIGRpZSAiQ2FuJ3QgaGFuZGxlIE1JTUUgbWVzc3NhZ2Ugd2l0aCBzcGVjaWZpZWQgdHlwZSAoQHtbJGVudGl0eS0+aGVhZC0+bWltZV90eXBlXX0pXG4iOwogICAgfQoKICAgICMgcmV0dXJuIHRoZSBlbnZlbG9wZQogICAgaWYgKCRlbnYpIHsKICAgICAgICByZXR1cm4gJGVudjsKICAgIH0KICAgIGVsc2lmICgkZW50aXR5LT5ib2R5aGFuZGxlLT5hc19zdHJpbmcpIHsKICAgICAgICByZXR1cm4gJGVudGl0eS0+Ym9keWhhbmRsZS0+YXNfc3RyaW5nOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgZGllICJObyBjb250ZW50IGluIE1JTUUgbWVzc2FnZVxuIjsKICAgIH0KfQoKc3ViIHByb2Nlc3NfZm9ybV9kYXRhIHsKICAgIG15ICgkc2VsZiwgJGVudGl0eSkgPSBAXzsKICAgIG15ICRlbnYgPSB1bmRlZjsKICAgIGZvcmVhY2ggbXkgJHBhcnQgKCRlbnRpdHktPnBhcnRzKCkpIHsKICAgICAgICBteSAkbmFtZSA9ICRwYXJ0LT5oZWFkKCktPm1pbWVfYXR0cignY29udGVudC1kaXNwb3NpdGlvbi5uYW1lJyk7CiAgICAgICAgJG5hbWUgZXEgJ3BheWxvYWQnID8KICAgICAgICAkZW52ID0gJHBhcnQtPmJvZHloYW5kbGUoKS0+YXNfc3RyaW5nKCkKICAgICAgICAgICAgOiAkc2VsZi0+cHVzaF9wYXJ0KCRwYXJ0KTsKICAgIH0KICAgIHJldHVybiAkZW52Owp9CgpzdWIgcHJvY2Vzc19yZWxhdGVkIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAoJGVudGl0eSkgPSBAXzsKICAgIGRpZSAiTXVsdGlwYXJ0IE1JTUUgbWVzc2FnZXMgTVVTVCBkZWNsYXJlIE11bHRpcGFydC9SZWxhdGVkIGNvbnRlbnQtdHlwZSIKICAgICAgICBpZiAoJGVudGl0eS0+aGVhZC0+bWltZV9hdHRyKCdjb250ZW50LXR5cGUnKSAhfiAvXm11bHRpcGFydFwvcmVsYXRlZC9pKTsKICAgICMgQXMgaXQgdHVybnMgb3V0LCB0aGUgQ29udGVudC1JRCBhbmQgc3RhcnQgcGFyYW1ldGVycyBhcmUgb3B0aW9uYWwKICAgICMgYWNjb3JkaW5nIHRvIHRoZSBNSU1FIGFuZCBTT0FQIHNwZWNzLiBJbiB0aGUgZXZlbnQgdGhhdCB0aGUgaGVhZCBjYW5ub3QKICAgICMgYmUgZm91bmQsIHRoZSBoZWFkL3Jvb3QgZW50aXR5IGlzIHVzZWQgYXMgYSBzdGFydGluZyBwb2ludC4KICAgIG15ICRzdGFydCA9IGdldF9tdWx0aXBhcnRfaWQoJGVudGl0eS0+aGVhZC0+bWltZV9hdHRyKCdjb250ZW50LXR5cGUuc3RhcnQnKSk7CiAgICBpZiAoIWRlZmluZWQoJHN0YXJ0KSB8fCAkc3RhcnQgZXEgIiIpIHsKICAgICAgICAkc3RhcnQgPSAkc2VsZi0+Z2VuZXJhdGVfcmFuZG9tX3N0cmluZygxMCk7CiAgICAgICAgJGVudGl0eS0+cGFydHMoMCktPmhlYWQtPmFkZCgnY29udGVudC1pZCcsJHN0YXJ0KTsKICAgIH0KICAgIG15ICRsb2NhdGlvbiA9ICRlbnRpdHktPmhlYWQtPm1pbWVfYXR0cignY29udGVudC1sb2NhdGlvbicpCiAgICAgICAgfHwgJ3RoaXNtZXNzYWdlOi8nOwogICAgbXkgJGVudjsKICAgIGZvcmVhY2ggbXkgJHBhcnQgKCRlbnRpdHktPnBhcnRzKSB7CiAgICAgICAgbmV4dCBpZiAhVU5JVkVSU0FMOjppc2EoJHBhcnQgPT4gIk1JTUU6OkVudGl0eSIpOwoKICAgICAgICAjIFdlaXJkLCB0aGUgZm9sbG93aW5nIHVzZSBvZiBoZWFkLT5nZXQoU0NBTEFSWyxJTkRFWF0pIGRvZXNuJ3Qgd29yayBhcwogICAgICAgICMgZXhwZWN0ZWQuIFdvcmsgYXJvdW5kIGlzIHRvIGVsaW1pbmF0ZSB0aGUgSU5ERVguCiAgICAgICAgbXkgJHBpZCA9IGdldF9tdWx0aXBhcnRfaWQoJHBhcnQtPmhlYWQtPm1pbWVfYXR0cignY29udGVudC1pZCcpKTsKCiAgICAgICAgIyBJZiBDb250ZW50LUlEIGlzIG5vdCBzdXBwbGllZCwgdGhlbiBnZW5lcmF0ZSBhIHJhbmRvbSBvbmUgKEhBQ0sgLSBiZWNhdXNlCiAgICAgICAgIyBNSU1FOjpFbnRpdHkgZG9lcyBub3QgZG8gdGhpcyBhcyBpdCBzaG91bGQuLi4gY29udGVudC1pZCBpcyByZXF1aXJlZAogICAgICAgICMgYWNjb3JkaW5nIHRvIE1JTUUgc3BlY2lmaWNhdGlvbikKICAgICAgICAkcGlkID0gJHNlbGYtPmdlbmVyYXRlX3JhbmRvbV9zdHJpbmcoMTApIGlmICRwaWQgZXEgJyc7CiAgICAgICAgbXkgJHR5cGUgPSAkcGFydC0+aGVhZC0+bWltZV90eXBlOwoKICAgICAgICAjIElmIGEgQ29udGVudC1Mb2NhdGlvbiBoZWFkZXIgY2Fubm90IGJlIGZvdW5kLCB0aGlzIHdpbGwgbG9vayBmb3IgYW4KICAgICAgICAjIGFsdGVybmF0aXZlIGluIHRoZSBmb2xsb3dpbmcgTUlNRSBIZWFkZXIgYXR0cmlidXRlcwogICAgICAgIG15ICRwbG9jYXRpb24gPSAkcGFydC0+aGVhZC0+Z2V0KCdjb250ZW50LWxvY2F0aW9uJykKICAgICAgICAgICAgfHwgJHBhcnQtPmhlYWQtPm1pbWVfYXR0cignQ29udGVudC1EaXNwb3NpdGlvbi5maWxlbmFtZScpCiAgICAgICAgICAgIHx8ICRwYXJ0LT5oZWFkLT5taW1lX2F0dHIoJ0NvbnRlbnQtVHlwZS5uYW1lJyk7CiAgICAgICAgaWYgKCRzdGFydCAmJiAkcGlkIGVxICRzdGFydCkgewogICAgICAgICAgICAkZW52ID0gJHBhcnQtPmJvZHloYW5kbGUtPmFzX3N0cmluZzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICRzZWxmLT5wdXNoX3BhcnQoJHBhcnQpIGlmIChkZWZpbmVkKCRwYXJ0LT5ib2R5aGFuZGxlKSk7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAkZW52Owp9CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6TGl0ZTo6UGFja2FnZXI6OkRJTUU7Cgp1c2Ugc3RyaWN0Owp1c2UgdmFycyBxdyhASVNBKTsKQElTQSA9IHF3KFNPQVA6OkxpdGU6OlBhY2thZ2VyKTsKCnN1YiBCRUdJTiB7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgZm9yIG15ICRtZXRob2QgKCBxdyhmb28pICkgewogICAgICAgIG15ICRmaWVsZCA9ICdfJyAuICRtZXRob2Q7CiAgICAgICAgKiRtZXRob2QgPSBzdWIgewogICAgICAgICAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgICAgICAgICBpZiAoQF8pIHsgJHNlbGYtPnskZmllbGR9ID0gc2hpZnQ7IHJldHVybiAkc2VsZiB9CiAgICAgICAgICAgIHJldHVybiAkc2VsZi0+eyRmaWVsZH07CiAgICAgICAgfQogICAgfQp9CgpzdWIgbmV3IHsKICAgIG15ICgkY2xhc3NuYW1lKSA9IEBfOwogICAgbXkgJHNlbGYgPSBTT0FQOjpMaXRlOjpQYWNrYWdlcjo6bmV3KEBfKTsKICAgIGJsZXNzICRzZWxmLCAkY2xhc3NuYW1lOwogICAgJFNPQVA6OkxpdGU6OlBhY2thZ2VyOjpTVVBQT1JURURfVFlQRVMtPnsiRElNRTo6UGF5bG9hZCJ9ID0gMTsKICAgIHJldHVybiAkc2VsZjsKfQoKc3ViIGluaXRpYWxpemVfcGFyc2VyIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBwcmludCBTVERFUlIgIkluaXRpYWxpemluZyBwYXJzZXJcbiI7CiAgICBldmFsICJyZXF1aXJlIERJTUU6OlBhcnNlcjsiOwogICAgZGllICJDb3VsZCBub3QgZmluZCBESU1FOjpQYXJzZXIgLSBpcyBESU1FOjpUb29scyBpbnN0YWxsZWQ/IEFib3J0aW5nLiIgaWYgJEA7CiAgICAkc2VsZi0+eydfcGFyc2VyJ30gPSBESU1FOjpQYXJzZXItPm5ldzsKfQoKc3ViIHBhY2thZ2UgewogICBteSAkc2VsZiA9IHNoaWZ0OwogICBteSAoJGVudmVsb3BlLCRjb250ZXh0KSA9IEBfOwogICByZXR1cm4gJGVudmVsb3BlIGlmICghJHNlbGYtPnBhcnRzKTsgIyBpZiB0aGVyZSBhcmUgbm8gcGFydHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIHRoZW4gdGhlcmUgaXMgbm90aGluZyB0byBkbwogICByZXF1aXJlIERJTUU6Ok1lc3NhZ2U7CiAgIHJlcXVpcmUgRElNRTo6UGF5bG9hZDsKICAgbXkgJG1lc3NhZ2UgPSBESU1FOjpNZXNzYWdlLT5uZXc7CiAgIG15ICR0b3AgPSBESU1FOjpQYXlsb2FkLT5uZXc7CiAgIG15ICRzb2FwdmVyc2lvbiA9IGRlZmluZWQoJGNvbnRleHQpID8gJGNvbnRleHQtPnNvYXB2ZXJzaW9uIDogJzEuMSc7CiAgICR0b3AtPmF0dGFjaCgnTUlNRVR5cGUnID0+ICRzb2FwdmVyc2lvbiA9PSAxLjEgPwogICAgICAgICAgICAgICAgICAiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIDogImFwcGxpY2F0aW9uL3NvYXAreG1sIiwKICAgICAgICAgICAgICAgICdEYXRhJyAgICAgPT4gJGVudmVsb3BlICk7CiAgICRtZXNzYWdlLT5hZGRfcGF5bG9hZCgkdG9wKTsKICAgIyBjb25zdW1lIHRoZSBhdHRhY2htZW50cyB0aGF0IGNvbWUgaW4gYXMgaW5wdXQgYnkgJ3NoaWZ0J2luZwogICBubyBzdHJpY3QgJ3JlZnMnOwogICB3aGlsZSAobXkgJHBhcnQgPSBzaGlmdChAeyRzZWxmLT5wYXJ0c30pKSB7CiAgICAgIGRpZSAiWW91IGFyZSBvbmx5IGFsbG93ZWQgdG8gYWRkIHBhcnRzIG9mIHR5cGUgRElNRTo6UGF5bG9hZCB0byBhIERJTUU6Ok1lc3NhZ2UiCiAgICAgICAgaWYgKCEkcGFydC0+aXNhKCdESU1FOjpQYXlsb2FkJykpOwojICAgICAgcHJpbnQgU1RERVJSICJBZGRpbmcgcGF5bG9hZCB0byBESU1FIG1lc3NhZ2U6ICIucmVmKCRwYXJ0KS4iXG4iOwogICAgICAkbWVzc2FnZS0+YWRkX3BheWxvYWQoJHBhcnQpOwojICAgICAgcHJpbnQgU1RERVJSICJQYXlsb2FkJ3MgcGF5bG9hZCBpczogIi4keyRwYXJ0LT5wcmludF9jb250ZW50X2RhdGF9LiJcbiI7CiAgIH0KICAgJHNlbGYtPmhlYWRlcnNfaHR0cCh7ICdDb250ZW50LVR5cGUnID0+ICdhcHBsaWNhdGlvbi9kaW1lJyB9KTsKICAgcmV0dXJuICRtZXNzYWdlLT5wcmludF9kYXRhOwp9CgpzdWIgdW5wYWNrYWdlIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICBteSAoJHJhd19pbnB1dCwkY29udGV4dCkgPSBAXzsKICAgICRzZWxmLT5TVVBFUjo6dW5wYWNrYWdlKCk7CgogICAgIyBQYXJzZSB0aGUgcmF3IGlucHV0IGludG8gYSBESU1FOjpNZXNzYWdlIHN0cnVjdHVyZS4KICAgICMgICAtIGZhaWwgaWYgdGhlIHJhd19pbnB1dCBpcyBub3QgRElNRSBmb3JtYXR0ZWQKICAgIHByaW50IFNUREVSUiAicmF3X2RhdGE6ICRyYXdfaW5wdXRcbiI7CiAgICAkc2VsZi0+aW5pdGlhbGl6ZV9wYXJzZXIoKSBpZiAhZGVmaW5lZCgkc2VsZi0+cGFyc2VyKTsKICAgIG15ICRtZXNzYWdlID0gZXZhbCB7ICRzZWxmLT5wYXJzZXItPnBhcnNlX2RhdGEoXCRyYXdfaW5wdXQpIH0KICAgICAgICBvciBkaWUgIlNvbWV0aGluZyB3cm9uZyB3aXRoIERJTUUgbWVzc2FnZTogQHtbJEBdfVxuIjsKCiAgICAjIFRoZSBmaXJzdCBwYXlsb2FkIGlzIGFsd2F5cyB0aGUgU09BUCBNZXNzYWdlCiAgICAjIFRPRE8gLSBFcnJvciBjaGVjawogICAgbXkgQHBheWxvYWRzID0gQHskbWVzc2FnZS0+eydfUEFZTE9BRFMnfX07CiAgICBteSAkZW52ID0gc2hpZnQoQHBheWxvYWRzKTsKICAgIG15ICRlbnZfc3RyID0gJGVudi0+cHJpbnRfY29udGVudF9kYXRhOwogICAgcHJpbnQgU1RERVJSICJSZWNlaXZlZCB0aGlzIGVudmVsb3BlOiAiLiRlbnZfc3RyLiJcbiI7CiAgICB3aGlsZSAobXkgJHAgPSBzaGlmdChAcGF5bG9hZHMpKSB7CiAgICAgICAgcHJpbnQgU1RERVJSICJBZGRpbmcgcGFydCB0byBQYWNrYWdlclxuIjsKICAgICAgICAkc2VsZi0+cHVzaF9wYXJ0KCRwKTsKICAgIH0KICAgIHJldHVybiAkZW52X3N0cjsKfQoKMTsKX19FTkRfXwoKPXBvZAoKPWhlYWQxIE5BTUUKClNPQVA6OkxpdGU6OlBhY2thZ2VyIC0gdGhpcyBjbGFzcyBpcyBhbiBhYnN0cmFjdCBjbGFzcyB3aGljaCBhbGxvd3MgZm9yIG11bHRpcGxlIHR5cGVzIG9mIHBhY2thZ2luZyBhZ2VudHMgc3VjaCBhcyBNSU1FIGFuZCBESU1FLgoKPWhlYWQxIERFU0NSSVBUSU9OCgpUaGUgU09BUDo6TGl0ZTo6UGFja2FnZXIgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIG1hbmFnaW5nIGEgc2V0IG9mICJwYXJ0cy4iIFBhcnRzIGFyZQphZGRpdGlvbmFsIHBpZWNlcyBvZiBpbmZvcm1hdGlvbiwgYWRkaXRpb25hbCBkb2N1bWVudHMsIG9yIHZpcnR1YWxseSBhbnl0aGluZyB0aGF0Cm5lZWRzIHRvIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgU09BUCBFbnZlbG9wZS9wYXlsb2FkLiBUaGUgcGFja2FnZXIgdGhlbiB3aWxsIHRha2UKdGhlc2UgcGFydHMgYW5kIGVuY29kZS9kZWNvZGUgb3IgInBhY2thZ2UiLyJ1bnBhY2thZ2UiIHRoZW0gYXMgdGhleSBjb21lIGFuZCBnbwpvdmVyIHRoZSB3aXJlLgoKPWhlYWQxIE1FVEhPRFMKCj1vdmVyCgo9aXRlbSBuZXcKCkluc3RhbnRpYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBhIFNPQVA6OkxpdGU6OlBhY2thZ2VyLgoKPWl0ZW0gcGFydHMKCkNvbnRhaW5zIGFuIGFycmF5IG9mIHBhcnRzLiBUaGUgY29udGVudHMgb2YgdGhpcyBhcnJheSBhbmQgdGhlaXIgdHlwZXMgYXJlIGNvbXBsZXRlbHkKZGVwZW5kZW50IHVwb24gdGhlIFBhY2thZ2VyIGJlaW5nIHVzZWQuIEZvciBleGFtcGxlLCB3aGVuIHVzaW5nIE1JTUUsIHRoZSBjb250ZW50Cm9mIHRoaXMgYXJyYXkgaXMgTUlNRTo6RW50aXR5J3MuCgo9aXRlbSBwdXNoX3BhcnQKCkFkZHMgYSBwYXJ0IHRvIHNldCBvZiBwYXJ0cyBtYW5hZ2VkIGJ5IHRoZSBjdXJyZW50IGluc3RhbmNlIG9mIFNPQVA6OkxpdGU6OlBhY2thZ2VyLgoKPWl0ZW0gcGFyc2VyCgpSZXR1cm5zIHRoZSBwYXJzZXIgdXNlZCB0byBwYXJzZSBhdHRhY2htZW50cyBvdXQgb2YgYSBkYXRhIHN0cmVhbS4KCj1pdGVtIGhlYWRlcnNfaHR0cAoKVGhpcyBpcyBhIGhvb2sgaW50byB0aGUgSFRUUCBsYXllci4gSXQgcHJvdmlkZXMgYSB3YXkgZm9yIGEgcGFja2FnZXIgdG8gYWRkIGFuZC9vciBtb2RpZnkKSFRUUCBoZWFkZXJzIGluIGEgcmVxdWVzdC9yZXNwb25zZS4gRm9yIGV4YW1wbGUsIG1vc3QgcGFja2FnaW5nIGxheWVycyB3aWxsIG5lZWQgdG8Kb3ZlcnJpZGUgdGhlIENvbnRlbnQtVHlwZSAoZS5nLiBtdWx0aXBhcnQvcmVsYXRlZCwgb3IgYXBwbGljYXRpb24vZGltZSkuCgo9YmFjawoKPWhlYWQxIEFCU1RSQUNUIE1FVEhPRFMKCklmIHlvdSB3aXNoIHRvIGltcGxlbWVudCB5b3VyIG93biBTT0FQOjpMaXRlOjpQYWNrYWdlciwgdGhlbiB0aGUgbWV0aG9kcyBiZWxvdyBtdXN0IGJlCmltcGxlbWVudGVkIGJ5IHlvdSBhY2NvcmRpbmcgdG8gdGhlIHByZXNjcmliZWQgaW5wdXQgYW5kIG91dHB1dCByZXF1aXJlbWVudHMuCgo9b3ZlcgoKPWl0ZW0gcGFja2FnZSgpCgpUaGUgQzxwYWNrYWdlPiBzdWJyb3V0aW5lIHRha2VzIGFzIGlucHV0IHRoZSBTT0FQIGVudmVsb3BlIGluIHN0cmluZy9TQ0FMQVIgZm9ybS4KVGhpcyB3aWxsIHNlcnZlIGFzIHRoZSBjb250ZW50IG9mIHRoZSByb290IHBhcnQuIFRoZSBwYWNrYWdlciB0aGVuIGVuY2Fwc3VsYXRlcyB0aGUKZW52ZWxvcGUgd2l0aCB0aGUgcGFydHMgY29udGFpbmVkIHdpdGhpbiBDPHBhcnRzPiBhbmQgcmV0dXJucyB0aGUgcHJvcGVybHkKZW5jYXBzdWxhdGVkIGVudmVsb3BlIGluIHN0cmluZy9TQ0FMQVIgZm9ybS4KCj1pdGVtIHVucGFja2FnZSgpCgpUaGUgQzx1bnBhY2thZ2U+IHN1YnJvdXRpbmVzIHRha2VzIGFzIGlucHV0IHJhdyBkYXRhIHRoYXQgbmVlZHMgdG8gYmUgcGFyc2VkIGludG8KYSBzZXQgb2YgcGFydHMuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBleHRyYWN0aW5nIHRoZSBlbnZlbG9wZSBmcm9tIHRoZSBpbnB1dCwgYW5kCnBvcHVsYXRpbmcgQzxwYXJ0cz4gd2l0aCBhbiBBUlJBWSBvZiBwYXJ0cyBleHRyYWN0ZWQgZnJvbSB0aGUgaW5wdXQuIEl0IHRoZW4gcmV0dXJucwp0aGUgU09BUCBFbnZlbG9wZSBpbiBzdHJpbmcvU0NBTEFSIGZvcm0gc28gdGhhdCBTT0FQOjpMaXRlIGNhbiBwYXJzZSBpdC4KCj1iYWNrCgo9aGVhZDEgU1VQUE9SVEVEIFBBQ0tBR0lORyBGT1JNQVRTCgo9aGVhZDIgU09BUDo6TGl0ZTo6UGFja2FnZXI6Ok1JTUUKCkM8U09BUDo6TGl0ZTo6UGFja2FnZXI6Ok1JTUU+IHV0aWxpemVzIEw8TUlNRTo6VG9vbHM+IHRvIHByb3ZpZGVzIHRoZSBhYmlsaXR5IHRvIHNlbmQKYW5kIHJlY2VpdmUgTXVsdGlwYXJ0L1JlbGF0ZWQgYW5kIE11bHRpcGFydC9Gb3JtLURhdGEgZm9ybWF0dGVkIHJlcXVlc3RzIGFuZApyZXNwb25zZXMuCgo9aGVhZDMgTUlNRSBNRVRIT0RTCgpUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgd2hlbiBjb21wb3NpbmcgYSBNSU1FIGZvcm1hdHRlZCBtZXNzYWdlLgoKPW92ZXIKCj1pdGVtIHRyYW5zZmVyX2VuY29kaW5nCgpUaGUgdmFsdWUgb2YgdGhlIHJvb3QgcGFydCdzIENvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmcgTUlNRSBIZWFkZXIuIERlZmF1bHQgaXM6IDhiaXQuCgo9aXRlbSBlbnZfaWQKClRoZSB2YWx1ZSBvZiB0aGUgcm9vdCBwYXJ0J3MgQ29udGVudC1JZCBNSU1FIEhlYWRlci4gRGVmYXVsdCBpczogPG1haW5fZW52ZWxvcGU+LgoKPWl0ZW0gZW52X2xvY2F0aW9uCgpUaGUgdmFsdWUgb2YgdGhlIHJvb3QgcGFydCdzIENvbnRlbnQtTG9jYXRpb24gTUlNRSBIZWFkZXIuIERlZmF1bHQgaXM6IC9tYWluX2VudmVsb3BlLgoKPWl0ZW0gZW52X3R5cGUKClRoZSB2YWx1ZSBvZiB0aGUgcm9vdCBwYXJ0J3MgQ29udGVudC1UeXBlIE1JTUUgSGVhZGVyLiBEZWZhdWx0IGlzOiB0ZXh0L3htbC4KCj1iYWNrCgo9aGVhZDMgT1BUSU1JWklORyBUSEUgTUlNRSBQQVJTRVIKClRoZSB1c2Ugb2YgYXR0YWNobWVudHMgY2FuIG9mdGVuIHJlc3VsdCBpbiBhIGhlYXZ5IGRyYWluIG9uIHN5c3RlbSByZXNvdXJjZXMgZGVwZW5kaW5nCnVwb24gaG93IHlvdXIgTUlNRSBwYXJzZXIgaXMgY29uZmlndXJlZC4gRm9yIGV4YW1wbGUsIHlvdSBjYW4gaW5zdHJ1Y3QgdGhlIHBhcnNlciB0bwpzdG9yZSBhdHRhY2htZW50cyBpbiBtZW1vcnksIG9yIHRvIHVzZSB0ZW1wIGZpbGVzLiBVc2luZyBvbmUgb2YgdGhlIG90aGVyIGNhbiBhZmZlY3QKcGVyZm9ybWFuY2UsIGRpc2sgdXRpbGl6YXRpb24sIGFuZC9vciByZWxpYWJpbGl0eS4gVGhlcmVmb3JlIHlvdSBzaG91bGQgY29uc3VsdCB0aGUKZm9sbG93aW5nIFVSTCBmb3Igb3B0aW1pemF0aW9uIHRlY2huaXF1ZXMgYW5kIHRyYWRlLW9mZnM6CgpodHRwOi8vc2VhcmNoLmNwYW4ub3JnL2Rpc3QvTUlNRS10b29scy9saWIvTUlNRS9QYXJzZXIucG0jT1BUSU1JWklOR19ZT1VSX1BBUlNFUgoKVG8gbW9kaWZ5IHRoZSBwYXJzZXIncyBjb25maWd1cmF0aW9uIG9wdGlvbnMgY29uc3VsdCB0aGUgZm9sbG93aW5nIGNvZGUgc2FtcGxlLAp3aGljaCBpbmNpZGVudGFsbHkgc2hvd3MgaG93IHRvIG1pbmltaXplIG1lbW9yeSB1dGlsaXphdGlvbjoKCiAgbXkgJHBhY2thZ2VyID0gU09BUDo6TGl0ZTo6UGFja2FnZXI6Ok1JTUUtPm5ldzsKICAjICRwYWNrYWdlci0+cGFyc2VyLT5kZWNvZGVfaGVhZGVycygxKTsgIyBubyBkaWZmZXJlbmNlCiAgIyAkcGFja2FnZXItPnBhcnNlci0+ZXh0cmFjdF9uZXN0ZWRfbWVzc2FnZXMoMSk7ICMgbm8gZGlmZmVyZW5jZQogICRwYWNrYWdlci0+cGFyc2VyLT5vdXRwdXRfdG9fY29yZSgwKTsgIyBtdWNoIGxlc3MgbWVtb3J5CiAgJHBhY2thZ2VyLT5wYXJzZXItPnRtcF90b19jb3JlKDApOyAjIG11Y2ggbGVzcyBtZW1vcnkKICAkcGFja2FnZXItPnBhcnNlci0+dG1wX3JlY3ljbGluZygwKTsgIyBwcm9tb3RlcyBmYXN0ZXIgZ2FyYmFnZSBjb2xsZWN0aW9uCiAgJHBhY2thZ2VyLT5wYXJzZXItPnVzZV9pbm5lcl9maWxlcygxKTsgIyBubyBkaWZmZXJlbmNlCiAgbXkgJGNsaWVudCA9IFNPQVA6OkxpdGUtPnVyaSgkTlMpLT5wcm94eSgkVVJMKS0+cGFja2FnZXIoJHBhY2thZ2VyKTsKICAkY2xpZW50LT5zb21lTWV0aG9kKCk7Cgo9aGVhZDMgQ0xJRU5UIFNJREUgRVhBTVBMRQoKVGhlIGZvbGxvd2luZyBjb2RlIHNhbXBsZSBzaG93cyBob3cgdG8gdXNlIGF0dGFjaG1lbnRzIHdpdGhpbiB0aGUgY29udGV4dCBvZiBhClNPQVA6OkxpdGUgY2xpZW50LgoKICAjIS91c3IvYmluL3BlcmwKICB1c2UgU09BUDo6TGl0ZTsKICB1c2UgTUlNRTo6RW50aXR5OwogIG15ICRlbnQgPSBidWlsZCBNSU1FOjpFbnRpdHkKICAgIFR5cGUgICAgICAgID0+ICJ0ZXh0L3BsYWluIiwKICAgIFBhdGggICAgICAgID0+ICJhdHRhY2htZW50LnR4dCIsCiAgICBGaWxlbmFtZSAgICA9PiAiYXR0YWNobWVudC50eHQiLAogICAgRGlzcG9zaXRpb24gPT4gImF0dGFjaG1lbnQiOwogICROUyA9ICJ1cm46TWFqb3Jkb2pvOlRlbXBlcmF0dXJlU2VydmljZSI7CiAgJEhPU1QgPSAiaHR0cDovL2xvY2FsaG9zdC9jZ2ktYmluL3NvYXBsaXRlLmNnaSI7CiAgbXkgJGNsaWVudCA9IFNPQVA6OkxpdGUKICAgIC0+cGFja2FnZXIoU09BUDo6TGl0ZTo6UGFja2FnZXI6Ok1JTUUtPm5ldykKICAgIC0+cGFydHMoWyAkZW50IF0pCiAgICAtPnVyaSgkTlMpCiAgICAtPnByb3h5KCRIT1NUKTsKICAkcmVzcG9uc2UgPSAkY2xpZW50LT5jMmYoU09BUDo6RGF0YS0+bmFtZSgidGVtcGVyYXR1cmUiID0+ICcxMDAnKSk7CiAgcHJpbnQgJHJlc3BvbnNlLT52YWx1ZW9mKCcvL2MyZlJlc3BvbnNlL2ZvbycpOwoKPWhlYWQzIFNFUlZFUiBTSURFIEVYQU1QTEUKClRoZSBmb2xsb3dpbmcgY29kZSBzaG93cyBob3cgdG8gdXNlIGF0dGFjaG1lbnRzIHdpdGhpbiB0aGUgY29udGV4dCBvZiBhIENHSQpzY3JpcHQuIEl0IHNob3dzIGhvdyB0byByZWFkIGluY29taW5nIGF0dGFjaG1lbnRzLCBhbmQgdG8gcmV0dXJuIGF0dGFjaG1lbnRzIHRvCnRoZSBjbGllbnQuCgogICMhL3Vzci9iaW4vcGVybCAtdwogIHVzZSBTT0FQOjpUcmFuc3BvcnQ6OkhUVFA7CiAgdXNlIE1JTUU6OkVudGl0eTsKICBTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkNHSQogICAgLT5wYWNrYWdlcihTT0FQOjpMaXRlOjpQYWNrYWdlcjo6TUlNRS0+bmV3KQogICAgLT5kaXNwYXRjaF93aXRoKHsndXJuOk1ham9yZG9qbzpUZW1wZXJhdHVyZVNlcnZpY2UnID0+ICdUZW1wZXJhdHVyZVNlcnZpY2UnfSkKICAgIC0+aGFuZGxlOwoKICBCRUdJTiB7CiAgICBwYWNrYWdlIFRlbXBlcmF0dXJlU2VydmljZTsKICAgIHVzZSB2YXJzIHF3KEBJU0EpOwogICAgQElTQSA9IHF3KEV4cG9ydGVyIFNPQVA6OlNlcnZlcjo6UGFyYW1ldGVycyk7CiAgICB1c2UgU09BUDo6TGl0ZTsKICAgIHN1YiBjMmYgewogICAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgICBteSAkZW52ZWxvcGUgPSBwb3A7CiAgICAgIG15ICR0ZW1wID0gJGVudmVsb3BlLT5kYXRhb2YoIi8vYzJmL3RlbXBlcmF0dXJlIik7CiAgICAgIHVzZSBNSU1FOjpFbnRpdHk7CiAgICAgIG15ICRlbnQgPSBidWlsZCBNSU1FOjpFbnRpdHkKICAgICAgICBUeXBlICAgICAgICA9PiAidGV4dC9wbGFpbiIsCiAgICAgICAgUGF0aCAgICAgICAgPT4gInByaW50ZW52IiwKICAgICAgICBGaWxlbmFtZSAgICA9PiAicHJpbnRlbnYiLAogICAgICAgIERpc3Bvc2l0aW9uID0+ICJhdHRhY2htZW50IjsKICAgICAgIyByZWFkIGF0dGFjaG1lbnRzCiAgICAgIGZvcmVhY2ggbXkgJHBhcnQgKEB7JGVudmVsb3BlLT5wYXJ0c30pIHsKICAgICAgICBwcmludCBTVERFUlIgInNvYXBsaXRlLmNnaTogYXR0YWNobWVudCBmb3VuZCEgKCIucmVmKCRwYXJ0KS4iKVxuIjsKICAgICAgICBwcmludCBTVERFUlIgInNvYXBsaXRlLmNnaTogY29udGVudHMgPT4gIi4kcGFydC0+c3RyaW5naWZ5LiJcbiI7CiAgICAgIH0KICAgICAgIyBzZW5kIGF0dGFjaG1lbnRzCiAgICAgIHJldHVybiBTT0FQOjpEYXRhLT5uYW1lKCdjb252ZXJ0ZWRUZW1wJyA9PiAoKCg5LzUpKigkdGVtcC0+dmFsdWUpKSArIDMyKSksCiAgICAgICAgJGVudDsKICAgIH0KICB9Cgo9aGVhZDIgU09BUDo6TGl0ZTo6UGFja2FnZXI6OkRJTUUKClRPRE8KCj1oZWFkMSBTRUUgQUxTTwoKTDxNSU1FOjpUb29scz4sIEw8RElNRTo6VG9vbHM+Cgo9aGVhZDEgQ09QWVJJR0hUCgpDb3B5cmlnaHQgKEMpIDIwMDAtMjAwNyBQYXVsIEt1bGNoZW5rby4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KClRoaXMgbGlicmFyeSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5Cml0IHVuZGVyIHRoZSBzYW1lIHRlcm1zIGFzIFBlcmwgaXRzZWxmLgoKPWhlYWQxIEFVVEhPUlMKCkJ5cm5lIFJlZXNlCgpNYXJ0aW4gS3V0dGVyIEU8bHQ+bWFydGluLmt1dHRlciBmZW4tbmV0LmRlRTxndD4KCj1jdXQK</File>
        <File Location="Kernel/cpan-lib/SOAP/Lite/Utils.pm" Permission="644" Encode="Base64">cGFja2FnZSBTT0FQOjpMaXRlOjpVdGlsczsKdXNlIHN0cmljdDsKCnN1YiBpbXBvcnQgewogICAgbXkgJGNhbGxlciA9IGNhbGxlcigpOwogICAgbm8gc3RyaWN0IHF3KHJlZnMpOwogICAgKnsgIiRjYWxsZXJcOjpfX21rX2FjY2Vzc29ycyIgfSA9IFwmX19ta19hY2Nlc3NvcnM7Cn0KCnN1YiBfX21rX2FjY2Vzc29ycyB7CiAgICBteSAoJGNsYXNzLCBAbWV0aG9kX2Zyb20pID0gQF87CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgZm9yIG15ICRtZXRob2QgKCBAbWV0aG9kX2Zyb20gKSB7CiAgICAgICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICAgICAqeyAiJGNsYXNzXDo6JG1ldGhvZCIgfSA9IHN1YiB7CiAgICAgICAgICAgIG15ICRzZWxmID0gcmVmICRfWzBdID8gc2hpZnQgOiBzaGlmdC0+bmV3KCk7CiAgICAgICAgICAgIGlmIChAXykgewogICAgICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9ID0gc2hpZnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gJHNlbGYKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgICAgIH0KICAgIH0KfQoKCjE7CgpfX0VORF9fCg==</File>
        <File Location="Kernel/cpan-lib/SOAP/Lite/Utils.pm" Permission="644" Encode="Base64">cGFja2FnZSBTT0FQOjpMaXRlOjpVdGlsczsKdXNlIHN0cmljdDsKCnN1YiBpbXBvcnQgewogICAgbXkgJGNhbGxlciA9IGNhbGxlcigpOwogICAgbm8gc3RyaWN0IHF3KHJlZnMpOwogICAgKnsgIiRjYWxsZXJcOjpfX21rX2FjY2Vzc29ycyIgfSA9IFwmX19ta19hY2Nlc3NvcnM7Cn0KCnN1YiBfX21rX2FjY2Vzc29ycyB7CiAgICBteSAoJGNsYXNzLCBAbWV0aG9kX2Zyb20pID0gQF87CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgZm9yIG15ICRtZXRob2QgKCBAbWV0aG9kX2Zyb20gKSB7CiAgICAgICAgbXkgJGZpZWxkID0gJ18nIC4gJG1ldGhvZDsKICAgICAgICAqeyAiJGNsYXNzXDo6JG1ldGhvZCIgfSA9IHN1YiB7CiAgICAgICAgICAgIG15ICRzZWxmID0gcmVmICRfWzBdID8gc2hpZnQgOiBzaGlmdC0+bmV3KCk7CiAgICAgICAgICAgIGlmIChAXykgewogICAgICAgICAgICAgICAgJHNlbGYtPnskZmllbGR9ID0gc2hpZnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gJHNlbGYKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJHNlbGYtPnskZmllbGR9OwogICAgICAgIH0KICAgIH0KfQoKCjE7CgpfX0VORF9fCg==</File>
        <File Location="Kernel/cpan-lib/SOAP/Lite/Deserializer/XMLSchema1999.pm" Permission="644" Encode="Base64">cGFja2FnZSBTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYTE5OTk7CnVzZSBzdHJpY3Q7Cgp1c2UgU09BUDo6TGl0ZTo6RGVzZXJpYWxpemVyOjpYTUxTY2hlbWFTT0FQMV8xOwoKc3ViIGFueVR5cGVWYWx1ZSB7ICd1ci10eXBlJyB9CgojIHVzZSBhc19zdHJpbmcgYW5kIGFzX2Jvb2xlYW4gZnJvbSBTT0FQMV8xIERlc2VyaWFsaXplcgoKc3ViIGFzX3N0cmluZzsgKmFzX3N0cmluZyA9IFwmU09BUDo6TGl0ZTo6RGVzZXJpYWxpemVyOjpYTUxTY2hlbWFTT0FQMV8xOjphc19zdHJpbmc7CnN1YiBhc19ib29sZWFuOyAqYXNfYm9vbGVhbiA9IFwmU09BUDo6TGl0ZTo6RGVzZXJpYWxpemVyOjpYTUxTY2hlbWFTT0FQMV8xOjphc19ib29sZWFuOwoKc3ViIGFzX2hleCB7IAogICAgc2hpZnQ7IAogICAgbXkgJHZhbHVlID0gc2hpZnQ7IAogICAgJHZhbHVlID1+IHMvKFthLXpBLVowLTldezJ9KS9jaHIgb2N0ICcweCcuJDEvZ2U7IAogICAgJHZhbHVlIAp9CgpzdWIgYXNfdXJfdHlwZSB7ICRfWzFdIH0KCnN1YiBhc191bmRlZiB7CiAgICBzaGlmdDsKICAgIG15ICR2YWx1ZSA9IHNoaWZ0OwogICAgJHZhbHVlIGVxICcxJyB8fCAkdmFsdWUgZXEgJ3RydWUnCiAgICAgICAgPyAxIAogICAgICAgIDogJHZhbHVlIGVxICcwJyB8fCAkdmFsdWUgZXEgJ2ZhbHNlJwogICAgICAgICAgICA/IDAgCiAgICAgICAgICAgIDogZGllICJXcm9uZyBudWxsL25pbCB2YWx1ZSAnJHZhbHVlJ1xuIjsKfQoKQkVHSU4gewogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgIGZvciBteSAkbWV0aG9kIChxdygKICAgICAgICBmbG9hdCBkb3VibGUgZGVjaW1hbCB0aW1lRHVyYXRpb24gcmVjdXJyaW5nRHVyYXRpb24gdXJpUmVmZXJlbmNlCiAgICAgICAgaW50ZWdlciBub25Qb3NpdGl2ZUludGVnZXIgbmVnYXRpdmVJbnRlZ2VyIGxvbmcgaW50IHNob3J0IGJ5dGUKICAgICAgICBub25OZWdhdGl2ZUludGVnZXIgdW5zaWduZWRMb25nIHVuc2lnbmVkSW50IHVuc2lnbmVkU2hvcnQgdW5zaWduZWRCeXRlCiAgICAgICAgcG9zaXRpdmVJbnRlZ2VyIHRpbWVJbnN0YW50IHRpbWUgdGltZVBlcmlvZCBkYXRlIG1vbnRoIHllYXIgY2VudHVyeQogICAgICAgIHJlY3VycmluZ0RhdGUgcmVjdXJyaW5nRGF5IGxhbmd1YWdlCiAgICApKSB7CiAgICAgICAgbXkgJG5hbWUgPSAnYXNfJyAuICRtZXRob2Q7CiAgICAgICAgKiRuYW1lID0gc3ViIHsgJF9bMV0gfTsKICAgIH0KfQoKMTs=</File>
        <File Location="Kernel/cpan-lib/SOAP/Lite/Deserializer/XMLSchema2001.pm" Permission="644" Encode="Base64">cGFja2FnZSBTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYTIwMDE7Cgp1c2Ugc3RyaWN0Owp1c2UgU09BUDo6TGl0ZTo6RGVzZXJpYWxpemVyOjpYTUxTY2hlbWExOTk5Owp1c2UgU09BUDo6TGl0ZTo6RGVzZXJpYWxpemVyOjpYTUxTY2hlbWFTT0FQMV8xOwp1c2UgU09BUDo6TGl0ZTo6RGVzZXJpYWxpemVyOjpYTUxTY2hlbWFTT0FQMV8yOwoKc3ViIGFueVR5cGVWYWx1ZSB7ICdhbnlUeXBlJyB9CnN1YiBhc19zdHJpbmc7ICphc19zdHJpbmcgPSBcJlNPQVA6OkxpdGU6OkRlc2VyaWFsaXplcjo6WE1MU2NoZW1hMTk5OTo6YXNfc3RyaW5nOwpzdWIgYXNfYW55VVJJOyAqYXNfYW55VVJJID0gXCZTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYVNPQVAxXzE6OmFzX2FueVVSSTsKc3ViIGFzX2Jvb2xlYW47ICphc19ib29sZWFuID0gXCZTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYVNPQVAxXzI6OmFzX2Jvb2xlYW47CnN1YiBhc19iYXNlNjRCaW5hcnk7ICphc19iYXNlNjRCaW5hcnkgPSBcJlNPQVA6OkxpdGU6OkRlc2VyaWFsaXplcjo6WE1MU2NoZW1hU09BUDFfMjo6YXNfYmFzZTY0OwpzdWIgYXNfaGV4QmluYXJ5OyAqYXNfaGV4QmluYXJ5ID0gXCZTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYTE5OTk6OmFzX2hleDsKc3ViIGFzX3VuZGVmOyAqYXNfdW5kZWYgPSBcJlNPQVA6OkxpdGU6OkRlc2VyaWFsaXplcjo6WE1MU2NoZW1hMTk5OTo6YXNfdW5kZWY7CgpCRUdJTiB7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgZm9yIG15ICRtZXRob2QgKHF3KAogICAgICAgIGFueVR5cGUgYW55U2ltcGxlVHlwZQogICAgICAgIGZsb2F0IGRvdWJsZSBkZWNpbWFsIGRhdGVUaW1lIHRpbWVQZXJpb2QgZ01vbnRoIGdZZWFyTW9udGggZ1llYXIgCiAgICAgICAgY2VudHVyeSBnTW9udGhEYXkgZ0RheSBkdXJhdGlvbiByZWN1cnJpbmdEdXJhdGlvbgogICAgICAgIGxhbmd1YWdlIGludGVnZXIgbm9uUG9zaXRpdmVJbnRlZ2VyIG5lZ2F0aXZlSW50ZWdlciBsb25nIGludCBzaG9ydCAKICAgICAgICBieXRlIG5vbk5lZ2F0aXZlSW50ZWdlciB1bnNpZ25lZExvbmcgdW5zaWduZWRJbnQgdW5zaWduZWRTaG9ydCAKICAgICAgICB1bnNpZ25lZEJ5dGUgcG9zaXRpdmVJbnRlZ2VyIGRhdGUgdGltZSBkYXRlVGltZQogICAgICAgIFFOYW1lCiAgICApKSB7CiAgICAgICAgbXkgJG5hbWUgPSAnYXNfJyAuICRtZXRob2Q7CiAgICAgICAgKiRuYW1lID0gc3ViIHsgJF9bMV0gfQogICAgfQp9CgoxOw==</File>
        <File Location="Kernel/cpan-lib/SOAP/Lite/Deserializer/XMLSchemaSOAP1_1.pm" Permission="644" Encode="Base64">cGFja2FnZSBTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYVNPQVAxXzE7CnVzZSBzdHJpY3Q7CgpzdWIgYW55VHlwZVZhbHVlIHsgJ3VyLXR5cGUnIH0KCnN1YiBhc19ib29sZWFuIHsgCiAgICBzaGlmdDsgCiAgICBteSAkdmFsdWUgPSBzaGlmdDsgCiAgICAkdmFsdWUgZXEgJzEnIHx8ICR2YWx1ZSBlcSAndHJ1ZScgCiAgICAgICAgPyAxIAogICAgICAgIDogJHZhbHVlIGVxICcwJyB8fCAkdmFsdWUgZXEgJ2ZhbHNlJyAKICAgICAgICAgICAgPyAwIAogICAgICAgICAgICA6IGRpZSAiV3JvbmcgYm9vbGVhbiB2YWx1ZSAnJHZhbHVlJ1xuIiAKfQoKc3ViIGFzX2Jhc2U2NCB7IHNoaWZ0OyByZXF1aXJlIE1JTUU6OkJhc2U2NDsgTUlNRTo6QmFzZTY0OjpkZWNvZGVfYmFzZTY0KHNoaWZ0KSB9CgpzdWIgYXNfdXJfdHlwZSB7ICRfWzFdIH0KCnN1YiBhc19hbnlVUkkgeyAkX1sxXSB9CgpCRUdJTiB7CiAgICBubyBzdHJpY3QgJ3JlZnMnOwogICAgZm9yIG15ICRtZXRob2QgKHF3KAogICAgICAgIHN0cmluZyBmbG9hdCBkb3VibGUgZGVjaW1hbCB0aW1lRHVyYXRpb24gcmVjdXJyaW5nRHVyYXRpb24gdXJpUmVmZXJlbmNlCiAgICAgICAgaW50ZWdlciBub25Qb3NpdGl2ZUludGVnZXIgbmVnYXRpdmVJbnRlZ2VyIGxvbmcgaW50IHNob3J0IGJ5dGUKICAgICAgICBub25OZWdhdGl2ZUludGVnZXIgdW5zaWduZWRMb25nIHVuc2lnbmVkSW50IHVuc2lnbmVkU2hvcnQgdW5zaWduZWRCeXRlCiAgICAgICAgcG9zaXRpdmVJbnRlZ2VyIHRpbWVJbnN0YW50IHRpbWUgdGltZVBlcmlvZCBkYXRlIG1vbnRoIHllYXIgY2VudHVyeSAKICAgICAgICByZWN1cnJpbmdEYXRlIHJlY3VycmluZ0RheSBsYW5ndWFnZQogICAgKSkgeyBteSAkbmFtZSA9ICdhc18nIC4gJG1ldGhvZDsgKiRuYW1lID0gc3ViIHsgJF9bMV0gfSB9Cn0KCjE7</File>
        <File Location="Kernel/cpan-lib/SOAP/Lite/Deserializer/XMLSchemaSOAP1_2.pm" Permission="644" Encode="Base64">cGFja2FnZSBTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYVNPQVAxXzI7CnVzZSBTT0FQOjpMaXRlOjpEZXNlcmlhbGl6ZXI6OlhNTFNjaGVtYVNPQVAxXzE7CgpzdWIgYW55VHlwZVZhbHVlIHsgJ2FueVR5cGUnIH0KCnN1YiBhc19ib29sZWFuOyAqYXNfYm9vbGVhbiA9IFwmU09BUDo6TGl0ZTo6RGVzZXJpYWxpemVyOjpYTUxTY2hlbWFTT0FQMV8xOjphc19ib29sZWFuOwpzdWIgYXNfYmFzZTY0IHsgc2hpZnQ7IHJlcXVpcmUgTUlNRTo6QmFzZTY0OyBNSU1FOjpCYXNlNjQ6OmRlY29kZV9iYXNlNjQoc2hpZnQpIH0KCkJFR0lOIHsKICAgIG5vIHN0cmljdCAncmVmcyc7CiAgICBmb3IgbXkgJG1ldGhvZCAocXcoCiAgICAgICAgYW55VHlwZQogICAgICAgIHN0cmluZyBmbG9hdCBkb3VibGUgZGVjaW1hbCBkYXRlVGltZSB0aW1lUGVyaW9kIGdNb250aCBnWWVhck1vbnRoIGdZZWFyCiAgICAgICAgY2VudHVyeSBnTW9udGhEYXkgZ0RheSBkdXJhdGlvbiByZWN1cnJpbmdEdXJhdGlvbiBhbnlVUkkKICAgICAgICBsYW5ndWFnZSBpbnRlZ2VyIG5vblBvc2l0aXZlSW50ZWdlciBuZWdhdGl2ZUludGVnZXIgbG9uZyBpbnQgc2hvcnQgYnl0ZQogICAgICAgIG5vbk5lZ2F0aXZlSW50ZWdlciB1bnNpZ25lZExvbmcgdW5zaWduZWRJbnQgdW5zaWduZWRTaG9ydCB1bnNpZ25lZEJ5dGUKICAgICAgICBwb3NpdGl2ZUludGVnZXIgZGF0ZSB0aW1lIGRhdGVUaW1lCiAgICApKSB7CiAgICAgICAgbXkgJG5hbWUgPSAnYXNfJyAuICRtZXRob2Q7IAogICAgICAgICokbmFtZSA9IHN1YiB7ICRfWzFdIH07IAogICAgfQp9CgoxOw==</File>
        <File Location="Kernel/cpan-lib/SOAP/Transport/HTTP.pm" Permission="644" Encode="Base64">IyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMKIyBDb3B5cmlnaHQgKEMpIDIwMDAtMjAwNCBQYXVsIEt1bGNoZW5rbyAocGF1bGNsaW5nZXJAeWFob28uY29tKQojIFNPQVA6OkxpdGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQKIyBhbmQvb3IgbW9kaWZ5IGl0IHVuZGVyIHRoZSBzYW1lIHRlcm1zIGFzIFBlcmwgaXRzZWxmLgojCiMgJElkOiBIVFRQLnBtIDM3NCAyMDEwLTA1LTE0IDA4OjEyOjI1WiBrdXR0ZXJtYSAkCiMKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDsKCnVzZSBzdHJpY3Q7CgpvdXIgJFZFUlNJT04gPSAwLjcxM18wMTsKCnVzZSBTT0FQOjpMaXRlOwp1c2UgU09BUDo6UGFja2FnZXI7CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6VHJhbnNwb3J0OjpIVFRQOjpDbGllbnQ7Cgp1c2UgdmFycyBxdyhASVNBICRDT01QUkVTUyAkVVNFUkFHRU5UX0NMQVNTKTsKJFVTRVJBR0VOVF9DTEFTUyA9ICdMV1A6OlVzZXJBZ2VudCc7CkBJU0EgICAgICAgICAgICAgPSBxdyhTT0FQOjpDbGllbnQpOwoKJENPTVBSRVNTID0gJ2RlZmxhdGUnOwoKbXkgKCAlcmVkaXJlY3QsICVtcG9zdCwgJW5vY29tcHJlc3MgKTsKCiMgaGFjayBmb3IgSFRUUCBjb25uZWN0aW9uIHRoYXQgcmV0dXJucyBLZWVwLUFsaXZlCiMgbWlzY29tbXVuaWNhdGlvbiAoPykgYmV0d2VlbiBMV1A6OlByb3RvY29sIGFuZCBMV1A6OlByb3RvY29sOjpodHRwCiMgZGllcyBhZnRlciB0aW1lb3V0LCBidXQgc2VlbXMgbGlrZSB3ZSBjb3VsZCBtYWtlIGl0IHdvcmsKbXkgJF9wYXRjaGVkID0gMDsKCnN1YiBwYXRjaCB7CiAgICByZXR1cm4gaWYgJF9wYXRjaGVkOwogICAgQkVHSU4geyBsb2NhbCAoJF5XKSA9IDA7IH0KICAgIHsKICAgICAgICBsb2NhbCAkXlcgPSAwOwogICAgICAgIHN1YiBMV1A6OlVzZXJBZ2VudDo6cmVkaXJlY3Rfb2s7CiAgICAgICAgKkxXUDo6VXNlckFnZW50OjpyZWRpcmVjdF9vayA9IHN1YiB7IDEgfQogICAgfQogICAgewoKICAgICAgICBwYWNrYWdlIExXUDo6UHJvdG9jb2w7CiAgICAgICAgbG9jYWwgJF5XID0gMDsKICAgICAgICBteSAkY29sbGVjdCA9IFwmY29sbGVjdDsgICAgIyBzdG9yZSBvcmlnaW5hbAogICAgICAgICpjb2xsZWN0ID0gc3ViIHsKICAgICAgICAgICAgaWYgKCBkZWZpbmVkICRfWzJdLT5oZWFkZXIoJ0Nvbm5lY3Rpb24nKQogICAgICAgICAgICAgICAgJiYgJF9bMl0tPmhlYWRlcignQ29ubmVjdGlvbicpIGVxICdLZWVwLUFsaXZlJyApIHsKICAgICAgICAgICAgICAgIG15ICRkYXRhID0gJF9bM10tPigpOwogICAgICAgICAgICAgICAgbXkgJG5leHQgPQogICAgICAgICAgICAgICAgICBTT0FQOjpVdGlsczo6Ynl0ZWxlbmd0aCgkJGRhdGEpID09CiAgICAgICAgICAgICAgICAgICRfWzJdLT5oZWFkZXIoJ0NvbnRlbnQtTGVuZ3RoJykKICAgICAgICAgICAgICAgICAgPyBzdWIgeyBteSAkc3RyID0gJyc7IFwkc3RyOyB9CiAgICAgICAgICAgICAgICAgIDogJF9bM107CiAgICAgICAgICAgICAgICBteSAkZG9uZSA9IDA7CiAgICAgICAgICAgICAgICAkX1szXSA9IHN1YiB7CiAgICAgICAgICAgICAgICAgICAgJGRvbmUrKyA/ICYkbmV4dCA6ICRkYXRhOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBnb3RvICYkY29sbGVjdDsKICAgICAgICB9OwogICAgfQogICAgJF9wYXRjaGVkKys7Cn0KCnN1YiBERVNUUk9ZIHsgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJykgfQoKc3ViIGh0dHBfcmVxdWVzdCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgaWYgKEBfKSB7ICRzZWxmLT57J19odHRwX3JlcXVlc3QnfSA9IHNoaWZ0OyByZXR1cm4gJHNlbGYgfQogICAgcmV0dXJuICRzZWxmLT57J19odHRwX3JlcXVlc3QnfTsKfQoKc3ViIGh0dHBfcmVzcG9uc2UgewogICAgbXkgJHNlbGYgPSBzaGlmdDsKICAgIGlmIChAXykgeyAkc2VsZi0+eydfaHR0cF9yZXNwb25zZSd9ID0gc2hpZnQ7IHJldHVybiAkc2VsZiB9CiAgICByZXR1cm4gJHNlbGYtPnsnX2h0dHBfcmVzcG9uc2UnfTsKfQoKc3ViIG5ldyB7CiAgICBteSAkY2xhc3MgPSBzaGlmdDsKCiAgICByZXR1cm4gJGNsYXNzIGlmIHJlZiAkY2xhc3M7ICAgICMgc2tpcCBpZiB3ZSdyZSBhbHJlYWR5IG9iamVjdC4uLgoKICAgIGlmICggIWdyZXAgeyAkXyBlcSAkVVNFUkFHRU5UX0NMQVNTIH0gQElTQSApIHsKICAgICAgICBwdXNoIEBJU0EsICRVU0VSQUdFTlRfQ0xBU1M7CiAgICB9CgogICAgZXZhbCgicmVxdWlyZSAkVVNFUkFHRU5UX0NMQVNTIikKICAgICAgb3IgZGllICJDb3VsZCBub3QgbG9hZCBVc2VyQWdlbnQgY2xhc3MgJFVTRVJBR0VOVF9DTEFTUzogJEAiOwoKICAgIHJlcXVpcmUgSFRUUDo6UmVxdWVzdDsKICAgIHJlcXVpcmUgSFRUUDo6SGVhZGVyczsKCiAgICBwYXRjaCgpIGlmICRTT0FQOjpDb25zdGFudHM6OlBBVENIX0hUVFBfS0VFUEFMSVZFOwoKICAgIG15ICggQHBhcmFtcywgQG1ldGhvZHMgKTsKICAgIHdoaWxlIChAXykgewogICAgICAgICRjbGFzcy0+Y2FuKCAkX1swXSApCiAgICAgICAgICA/IHB1c2goIEBtZXRob2RzLCBzaGlmdCgpID0+IHNoaWZ0ICkKICAgICAgICAgIDogcHVzaCggQHBhcmFtcywgIHNoaWZ0ICk7CiAgICB9CiAgICBteSAkc2VsZiA9ICRjbGFzcy0+U1VQRVI6Om5ldyhAcGFyYW1zKTsKCiAgICBkaWUKIlNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6Q2xpZW50IG11c3QgaW5oZXJpdCBmcm9tIExXUDo6VXNlckFnZW50LCBvciBvbmUgb2YgaXRzIHN1YmNsYXNzZXMiCiAgICAgIGlmICEkc2VsZi0+aXNhKCJMV1A6OlVzZXJBZ2VudCIpOwoKICAgICRzZWxmLT5hZ2VudCggam9pbiAnLycsICdTT0FQOjpMaXRlJywgJ1BlcmwnLAogICAgICAgICRTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OlZFUlNJT04gKTsKICAgICRzZWxmLT5vcHRpb25zKCB7fSApOwoKICAgICRzZWxmLT5odHRwX3JlcXVlc3QoIEhUVFA6OlJlcXVlc3QtPm5ldygpICk7CgogICAgd2hpbGUgKEBtZXRob2RzKSB7CiAgICAgICAgbXkgKCAkbWV0aG9kLCAkcGFyYW1zICkgPSBzcGxpY2UoIEBtZXRob2RzLCAwLCAyICk7CiAgICAgICAgJHNlbGYtPiRtZXRob2QoIHJlZiAkcGFyYW1zIGVxICdBUlJBWScgPyBAJHBhcmFtcyA6ICRwYXJhbXMgKTsKICAgIH0KCiAgICBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKTsKCiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBzZW5kX3JlY2VpdmUgewogICAgbXkgKCAkc2VsZiwgJXBhcmFtZXRlcnMgKSA9IEBfOwogICAgbXkgKCAkY29udGV4dCwgJGVudmVsb3BlLCAkZW5kcG9pbnQsICRhY3Rpb24sICRlbmNvZGluZywgJHBhcnRzICkgPQogICAgICBAcGFyYW1ldGVyc3txdyhjb250ZXh0IGVudmVsb3BlIGVuZHBvaW50IGFjdGlvbiBlbmNvZGluZyBwYXJ0cyl9OwoKICAgICRlbmRwb2ludCB8fD0gJHNlbGYtPmVuZHBvaW50OwoKICAgIG15ICRtZXRob2QgPSAnUE9TVCc7CiAgICAkQ09NUFJFU1MgPSAnZ3ppcCc7CgogICAgJHNlbGYtPm9wdGlvbnMtPntpc19jb21wcmVzc30gfHw9CiAgICAgIGV4aXN0cyAkc2VsZi0+b3B0aW9ucy0+e2NvbXByZXNzX3RocmVzaG9sZH0KICAgICAgJiYgZXZhbCB7IHJlcXVpcmUgQ29tcHJlc3M6OlpsaWIgfTsKCiAgICAjIEluaXRpYWxpemUgdGhlIGJhc2ljIGFib3V0IHRoZSBIVFRQIFJlcXVlc3Qgb2JqZWN0CiAgICBteSAkaHR0cF9yZXF1ZXN0ID0gJHNlbGYtPmh0dHBfcmVxdWVzdCgpLT5jbG9uZSgpOwoKICAgICMgJHNlbGYtPmh0dHBfcmVxdWVzdChIVFRQOjpSZXF1ZXN0LT5uZXcpOwogICAgJGh0dHBfcmVxdWVzdC0+aGVhZGVycyggSFRUUDo6SGVhZGVycy0+bmV3ICk7CgogICAgIyBUT0RPIC0gYWRkIGFwcGxpY2F0aW9uL2RpbWUKICAgICRodHRwX3JlcXVlc3QtPmhlYWRlcigKICAgICAgICBBY2NlcHQgPT4gWyd0ZXh0L3htbCcsICdtdWx0aXBhcnQvKicsICdhcHBsaWNhdGlvbi9zb2FwJ10gKTsKICAgICRodHRwX3JlcXVlc3QtPm1ldGhvZCgkbWV0aG9kKTsKICAgICRodHRwX3JlcXVlc3QtPnVybCgkZW5kcG9pbnQpOwoKICAgIG5vIHN0cmljdCAncmVmcyc7CiAgICBpZiAoJHBhcnRzKSB7CiAgICAgICAgbXkgJHBhY2thZ2VyID0gJGNvbnRleHQtPnBhY2thZ2VyOwogICAgICAgICRlbnZlbG9wZSA9ICRwYWNrYWdlci0+cGFja2FnZSggJGVudmVsb3BlLCAkY29udGV4dCApOwogICAgICAgIGZvciBteSAkaG5hbWUgKCBrZXlzICV7JHBhY2thZ2VyLT5oZWFkZXJzX2h0dHB9ICkgewogICAgICAgICAgICAkaHR0cF9yZXF1ZXN0LT5oZWFkZXJzLT5oZWFkZXIoCiAgICAgICAgICAgICAgICAkaG5hbWUgPT4gJHBhY2thZ2VyLT5oZWFkZXJzX2h0dHAtPnskaG5hbWV9ICk7CiAgICAgICAgfQoKICAgICAgICAjIFRPRE8gLSBESU1FIHN1cHBvcnQKICAgIH0KCiAgQ09NUFJFU1M6IHsKICAgICAgICBteSAkY29tcHJlc3NlZCA9CiAgICAgICAgICAgICAhZXhpc3RzICRub2NvbXByZXNzeyRlbmRwb2ludH0KICAgICAgICAgICYmICRzZWxmLT5vcHRpb25zLT57aXNfY29tcHJlc3N9CiAgICAgICAgICAmJiAoICRzZWxmLT5vcHRpb25zLT57Y29tcHJlc3NfdGhyZXNob2xkfSB8fCAwICkgPCBsZW5ndGggJGVudmVsb3BlOwoKICAgICAgICAkZW52ZWxvcGUgPSBDb21wcmVzczo6WmxpYjo6bWVtR3ppcCgkZW52ZWxvcGUpIGlmICRjb21wcmVzc2VkOwoKICAgICAgICBteSAkb3JpZ2luYWxfZW5jb2RpbmcgPSAkaHR0cF9yZXF1ZXN0LT5jb250ZW50X2VuY29kaW5nOwoKICAgICAgICB3aGlsZSAoMSkgewoKICAgICAgICAgICAgIyBjaGVjayBjYWNoZSBmb3IgcmVkaXJlY3QKICAgICAgICAgICAgJGVuZHBvaW50ID0gJHJlZGlyZWN0eyRlbmRwb2ludH0gaWYgZXhpc3RzICRyZWRpcmVjdHskZW5kcG9pbnR9OwoKICAgICAgICAgICAgIyBjaGVjayBjYWNoZSBmb3IgTS1QT1NUCiAgICAgICAgICAgICRtZXRob2QgPSAnTS1QT1NUJyBpZiBleGlzdHMgJG1wb3N0eyRlbmRwb2ludH07CgogICAgICAgICAgIyB3aGF0J3MgdGhpcyBhbGwgYWJvdXQ/CiAgICAgICAgICAjIHVuZm9ydHVuYXRlbHkgY29tYmluYXRpb24gb2YgTFdQIGFuZCBQZXJsIDUuNi4xIGFuZCBsYXRlciBoYXMgYnVnCiAgICAgICAgICAjIGluIHNlbmRpbmcgbXVsdGlieXRlIGNoYXJhY3RlcnMuIExXUCB1c2VzIGxlbmd0aCgpIHRvIGNhbGN1bGF0ZQogICAgICAgICAgIyBjb250ZW50LWxlbmd0aCBoZWFkZXIgYW5kIHN0YXJ0aW5nIDUuNi4xIGxlbmd0aCgpIGNhbGN1bGF0ZXMgY2hhcnMKICAgICAgICAgICMgaW5zdGVhZCBvZiBieXRlcy4gJ3VzZSBieXRlcycgaW4gVEhJUyBmaWxlIGRvZXNuJ3Qgd29yaywgYmVjYXVzZQogICAgICAgICAgIyBpdCdzIGxleGljYWxseSBzY29wZWQuIFVuZm9ydHVuYXRlbHksIGNvbnRlbnQtbGVuZ3RoIHdlIGNhbGN1bGF0ZQogICAgICAgICAgIyBoZXJlIGRvZXNuJ3Qgd29yayBlaXRoZXIsIGJlY2F1c2UgTFdQIG92ZXJ3cml0ZXMgaXQgd2l0aAogICAgICAgICAgIyBjb250ZW50LWxlbmd0aCBpdCBjYWxjdWxhdGVzICh3aGljaCBpcyB3cm9uZykgQU5EIHVzZXMgbGVuZ3RoKCkKICAgICAgICAgICMgZHVyaW5nIHN5c3dyaXRlL3N5c3JlYWQsIHNvIHdlIGFyZSBpbiBhIGJhZCBzaGFwZSBhbnl3YXkuCiAgICAgICAgICAjCiAgICAgICAgICAjIHdoYXQgdG8gZG8/IHdlIGNhbGN1bGF0ZSBwcm9wZXIgY29udGVudC1sZW5ndGggKHVzaW5nCiAgICAgICAgICAjIGJ5dGVsZW5ndGgoKSBmdW5jdGlvbiBmcm9tIFNPQVA6OlV0aWxzKSBhbmQgdGhlbiBkcm9wIHV0ZjggbWFyawogICAgICAgICAgIyBmcm9tIHN0cmluZyAoZG9pbmcgcGFjayB3aXRoICdDMEEqJyBtb2RpZmllcikgaWYgbGVuZ3RoIGFuZAogICAgICAgICAgIyBieXRlbGVuZ3RoIGFyZSBub3QgdGhlIHNhbWUKICAgICAgICAgICAgbXkgJGJ5dGVsZW5ndGggPSBTT0FQOjpVdGlsczo6Ynl0ZWxlbmd0aCgkZW52ZWxvcGUpOwoJCQlpZiAoJF0gPCA1LjAwOCkgewoJCQkJJGVudmVsb3BlID0gcGFjayggJ0MwQSonLCAkZW52ZWxvcGUgKTsKCQkJfQoJCQllbHNlIHsKCQkJCXJlcXVpcmUgRW5jb2RlOwoJCQkJJGVudmVsb3BlID0gRW5jb2RlOjplbmNvZGUoJ1VURi04JywgJGVudmVsb3BlKTsgCgkJCX0KICAgICAgICAgICAgIyAgaWYgISRTT0FQOjpDb25zdGFudHM6OkRPX05PVF9VU0VfTFdQX0xFTkdUSF9IQUNLCiAgICAgICAgICAgICMgICAgICAmJiBsZW5ndGgoJGVudmVsb3BlKSAhPSAkYnl0ZWxlbmd0aDsKICAgICAgICAgICAgJGh0dHBfcmVxdWVzdC0+Y29udGVudCgkZW52ZWxvcGUpOwogICAgICAgICAgICAkaHR0cF9yZXF1ZXN0LT5wcm90b2NvbCgnSFRUUC8xLjEnKTsKCiAgICAgICAgICAgICRodHRwX3JlcXVlc3QtPnByb3h5X2F1dGhvcml6YXRpb25fYmFzaWMoICRFTlZ7J0hUVFBfcHJveHlfdXNlcid9LAogICAgICAgICAgICAgICAgJEVOVnsnSFRUUF9wcm94eV9wYXNzJ30gKQogICAgICAgICAgICAgIGlmICggJEVOVnsnSFRUUF9wcm94eV91c2VyJ30gJiYgJEVOVnsnSFRUUF9wcm94eV9wYXNzJ30gKTsKCiAgICAgICAgICAgICMgYnkgTXVycmF5IE5lc2JpdHQKICAgICAgICAgICAgaWYgKCAkbWV0aG9kIGVxICdNLVBPU1QnICkgewogICAgICAgICAgICAgICAgbXkgJHByZWZpeCA9IHNwcmludGYgJyUwNGQnLCBpbnQoIHJhbmQoMTAwMCkgKTsKICAgICAgICAgICAgICAgICRodHRwX3JlcXVlc3QtPmhlYWRlcigKICAgICAgICAgICAgICAgICAgICBNYW4gPT4gcXEhIiRTT0FQOjpDb25zdGFudHM6Ok5TX0VOViI7IG5zPSRwcmVmaXghICk7CiAgICAgICAgICAgICAgICAkaHR0cF9yZXF1ZXN0LT5oZWFkZXIoICIkcHJlZml4LVNPQVBBY3Rpb24iID0+ICRhY3Rpb24gKQogICAgICAgICAgICAgICAgICBpZiBkZWZpbmVkICRhY3Rpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkaHR0cF9yZXF1ZXN0LT5oZWFkZXIoIFNPQVBBY3Rpb24gPT4gJGFjdGlvbiApCiAgICAgICAgICAgICAgICAgIGlmIGRlZmluZWQgJGFjdGlvbjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyAgICAgICAgICAgICRodHRwX3JlcXVlc3QtPmhlYWRlcihFeHBlY3QgPT4gJzEwMC1Db250aW51ZScpOwoKICAgICAgICAgICAgIyBhbGxvdyBjb21wcmVzcyBpZiBwcmVzZW50IGFuZCBsZXQgc2VydmVyIGtub3cgd2UgY291bGQgaGFuZGxlIGl0CiAgICAgICAgICAgICRodHRwX3JlcXVlc3QtPmhlYWRlciggJ0FjY2VwdC1FbmNvZGluZycgPT4KICAgICAgICAgICAgICAgICAgWyRTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkNsaWVudDo6Q09NUFJFU1NdICkKICAgICAgICAgICAgICBpZiAkc2VsZi0+b3B0aW9ucy0+e2lzX2NvbXByZXNzfTsKCiAgICAgICAgICAgICRodHRwX3JlcXVlc3QtPmNvbnRlbnRfZW5jb2RpbmcoCiAgICAgICAgICAgICAgICAkU09BUDo6VHJhbnNwb3J0OjpIVFRQOjpDbGllbnQ6OkNPTVBSRVNTKQogICAgICAgICAgICAgIGlmICRjb21wcmVzc2VkOwoKICAgICAgICAgICAgaWYgKCAhJGh0dHBfcmVxdWVzdC0+Y29udGVudF90eXBlICkgewogICAgICAgICAgICAgICAgJGh0dHBfcmVxdWVzdC0+Y29udGVudF90eXBlKAogICAgICAgICAgICAgICAgICAgIGpvaW4gJzsgJywKICAgICAgICAgICAgICAgICAgICAkU09BUDo6Q29uc3RhbnRzOjpERUZBVUxUX0hUVFBfQ09OVEVOVF9UWVBFLAogICAgICAgICAgICAgICAgICAgICEkU09BUDo6Q29uc3RhbnRzOjpET19OT1RfVVNFX0NIQVJTRVQgJiYgJGVuY29kaW5nCiAgICAgICAgICAgICAgICAgICAgPyAnY2hhcnNldD0nIC4gbGMoJGVuY29kaW5nKQogICAgICAgICAgICAgICAgICAgIDogKCkgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNpZiAoICEkU09BUDo6Q29uc3RhbnRzOjpET19OT1RfVVNFX0NIQVJTRVQgJiYgJGVuY29kaW5nICkgewogICAgICAgICAgICAgICAgbXkgJHRtcFR5cGUgPSAkaHR0cF9yZXF1ZXN0LT5oZWFkZXJzLT5oZWFkZXIoJ0NvbnRlbnQtdHlwZScpOwoKICAgICAgICAgICAgICAgICMgJGh0dHBfcmVxdWVzdC0+Y29udGVudF90eXBlKCR0bXBUeXBlLic7IGNoYXJzZXQ9JyAuIGxjKCRlbmNvZGluZykpOwogICAgICAgICAgICAgICAgbXkgJGFkZGl0aW9uID0gJzsgY2hhcnNldD0nIC4gbGMoJGVuY29kaW5nKTsKICAgICAgICAgICAgICAgICRodHRwX3JlcXVlc3QtPmNvbnRlbnRfdHlwZSggJHRtcFR5cGUgLiAkYWRkaXRpb24gKQogICAgICAgICAgICAgICAgICBpZiAoICR0bXBUeXBlICF+IC8kYWRkaXRpb24vICk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRodHRwX3JlcXVlc3QtPmNvbnRlbnRfbGVuZ3RoKCRieXRlbGVuZ3RoKTsKICAgICAgICAgICAgU09BUDo6VHJhY2U6OnRyYW5zcG9ydCgkaHR0cF9yZXF1ZXN0KTsKICAgICAgICAgICAgU09BUDo6VHJhY2U6OmRlYnVnKCAkaHR0cF9yZXF1ZXN0LT5hc19zdHJpbmcgKTsKCiAgICAgICAgICAgICRzZWxmLT5TVVBFUjo6ZW52X3Byb3h5IGlmICRFTlZ7J0hUVFBfcHJveHknfTsKCiAgICAgICAgICAgICMgc2VuZCBhbmQgcmVjZWl2ZSB0aGUgc3R1ZmYuCiAgICAgICAgICAgICMgVE9ETyBtYXliZSBldmFsIHRoaXM/IHdoYXQgaGFwcGVucyBvbiBjb25uZWN0aW9uIGNsb3NlPwogICAgICAgICAgICAkc2VsZi0+aHR0cF9yZXNwb25zZSggJHNlbGYtPlNVUEVSOjpyZXF1ZXN0KCRodHRwX3JlcXVlc3QpICk7CiAgICAgICAgICAgIFNPQVA6OlRyYWNlOjp0cmFuc3BvcnQoICRzZWxmLT5odHRwX3Jlc3BvbnNlICk7CiAgICAgICAgICAgIFNPQVA6OlRyYWNlOjpkZWJ1ZyggJHNlbGYtPmh0dHBfcmVzcG9uc2UtPmFzX3N0cmluZyApOwoKICAgICAgICAgICAgIyAxMDAgT0ssIGNvbnRpbnVlIHRvIHJlYWQ/CiAgICAgICAgICAgIGlmICggKAogICAgICAgICAgICAgICAgICAgICAgICRzZWxmLT5odHRwX3Jlc3BvbnNlLT5jb2RlID09IDUxMAogICAgICAgICAgICAgICAgICAgIHx8ICRzZWxmLT5odHRwX3Jlc3BvbnNlLT5jb2RlID09IDUwMQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgJiYgJG1ldGhvZCBuZSAnTS1QT1NUJwogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgJG1wb3N0eyRlbmRwb2ludH0gPSAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2lmICggJHNlbGYtPmh0dHBfcmVzcG9uc2UtPmNvZGUgPT0gNDE1ICYmICRjb21wcmVzc2VkICkgewoKICAgICAgICAgICAgICAgICMgNDE1IFVuc3VwcG9ydGVkIE1lZGlhIFR5cGUKICAgICAgICAgICAgICAgICRub2NvbXByZXNzeyRlbmRwb2ludH0gPSAxOwogICAgICAgICAgICAgICAgJGVudmVsb3BlID0gQ29tcHJlc3M6OlpsaWI6Om1lbUd1bnppcCgkZW52ZWxvcGUpOwogICAgICAgICAgICAgICAgJGh0dHBfcmVxdWVzdC0+aGVhZGVycy0+cmVtb3ZlX2hlYWRlcignQ29udGVudC1FbmNvZGluZycpOwogICAgICAgICAgICAgICAgcmVkbyBDT01QUkVTUzsgICAgIyB0cnkgYWdhaW4gd2l0aG91dCBjb21wcmVzc2lvbgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbGFzdDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAkcmVkaXJlY3R7JGVuZHBvaW50fSA9ICRzZWxmLT5odHRwX3Jlc3BvbnNlLT5yZXF1ZXN0LT51cmwKICAgICAgaWYgJHNlbGYtPmh0dHBfcmVzcG9uc2UtPnByZXZpb3VzCiAgICAgICAgICAmJiAkc2VsZi0+aHR0cF9yZXNwb25zZS0+cHJldmlvdXMtPmlzX3JlZGlyZWN0OwoKICAgICRzZWxmLT5jb2RlKCAkc2VsZi0+aHR0cF9yZXNwb25zZS0+Y29kZSApOwogICAgJHNlbGYtPm1lc3NhZ2UoICRzZWxmLT5odHRwX3Jlc3BvbnNlLT5tZXNzYWdlICk7CiAgICAkc2VsZi0+aXNfc3VjY2VzcyggJHNlbGYtPmh0dHBfcmVzcG9uc2UtPmlzX3N1Y2Nlc3MgKTsKICAgICRzZWxmLT5zdGF0dXMoICRzZWxmLT5odHRwX3Jlc3BvbnNlLT5zdGF0dXNfbGluZSApOwoKICAgICMgUHVsbCBvdXQgYW55IGNvb2tpZXMgZnJvbSB0aGUgcmVzcG9uc2UgaGVhZGVycwogICAgJHNlbGYtPnsnX2Nvb2tpZV9qYXInfS0+ZXh0cmFjdF9jb29raWVzKCAkc2VsZi0+aHR0cF9yZXNwb25zZSApCiAgICAgIGlmICRzZWxmLT57J19jb29raWVfamFyJ307CgogICAgbXkgJGNvbnRlbnQgPQogICAgICAoICRzZWxmLT5odHRwX3Jlc3BvbnNlLT5jb250ZW50X2VuY29kaW5nIHx8ICcnICkgPX4KICAgICAgL1xiJFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6Q2xpZW50OjpDT01QUkVTU1xiL28KICAgICAgJiYgJHNlbGYtPm9wdGlvbnMtPntpc19jb21wcmVzc30KICAgICAgPyBDb21wcmVzczo6WmxpYjo6bWVtR3VuemlwKCAkc2VsZi0+aHR0cF9yZXNwb25zZS0+Y29udGVudCApCiAgICAgIDogKCAkc2VsZi0+aHR0cF9yZXNwb25zZS0+Y29udGVudF9lbmNvZGluZyB8fCAnJyApID1+IC9cUy8gPyBkaWUKIkNhbid0IHVuZGVyc3RhbmQgcmV0dXJuZWQgQ29udGVudC1FbmNvZGluZyAoQHtbJHNlbGYtPmh0dHBfcmVzcG9uc2UtPmNvbnRlbnRfZW5jb2RpbmddfSlcbiIKICAgICAgOiAkc2VsZi0+aHR0cF9yZXNwb25zZS0+Y29udGVudDsKCiAgICByZXR1cm4gJHNlbGYtPmh0dHBfcmVzcG9uc2UtPmNvbnRlbnRfdHlwZSA9fiBtIV5tdWx0aXBhcnQvIWkKICAgICAgPyBqb2luKCAiXG4iLCAkc2VsZi0+aHR0cF9yZXNwb25zZS0+aGVhZGVyc19hc19zdHJpbmcsICRjb250ZW50ICkKICAgICAgOiAkY29udGVudDsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6U2VydmVyOwoKdXNlIHZhcnMgcXcoQElTQSAkQ09NUFJFU1MpOwpASVNBID0gcXcoU09BUDo6U2VydmVyKTsKCnVzZSBVUkk7CgokQ09NUFJFU1MgPSAnZGVmbGF0ZSc7CgpzdWIgREVTVFJPWSB7IFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpIH0KCnN1YiBuZXcgewogICAgcmVxdWlyZSBMV1A6OlVzZXJBZ2VudDsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICByZXR1cm4gJHNlbGYgaWYgcmVmICRzZWxmOyAgICAjIHdlJ3JlIGFscmVhZHkgYW4gb2JqZWN0CgogICAgbXkgJGNsYXNzID0gJHNlbGY7CiAgICAkc2VsZiA9ICRjbGFzcy0+U1VQRVI6Om5ldyhAXyk7CiAgICAkc2VsZi0+eydfb25fYWN0aW9uJ30gPSBzdWIgewogICAgICAgICggbXkgJGFjdGlvbiA9IHNoaWZ0IHx8ICcnICkgPX4gcy9eKFwiPykoLiopXDEkLyQyLzsKICAgICAgICBkaWUKIlNPQVBBY3Rpb24gc2hhbGwgbWF0Y2ggJ3VyaSNtZXRob2QnIGlmIHByZXNlbnQgKGdvdCAnJGFjdGlvbicsIGV4cGVjdGVkICdAe1tqb2luKCcjJywgQF8pXX0nXG4iCiAgICAgICAgICBpZiAkYWN0aW9uCiAgICAgICAgICAgICAgJiYgJGFjdGlvbiBuZSBqb2luKCAnIycsIEBfICkKICAgICAgICAgICAgICAmJiAkYWN0aW9uIG5lIGpvaW4oICcvJywgQF8gKQogICAgICAgICAgICAgICYmICggc3Vic3RyKCAkX1swXSwgLTEsIDEgKSBuZSAnLycKICAgICAgICAgICAgICAgICAgfHwgJGFjdGlvbiBuZSBqb2luKCAnJywgQF8gKSApOwogICAgfTsKICAgIFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpOwoKICAgIHJldHVybiAkc2VsZjsKfQoKc3ViIEJFR0lOIHsKICAgIG5vIHN0cmljdCAncmVmcyc7CiAgICBmb3IgbXkgJG1ldGhvZCAocXcocmVxdWVzdCByZXNwb25zZSkpIHsKICAgICAgICBteSAkZmllbGQgPSAnXycgLiAkbWV0aG9kOwogICAgICAgICokbWV0aG9kID0gc3ViIHsKICAgICAgICAgICAgbXkgJHNlbGYgPSBzaGlmdC0+bmV3OwogICAgICAgICAgICBAXwogICAgICAgICAgICAgID8gKCAkc2VsZi0+eyRmaWVsZH0gPSBzaGlmdCwgcmV0dXJuICRzZWxmICkKICAgICAgICAgICAgICA6IHJldHVybiAkc2VsZi0+eyRmaWVsZH07CiAgICAgICAgfTsKICAgIH0KfQoKc3ViIGhhbmRsZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CgogICAgU09BUDo6VHJhY2U6OmRlYnVnKCAkc2VsZi0+cmVxdWVzdC0+Y29udGVudCApOwoKICAgIGlmICggJHNlbGYtPnJlcXVlc3QtPm1ldGhvZCBlcSAnUE9TVCcgKSB7CiAgICAgICAgJHNlbGYtPmFjdGlvbiggJHNlbGYtPnJlcXVlc3QtPmhlYWRlcignU09BUEFjdGlvbicpIHx8IHVuZGVmICk7CiAgICB9CiAgICBlbHNpZiAoICRzZWxmLT5yZXF1ZXN0LT5tZXRob2QgZXEgJ00tUE9TVCcgKSB7CiAgICAgICAgcmV0dXJuICRzZWxmLT5yZXNwb25zZSgKICAgICAgICAgICAgSFRUUDo6UmVzcG9uc2UtPm5ldygKICAgICAgICAgICAgICAgIDUxMCwgICAgIyBOT1QgRVhURU5ERUQKIkV4cGVjdGVkIE1hbmRhdG9yeSBoZWFkZXIgd2l0aCAkU09BUDo6Q29uc3RhbnRzOjpOU19FTlYgYXMgdW5pcXVlIFVSSSIKICAgICAgICAgICAgKSApCiAgICAgICAgICBpZiAkc2VsZi0+cmVxdWVzdC0+aGVhZGVyKCdNYW4nKSAhfgogICAgICAgICAgICAgIC9eIiRTT0FQOjpDb25zdGFudHM6Ok5TX0VOViI7XHMqbnNccyo9XHMqKFxkKykvOwogICAgICAgICRzZWxmLT5hY3Rpb24oICRzZWxmLT5yZXF1ZXN0LT5oZWFkZXIoIiQxLVNPQVBBY3Rpb24iKSB8fCB1bmRlZiApOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgcmV0dXJuICRzZWxmLT5yZXNwb25zZSgKICAgICAgICAgICAgSFRUUDo6UmVzcG9uc2UtPm5ldyg0MDUpICkgICAgIyBNRVRIT0QgTk9UIEFMTE9XRUQKICAgIH0KCiAgICBteSAkY29tcHJlc3NlZCA9CiAgICAgICggJHNlbGYtPnJlcXVlc3QtPmNvbnRlbnRfZW5jb2RpbmcgfHwgJycgKSA9fiAvXGIkQ09NUFJFU1NcYi87CiAgICAkc2VsZi0+b3B0aW9ucy0+e2lzX2NvbXByZXNzfSB8fD0KICAgICAgJGNvbXByZXNzZWQgJiYgZXZhbCB7IHJlcXVpcmUgQ29tcHJlc3M6OlpsaWIgfTsKCiAgICAjIHNpZ25hbCBlcnJvciBpZiBjb250ZW50LWVuY29kaW5nIGlzICdkZWZsYXRlJywgYnV0IHdlIGRvbid0IHdhbnQgaXQgT1IKICAgICMgc29tZXRoaW5nIGVsc2UsIHNvIHdlIGRvbid0IHVuZGVyc3RhbmQgaXQKICAgIHJldHVybiAkc2VsZi0+cmVzcG9uc2UoCiAgICAgICAgSFRUUDo6UmVzcG9uc2UtPm5ldyg0MTUpICkgICAgICAgICMgVU5TVVBQT1JURUQgTUVESUEgVFlQRQogICAgICBpZiAkY29tcHJlc3NlZCAmJiAhJHNlbGYtPm9wdGlvbnMtPntpc19jb21wcmVzc30KICAgICAgICAgIHx8ICEkY29tcHJlc3NlZAogICAgICAgICAgJiYgKCAkc2VsZi0+cmVxdWVzdC0+Y29udGVudF9lbmNvZGluZyB8fCAnJyApID1+IC9cUy87CgogICAgbXkgJGNvbnRlbnRfdHlwZSA9ICRzZWxmLT5yZXF1ZXN0LT5jb250ZW50X3R5cGUgfHwgJyc7CgojIGluIHNvbWUgZW52aXJvbm1lbnRzIChQZXJsRXg/KSBjb250ZW50X3R5cGUgY291bGQgYmUgZW1wdHksIHNvIGFsbG93IGl0IGFsc28KIyBhbnl3YXkgaXQnbGwgYmxvdyB1cCBpbnNpZGUgOjpTZXJ2ZXI6OmhhbmRsZSBpZiBzb21ldGhpbmcgd3Jvbmcgd2l0aCBtZXNzYWdlCiMgVEJEOiBidXQgd2hhdCB0byBkbyB3aXRoIE1JTUUgZW5jb2RlZCBtZXNzYWdlcyBpbiBUSE9TRSBlbnZpcm9ubWVudHM/CiAgICByZXR1cm4gJHNlbGYtPm1ha2VfZmF1bHQoICRTT0FQOjpDb25zdGFudHM6OkZBVUxUX0NMSUVOVCwKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSBtdXN0IGJlICd0ZXh0L3htbCwnICdtdWx0aXBhcnQvKiwnICIKICAgICAgICAgIC4gIidhcHBsaWNhdGlvbi9zb2FwK3htbCwnICdvciAnYXBwbGljYXRpb24vZGltZScgaW5zdGVhZCBvZiAnJGNvbnRlbnRfdHlwZSciCiAgICAgICkKICAgICAgaWYgISRTT0FQOjpDb25zdGFudHM6OkRPX05PVF9DSEVDS19DT05URU5UX1RZUEUKICAgICAgICAgICYmICRjb250ZW50X3R5cGUKICAgICAgICAgICYmICRjb250ZW50X3R5cGUgbmUgJ2FwcGxpY2F0aW9uL3NvYXAreG1sJwogICAgICAgICAgJiYgJGNvbnRlbnRfdHlwZSBuZSAndGV4dC94bWwnCiAgICAgICAgICAmJiAkY29udGVudF90eXBlIG5lICdhcHBsaWNhdGlvbi9kaW1lJwogICAgICAgICAgJiYgJGNvbnRlbnRfdHlwZSAhfiBtIV5tdWx0aXBhcnQvITsKCiAgICAjIFRPRE8gLSBIYW5kbGUgdGhlIEV4cGVjdDogMTAwLUNvbnRpbnVlIEhUVFAvMS4xIEhlYWRlcgogICAgaWYgKCBkZWZpbmVkKCAkc2VsZi0+cmVxdWVzdC0+aGVhZGVyKCJFeHBlY3QiKSApCiAgICAgICAgJiYgKCAkc2VsZi0+cmVxdWVzdC0+aGVhZGVyKCJFeHBlY3QiKSBlcSAiMTAwLUNvbnRpbnVlIiApICkgewoKICAgIH0KCiAgICAjIFRPRE8gLSB0aGlzIHNob3VsZCBxdWVyeSBTT0FQOjpQYWNrYWdlciB0byBzZWUgd2hhdCB0eXBlcyBpdCBzdXBwb3J0cywKICAgICMgICAgICBJIGRvbid0IGxpa2UgaG93IHRoaXMgaXMgaGFyZGNvZGVkIGhlcmUuCiAgICBteSAkY29udGVudCA9CiAgICAgICRjb21wcmVzc2VkCiAgICAgID8gQ29tcHJlc3M6OlpsaWI6OnVuY29tcHJlc3MoICRzZWxmLT5yZXF1ZXN0LT5jb250ZW50ICkKICAgICAgOiAkc2VsZi0+cmVxdWVzdC0+Y29udGVudDsKCiAgICBteSAkcmVzcG9uc2UgPSAkc2VsZi0+U1VQRVI6OmhhbmRsZSgKICAgICAgICAkc2VsZi0+cmVxdWVzdC0+Y29udGVudF90eXBlID1+IG0hXm11bHRpcGFydC8hCiAgICAgICAgPyBqb2luKCAiXG4iLCAkc2VsZi0+cmVxdWVzdC0+aGVhZGVyc19hc19zdHJpbmcsICRjb250ZW50ICkKICAgICAgICA6ICRjb250ZW50CiAgICApIG9yIHJldHVybjsKCiAgICBTT0FQOjpUcmFjZTo6ZGVidWcoJHJlc3BvbnNlKTsKCiAgICAkc2VsZi0+bWFrZV9yZXNwb25zZSggJFNPQVA6OkNvbnN0YW50czo6SFRUUF9PTl9TVUNDRVNTX0NPREUsICRyZXNwb25zZSApOwp9CgpzdWIgbWFrZV9mYXVsdCB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgJHNlbGYtPm1ha2VfcmVzcG9uc2UoCiAgICAgICAgJFNPQVA6OkNvbnN0YW50czo6SFRUUF9PTl9GQVVMVF9DT0RFID0+ICRzZWxmLT5TVVBFUjo6bWFrZV9mYXVsdChAXykKICAgICk7CiAgICByZXR1cm47Cn0KCnN1YiBtYWtlX3Jlc3BvbnNlIHsKICAgIG15ICggJHNlbGYsICRjb2RlLCAkcmVzcG9uc2UgKSA9IEBfOwoKICAgIG15ICRlbmNvZGluZyA9ICQxCiAgICAgIGlmICRyZXNwb25zZSA9fiAvXjxcP3htbCg/OiB2ZXJzaW9uPSIxLjAifCBlbmNvZGluZz0iKFteXCJdKykiKStcPz4vOwoKICAgICRyZXNwb25zZSA9fiBzIShcPz4pISQxPD94bWwtc3R5bGVzaGVldCB0eXBlPSJ0ZXh0L2NzcyI/PiEKICAgICAgaWYgJHNlbGYtPnJlcXVlc3QtPmNvbnRlbnRfdHlwZSBlcSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSc7CgogICAgJHNlbGYtPm9wdGlvbnMtPntpc19jb21wcmVzc30gfHw9CiAgICAgIGV4aXN0cyAkc2VsZi0+b3B0aW9ucy0+e2NvbXByZXNzX3RocmVzaG9sZH0KICAgICAgJiYgZXZhbCB7IHJlcXVpcmUgQ29tcHJlc3M6OlpsaWIgfTsKCiAgICBteSAkY29tcHJlc3NlZCA9ICRzZWxmLT5vcHRpb25zLT57aXNfY29tcHJlc3N9CiAgICAgICYmIGdyZXAoIC9cYigkQ09NUFJFU1N8XCopXGIvLAogICAgICAgICRzZWxmLT5yZXF1ZXN0LT5oZWFkZXIoJ0FjY2VwdC1FbmNvZGluZycpICkKICAgICAgJiYgKCAkc2VsZi0+b3B0aW9ucy0+e2NvbXByZXNzX3RocmVzaG9sZH0gfHwgMCApIDwKICAgICAgU09BUDo6VXRpbHM6OmJ5dGVsZW5ndGggJHJlc3BvbnNlOwoKICAgICRyZXNwb25zZSA9IENvbXByZXNzOjpabGliOjpjb21wcmVzcygkcmVzcG9uc2UpIGlmICRjb21wcmVzc2VkOwoKIyB0aGlzIG5leHQgbGluZSBkb2VzIG5vdCBsb29rIGxpa2UgYSBnb29kIHRlc3QgdG8gc2VlIGlmIHNvbWV0aGluZyBpcyBtdWx0aXBhcnQKIyBwZXJoYXBzIGEgL2NvbnRlbnQtdHlwZTouKm11bHRpcGFydFwvL2dpIGlzIGEgYmV0dGVyIHJlZ2V4PwogICAgbXkgKCRpc19tdWx0aXBhcnQpID0KICAgICAgKCAkcmVzcG9uc2UgPX4gL2NvbnRlbnQtdHlwZTouKiBib3VuZGFyeT0iKFteXCJdKikiL2ltICk7CgogICAgJHNlbGYtPnJlc3BvbnNlKAogICAgICAgIEhUVFA6OlJlc3BvbnNlLT5uZXcoCiAgICAgICAgICAgICRjb2RlID0+IHVuZGVmLAogICAgICAgICAgICBIVFRQOjpIZWFkZXJzLT5uZXcoCiAgICAgICAgICAgICAgICAnU09BUFNlcnZlcicgPT4gJHNlbGYtPnByb2R1Y3RfdG9rZW5zLAogICAgICAgICAgICAgICAgJGNvbXByZXNzZWQgPyAoICdDb250ZW50LUVuY29kaW5nJyA9PiAkQ09NUFJFU1MgKSA6ICgpLAogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZScgPT4gam9pbiggJzsgJywKICAgICAgICAgICAgICAgICAgICAndGV4dC94bWwnLAogICAgICAgICAgICAgICAgICAgICEkU09BUDo6Q29uc3RhbnRzOjpET19OT1RfVVNFX0NIQVJTRVQKICAgICAgICAgICAgICAgICAgICAgICYmICRlbmNvZGluZyA/ICdjaGFyc2V0PScgLiBsYygkZW5jb2RpbmcpIDogKCkgKSwKICAgICAgICAgICAgICAgICdDb250ZW50LUxlbmd0aCcgPT4gU09BUDo6VXRpbHM6OmJ5dGVsZW5ndGggJHJlc3BvbnNlCiAgICAgICAgICAgICksCiAgICAgICAgICAgICggJF0gPiA1LjAwNyApCiAgICAgICAgICAgID8gZG8geyByZXF1aXJlIEVuY29kZTsgRW5jb2RlOjplbmNvZGUoICRlbmNvZGluZywgJHJlc3BvbnNlICkgfQogICAgICAgICAgICA6ICRyZXNwb25zZSwKICAgICAgICApICk7CgogICAgJHNlbGYtPnJlc3BvbnNlLT5oZWFkZXJzLT5oZWFkZXIoICdDb250ZW50LVR5cGUnID0+CidNdWx0aXBhcnQvUmVsYXRlZDsgdHlwZT0idGV4dC94bWwiOyBzdGFydD0iPG1haW5fZW52ZWxvcGU+IjsgYm91bmRhcnk9IicKICAgICAgICAgIC4gJGlzX211bHRpcGFydAogICAgICAgICAgLiAnIicgKQogICAgICBpZiAkaXNfbXVsdGlwYXJ0Owp9CgojIC0+VkVSU0lPTiBsZWFrcyBhIHNjYWxhciBldmVyeSBjYWxsIC0gbm8gaWRlYSB3aHkuCnN1YiBwcm9kdWN0X3Rva2VucyB7CiAgICBqb2luICcvJywgJ1NPQVA6OkxpdGUnLCAnUGVybCcsICRTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OlZFUlNJT047Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKcGFja2FnZSBTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkNHSTsKCnVzZSB2YXJzIHF3KEBJU0EpOwpASVNBID0gcXcoU09BUDo6VHJhbnNwb3J0OjpIVFRQOjpTZXJ2ZXIpOwoKc3ViIERFU1RST1kgeyBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKSB9CgpzdWIgbmV3IHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICByZXR1cm4gJHNlbGYgaWYgcmVmICRzZWxmOwoKICAgIG15ICRjbGFzcyA9IHJlZigkc2VsZikgfHwgJHNlbGY7CiAgICAkc2VsZiA9ICRjbGFzcy0+U1VQRVI6Om5ldyhAXyk7CiAgICBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKTsKCiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBtYWtlX3Jlc3BvbnNlIHsKICAgIG15ICRzZWxmID0gc2hpZnQ7CiAgICAkc2VsZi0+U1VQRVI6Om1ha2VfcmVzcG9uc2UoQF8pOwp9CgpzdWIgaGFuZGxlIHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKCiAgICBteSAkbGVuZ3RoID0gJEVOVnsnQ09OVEVOVF9MRU5HVEgnfSB8fCAwOwoKICAgICMgaWYgdGhlIEhUVFBfVFJBTlNGRVJfRU5DT0RJTkcgZW52IGlzIGRlZmluZWQsIHNldCAkY2h1bmtlZCBpZiBpdCdzIGNodW5rZWQqCiAgICAjIGVsc2UgdG8gZmFsc2UKICAgIG15ICRjaHVua2VkID0gKGRlZmluZWQgJEVOVnsnSFRUUF9UUkFOU0ZFUl9FTkNPRElORyd9CiAgICAgICAgJiYgJEVOVnsnSFRUUF9UUkFOU0ZFUl9FTkNPRElORyd9ID1+IC9eY2h1bmtlZC4qJC8pIHx8IDA7CgoKICAgIG15ICRjb250ZW50ID0gcXt9OwoKICAgIGlmICgkY2h1bmtlZCkgewogICAgICAgIG15ICRidWZmZXI7CiAgICAgICAgYmlubW9kZShTVERJTik7CiAgICAgICAgd2hpbGUgKCByZWFkKCBTVERJTiwgbXkgJGJ1ZmZlciwgMTAyNCApICkgewogICAgICAgICAgICAkY29udGVudCAuPSAkYnVmZmVyOwogICAgICAgIH0KICAgICAgICAkbGVuZ3RoID0gbGVuZ3RoKCRjb250ZW50KTsKICAgIH0KCiAgICBpZiAoICEkbGVuZ3RoICkgewogICAgICAgICRzZWxmLT5yZXNwb25zZSggSFRUUDo6UmVzcG9uc2UtPm5ldyg0MTEpICkgICAgIyBMRU5HVEggUkVRVUlSRUQKICAgIH0KICAgIGVsc2lmICggZGVmaW5lZCAkU09BUDo6Q29uc3RhbnRzOjpNQVhfQ09OVEVOVF9TSVpFCiAgICAgICAgJiYgJGxlbmd0aCA+ICRTT0FQOjpDb25zdGFudHM6Ok1BWF9DT05URU5UX1NJWkUgKSB7CiAgICAgICAgJHNlbGYtPnJlc3BvbnNlKCBIVFRQOjpSZXNwb25zZS0+bmV3KDQxMykgKSAjIFJFUVVFU1QgRU5USVRZIFRPTyBMQVJHRQogICAgfQogICAgZWxzZSB7CiAgICAgICAgaWYgKCBleGlzdHMgJEVOVntFWFBFQ1R9ICYmICRFTlZ7RVhQRUNUfSA9fiAvXGIxMDAtQ29udGludWVcYi9pICkgewogICAgICAgICAgICBwcmludCAiSFRUUC8xLjEgMTAwIENvbnRpbnVlXHJcblxyXG4iOwogICAgICAgIH0KCiAgICAgICAgI215ICRjb250ZW50ID0gcXt9OwogICAgICAgIGlmICggISRjaHVua2VkICkgewogICAgICAgICAgICBteSAkYnVmZmVyOwogICAgICAgICAgICBiaW5tb2RlKFNURElOKTsKICAgICAgICAgICAgaWYgKCBkZWZpbmVkICRFTlZ7J01PRF9QRVJMJ30gKSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoIHJlYWQoIFNURElOLCAkYnVmZmVyLCAkbGVuZ3RoICkgKSB7CiAgICAgICAgICAgICAgICAgICAgJGNvbnRlbnQgLj0gJGJ1ZmZlcjsKICAgICAgICAgICAgICAgICAgICBsYXN0IGlmICggbGVuZ3RoKCRjb250ZW50KSA+PSAkbGVuZ3RoICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoIHN5c3JlYWQoIFNURElOLCAkYnVmZmVyLCAkbGVuZ3RoICkgKSB7CiAgICAgICAgICAgICAgICAkY29udGVudCAuPSAkYnVmZmVyOwogICAgICAgICAgICAgICAgbGFzdCBpZiAoIGxlbmd0aCgkY29udGVudCkgPj0gJGxlbmd0aCApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkc2VsZi0+cmVxdWVzdCgKICAgICAgICAgICAgSFRUUDo6UmVxdWVzdC0+bmV3KAogICAgICAgICAgICAgICAgJEVOVnsnUkVRVUVTVF9NRVRIT0QnfSB8fCAnJyA9PiAkRU5WeydTQ1JJUFRfTkFNRSd9LAogICAgICAgICAgICAgICAgSFRUUDo6SGVhZGVycy0+bmV3KAogICAgICAgICAgICAgICAgICAgIG1hcCB7ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL15IVFRQXyguKykvaQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoICQxID1+IG0vU09BUEFDVElPTi8gKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoJ1NPQVBBY3Rpb24nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoJDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICRfCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSA9PiAkRU5WeyRffQogICAgICAgICAgICAgICAgICAgICAgfSBrZXlzICVFTlYKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAkY29udGVudCwKICAgICAgICAgICAgKSApOwogICAgICAgICRzZWxmLT5TVVBFUjo6aGFuZGxlOwogICAgfQoKICAgICMgaW1pdGF0ZSBucGgtIGNnaSBmb3IgSUlTIChwb2ludGVkIGJ5IE11cnJheSBOZXNiaXR0KQogICAgbXkgJHN0YXR1cyA9CiAgICAgIGRlZmluZWQoICRFTlZ7J1NFUlZFUl9TT0ZUV0FSRSd9ICkKICAgICAgJiYgJEVOVnsnU0VSVkVSX1NPRlRXQVJFJ30gPX4gL0lJUy8KICAgICAgPyAkRU5We1NFUlZFUl9QUk9UT0NPTH0gfHwgJ0hUVFAvMS4wJwogICAgICA6ICdTdGF0dXM6JzsKICAgIG15ICRjb2RlID0gJHNlbGYtPnJlc3BvbnNlLT5jb2RlOwoKICAgIGJpbm1vZGUoU1RET1VUKTsKCiAgICBwcmludCBTVERPVVQgIiRzdGF0dXMgJGNvZGUgIiwgSFRUUDo6U3RhdHVzOjpzdGF0dXNfbWVzc2FnZSgkY29kZSksCiAgICAgICJcMDE1XDAxMiIsICRzZWxmLT5yZXNwb25zZS0+aGVhZGVyc19hc19zdHJpbmcoIlwwMTVcMDEyIiksICJcMDE1XDAxMiIsCiAgICAgICRzZWxmLT5yZXNwb25zZS0+Y29udGVudDsKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpwYWNrYWdlIFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6RGFlbW9uOwoKdXNlIENhcnAgKCk7CnVzZSB2YXJzIHF3KCRBVVRPTE9BRCBASVNBKTsKQElTQSA9IHF3KFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6U2VydmVyKTsKCnN1YiBERVNUUk9ZIHsgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJykgfQoKI3N1YiBuZXcgeyByZXF1aXJlIEhUVFA6OkRhZW1vbjsKc3ViIG5ldyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgcmV0dXJuICRzZWxmIGlmICggcmVmICRzZWxmICk7CgogICAgbXkgJGNsYXNzID0gJHNlbGY7CgogICAgbXkgKCBAcGFyYW1zLCBAbWV0aG9kcyApOwogICAgd2hpbGUgKEBfKSB7CiAgICAgICAgJGNsYXNzLT5jYW4oICRfWzBdICkKICAgICAgICAgID8gcHVzaCggQG1ldGhvZHMsIHNoaWZ0KCkgPT4gc2hpZnQgKQogICAgICAgICAgOiBwdXNoKCBAcGFyYW1zLCAgc2hpZnQgKTsKICAgIH0KICAgICRzZWxmID0gJGNsYXNzLT5TVVBFUjo6bmV3OwoKICAgICMgQWRkZWQgaW4gMC42NSAtIFRoYW5rcyB0byBOaWxzIFNvd2VuCiAgICAjIHVzZSBTU0wgaWYgdGhlcmUgaXMgYW55IHBhcmFtZXRlciB3aXRoIFNTTF8qIGluIHRoZSBuYW1lCiAgICAkc2VsZi0+U1NMKDEpIGlmICEkc2VsZi0+U1NMICYmIGdyZXAgL15TU0xfLywgQHBhcmFtczsKICAgIG15ICRodHRwX2RhZW1vbiA9ICRzZWxmLT5odHRwX2RhZW1vbl9jbGFzczsKICAgIGV2YWwgInJlcXVpcmUgJGh0dHBfZGFlbW9uIgogICAgICBvciBDYXJwOjpjcm9hayAkQAogICAgICB1bmxlc3MgJGh0dHBfZGFlbW9uLT5jYW4oJ25ldycpOwoKICAgICRzZWxmLT57X2RhZW1vbn0gPSAkaHR0cF9kYWVtb24tPm5ldyhAcGFyYW1zKQogICAgICBvciBDYXJwOjpjcm9hayAiQ2FuJ3QgY3JlYXRlIGRhZW1vbjogJCEiOwoKICAgICMgRW5kIFNTTCBwYXRjaAoKICAgICRzZWxmLT5teXVyaSggVVJJLT5uZXcoICRzZWxmLT51cmwgKS0+Y2Fub25pY2FsLT5hc19zdHJpbmcgKTsKCiAgICB3aGlsZSAoQG1ldGhvZHMpIHsKICAgICAgICBteSAoICRtZXRob2QsICRwYXJhbXMgKSA9IHNwbGljZSggQG1ldGhvZHMsIDAsIDIgKTsKICAgICAgICAkc2VsZi0+JG1ldGhvZCgKICAgICAgICAgICAgcmVmICRwYXJhbXMgZXEgJ0FSUkFZJwogICAgICAgICAgICA/IEAkcGFyYW1zCiAgICAgICAgICAgIDogJHBhcmFtcwogICAgICAgICk7CiAgICB9CiAgICBTT0FQOjpUcmFjZTo6b2JqZWN0cygnKCknKTsKCiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBTU0wgewogICAgbXkgJHNlbGYgPSBzaGlmdC0+bmV3OwogICAgaWYgKEBfKSB7CiAgICAgICAgJHNlbGYtPntfU1NMfSA9IHNoaWZ0OwogICAgICAgIHJldHVybiAkc2VsZjsKICAgIH0KICAgIHJldHVybiAkc2VsZi0+e19TU0x9Owp9CgpzdWIgaHR0cF9kYWVtb25fY2xhc3MgeyBzaGlmdC0+U1NMID8gJ0hUVFA6OkRhZW1vbjo6U1NMJyA6ICdIVFRQOjpEYWVtb24nIH0KCnN1YiBBVVRPTE9BRCB7CiAgICBteSAkbWV0aG9kID0gc3Vic3RyKCAkQVVUT0xPQUQsIHJpbmRleCggJEFVVE9MT0FELCAnOjonICkgKyAyICk7CiAgICByZXR1cm4gaWYgJG1ldGhvZCBlcSAnREVTVFJPWSc7CgogICAgbm8gc3RyaWN0ICdyZWZzJzsKICAgICokQVVUT0xPQUQgPSBzdWIgeyBzaGlmdC0+e19kYWVtb259LT4kbWV0aG9kKEBfKSB9OwogICAgZ290byAmJEFVVE9MT0FEOwp9CgpzdWIgaGFuZGxlIHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgIHdoaWxlICggbXkgJGMgPSAkc2VsZi0+YWNjZXB0ICkgewogICAgICAgIHdoaWxlICggbXkgJHIgPSAkYy0+Z2V0X3JlcXVlc3QgKSB7CiAgICAgICAgICAgICRzZWxmLT5yZXF1ZXN0KCRyKTsKICAgICAgICAgICAgJHNlbGYtPlNVUEVSOjpoYW5kbGU7CiAgICAgICAgICAgICRjLT5zZW5kX3Jlc3BvbnNlKCAkc2VsZi0+cmVzcG9uc2UgKTsKICAgICAgICB9CgojIHJlcGxhY2VkIC0+Y2xvc2UsIHRoYW5rcyB0byBTZWFuIE1laXNuZXIgPFNlYW4uTWVpc25lckBWZXJpem9uV2lyZWxlc3MuY29tPgojIHNodXRkb3duKCkgZG9lc24ndCB3b3JrIG9uIEFJWC4gY2xvc2UoKSBpcyB1c2VkIGluIHRoaXMgY2FzZS4gVGhhbmtzIHRvIEpvcyBDbGlqbWFucyA8am9zLmNsaWptYW5zQHJlY3lmaW4uYmU+CiAgICAgICAgJGMtPmNhbignc2h1dGRvd24nKQogICAgICAgICAgPyAkYy0+c2h1dGRvd24oMikKICAgICAgICAgIDogJGMtPmNsb3NlKCk7CiAgICAgICAgJGMtPmNsb3NlOwogICAgfQp9CgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6VHJhbnNwb3J0OjpIVFRQOjpBcGFjaGU7Cgp1c2UgdmFycyBxdyhASVNBKTsKQElTQSA9IHF3KFNPQVA6OlRyYW5zcG9ydDo6SFRUUDo6U2VydmVyKTsKCnN1YiBERVNUUk9ZIHsgU09BUDo6VHJhY2U6Om9iamVjdHMoJygpJykgfQoKc3ViIG5ldyB7CiAgICBteSAkc2VsZiA9IHNoaWZ0OwogICAgdW5sZXNzICggcmVmICRzZWxmICkgewogICAgICAgIG15ICRjbGFzcyA9IHJlZigkc2VsZikgfHwgJHNlbGY7CiAgICAgICAgJHNlbGYgPSAkY2xhc3MtPlNVUEVSOjpuZXcoQF8pOwogICAgICAgIFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpOwogICAgfQoKICAgICMgQWRkZWQgdGhpcyBjb2RlIHRoYW5rcyB0byBKVCBKdXN0bWFuCiAgICAjIFRoaXMgY29kZSBpbXByb3ZlcyBhbmQgcHJvdmlkZXMgbW9yZSByb2J1c3Qgc3VwcG9ydCBmb3IKICAgICMgbXVsdGlwbGUgdmVyc2lvbnMgb2YgQXBhY2hlIGFuZCBtb2RfcGVybAoKICAgICMgbW9kX3BlcmwgMi4wCiAgICBpZiAoIGRlZmluZWQgJEVOVntNT0RfUEVSTF9BUElfVkVSU0lPTn0KICAgICAgICAmJiAkRU5We01PRF9QRVJMX0FQSV9WRVJTSU9OfSA+PSAyICkgewogICAgICAgIHJlcXVpcmUgQXBhY2hlMjo6UmVxdWVzdFJlYzsKICAgICAgICByZXF1aXJlIEFwYWNoZTI6OlJlcXVlc3RJTzsKICAgICAgICByZXF1aXJlIEFwYWNoZTI6OkNvbnN0OwogICAgICAgIHJlcXVpcmUgQXBhY2hlMjo6UmVxdWVzdFV0aWw7CiAgICAgICAgcmVxdWlyZSBBUFI6OlRhYmxlOwogICAgICAgIEFwYWNoZTI6OkNvbnN0LT5pbXBvcnQoIC1jb21waWxlID0+ICdPSycgKTsKICAgICAgICBBcGFjaGUyOjpDb25zdC0+aW1wb3J0KCAtY29tcGlsZSA9PiAnSFRUUF9CQURfUkVRVUVTVCcgKTsKICAgICAgICAkc2VsZi0+eydNT0RfUEVSTF9WRVJTSU9OJ30gPSAyOwogICAgICAgICRzZWxmLT57T0t9ID0gJkFwYWNoZTI6OkNvbnN0OjpPSzsKICAgIH0KICAgIGVsc2UgeyAgICAjIG1vZF9wZXJsIDEueHgKICAgICAgICBkaWUgIkNvdWxkIG5vdCBmaW5kIG9yIGxvYWQgbW9kX3BlcmwiCiAgICAgICAgICB1bmxlc3MgKCBldmFsICJyZXF1aXJlIG1vZF9wZXJsIiApOwogICAgICAgIGRpZSAiQ291bGQgbm90IGRldGVjdCB5b3VyIHZlcnNpb24gb2YgbW9kX3BlcmwiCiAgICAgICAgICBpZiAoICFkZWZpbmVkKCRtb2RfcGVybDo6VkVSU0lPTikgKTsKICAgICAgICBpZiAoICRtb2RfcGVybDo6VkVSU0lPTiA8IDEuOTkgKSB7CiAgICAgICAgICAgIHJlcXVpcmUgQXBhY2hlOwogICAgICAgICAgICByZXF1aXJlIEFwYWNoZTo6Q29uc3RhbnRzOwogICAgICAgICAgICBBcGFjaGU6OkNvbnN0YW50cy0+aW1wb3J0KCdPSycpOwogICAgICAgICAgICBBcGFjaGU6OkNvbnN0YW50cy0+aW1wb3J0KCdIVFRQX0JBRF9SRVFVRVNUJyk7CiAgICAgICAgICAgICRzZWxmLT57J01PRF9QRVJMX1ZFUlNJT04nfSA9IDE7CiAgICAgICAgICAgICRzZWxmLT57T0t9ID0gJkFwYWNoZTo6Q29uc3RhbnRzOjpPSzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJlcXVpcmUgQXBhY2hlOjpSZXF1ZXN0UmVjOwogICAgICAgICAgICByZXF1aXJlIEFwYWNoZTo6UmVxdWVzdElPOwogICAgICAgICAgICByZXF1aXJlIEFwYWNoZTo6Q29uc3Q7CiAgICAgICAgICAgIEFwYWNoZTo6Q29uc3QtPmltcG9ydCggLWNvbXBpbGUgPT4gJ09LJyApOwogICAgICAgICAgICBBcGFjaGU6OkNvbnN0LT5pbXBvcnQoIC1jb21waWxlID0+ICdIVFRQX0JBRF9SRVFVRVNUJyApOwogICAgICAgICAgICAkc2VsZi0+eydNT0RfUEVSTF9WRVJTSU9OJ30gPSAxLjk5OwogICAgICAgICAgICAkc2VsZi0+e09LfSA9ICZBcGFjaGU6Ok9LOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJHNlbGY7Cn0KCnN1YiBoYW5kbGVyIHsKICAgIG15ICRzZWxmID0gc2hpZnQtPm5ldzsKICAgIG15ICRyICAgID0gc2hpZnQ7CgogICAgIyBCZWdpbiBwYXRjaCBmcm9tIEpUIEp1c3RtYW4KICAgIGlmICggISRyICkgewogICAgICAgIGlmICggJHNlbGYtPnsnTU9EX1BFUkxfVkVSU0lPTid9IDwgMiApIHsKICAgICAgICAgICAgJHIgPSBBcGFjaGUtPnJlcXVlc3QoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICRyID0gQXBhY2hlMjo6UmVxdWVzdFV0aWwtPnJlcXVlc3QoKTsKICAgICAgICB9CiAgICB9CgogICAgbXkgJGNvbnRfbGVuOwogICAgaWYgKCAkc2VsZi0+eydNT0RfUEVSTF9WRVJTSU9OJ30gPCAyICkgewogICAgICAgICRjb250X2xlbiA9ICRyLT5oZWFkZXJfaW4oJ0NvbnRlbnQtbGVuZ3RoJyk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICAkY29udF9sZW4gPSAkci0+aGVhZGVyc19pbi0+Z2V0KCdDb250ZW50LWxlbmd0aCcpOwogICAgfQoKICAgICMgRW5kIHBhdGNoIGZyb20gSlQgSnVzdG1hbgoKICAgIG15ICRjb250ZW50ID0gIiI7CiAgICBpZiAoICRjb250X2xlbiA+IDAgKSB7CiAgICAgICAgbXkgJGJ1ZjsKCiAgICAgICAgIyBhdHRlbXB0IHRvIHNsdXJwIGluIHRoZSBjb250ZW50IGF0IG9uY2UuLi4KICAgICAgICAkY29udGVudCAuPSAkYnVmIHdoaWxlICggJHItPnJlYWQoICRidWYsICRjb250X2xlbiApID4gMCApOwogICAgfQogICAgZWxzZSB7CgogICAgICAgICMgdGhyb3cgYXBwcm9wcmlhdGUgZXJyb3IgZm9yIG1vZF9wZXJsIDIKICAgICAgICByZXR1cm4gQXBhY2hlMjo6Q29uc3Q6OkhUVFBfQkFEX1JFUVVFU1QoKQogICAgICAgICAgaWYgKCAkc2VsZi0+eydNT0RfUEVSTF9WRVJTSU9OJ30gPj0gMiApOwogICAgICAgIHJldHVybiBBcGFjaGU6OkNvbnN0YW50czo6QkFEX1JFUVVFU1QoKTsKICAgIH0KCiAgICAkc2VsZi0+cmVxdWVzdCgKICAgICAgICBIVFRQOjpSZXF1ZXN0LT5uZXcoCiAgICAgICAgICAgICRyLT5tZXRob2QoKSA9PiAkci0+dXJpLAogICAgICAgICAgICBIVFRQOjpIZWFkZXJzLT5uZXcoICRyLT5oZWFkZXJzX2luICksCiAgICAgICAgICAgICRjb250ZW50CiAgICAgICAgKSApOwogICAgJHNlbGYtPlNVUEVSOjpoYW5kbGU7CgogICAgIyB3ZSB3aWxsIHNwZWNpZnkgc3RhdHVzIG1hbnVhbGx5IGZvciBBcGFjaGUsIGJlY2F1c2UKICAgICMgaWYgd2UgZG8gaXQgYXMgaXQgaGFzIHRvIGJlIGRvbmUsIHJldHVybmluZyBTRVJWRVJfRVJST1IsCiAgICAjIEFwYWNoZSB3aWxsIG1vZGlmeSBvdXIgY29udGVudF90eXBlIHRvICd0ZXh0L2h0bWw7IC4uLi4nCiAgICAjIHdoaWNoIGlzIG5vdCB3aGF0IHdlIHdhbnQuCiAgICAjIHdpbGwgZW11bGF0ZSBub3JtYWwgcmVzcG9uc2UsIGJ1dCB3aXRoIGN1c3RvbSBzdGF0dXMgY29kZQogICAgIyB3aGljaCBjb3VsZCBhbHNvIGJlIDUwMC4KICAgIGlmICgkc2VsZi0+eydNT0RfUEVSTF9WRVJTSU9OJ30gPCAyICkgewogICAgICAgICRyLT5zdGF0dXMoICRzZWxmLT5yZXNwb25zZS0+Y29kZSApOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgJHItPnN0YXR1c19saW5lKCRzZWxmLT5yZXNwb25zZS0+Y29kZSk7CiAgICB9CgogICAgIyBCZWdpbiBKVCBKdXN0bWFuIHBhdGNoCiAgICBpZiAoICRzZWxmLT57J01PRF9QRVJMX1ZFUlNJT04nfSA+IDEgKSB7CiAgICAgICAgJHNlbGYtPnJlc3BvbnNlLT5oZWFkZXJzLT5zY2FuKHN1YiB7ICRyLT5oZWFkZXJzX291dC0+YWRkKEBfKSB9KTsKICAgICAgICAkci0+Y29udGVudF90eXBlKCBqb2luICc7ICcsICRzZWxmLT5yZXNwb25zZS0+Y29udGVudF90eXBlICk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICAkc2VsZi0+cmVzcG9uc2UtPmhlYWRlcnMtPnNjYW4oIHN1YiB7ICRyLT5oZWFkZXJfb3V0KEBfKSB9ICk7CiAgICAgICAgJHItPnNlbmRfaHR0cF9oZWFkZXIoIGpvaW4gJzsgJywgJHNlbGYtPnJlc3BvbnNlLT5jb250ZW50X3R5cGUgKTsKICAgIH0KCiAgICAkci0+cHJpbnQoICRzZWxmLT5yZXNwb25zZS0+Y29udGVudCApOwogICAgcmV0dXJuICRzZWxmLT57T0t9OwoKICAgICMgRW5kIEpUIEp1c3RtYW4gcGF0Y2gKfQoKc3ViIGNvbmZpZ3VyZSB7CiAgICBteSAkc2VsZiAgID0gc2hpZnQtPm5ldzsKICAgIG15ICRjb25maWcgPSBzaGlmdC0+ZGlyX2NvbmZpZzsKICAgIGZvciAoJSRjb25maWcpIHsKICAgICAgICAkY29uZmlnLT57JF99ID1+IC89Pi8KICAgICAgICAgID8gJHNlbGYtPiRfKCB7c3BsaXQgL1xzKig/Oj0+fCwpXHMqLywgJGNvbmZpZy0+eyRffX0gKQogICAgICAgICAgOiByZWYgJHNlbGYtPiRfKCkgPyAoKSAgICAjIGhtLCBub3RoaW5nIGNhbiBiZSBkb25lIGhlcmUKICAgICAgICAgIDogJHNlbGYtPiRfKCBzcGxpdCAvXHMrfFxzKixccyovLCAkY29uZmlnLT57JF99ICkKICAgICAgICAgIGlmICRzZWxmLT5jYW4oJF8pOwogICAgfQogICAgcmV0dXJuICRzZWxmOwp9Cgp7CgogICAgIyBqdXN0IGNyZWF0ZSBhbGlhcwogICAgc3ViIGhhbmRsZTsKICAgICpoYW5kbGUgPSBcJmhhbmRsZXIKfQoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMKIyBDb3B5cmlnaHQgKEMpIDIwMDEgU2luZ2xlIFNvdXJjZSBveSAobWFya28uYXNwbHVuZEBrcm9ub2RvYy5maSkKIyBhIEZhc3RDR0kgdHJhbnNwb3J0IGNsYXNzIGZvciBTT0FQOjpMaXRlLgojIFVwZGF0ZWQgZm9ybWF0dGluZyBhbmQgcmVtb3ZlZCBkZWFkIGNvZGUgaW4gbmV3KCkgaW4gMjAwOAojIGJ5IE1hcnRpbiBLdXR0ZXIKIwojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCnBhY2thZ2UgU09BUDo6VHJhbnNwb3J0OjpIVFRQOjpGQ0dJOwoKdXNlIHZhcnMgcXcoQElTQSk7CkBJU0EgPSBxdyhTT0FQOjpUcmFuc3BvcnQ6OkhUVFA6OkNHSSk7CgpzdWIgREVTVFJPWSB7IFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpIH0KCnN1YiBuZXcgewoKICAgIHJlcXVpcmUgRkNHSTsKICAgIEV4cG9ydGVyOjpyZXF1aXJlX3ZlcnNpb24oICdGQ0dJJyA9PiAwLjQ3ICkKICAgICAgOyAgICAjIHJlcXVpcmVzIHRocmVhZC1zYWZlIGludGVyZmFjZQoKICAgIG15ICRjbGFzcyA9IHNoaWZ0OwogICAgcmV0dXJuICRjbGFzcyBpZiByZWYgJGNsYXNzOwoKICAgIG15ICRzZWxmID0gJGNsYXNzLT5TVVBFUjo6bmV3KEBfKTsKICAgICRzZWxmLT57X2ZjZ2lycX0gPSBGQ0dJOjpSZXF1ZXN0KCBcKlNURElOLCBcKlNURE9VVCwgXCpTVERFUlIgKTsKICAgIFNPQVA6OlRyYWNlOjpvYmplY3RzKCcoKScpOwoKICAgIHJldHVybiAkc2VsZjsKfQoKc3ViIGhhbmRsZSB7CiAgICBteSAkc2VsZiA9IHNoaWZ0LT5uZXc7CgogICAgbXkgKCAkcjEsICRyMiApOwogICAgbXkgJGZjZ2lycSA9ICRzZWxmLT57X2ZjZ2lycX07CgogICAgd2hpbGUgKCAoICRyMSA9ICRmY2dpcnEtPkFjY2VwdCgpICkgPj0gMCApIHsKICAgICAgICAkcjIgPSAkc2VsZi0+U1VQRVI6OmhhbmRsZTsKICAgIH0KCiAgICByZXR1cm4gdW5kZWY7Cn0KCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKMTsK</File>
    </Filelist>
</otrs_package>